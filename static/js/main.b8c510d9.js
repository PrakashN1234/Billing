/*! For license information please see main.b8c510d9.js.LICENSE.txt */
(()=>{var e={350(e,t,n){const r=n(7969),o=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){const n=e.bit<<3|t;let i=n<<10;for(;r.getBCHDigit(i)-o>=0;)i^=1335<<r.getBCHDigit(i)-o;return 21522^(n<<10|i)}},422(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(9007)),i=s(n(5301)),a=n(4709);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var l=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],u=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],d=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(r.isValid=!1,-1!==e.search(/^[0-9]{6}$/))r.middleDigits=e,r.upcA=h(e,"0"),r.text=n.text||""+r.upcA[0]+e+r.upcA[r.upcA.length-1],r.isValid=!0;else{if(-1===e.search(/^[01][0-9]{7}$/))return c(r);if(r.middleDigits=e.substring(1,e.length-1),r.upcA=h(r.middleDigits,e[0]),r.upcA[r.upcA.length-1]!==e[e.length-1])return c(r);r.isValid=!0}return r.displayValue=n.displayValue,n.fontSize>10*n.width?r.fontSize=10*n.width:r.fontSize=n.fontSize,r.guardHeight=n.height+r.fontSize/2+n.textMargin,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=this.encodeMiddleDigits(),{data:e+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),e.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),e.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),e}},{key:"encodeMiddleDigits",value:function(){var e=this.upcA[0],t=this.upcA[this.upcA.length-1],n=u[parseInt(t)][parseInt(e)];return(0,o.default)(this.middleDigits,n)}}]),t}(i.default);function h(e,t){for(var n=parseInt(e[e.length-1]),r=l[n],o="",i=0,s=0;s<r.length;s++){var c=r[s];o+="X"===c?e[i++]:c}return""+(o=""+t+o)+(0,a.checksum)(o)}t.default=d},579(e,t,n){"use strict";e.exports=n(2799)},799(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in t)t.hasOwnProperty(n)&&"string"===typeof e[n=t[n]]&&(e[n]=parseInt(e[n],10));"string"===typeof e.displayValue&&(e.displayValue="false"!=e.displayValue);return e}},900(e,t,n){const r=n(7421);function o(e){this.mode=r.NUMERIC,this.data=e.toString()}o.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);const o=this.data.length-t;o>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*o+1))},e.exports=o},917(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(9918),i=a(n(9007));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var e=o.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,i.default)(this.data,e,"01"),text:this.text}}}]),t}(a(n(5301)).default);t.default=s},1029(e,t){"use strict";var n;function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=t.SET_A=0,i=t.SET_B=1,a=t.SET_C=2,s=(t.SHIFT=98,t.START_A=103),c=t.START_B=104,l=t.START_C=105;t.MODULO=103,t.STOP=106,t.FNC1=207,t.SET_BY_CODE=(r(n={},s,o),r(n,c,i),r(n,l,a),n),t.SWAP={101:o,100:i,99:a},t.A_START_CHAR=String.fromCharCode(208),t.B_START_CHAR=String.fromCharCode(209),t.C_START_CHAR=String.fromCharCode(210),t.A_CHARS="[\0-_\xc8-\xcf]",t.B_CHARS="[ -\x7f\xc8-\xcf]",t.C_CHARS="(\xcf*[0-9]{2}\xcf*)",t.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]},1157(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.object=t,this.encodings=n,this.options=r}return n(e,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),e}();t.default=r},1166(e,t){const n=new Uint8Array(512),r=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)n[t]=e,r[e]=t,e<<=1,256&e&&(e^=285);for(let t=255;t<512;t++)n[t]=n[t-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},t.exp=function(e){return n[e]},t.mul=function(e,t){return 0===e||0===t?0:n[r[e]+r[t]]}},1257(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenericBarcode=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5301);var a=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),t}(((r=i)&&r.__esModule?r:{default:r}).default);t.GenericBarcode=a},1312(e,t,n){const r=n(1166);t.mul=function(e,t){const n=new Uint8Array(e.length+t.length-1);for(let o=0;o<e.length;o++)for(let i=0;i<t.length;i++)n[o+i]^=r.mul(e[o],t[i]);return n},t.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){const e=n[0];for(let i=0;i<t.length;i++)n[i]^=r.mul(t[i],e);let o=0;for(;o<n.length&&0===n[o];)o++;n=n.slice(o)}return n},t.generateECPolynomial=function(e){let n=new Uint8Array([1]);for(let o=0;o<e;o++)n=t.mul(n,new Uint8Array([1,r.exp(o)]));return n}},1466(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t}return n(e,[{key:"handleCatch",value:function(e){if("InvalidInputException"!==e.name)throw e;if(this.api._options.valid===this.api._defaults.valid)throw e.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(e){try{var t=e.apply(void 0,arguments);return this.api._options.valid(!0),t}catch(n){return this.handleCatch(n),this.api}}}]),e}();t.default=r},1573(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3498),i=(r=o)&&r.__esModule?r:{default:r},a=n(8997);var s=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e+=(0,a.mod11)(e),e+=(0,a.mod10)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i.default);t.default=s},1616(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CODE128C=t.CODE128B=t.CODE128A=t.CODE128=void 0;var r=s(n(7754)),o=s(n(7587)),i=s(n(9801)),a=s(n(2901));function s(e){return e&&e.__esModule?e:{default:e}}t.CODE128=r.default,t.CODE128A=o.default,t.CODE128B=i.default,t.CODE128C=a.default},1704(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3498),i=(r=o)&&r.__esModule?r:{default:r},a=n(8997);var s=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,a.mod11)(e),n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i.default);t.default=s},1805(e,t,n){const r=n(6272),o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return o[4*(e-1)+0];case r.M:return o[4*(e-1)+1];case r.Q:return o[4*(e-1)+2];case r.H:return o[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return i[4*(e-1)+0];case r.M:return i[4*(e-1)+1];case r.Q:return i[4*(e-1)+2];case r.H:return i[4*(e-1)+3];default:return}}},2146(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(9938),a=n(5301);var s=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var e=this.data.split("").flatMap(function(e){return i.MULTI_SYMBOLS[e]||e}),n=e.map(function(e){return t.getEncoding(e)}).join(""),r=t.checksum(e,20),o=t.checksum(e.concat(r),15);return{text:this.text,data:t.getEncoding("\xff")+n+t.getEncoding(r)+t.getEncoding(o)+t.getEncoding("\xff")+"1"}}}],[{key:"getEncoding",value:function(e){return i.BINARIES[t.symbolValue(e)]}},{key:"getSymbol",value:function(e){return i.SYMBOLS[e]}},{key:"symbolValue",value:function(e){return i.SYMBOLS.indexOf(e)}},{key:"checksum",value:function(e,n){var r=e.slice().reverse().reduce(function(e,r,o){var i=o%n+1;return e+t.symbolValue(r)*i},0);return t.getSymbol(r%47)}}]),t}(((r=a)&&r.__esModule?r:{default:r}).default);t.default=s},2179(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},a=n(9918),s=n(9011),c=(r=s)&&r.__esModule?r:{default:r};var l=function(e){return(10-e.substr(0,12).split("").map(function(e){return+e}).reduce(function(e,t,n){return n%2?e+3*t:e+t},0)%10)%10},u=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{12}$/)&&(e+=l(e));var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.lastChar=n.lastChar,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===l(this.data)}},{key:"leftText",value:function(){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var e=this.data.substr(1,6),n=a.EAN13_STRUCTURE[this.data[0]];return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,e,n)}},{key:"rightText",value:function(){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var e=this.data.substr(7,6);return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,e,"RRRRRR")}},{key:"encodeGuarded",value:function(){var e=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(e.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(e.push({data:"00"}),e.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),e}}]),t}(c.default);t.default=u},2182(e,t,n){const r=n(8293);t.render=function(e,t,n){let o=n,i=t;"undefined"!==typeof o||t&&t.getContext||(o=t,t=void 0),t||(i=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),o=r.getOptions(o);const a=r.getImageWidth(e.modules.size,o),s=i.getContext("2d"),c=s.createImageData(a,a);return r.qrToImageData(c.data,e,o),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(s,i,a),s.putImageData(c,0,0),i},t.renderToDataURL=function(e,n,r){let o=r;"undefined"!==typeof o||n&&n.getContext||(o=n,n=void 0),o||(o={});const i=t.render(e,n,o),a=o.type||"image/png",s=o.rendererOpts||{};return i.toDataURL(a,s.quality)}},2352(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(9918),i=s(n(9007)),a=s(n(5301));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var e,t=o.EAN5_STRUCTURE[(e=this.data,e.split("").map(function(e){return+e}).reduce(function(e,t,n){return n%2?e+9*t:e+3*t},0)%10)];return{data:"1011"+(0,i.default)(this.data,t,"01"),text:this.text}}}]),t}(a.default);t.default=c},2522(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(9224),a=(r=i)&&r.__esModule?r:{default:r},s=n(3531);var c=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.encodings=n,this.options=r}return o(e,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var e=0;e<this.encodings.length;e++){var t=(0,a.default)(this.options,this.encodings[e].options);this.drawCanvasBarcode(t,this.encodings[e]),this.drawCanvasText(t,this.encodings[e]),this.moveCanvasDrawing(this.encodings[e])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var e=this.canvas.getContext("2d");e.save(),(0,s.calculateEncodingAttributes)(this.encodings,this.options,e);var t=(0,s.getTotalWidthOfEncodings)(this.encodings),n=(0,s.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=t+this.options.marginLeft+this.options.marginRight,this.canvas.height=n,e.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(e.fillStyle=this.options.background,e.fillRect(0,0,this.canvas.width,this.canvas.height)),e.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(e,t){var n,r=this.canvas.getContext("2d"),o=t.data;n="top"==e.textPosition?e.marginTop+e.fontSize+e.textMargin:e.marginTop,r.fillStyle=e.lineColor;for(var i=0;i<o.length;i++){var a=i*e.width+t.barcodePadding;"1"===o[i]?r.fillRect(a,n,e.width,e.height):o[i]&&r.fillRect(a,n,e.width,e.height*o[i])}}},{key:"drawCanvasText",value:function(e,t){var n,r,o=this.canvas.getContext("2d"),i=e.fontOptions+" "+e.fontSize+"px "+e.font;e.displayValue&&(r="top"==e.textPosition?e.marginTop+e.fontSize-e.textMargin:e.height+e.textMargin+e.marginTop+e.fontSize,o.font=i,"left"==e.textAlign||t.barcodePadding>0?(n=0,o.textAlign="left"):"right"==e.textAlign?(n=t.width-1,o.textAlign="right"):(n=t.width/2,o.textAlign="center"),o.fillText(t.text,n,r))}},{key:"moveCanvasDrawing",value:function(e){this.canvas.getContext("2d").translate(e.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),e}();t.default=c},2546(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pharmacode=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5301);var a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.number=parseInt(e,10),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"encode",value:function(){for(var e=this.number,t="";!isNaN(e)&&0!=e;)e%2===0?(t="11100"+t,e=(e-2)/2):(t="100"+t,e=(e-1)/2);return{data:t=t.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),t}(((r=i)&&r.__esModule?r:{default:r}).default);t.pharmacode=a},2778(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};t.default=n},2799(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(e,t,r){var o=null;if(void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:o,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=o,t.jsxs=o},2901(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(6190),a=(r=i)&&r.__esModule?r:{default:r},s=n(1029);var c=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.C_START_CHAR+e,n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"valid",value:function(){return new RegExp("^"+s.C_CHARS+"+$").test(this.data)}}]),t}(a.default);t.default=c},2922(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=s(n(7305)),i=s(n(8176)),a=n(3530);function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("string"===typeof e)return function(e){var t=document.querySelectorAll(e);if(0===t.length)return;for(var n=[],r=0;r<t.length;r++)n.push(c(t[r]));return n}(e);if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++)t.push(c(e[n]));return t}if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLImageElement)return function(e){var t=document.createElement("canvas");return{element:t,options:(0,o.default)(e),renderer:i.default.CanvasRenderer,afterRender:function(){e.setAttribute("src",t.toDataURL())}}}(e);if(e&&e.nodeName&&"svg"===e.nodeName.toLowerCase()||"undefined"!==typeof SVGElement&&e instanceof SVGElement)return{element:e,options:(0,o.default)(e),renderer:i.default.SVGRenderer};if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement)return{element:e,options:(0,o.default)(e),renderer:i.default.CanvasRenderer};if(e&&e.getContext)return{element:e,renderer:i.default.CanvasRenderer};if(e&&"object"===("undefined"===typeof e?"undefined":r(e))&&!e.nodeName)return{element:e,renderer:i.default.ObjectRenderer};throw new a.InvalidElementException}t.default=c},2956(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codabar=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5301);var a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),0===e.search(/^[0-9\-\$\:\.\+\/]+$/)&&(e="A"+e+"A");var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.toUpperCase(),n));return r.text=r.options.text||r.text.replace(/[A-D]/g,""),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var e=[],t=this.getEncodings(),n=0;n<this.data.length;n++)e.push(t[this.data.charAt(n)]),n!==this.data.length-1&&e.push("0");return{text:this.text,data:e.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),t}(((r=i)&&r.__esModule?r:{default:r}).default);t.codabar=a},2978(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(9224),a=(r=i)&&r.__esModule?r:{default:r},s=n(3531);var c="http://www.w3.org/2000/svg",l=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.svg=t,this.encodings=n,this.options=r,this.document=r.xmlDocument||document}return o(e,[{key:"render",value:function(){var e=this.options.marginLeft;this.prepareSVG();for(var t=0;t<this.encodings.length;t++){var n=this.encodings[t],r=(0,a.default)(this.options,n.options),o=this.createGroup(e,r.marginTop,this.svg);this.setGroupOptions(o,r),this.drawSvgBarcode(o,r,n),this.drawSVGText(o,r,n),e+=n.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,s.calculateEncodingAttributes)(this.encodings,this.options);var e=(0,s.getTotalWidthOfEncodings)(this.encodings),t=(0,s.getMaximumHeightOfEncodings)(this.encodings),n=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(n,t),this.options.background&&this.drawRect(0,0,n,t,this.svg).setAttribute("fill",this.options.background)}},{key:"drawSvgBarcode",value:function(e,t,n){var r,o=n.data;r="top"==t.textPosition?t.fontSize+t.textMargin:0;for(var i=0,a=0,s=0;s<o.length;s++)a=s*t.width+n.barcodePadding,"1"===o[s]?i++:i>0&&(this.drawRect(a-t.width*i,r,t.width*i,t.height,e),i=0);i>0&&this.drawRect(a-t.width*(i-1),r,t.width*i,t.height,e)}},{key:"drawSVGText",value:function(e,t,n){var r,o,i=this.document.createElementNS(c,"text");t.displayValue&&(i.setAttribute("font-family",t.font),i.setAttribute("font-size",t.fontSize),t.fontOptions.includes("bold")&&i.setAttribute("font-weight","bold"),t.fontOptions.includes("italic")&&i.setAttribute("font-style","italic"),o="top"==t.textPosition?t.fontSize-t.textMargin:t.height+t.textMargin+t.fontSize,"left"==t.textAlign||n.barcodePadding>0?(r=0,i.setAttribute("text-anchor","start")):"right"==t.textAlign?(r=n.width-1,i.setAttribute("text-anchor","end")):(r=n.width/2,i.setAttribute("text-anchor","middle")),i.setAttribute("x",r),i.setAttribute("y",o),i.appendChild(this.document.createTextNode(n.text)),e.appendChild(i))}},{key:"setSvgAttributes",value:function(e,t){var n=this.svg;n.setAttribute("width",e+"px"),n.setAttribute("height",t+"px"),n.setAttribute("x","0px"),n.setAttribute("y","0px"),n.setAttribute("viewBox","0 0 "+e+" "+t),n.setAttribute("xmlns",c),n.setAttribute("version","1.1")}},{key:"createGroup",value:function(e,t,n){var r=this.document.createElementNS(c,"g");return r.setAttribute("transform","translate("+e+", "+t+")"),n.appendChild(r),r}},{key:"setGroupOptions",value:function(e,t){e.setAttribute("fill",t.lineColor)}},{key:"drawRect",value:function(e,t,n,r,o){var i=this.document.createElementNS(c,"rect");return i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("width",n),i.setAttribute("height",r),o.appendChild(i),i}}]),e}();t.default=l},3159(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITF14=t.ITF=void 0;var r=i(n(5310)),o=i(n(8807));function i(e){return e&&e.__esModule?e:{default:e}}t.ITF=r.default,t.ITF14=o.default},3257(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},3498(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5301);var a=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"encode",value:function(){for(var e="110",t=0;t<this.data.length;t++){var n=parseInt(this.data[t]).toString(2);n=s(n,4-n.length);for(var r=0;r<n.length;r++)e+="0"==n[r]?"100":"110"}return{data:e+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),t}(((r=i)&&r.__esModule?r:{default:r}).default);function s(e,t){for(var n=0;n<t;n++)e="0"+e;return e}t.default=a},3530(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,o){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="InvalidInputException",i.symbology=t,i.input=o,i.message='"'+i.input+'" is not a valid input for '+i.symbology,i}return o(e,Error),e}(),a=function(){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="InvalidElementException",t.message="Not supported type to render on",t}return o(e,Error),e}(),s=function(){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="NoElementException",t.message="No element to render on.",t}return o(e,Error),e}();t.InvalidInputException=i,t.InvalidElementException=a,t.NoElementException=s},3531(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTotalWidthOfEncodings=t.calculateEncodingAttributes=t.getBarcodePadding=t.getEncodingHeight=t.getMaximumHeightOfEncodings=void 0;var r,o=n(9224),i=(r=o)&&r.__esModule?r:{default:r};function a(e,t){return t.height+(t.displayValue&&e.text.length>0?t.fontSize+t.textMargin:0)+t.marginTop+t.marginBottom}function s(e,t,n){if(n.displayValue&&t<e){if("center"==n.textAlign)return Math.floor((e-t)/2);if("left"==n.textAlign)return 0;if("right"==n.textAlign)return Math.floor(e-t)}return 0}function c(e,t,n){var r;if(n)r=n;else{if("undefined"===typeof document)return 0;r=document.createElement("canvas").getContext("2d")}r.font=t.fontOptions+" "+t.fontSize+"px "+t.font;var o=r.measureText(e);return o?o.width:0}t.getMaximumHeightOfEncodings=function(e){for(var t=0,n=0;n<e.length;n++)e[n].height>t&&(t=e[n].height);return t},t.getEncodingHeight=a,t.getBarcodePadding=s,t.calculateEncodingAttributes=function(e,t,n){for(var r=0;r<e.length;r++){var o,l=e[r],u=(0,i.default)(t,l.options);o=u.displayValue?c(l.text,u,n):0;var d=l.data.length*u.width;l.width=Math.ceil(Math.max(o,d)),l.height=a(l,u),l.barcodePadding=s(o,d,u)}},t.getTotalWidthOfEncodings=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].width;return t}},4004(e,t,n){const r=n(7421),o=n(900),i=n(9642),a=n(8697),s=n(5200),c=n(8511),l=n(7969),u=n(7347);function d(e){return unescape(encodeURIComponent(e)).length}function h(e,t,n){const r=[];let o;for(;null!==(o=e.exec(n));)r.push({data:o[0],index:o.index,mode:t,length:o[0].length});return r}function f(e){const t=h(c.NUMERIC,r.NUMERIC,e),n=h(c.ALPHANUMERIC,r.ALPHANUMERIC,e);let o,i;l.isKanjiModeEnabled()?(o=h(c.BYTE,r.BYTE,e),i=h(c.KANJI,r.KANJI,e)):(o=h(c.BYTE_KANJI,r.BYTE,e),i=[]);return t.concat(n,o,i).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function p(e,t){switch(t){case r.NUMERIC:return o.getBitsLength(e);case r.ALPHANUMERIC:return i.getBitsLength(e);case r.KANJI:return s.getBitsLength(e);case r.BYTE:return a.getBitsLength(e)}}function g(e,t){let n;const c=r.getBestModeForData(e);if(n=r.from(t,c),n!==r.BYTE&&n.bit<c.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(c));switch(n!==r.KANJI||l.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new o(e);case r.ALPHANUMERIC:return new i(e);case r.KANJI:return new s(e);case r.BYTE:return new a(e)}}t.fromArray=function(e){return e.reduce(function(e,t){return"string"===typeof t?e.push(g(t,null)):t.data&&e.push(g(t.data,t.mode)),e},[])},t.fromString=function(e,n){const o=function(e){const t=[];for(let n=0;n<e.length;n++){const o=e[n];switch(o.mode){case r.NUMERIC:t.push([o,{data:o.data,mode:r.ALPHANUMERIC,length:o.length},{data:o.data,mode:r.BYTE,length:o.length}]);break;case r.ALPHANUMERIC:t.push([o,{data:o.data,mode:r.BYTE,length:o.length}]);break;case r.KANJI:t.push([o,{data:o.data,mode:r.BYTE,length:d(o.data)}]);break;case r.BYTE:t.push([{data:o.data,mode:r.BYTE,length:d(o.data)}])}}return t}(f(e,l.isKanjiModeEnabled())),i=function(e,t){const n={},o={start:{}};let i=["start"];for(let a=0;a<e.length;a++){const s=e[a],c=[];for(let e=0;e<s.length;e++){const l=s[e],u=""+a+e;c.push(u),n[u]={node:l,lastCount:0},o[u]={};for(let e=0;e<i.length;e++){const a=i[e];n[a]&&n[a].node.mode===l.mode?(o[a][u]=p(n[a].lastCount+l.length,l.mode)-p(n[a].lastCount,l.mode),n[a].lastCount+=l.length):(n[a]&&(n[a].lastCount=l.length),o[a][u]=p(l.length,l.mode)+4+r.getCharCountIndicator(l.mode,t))}}i=c}for(let r=0;r<i.length;r++)o[i[r]].end=0;return{map:o,table:n}}(o,n),a=u.find_path(i.map,"start","end"),s=[];for(let t=1;t<a.length-1;t++)s.push(i.table[a[t]].node);return t.fromArray(function(e){return e.reduce(function(e,t){const n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}(s))},t.rawSplit=function(e){return t.fromArray(f(e,l.isKanjiModeEnabled()))}},4238(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];return function e(n){if(Array.isArray(n))for(var r=0;r<n.length;r++)e(n[r]);else n.text=n.text||"",n.data=n.data||"",t.push(n)}(e),t}},4288(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||g}function w(){}function b(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||g}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=v.prototype;var _=b.prototype=new w;_.constructor=b,m(_,v.prototype),_.isPureReactComponent=!0;var C=Array.isArray;function E(){}var S={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function I(e,t,r){var o=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==o?o:null,props:r}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function k(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c,l,u=!1;if(null===e)u=!0;else switch(s){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return k((u=e._init)(e._payload),t,o,i,a)}}if(u)return a=a(e),u=""===i?"."+T(e,0):i,C(a)?(o="",null!=u&&(o=u.replace(N,"$&/")+"/"),k(a,t,o,"",function(e){return e})):null!=a&&(x(a)&&(c=a,l=o+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(N,"$&/")+"/")+u,a=I(c.type,l,c.props)),t.push(a)),1;u=0;var d,f=""===i?".":i+":";if(C(e))for(var g=0;g<e.length;g++)u+=k(i=e[g],t,o,s=f+T(i,g),a);else if("function"===typeof(g=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=g.call(e),g=0;!(i=e.next()).done;)u+=k(i=i.value,t,o,s=f+T(i,g++),a);else if("object"===s){if("function"===typeof e.then)return k(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,o,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function O(e,t,n){if(null==e)return e;var r=[],o=0;return k(e,r,"","",function(e){return t.call(n,e,o++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},j={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=j,t.Component=v,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),o=e.key;if(null!=t)for(i in void 0!==t.key&&(o=""+t.key),t)!A.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),s=0;s<i;s++)a[s]=arguments[s+2];r.children=a}return I(e.type,o,r)},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,o={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)A.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var a=arguments.length-2;if(1===a)o.children=n;else if(1<a){for(var s=Array(a),c=0;c<a;c++)s[c]=arguments[c+2];o.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===o[r]&&(o[r]=a[r]);return I(e,i,o)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),o=S.S;null!==o&&o(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(E,P)}catch(i){P(i)}finally{null!==t&&null!==n.types&&(t.types=n.types),S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return S.H.useEffect(e,t)},t.useEffectEvent=function(e){return S.H.useEffectEvent(e)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.2.3"},4391(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(7004)},4440(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2146);var a=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),t}(((r=i)&&r.__esModule?r:{default:r}).default);t.default=a},4566(e){function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){const t=Math.floor(e/8);return 1===(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let n=0;n<t;n++)this.putBit(1===(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},4661(e){function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,n,r){const o=e*this.size+t;this.data[o]=n,r&&(this.reservedBit[o]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},4709(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.checksum=s;var o=i(n(9007));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{11}$/)&&(e+=s(e));var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.displayValue=n.displayValue,n.fontSize>10*n.width?r.fontSize=10*n.width:r.fontSize=n.fontSize,r.guardHeight=n.height+r.fontSize/2+n.textMargin,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==s(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=(0,o.default)(this.data.substr(0,6),"LLLLLL"),e+="01010",e+=(0,o.default)(this.data.substr(6,6),"RRRRRR"),{data:e+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101"+(0,o.default)(this.data[0],"L"),options:{height:this.guardHeight}}),e.push({data:(0,o.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:(0,o.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),e.push({data:(0,o.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),e}}]),t}(i(n(5301)).default);function s(e){var t,n=0;for(t=1;t<11;t+=2)n+=parseInt(e[t]);for(t=0;t<11;t+=2)n+=3*parseInt(e[t]);return(10-n%10)%10}t.default=a},4772(e,t,n){const r=n(7969),o=n(6272),i=n(4566),a=n(4661),s=n(9382),c=n(9021),l=n(4833),u=n(1805),d=n(8177),h=n(4980),f=n(350),p=n(7421),g=n(4004);function m(e,t,n){const r=e.size,o=f.getEncodedBits(t,n);let i,a;for(i=0;i<15;i++)a=1===(o>>i&1),i<6?e.set(i,8,a,!0):i<8?e.set(i+1,8,a,!0):e.set(r-15+i,8,a,!0),i<8?e.set(8,r-i-1,a,!0):i<9?e.set(8,15-i-1+1,a,!0):e.set(8,15-i-1,a,!0);e.set(r-8,8,1,!0)}function y(e,t,n){const o=new i;n.forEach(function(t){o.put(t.mode.bit,4),o.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(o)});const a=8*(r.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t));for(o.getLengthInBits()+4<=a&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(0);const s=(a-o.getLengthInBits())/8;for(let r=0;r<s;r++)o.put(r%2?17:236,8);return function(e,t,n){const o=r.getSymbolTotalCodewords(t),i=u.getTotalCodewordsCount(t,n),a=o-i,s=u.getBlocksCount(t,n),c=o%s,l=s-c,h=Math.floor(o/s),f=Math.floor(a/s),p=f+1,g=h-f,m=new d(g);let y=0;const v=new Array(s),w=new Array(s);let b=0;const _=new Uint8Array(e.buffer);for(let r=0;r<s;r++){const e=r<l?f:p;v[r]=_.slice(y,y+e),w[r]=m.encode(v[r]),y+=e,b=Math.max(b,e)}const C=new Uint8Array(o);let E,S,A=0;for(E=0;E<b;E++)for(S=0;S<s;S++)E<v[S].length&&(C[A++]=v[S][E]);for(E=0;E<g;E++)for(S=0;S<s;S++)C[A++]=w[S][E];return C}(o,e,t)}function v(e,t,n,o){let i;if(Array.isArray(e))i=g.fromArray(e);else{if("string"!==typeof e)throw new Error("Invalid data");{let r=t;if(!r){const t=g.rawSplit(e);r=h.getBestVersionForData(t,n)}i=g.fromString(e,r||40)}}const u=h.getBestVersionForData(i,n);if(!u)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<u)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+u+".\n")}else t=u;const d=y(t,n,i),f=r.getSymbolSize(t),p=new a(f);return function(e,t){const n=e.size,r=c.getPositions(t);for(let o=0;o<r.length;o++){const t=r[o][0],i=r[o][1];for(let r=-1;r<=7;r++)if(!(t+r<=-1||n<=t+r))for(let o=-1;o<=7;o++)i+o<=-1||n<=i+o||(r>=0&&r<=6&&(0===o||6===o)||o>=0&&o<=6&&(0===r||6===r)||r>=2&&r<=4&&o>=2&&o<=4?e.set(t+r,i+o,!0,!0):e.set(t+r,i+o,!1,!0))}}(p,t),function(e){const t=e.size;for(let n=8;n<t-8;n++){const t=n%2===0;e.set(n,6,t,!0),e.set(6,n,t,!0)}}(p),function(e,t){const n=s.getPositions(t);for(let r=0;r<n.length;r++){const t=n[r][0],o=n[r][1];for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)-2===n||2===n||-2===r||2===r||0===n&&0===r?e.set(t+n,o+r,!0,!0):e.set(t+n,o+r,!1,!0)}}(p,t),m(p,n,0),t>=7&&function(e,t){const n=e.size,r=h.getEncodedBits(t);let o,i,a;for(let s=0;s<18;s++)o=Math.floor(s/3),i=s%3+n-8-3,a=1===(r>>s&1),e.set(o,i,a,!0),e.set(i,o,a,!0)}(p,t),function(e,t){const n=e.size;let r=-1,o=n-1,i=7,a=0;for(let s=n-1;s>0;s-=2)for(6===s&&s--;;){for(let n=0;n<2;n++)if(!e.isReserved(o,s-n)){let r=!1;a<t.length&&(r=1===(t[a]>>>i&1)),e.set(o,s-n,r),i--,-1===i&&(a++,i=7)}if(o+=r,o<0||n<=o){o-=r,r=-r;break}}}(p,d),isNaN(o)&&(o=l.getBestMask(p,m.bind(null,p,n))),l.applyMask(o,p),m(p,n,o),{modules:p,version:t,errorCorrectionLevel:n,maskPattern:o,segments:i}}t.create=function(e,t){if("undefined"===typeof e||""===e)throw new Error("No input text");let n,i,a=o.M;return"undefined"!==typeof t&&(a=o.from(t.errorCorrectionLevel,o.M),n=h.from(t.version),i=l.from(t.maskPattern),t.toSJISFunc&&r.setToSJISFunction(t.toSJISFunc)),v(e,n,a,i)}},4833(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n=3,r=3,o=40,i=10;function a(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return r%3===0;case t.Patterns.PATTERN011:return(n+r)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2===0;case t.Patterns.PATTERN101:return n*r%2+n*r%3===0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2===0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let r=0,o=0,i=0,a=null,s=null;for(let c=0;c<t;c++){o=i=0,a=s=null;for(let l=0;l<t;l++){let t=e.get(c,l);t===a?o++:(o>=5&&(r+=n+(o-5)),a=t,o=1),t=e.get(l,c),t===s?i++:(i>=5&&(r+=n+(i-5)),s=t,i=1)}o>=5&&(r+=n+(o-5)),i>=5&&(r+=n+(i-5))}return r},t.getPenaltyN2=function(e){const t=e.size;let n=0;for(let r=0;r<t-1;r++)for(let o=0;o<t-1;o++){const t=e.get(r,o)+e.get(r,o+1)+e.get(r+1,o)+e.get(r+1,o+1);4!==t&&0!==t||n++}return n*r},t.getPenaltyN3=function(e){const t=e.size;let n=0,r=0,i=0;for(let o=0;o<t;o++){r=i=0;for(let a=0;a<t;a++)r=r<<1&2047|e.get(o,a),a>=10&&(1488===r||93===r)&&n++,i=i<<1&2047|e.get(a,o),a>=10&&(1488===i||93===i)&&n++}return n*o},t.getPenaltyN4=function(e){let t=0;const n=e.data.length;for(let r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*i},t.applyMask=function(e,t){const n=t.size;for(let r=0;r<n;r++)for(let o=0;o<n;o++)t.isReserved(o,r)||t.xor(o,r,a(e,o,r))},t.getBestMask=function(e,n){const r=Object.keys(t.Patterns).length;let o=0,i=1/0;for(let a=0;a<r;a++){n(a),t.applyMask(a,e);const r=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(a,e),r<i&&(i=r,o=a)}return o}},4863(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3498),i=(r=o)&&r.__esModule?r:{default:r},a=n(8997);var s=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,a.mod10)(e),n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i.default);t.default=s},4980(e,t,n){const r=n(7969),o=n(1805),i=n(6272),a=n(7421),s=n(3257),c=r.getBCHDigit(7973);function l(e,t){return a.getCharCountIndicator(e,t)+4}function u(e,t){let n=0;return e.forEach(function(e){const r=l(e.mode,t);n+=r+e.getBitsLength()}),n}t.from=function(e,t){return s.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!s.isValid(e))throw new Error("Invalid QR Code version");"undefined"===typeof n&&(n=a.BYTE);const i=8*(r.getSymbolTotalCodewords(e)-o.getTotalCodewordsCount(e,t));if(n===a.MIXED)return i;const c=i-l(n,e);switch(n){case a.NUMERIC:return Math.floor(c/10*3);case a.ALPHANUMERIC:return Math.floor(c/11*2);case a.KANJI:return Math.floor(c/13);case a.BYTE:default:return Math.floor(c/8)}},t.getBestVersionForData=function(e,n){let r;const o=i.from(n,i.M);if(Array.isArray(e)){if(e.length>1)return function(e,n){for(let r=1;r<=40;r++)if(u(e,r)<=t.getCapacity(r,n,a.MIXED))return r}(e,o);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,n,r){for(let o=1;o<=40;o++)if(n<=t.getCapacity(o,r,e))return o}(r.mode,r.getLength(),o)},t.getEncodedBits=function(e){if(!s.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;r.getBCHDigit(t)-c>=0;)t^=7973<<r.getBCHDigit(t)-c;return e<<12|t}},5043(e,t,n){"use strict";e.exports=n(4288)},5179(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CODE39=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5301);var a=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e.toUpperCase(),n.mod43&&(e+=function(e){return s[e]}(function(e){for(var t=0,n=0;n<e.length;n++)t+=u(e[n]);return t%=43}(e))),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"encode",value:function(){for(var e=l("*"),t=0;t<this.data.length;t++)e+=l(this.data[t])+"0";return{data:e+=l("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),t}(((r=i)&&r.__esModule?r:{default:r}).default),s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],c=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function l(e){return function(e){return c[e].toString(2)}(u(e))}function u(e){return s.indexOf(e)}t.CODE39=a},5200(e,t,n){const r=n(7421),o=n(7969);function i(e){this.mode=r.KANJI,this.data=e}i.getBitsLength=function(e){return 13*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=o.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=i},5301(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.text=n.text||t,this.options=n}},5310(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(7626),a=n(5301);var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var e=this,t=this.data.match(/.{2}/g).map(function(t){return e.encodePair(t)}).join("");return{data:i.START_BIN+t+i.END_BIN,text:this.text}}},{key:"encodePair",value:function(e){var t=i.BINARIES[e[1]];return i.BINARIES[e[0]].split("").map(function(e,n){return("1"===e?"111":"1")+("1"===t[n]?"000":"0")}).join("")}}]),t}(((r=a)&&r.__esModule?r:{default:r}).default);t.default=s},5487(e,t,n){const r=n(8293);function o(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function i(e,t,n){let r=e+t;return"undefined"!==typeof n&&(r+=" "+n),r}t.render=function(e,t,n){const a=r.getOptions(t),s=e.modules.size,c=e.modules.data,l=s+2*a.margin,u=a.color.light.a?"<path "+o(a.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+o(a.color.dark,"stroke")+' d="'+function(e,t,n){let r="",o=0,a=!1,s=0;for(let c=0;c<e.length;c++){const l=Math.floor(c%t),u=Math.floor(c/t);l||a||(a=!0),e[c]?(s++,c>0&&l>0&&e[c-1]||(r+=a?i("M",l+n,.5+u+n):i("m",o,0),o=0,a=!1),l+1<t&&e[c+1]||(r+=i("h",s),s=0)):o++}return r}(c,s,a.margin)+'"/>',h='viewBox="0 0 '+l+" "+l+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+h+' shape-rendering="crispEdges">'+u+d+"</svg>\n";return"function"===typeof n&&n(null,f),f}},5865(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5179),o=n(1616),i=n(8859),a=n(3159),s=n(6825),c=n(2546),l=n(2956),u=n(8495),d=n(1257);t.default={CODE39:r.CODE39,CODE128:o.CODE128,CODE128A:o.CODE128A,CODE128B:o.CODE128B,CODE128C:o.CODE128C,EAN13:i.EAN13,EAN8:i.EAN8,EAN5:i.EAN5,EAN2:i.EAN2,UPC:i.UPC,UPCE:i.UPCE,ITF14:a.ITF14,ITF:a.ITF,MSI:s.MSI,MSI10:s.MSI10,MSI11:s.MSI11,MSI1010:s.MSI1010,MSI1110:s.MSI1110,pharmacode:c.pharmacode,codabar:l.codabar,CODE93:u.CODE93,CODE93FullASCII:u.CODE93FullASCII,GenericBarcode:d.GenericBarcode}},5896(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<o&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else{if(!(l<o&&0>i(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var l=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function C(e){if(m=!1,_(e),!g)if(null!==r(l))g=!0,S||(S=!0,E());else{var t=r(u);null!==t&&R(C,t.startTime-e)}}var E,S=!1,A=-1,I=5,x=-1;function N(){return!!y||!(t.unstable_now()-x<I)}function T(){if(y=!1,S){var e=t.unstable_now();x=e;var n=!0;try{e:{g=!1,m&&(m=!1,w(A),A=-1),p=!0;var i=f;try{t:{for(_(e),h=r(l);null!==h&&!(h.expirationTime>e&&N());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){h.callback=s,_(e),n=!0;break t}h===r(l)&&o(l),_(e)}else o(l);h=r(l)}if(null!==h)n=!0;else{var c=r(u);null!==c&&R(C,c.startTime-e),n=!1}}break e}finally{h=null,f=i,p=!1}n=void 0}}finally{n?E():S=!1}}}if("function"===typeof b)E=function(){b(T)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,O=k.port2;k.port1.onmessage=T,E=function(){O.postMessage(null)}}else E=function(){v(T,0)};function R(e,n){A=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(l)&&e===r(u)&&(m?(w(A),A=-1):m=!0,R(C,i-a))):(e.sortIndex=s,n(l,e),g||p||(g=!0,S||(S=!0,E()))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5938(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3498),i=(r=o)&&r.__esModule?r:{default:r},a=n(8997);var s=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e+=(0,a.mod10)(e),e+=(0,a.mod10)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i.default);t.default=s},6116(e){e.exports=function(){return"function"===typeof Promise&&Promise.prototype&&Promise.prototype.then}},6190(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5301),a=(r=i)&&r.__esModule?r:{default:r},s=n(1029);var c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.substring(1),n));return r.bytes=e.split("").map(function(e){return e.charCodeAt(0)}),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var e=this.bytes,n=e.shift()-105,r=s.SET_BY_CODE[n];if(void 0===r)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&e.unshift(s.FNC1);var o=t.next(e,1,r);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:t.getBar(n)+o.result+t.getBar((o.checksum+n)%s.MODULO)+t.getBar(s.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var e=this.options.ean128||!1;return"string"===typeof e&&(e="true"===e.toLowerCase()),e}}],[{key:"getBar",value:function(e){return s.BARS[e]?s.BARS[e].toString():""}},{key:"correctIndex",value:function(e,t){if(t===s.SET_A){var n=e.shift();return n<32?n+64:n-32}return t===s.SET_B?e.shift()-32:10*(e.shift()-48)+e.shift()-48}},{key:"next",value:function(e,n,r){if(!e.length)return{result:"",checksum:0};var o=void 0,i=void 0;if(e[0]>=200){i=e.shift()-105;var a=s.SWAP[i];void 0!==a?o=t.next(e,n+1,a):(r!==s.SET_A&&r!==s.SET_B||i!==s.SHIFT||(e[0]=r===s.SET_A?e[0]>95?e[0]-96:e[0]:e[0]<32?e[0]+96:e[0]),o=t.next(e,n+1,r))}else i=t.correctIndex(e,r),o=t.next(e,n+1,r);var c=i*n;return{result:t.getBar(i)+o.result,checksum:c+o.checksum}}}]),t}(a.default);t.default=c},6272(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&"undefined"!==typeof e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!==typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(r){return n}}},6441(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1029),o=function(e){return e.match(new RegExp("^"+r.A_CHARS+"*"))[0].length},i=function(e){return e.match(new RegExp("^"+r.B_CHARS+"*"))[0].length},a=function(e){return e.match(new RegExp("^"+r.C_CHARS+"*"))[0]};function s(e,t){var n=t?r.A_CHARS:r.B_CHARS,o=e.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(o)return o[1]+String.fromCharCode(204)+c(e.substring(o[1].length));var i=e.match(new RegExp("^"+n+"+"))[0];return i.length===e.length?e:i+String.fromCharCode(t?205:206)+s(e.substring(i.length),!t)}function c(e){var t=a(e),n=t.length;if(n===e.length)return e;e=e.substring(n);var r=o(e)>=i(e);return t+String.fromCharCode(r?206:205)+s(e,r)}t.default=function(e){var t=void 0;if(a(e).length>=2)t=r.C_START_CHAR+c(e);else{var n=o(e)>i(e);t=(n?r.A_START_CHAR:r.B_START_CHAR)+s(e,n)}return t.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(e,t){return String.fromCharCode(203)+t})}},6672(e,t,n){"use strict";var r=n(5043);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(o(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(o(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=c.T,n=a.p;try{if(c.T=null,a.p=2,e)return e()}finally{c.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=l(n,t.crossOrigin),o="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:o,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=l(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=l(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=l(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return c.H.useFormState(e,t,n)},t.useFormStatus=function(){return c.H.useHostTransitionStatus()},t.version="19.2.3"},6825(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MSI1110=t.MSI1010=t.MSI11=t.MSI10=t.MSI=void 0;var r=c(n(3498)),o=c(n(4863)),i=c(n(1704)),a=c(n(5938)),s=c(n(1573));function c(e){return e&&e.__esModule?e:{default:e}}t.MSI=r.default,t.MSI10=o.default,t.MSI11=i.default,t.MSI1010=a.default,t.MSI1110=s.default},6843(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},a=n(9011),s=(r=a)&&r.__esModule?r:{default:r};var c=function(e){return(10-e.substr(0,7).split("").map(function(e){return+e}).reduce(function(e,t,n){return n%2?e+t:e+3*t},0)%10)%10},l=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{7}$/)&&(e+=c(e)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===c(this.data)}},{key:"leftText",value:function(){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var e=this.data.substr(0,4);return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,e,"LLLL")}},{key:"rightText",value:function(){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var e=this.data.substr(4,4);return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,e,"RRRR")}}]),t}(s.default);t.default=l},7004(e,t,n){"use strict";var r=n(8853),o=n(5043),i=n(7950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function c(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function l(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(c(e)!==e)throw Error(a(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),_=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope");var x=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var N=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function k(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var O=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===O?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case w:return"Profiler";case v:return"StrictMode";case E:return"Suspense";case S:return"SuspenseList";case x:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case _:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return R(e(t))}catch(n){}}return null}var P=Array.isArray,j=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},L=[],B=-1;function F(e){return{current:e}}function U(e){0>B||(e.current=L[B],L[B]=null,B--)}function V(e,t){B++,L[B]=e.current,e.current=t}var z,H,G=F(null),W=F(null),q=F(null),X=F(null);function K(e,t){switch(V(q,t),V(W,e),V(G,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vd(t=yd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(G),V(G,e)}function Y(){U(G),U(W),U(q)}function Q(e){null!==e.memoizedState&&V(X,e);var t=G.current,n=vd(t,e.type);t!==n&&(V(W,e),V(G,n))}function Z(e){W.current===e&&(U(G),U(W)),X.current===e&&(U(X),uh._currentValue=M)}function $(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||"",H=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+z+e+H}var J=!1;function ee(e,t){if(!e||J)return"";J=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(o){var r=o}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],s=i[1];if(a&&s){var c=a.split("\n"),l=s.split("\n");for(o=r=0;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;for(;o<l.length&&!l[o].includes("DetermineComponentFrameRoot");)o++;if(r===c.length||o===l.length)for(r=c.length-1,o=l.length-1;1<=r&&0<=o&&c[r]!==l[o];)o--;for(;1<=r&&0<=o;r--,o--)if(c[r]!==l[o]){if(1!==r||1!==o)do{if(r--,0>--o||c[r]!==l[o]){var u="\n"+c[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=o);break}}}finally{J=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?$(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return $(e.type);case 16:return $("Lazy");case 13:return e.child!==t&&null!==t?$("Suspense Fallback"):$("Suspense");case 19:return $("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return $("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,oe=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,ae=r.unstable_shouldYield,se=r.unstable_requestPaint,ce=r.unstable_now,le=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,ge=r.log,me=r.unstable_setDisableYieldValue,ye=null,ve=null;function we(e){if("function"===typeof ge&&me(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(_e(e)/Ce|0)|0},_e=Math.log,Ce=Math.LN2;var Ee=256,Se=262144,Ae=4194304;function Ie(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xe(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var o=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~i)?o=Ie(r):0!==(a&=s)?o=Ie(a):n||0!==(n=s&~e)&&(o=Ie(n)):0!==(s=r&~i)?o=Ie(s):0!==a?o=Ie(a):n||0!==(n=r&~e)&&(o=Ie(n)),0===o?0:0!==t&&t!==o&&0===(t&i)&&((i=o&-o)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:o}function Ne(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Te(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ke(){var e=Ae;return 0===(62914560&(Ae<<=1))&&(Ae=4194304),e}function Oe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Re(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-be(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function je(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-be(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}function De(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Me(n))&(e.suspendedLanes|t))?0:n}function Me(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Le(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Be(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:Ih(e.type)}function Fe(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}var Ue=Math.random().toString(36).slice(2),Ve="__reactFiber$"+Ue,ze="__reactProps$"+Ue,He="__reactContainer$"+Ue,Ge="__reactEvents$"+Ue,We="__reactListeners$"+Ue,qe="__reactHandles$"+Ue,Xe="__reactResources$"+Ue,Ke="__reactMarker$"+Ue;function Ye(e){delete e[Ve],delete e[ze],delete e[Ge],delete e[We],delete e[qe]}function Qe(e){var t=e[Ve];if(t)return t;for(var n=e.parentNode;n;){if(t=n[He]||n[Ve]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Md(e);null!==e;){if(n=e[Ve])return n;e=Md(e)}return t}n=(e=n).parentNode}return null}function Ze(e){if(e=e[Ve]||e[He]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function $e(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Je(e){var t=e[Xe];return t||(t=e[Xe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ke]=!0}var tt=new Set,nt={};function rt(e,t){ot(e,t),ot(e+"Capture",t)}function ot(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},st={};function ct(e,t,n){if(o=t,re.call(st,o)||!re.call(at,o)&&(it.test(o)?st[o]=!0:(at[o]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var o}function lt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function gt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function yt(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,o,i,a,s){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?bt(e,a,dt(t)):null!=n?bt(e,a,dt(n)):null!=r&&e.removeAttribute("value"),null==o&&null!=i&&(e.defaultChecked=!!i),null!=o&&(e.checked=o&&"function"!==typeof o&&"symbol"!==typeof o),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+dt(s):e.removeAttribute("name")}function wt(e,t,n,r,o,i,a,s){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:o)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a),ft(e)}function bt(e,t,n){"number"===t&&gt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function _t(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function Ct(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Et(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(P(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var At=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function It(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||At.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function xt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&n[o]!==r&&It(e,o,r)}else for(var i in t)t.hasOwnProperty(i)&&It(e,i,t[i])}function Nt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ot(e){return kt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Rt(){}var Pt=null;function jt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Dt=null,Mt=null;function Lt(e){var t=Ze(e);if(t&&(e=t.stateNode)){var n=e[ze]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=r[ze]||null;if(!o)throw Error(a(90));vt(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":Ct(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&_t(e,!!n.multiple,t,!1)}}}var Bt=!1;function Ft(e,t,n){if(Bt)return e(t,n);Bt=!0;try{return e(t)}finally{if(Bt=!1,(null!==Dt||null!==Mt)&&(Jl(),Dt&&(t=Dt,e=Mt,Mt=Dt=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var r=n[ze]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Vt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),zt=!1;if(Vt)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){zt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(Zh){zt=!1}var Gt=null,Wt=null,qt=null;function Xt(){if(qt)return qt;var e,t,n=Wt,r=n.length,o="value"in Gt?Gt.value:Gt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return qt=o.slice(e,1<t?1-t:void 0)}function Kt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function Qt(){return!1}function Zt(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Yt:Qt,this.isPropagationStopped=Qt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var $t,Jt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Zt(tn),rn=f({},tn,{view:0,detail:0}),on=Zt(rn),an=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?($t=e.screenX-en.screenX,Jt=e.screenY-en.screenY):Jt=$t=0,en=e),$t)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),sn=Zt(an),cn=Zt(f({},an,{dataTransfer:0})),ln=Zt(f({},rn,{relatedTarget:0})),un=Zt(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=Zt(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Zt(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=gn[e])&&!!t[e]}function yn(){return mn}var vn=Zt(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Kt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),wn=Zt(f({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Zt(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),_n=Zt(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=Zt(f({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),En=Zt(f({},tn,{newState:0,oldState:0})),Sn=[9,13,27,32],An=Vt&&"CompositionEvent"in window,In=null;Vt&&"documentMode"in document&&(In=document.documentMode);var xn=Vt&&"TextEvent"in window&&!In,Nn=Vt&&(!An||In&&8<In&&11>=In),Tn=String.fromCharCode(32),kn=!1;function On(e,t){switch(e){case"keyup":return-1!==Sn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function Mn(e,t,n,r){Dt?Mt?Mt.push(r):Mt=[r]:Dt=r,0<(t=rd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ln=null,Bn=null;function Fn(e){Yu(e,0)}function Un(e){if(pt($e(e)))return e}function Vn(e,t){if("change"===e)return t}var zn=!1;if(Vt){var Hn;if(Vt){var Gn="oninput"in document;if(!Gn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Gn="function"===typeof Wn.oninput}Hn=Gn}else Hn=!1;zn=Hn&&(!document.documentMode||9<document.documentMode)}function qn(){Ln&&(Ln.detachEvent("onpropertychange",Xn),Bn=Ln=null)}function Xn(e){if("value"===e.propertyName&&Un(Bn)){var t=[];Mn(t,Bn,e,jt(e)),Ft(Fn,t)}}function Kn(e,t,n){"focusin"===e?(qn(),Bn=n,(Ln=t).attachEvent("onpropertychange",Xn)):"focusout"===e&&qn()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(Bn)}function Qn(e,t){if("click"===e)return Un(t)}function Zn(e,t){if("input"===e||"change"===e)return Un(t)}var $n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Jn(e,t){if($n(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!re.call(t,o)||!$n(e[o],t[o]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=gt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=gt((e=t.contentWindow).document)}return t}function or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=Vt&&"documentMode"in document&&11>=document.documentMode,ar=null,sr=null,cr=null,lr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;lr||null==ar||ar!==gt(r)||("selectionStart"in(r=ar)&&or(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},cr&&Jn(cr,r)||(cr=r,0<(r=rd(sr,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},fr={},pr={};function gr(e){if(fr[e])return fr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return fr[e]=n[t];return e}Vt&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var mr=gr("animationend"),yr=gr("animationiteration"),vr=gr("animationstart"),wr=gr("transitionrun"),br=gr("transitionstart"),_r=gr("transitioncancel"),Cr=gr("transitionend"),Er=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Er.set(e,t),rt(t,[e])}Sr.push("scrollEnd");var Ir="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},xr=[],Nr=0,Tr=0;function kr(){for(var e=Nr,t=Tr=Nr=0;t<e;){var n=xr[t];xr[t++]=null;var r=xr[t];xr[t++]=null;var o=xr[t];xr[t++]=null;var i=xr[t];if(xr[t++]=null,null!==r&&null!==o){var a=r.pending;null===a?o.next=o:(o.next=a.next,a.next=o),r.pending=o}0!==i&&jr(n,o,i)}}function Or(e,t,n,r){xr[Nr++]=e,xr[Nr++]=t,xr[Nr++]=n,xr[Nr++]=r,Tr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return Or(e,t,n,r),Dr(e)}function Pr(e,t){return Or(e,null,null,t),Dr(e)}function jr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var o=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(o=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,o&&null!==t&&(o=31-be(n),null===(r=(e=i.hiddenUpdates)[o])?e[o]=[t]:r.push(t),t.lane=536870912|n),i):null}function Dr(e){if(50<Gl)throw Gl=0,Wl=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Mr={};function Lr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Br(e,t,n,r){return new Lr(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=Br(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zr(e,t,n,r,o,i){var s=0;if(r=e,"function"===typeof e)Fr(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,G.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case x:return(e=Br(31,n,t,o)).elementType=x,e.lanes=i,e;case y:return Hr(n.children,o,i,t);case v:s=8,o|=24;break;case w:return(e=Br(12,n,t,2|o)).elementType=w,e.lanes=i,e;case E:return(e=Br(13,n,t,o)).elementType=E,e.lanes=i,e;case S:return(e=Br(19,n,t,o)).elementType=S,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:s=10;break e;case b:s=9;break e;case C:s=11;break e;case A:s=14;break e;case I:s=16,r=null;break e}s=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Br(s,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Hr(e,t,n,r){return(e=Br(7,e,r,t)).lanes=n,e}function Gr(e,t,n){return(e=Br(6,e,null,t)).lanes=n,e}function Wr(e){var t=Br(18,null,null,0);return t.stateNode=e,t}function qr(e,t,n){return(t=Br(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Xr=new WeakMap;function Kr(e,t){if("object"===typeof e&&null!==e){var n=Xr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Xr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Yr=[],Qr=0,Zr=null,$r=0,Jr=[],eo=0,to=null,no=1,ro="";function oo(e,t){Yr[Qr++]=$r,Yr[Qr++]=Zr,Zr=e,$r=t}function io(e,t,n){Jr[eo++]=no,Jr[eo++]=ro,Jr[eo++]=to,to=e;var r=no;e=ro;var o=32-be(r)-1;r&=~(1<<o),n+=1;var i=32-be(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,no=1<<32-be(t)+o|n<<o|r,ro=i+e}else no=1<<i|n<<o|r,ro=e}function ao(e){null!==e.return&&(oo(e,1),io(e,1,0))}function so(e){for(;e===Zr;)Zr=Yr[--Qr],Yr[Qr]=null,$r=Yr[--Qr],Yr[Qr]=null;for(;e===to;)to=Jr[--eo],Jr[eo]=null,ro=Jr[--eo],Jr[eo]=null,no=Jr[--eo],Jr[eo]=null}function co(e,t){Jr[eo++]=no,Jr[eo++]=ro,Jr[eo++]=to,no=t.id,ro=t.overflow,to=e}var lo=null,uo=null,ho=!1,fo=null,po=!1,go=Error(a(519));function mo(e){throw Co(Kr(Error(a(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),go}function yo(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ve]=e,t[ze]=r,n){case"dialog":Qu("cancel",t),Qu("close",t);break;case"iframe":case"object":case"embed":Qu("load",t);break;case"video":case"audio":for(n=0;n<Xu.length;n++)Qu(Xu[n],t);break;case"source":Qu("error",t);break;case"img":case"image":case"link":Qu("error",t),Qu("load",t);break;case"details":Qu("toggle",t);break;case"input":Qu("invalid",t),wt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Qu("invalid",t);break;case"textarea":Qu("invalid",t),Et(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ld(t.textContent,n)?(null!=r.popover&&(Qu("beforetoggle",t),Qu("toggle",t)),null!=r.onScroll&&Qu("scroll",t),null!=r.onScrollEnd&&Qu("scrollend",t),null!=r.onClick&&(t.onclick=Rt),t=!0):t=!1,t||mo(e,!0)}function vo(e){for(lo=e.return;lo;)switch(lo.tag){case 5:case 31:case 13:return void(po=!1);case 27:case 3:return void(po=!0);default:lo=lo.return}}function wo(e){if(e!==lo)return!1;if(!ho)return vo(e),ho=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wd(e.type,e.memoizedProps)),t=!t),t&&uo&&mo(e),vo(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));uo=Dd(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));uo=Dd(e)}else 27===n?(n=uo,Id(e.type)?(e=jd,jd=null,uo=e):uo=n):uo=lo?Pd(e.stateNode.nextSibling):null;return!0}function bo(){uo=lo=null,ho=!1}function _o(){var e=fo;return null!==e&&(null===kl?kl=e:kl.push.apply(kl,e),fo=null),e}function Co(e){null===fo?fo=[e]:fo.push(e)}var Eo=F(null),So=null,Ao=null;function Io(e,t,n){V(Eo,t._currentValue),t._currentValue=n}function xo(e){e._currentValue=Eo.current,U(Eo)}function No(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function To(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var i=o.dependencies;if(null!==i){var s=o.child;i=i.firstContext;e:for(;null!==i;){var c=i;i=o;for(var l=0;l<t.length;l++)if(c.context===t[l]){i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),No(i.return,n,e),r||(s=null);break e}i=c.next}}else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(i=s.alternate)&&(i.lanes|=n),No(s,n,e),s=null}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}}function ko(e,t,n,r){e=null;for(var o=t,i=!1;null!==o;){if(!i)if(0!==(524288&o.flags))i=!0;else if(0!==(262144&o.flags))break;if(10===o.tag){var s=o.alternate;if(null===s)throw Error(a(387));if(null!==(s=s.memoizedProps)){var c=o.type;$n(o.pendingProps.value,s.value)||(null!==e?e.push(c):e=[c])}}else if(o===X.current){if(null===(s=o.alternate))throw Error(a(387));s.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}o=o.return}null!==e&&To(t,e,n,r),t.flags|=262144}function Oo(e){for(e=e.firstContext;null!==e;){if(!$n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ro(e){So=e,Ao=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Po(e){return Do(So,e)}function jo(e,t){return null===So&&Ro(e),Do(e,t)}function Do(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Ao){if(null===e)throw Error(a(308));Ao=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ao=Ao.next=t;return n}var Mo="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Lo=r.unstable_scheduleCallback,Bo=r.unstable_NormalPriority,Fo={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uo(){return{controller:new Mo,data:new Map,refCount:0}}function Vo(e){e.refCount--,0===e.refCount&&Lo(Bo,function(){e.controller.abort()})}var zo=null,Ho=0,Go=0,Wo=null;function qo(){if(0===--Ho&&null!==zo){null!==Wo&&(Wo.status="fulfilled");var e=zo;zo=null,Go=0,Wo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Xo=j.S;j.S=function(e,t){Pl=ce(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===zo){var n=zo=[];Ho=0,Go=zu(),Wo={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ho++,t.then(qo,qo)}(0,t),null!==Xo&&Xo(e,t)};var Ko=F(null);function Yo(){var e=Ko.current;return null!==e?e:pl.pooledCache}function Qo(e,t){V(Ko,null===t?Ko.current:t.pool)}function Zo(){var e=Yo();return null===e?null:{parent:Fo._currentValue,pool:e}}var $o=Error(a(460)),Jo=Error(a(474)),ei=Error(a(542)),ti={then:function(){}};function ni(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ri(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Rt,Rt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw si(e=t.reason),e;default:if("string"===typeof t.status)t.then(Rt,Rt);else{if(null!==(e=pl)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw si(e=t.reason),e}throw ii=t,$o}}function oi(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw ii=t,$o;throw t}}var ii=null;function ai(){if(null===ii)throw Error(a(459));var e=ii;return ii=null,e}function si(e){if(e===$o||e===ei)throw Error(a(483))}var ci=null,li=0;function ui(e){var t=li;return li+=1,null===ci&&(ci=[]),ri(ci,e,t)}function di(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function hi(e,t){if(t.$$typeof===p)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Gr(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===I&&oi(i)===t.type)?(di(t=o(t,n.props),n),t.return=e,t):(di(t=zr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qr(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Hr(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Gr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case g:return di(n=zr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=qr(t,e.mode,n)).return=e,t;case I:return h(e,t=oi(t),n)}if(P(t)||k(t))return(t=Hr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,ui(t),n);if(t.$$typeof===_)return h(e,jo(e,t),n);hi(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==o?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case g:return n.key===o?l(e,t,n,r):null;case m:return n.key===o?u(e,t,n,r):null;case I:return f(e,t,n=oi(n),r)}if(P(n)||k(n))return null!==o?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,ui(n),r);if(n.$$typeof===_)return f(e,t,jo(e,n),r);hi(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return c(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case g:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case I:return p(e,t,n,r=oi(r),o)}if(P(r)||k(r))return d(t,e=e.get(n)||null,r,o,null);if("function"===typeof r.then)return p(e,t,n,ui(r),o);if(r.$$typeof===_)return p(e,t,n,jo(t,r),o);hi(t,r)}return null}function v(c,l,u,d){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case g:e:{for(var w=u.key;null!==l;){if(l.key===w){if((w=u.type)===y){if(7===l.tag){n(c,l.sibling),(d=o(l,u.props.children)).return=c,c=d;break e}}else if(l.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===I&&oi(w)===l.type){n(c,l.sibling),di(d=o(l,u.props),u),d.return=c,c=d;break e}n(c,l);break}t(c,l),l=l.sibling}u.type===y?((d=Hr(u.props.children,c.mode,d,u.key)).return=c,c=d):(di(d=zr(u.type,u.key,u.props,null,c.mode,d),u),d.return=c,c=d)}return s(c);case m:e:{for(w=u.key;null!==l;){if(l.key===w){if(4===l.tag&&l.stateNode.containerInfo===u.containerInfo&&l.stateNode.implementation===u.implementation){n(c,l.sibling),(d=o(l,u.children||[])).return=c,c=d;break e}n(c,l);break}t(c,l),l=l.sibling}(d=qr(u,c.mode,d)).return=c,c=d}return s(c);case I:return v(c,l,u=oi(u),d)}if(P(u))return function(o,a,s,c){for(var l=null,u=null,d=a,g=a=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=f(o,d,s[g],c);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(o,d),a=i(y,a,g),null===u?l=y:u.sibling=y,u=y,d=m}if(g===s.length)return n(o,d),ho&&oo(o,g),l;if(null===d){for(;g<s.length;g++)null!==(d=h(o,s[g],c))&&(a=i(d,a,g),null===u?l=d:u.sibling=d,u=d);return ho&&oo(o,g),l}for(d=r(d);g<s.length;g++)null!==(m=p(d,o,g,s[g],c))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),a=i(m,a,g),null===u?l=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(o,e)}),ho&&oo(o,g),l}(c,l,u,d);if(k(u)){if("function"!==typeof(w=k(u)))throw Error(a(150));return function(o,s,c,l){if(null==c)throw Error(a(151));for(var u=null,d=null,g=s,m=s=0,y=null,v=c.next();null!==g&&!v.done;m++,v=c.next()){g.index>m?(y=g,g=null):y=g.sibling;var w=f(o,g,v.value,l);if(null===w){null===g&&(g=y);break}e&&g&&null===w.alternate&&t(o,g),s=i(w,s,m),null===d?u=w:d.sibling=w,d=w,g=y}if(v.done)return n(o,g),ho&&oo(o,m),u;if(null===g){for(;!v.done;m++,v=c.next())null!==(v=h(o,v.value,l))&&(s=i(v,s,m),null===d?u=v:d.sibling=v,d=v);return ho&&oo(o,m),u}for(g=r(g);!v.done;m++,v=c.next())null!==(v=p(g,o,m,v.value,l))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),s=i(v,s,m),null===d?u=v:d.sibling=v,d=v);return e&&g.forEach(function(e){return t(o,e)}),ho&&oo(o,m),u}(c,l,u=w.call(u),d)}if("function"===typeof u.then)return v(c,l,ui(u),d);if(u.$$typeof===_)return v(c,l,jo(c,u),d);hi(c,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==l&&6===l.tag?(n(c,l.sibling),(d=o(l,u)).return=c,c=d):(n(c,l),(d=Gr(u,c.mode,d)).return=c,c=d),s(c)):n(c,l)}return function(e,t,n,r){try{li=0;var o=v(e,t,n,r);return ci=null,o}catch(a){if(a===$o||a===ei)throw a;var i=Br(29,a,null,e.mode);return i.lanes=r,i.return=e,i}}}var pi=fi(!0),gi=fi(!1),mi=!1;function yi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function wi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&fl)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=Dr(e),jr(e,null,n),t}return Or(e,r,t,n),Dr(e)}function _i(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,je(e,n)}}function Ci(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ei=!1;function Si(){if(Ei){if(null!==Wo)throw Wo}}function Ai(e,t,n,r){Ei=!1;var o=e.updateQueue;mi=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var c=s,l=c.next;c.next=null,null===a?i=l:a.next=l,a=c;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(null!==i){var d=o.baseState;for(a=0,u=l=c=null,s=i;;){var h=-536870913&s.lane,p=h!==s.lane;if(p?(ml&h)===h:(r&h)===h){0!==h&&h===Go&&(Ei=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var g=e,m=s;h=t;var y=n;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){d=g.call(y,d,h);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(h="function"===typeof(g=m.payload)?g.call(y,d,h):g)||void 0===h)break e;d=f({},d,h);break e;case 2:mi=!0}}null!==(h=s.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=o.callbacks)?o.callbacks=[h]:p.push(h))}else p={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(l=u=p,c=d):u=u.next=p,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(p=s).next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}null===u&&(c=d),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=u,null===i&&(o.shared.lanes=0),Sl|=a,e.lanes=a,e.memoizedState=d}}function Ii(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function xi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ii(n[e],t)}var Ni=F(null),Ti=F(0);function ki(e,t){V(Ti,e=Cl),V(Ni,t),Cl=e|t.baseLanes}function Oi(){V(Ti,Cl),V(Ni,Ni.current)}function Ri(){Cl=Ti.current,U(Ni),U(Ti)}var Pi=F(null),ji=null;function Di(e){var t=e.alternate;V(Ui,1&Ui.current),V(Pi,e),null===ji&&(null===t||null!==Ni.current||null!==t.memoizedState)&&(ji=e)}function Mi(e){V(Ui,Ui.current),V(Pi,e),null===ji&&(ji=e)}function Li(e){22===e.tag?(V(Ui,Ui.current),V(Pi,e),null===ji&&(ji=e)):Bi()}function Bi(){V(Ui,Ui.current),V(Pi,Pi.current)}function Fi(e){U(Pi),ji===e&&(ji=null),U(Ui)}var Ui=F(0);function Vi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Od(n)||Rd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zi=0,Hi=null,Gi=null,Wi=null,qi=!1,Xi=!1,Ki=!1,Yi=0,Qi=0,Zi=null,$i=0;function Ji(){throw Error(a(321))}function ea(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$n(e[n],t[n]))return!1;return!0}function ta(e,t,n,r,o,i){return zi=i,Hi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=null===e||null===e.memoizedState?ms:ys,Ki=!1,i=n(r,o),Ki=!1,Xi&&(i=ra(t,n,r,o)),na(e),i}function na(e){j.H=gs;var t=null!==Gi&&null!==Gi.next;if(zi=0,Wi=Gi=Hi=null,qi=!1,Qi=0,Zi=null,t)throw Error(a(300));null===e||Ps||null!==(e=e.dependencies)&&Oo(e)&&(Ps=!0)}function ra(e,t,n,r){Hi=e;var o=0;do{if(Xi&&(Zi=null),Qi=0,Xi=!1,25<=o)throw Error(a(301));if(o+=1,Wi=Gi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}j.H=vs,i=t(n,r)}while(Xi);return i}function oa(){var e=j.H,t=e.useState()[0];return t="function"===typeof t.then?ua(t):t,e=e.useState()[0],(null!==Gi?Gi.memoizedState:null)!==e&&(Hi.flags|=1024),t}function ia(){var e=0!==Yi;return Yi=0,e}function aa(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function sa(e){if(qi){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}qi=!1}zi=0,Wi=Gi=Hi=null,Xi=!1,Qi=Yi=0,Zi=null}function ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wi?Hi.memoizedState=Wi=e:Wi=Wi.next=e,Wi}function la(){if(null===Gi){var e=Hi.alternate;e=null!==e?e.memoizedState:null}else e=Gi.next;var t=null===Wi?Hi.memoizedState:Wi.next;if(null!==t)Wi=t,Gi=e;else{if(null===e){if(null===Hi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(Gi=e).memoizedState,baseState:Gi.baseState,baseQueue:Gi.baseQueue,queue:Gi.queue,next:null},null===Wi?Hi.memoizedState=Wi=e:Wi=Wi.next=e}return Wi}function ua(e){var t=Qi;return Qi+=1,null===Zi&&(Zi=[]),e=ri(Zi,e,t),t=Hi,null===(null===Wi?t.memoizedState:Wi.next)&&(t=t.alternate,j.H=null===t||null===t.memoizedState?ms:ys),e}function da(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ua(e);if(e.$$typeof===_)return Po(e)}throw Error(a(438,String(e)))}function ha(e){var t=null,n=Hi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Hi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Hi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=N;return t.index++,n}function fa(e,t){return"function"===typeof t?t(e):t}function pa(e){return ga(la(),Gi,e)}function ga(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var o=e.baseQueue,i=r.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}t.baseQueue=o=i,r.pending=null}if(i=e.baseState,null===o)e.memoizedState=i;else{var c=s=null,l=null,u=t=o.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ml&h)===h:(zi&h)===h){var f=u.revertLane;if(0===f)null!==l&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Go&&(d=!0);else{if((zi&f)===f){u=u.next,f===Go&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===l?(c=l=h,s=i):l=l.next=h,Hi.lanes|=f,Sl|=f}h=u.action,Ki&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===l?(c=l=f,s=i):l=l.next=f,Hi.lanes|=h,Sl|=h;u=u.next}while(null!==u&&u!==t);if(null===l?s=i:l.next=c,!$n(i,e.memoizedState)&&(Ps=!0,d&&null!==(n=Wo)))throw n;e.memoizedState=i,e.baseState=s,e.baseQueue=l,r.lastRenderedState=i}return null===o&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ma(e){var t=la(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);$n(i,t.memoizedState)||(Ps=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ya(e,t,n){var r=Hi,o=la(),i=ho;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var s=!$n((Gi||o).memoizedState,n);if(s&&(o.memoizedState=n,Ps=!0),o=o.queue,za(ba.bind(null,r,o,e),[e]),o.getSnapshot!==t||s||null!==Wi&&1&Wi.memoizedState.tag){if(r.flags|=2048,La(9,{destroy:void 0},wa.bind(null,r,o,n,t),null),null===pl)throw Error(a(349));i||0!==(127&zi)||va(r,t,n)}return n}function va(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Hi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Hi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function wa(e,t,n,r){t.value=n,t.getSnapshot=r,_a(t)&&Ca(e)}function ba(e,t,n){return n(function(){_a(t)&&Ca(e)})}function _a(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$n(e,n)}catch(r){return!0}}function Ca(e){var t=Pr(e,2);null!==t&&Kl(t,e,2)}function Ea(e){var t=ca();if("function"===typeof e){var n=e;if(e=n(),Ki){we(!0);try{n()}finally{we(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:e},t}function Sa(e,t,n,r){return e.baseState=n,ga(e,Gi,"function"===typeof r?r:fa)}function Aa(e,t,n,r,o){if(hs(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==j.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,Ia(t,i)):(i.next=n.next,t.pending=n.next=i)}}function Ia(e,t){var n=t.action,r=t.payload,o=e.state;if(t.isTransition){var i=j.T,a={};j.T=a;try{var s=n(o,r),c=j.S;null!==c&&c(a,s),xa(e,t,s)}catch(l){Ta(e,t,l)}finally{null!==i&&null!==a.types&&(i.types=a.types),j.T=i}}else try{xa(e,t,i=n(o,r))}catch(u){Ta(e,t,u)}}function xa(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Na(e,t,n)},function(n){return Ta(e,t,n)}):Na(e,t,n)}function Na(e,t,n){t.status="fulfilled",t.value=n,ka(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Ia(e,n)))}function Ta(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,ka(t),t=t.next}while(t!==r)}e.action=null}function ka(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Oa(e,t){return t}function Ra(e,t){if(ho){var n=pl.formState;if(null!==n){e:{var r=Hi;if(ho){if(uo){t:{for(var o=uo,i=po;8!==o.nodeType;){if(!i){o=null;break t}if(null===(o=Pd(o.nextSibling))){o=null;break t}}o="F!"===(i=o.data)||"F"===i?o:null}if(o){uo=Pd(o.nextSibling),r="F!"===o.data;break e}}mo(r)}r=!1}r&&(t=n[0])}}return(n=ca()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:t},n.queue=r,n=ls.bind(null,Hi,r),r.dispatch=n,r=Ea(!1),i=ds.bind(null,Hi,!1,r.queue),o={state:t,dispatch:null,action:e,pending:null},(r=ca()).queue=o,n=Aa.bind(null,Hi,o,i,n),o.dispatch=n,r.memoizedState=e,[t,n,!1]}function Pa(e){return ja(la(),Gi,e)}function ja(e,t,n){if(t=ga(e,t,Oa)[0],e=pa(fa)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=ua(t)}catch(a){if(a===$o)throw ei;throw a}else r=t;var o=(t=la()).queue,i=o.dispatch;return n!==t.memoizedState&&(Hi.flags|=2048,La(9,{destroy:void 0},Da.bind(null,o,n),null)),[r,i,e]}function Da(e,t){e.action=t}function Ma(e){var t=la(),n=Gi;if(null!==n)return ja(t,n,e);la(),t=t.memoizedState;var r=(n=la()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function La(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Hi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Hi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ba(){return la().memoizedState}function Fa(e,t,n,r){var o=ca();Hi.flags|=e,o.memoizedState=La(1|t,{destroy:void 0},n,void 0===r?null:r)}function Ua(e,t,n,r){var o=la();r=void 0===r?null:r;var i=o.memoizedState.inst;null!==Gi&&null!==r&&ea(r,Gi.memoizedState.deps)?o.memoizedState=La(t,i,n,r):(Hi.flags|=e,o.memoizedState=La(1|t,i,n,r))}function Va(e,t){Fa(8390656,8,e,t)}function za(e,t){Ua(2048,8,e,t)}function Ha(e){var t=la().memoizedState;return function(e){Hi.flags|=4;var t=Hi.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Hi.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&fl))throw Error(a(440));return t.impl.apply(void 0,arguments)}}function Ga(e,t){return Ua(4,2,e,t)}function Wa(e,t){return Ua(4,4,e,t)}function qa(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Xa(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4,4,qa.bind(null,t,e),n)}function Ka(){}function Ya(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ea(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qa(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ea(t,r[1]))return r[0];if(r=e(),Ki){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r}function Za(e,t,n){return void 0===n||0!==(1073741824&zi)&&0===(261930&ml)?e.memoizedState=t:(e.memoizedState=n,e=Xl(),Hi.lanes|=e,Sl|=e,n)}function $a(e,t,n,r){return $n(n,t)?n:null!==Ni.current?(e=Za(e,n,r),$n(e,t)||(Ps=!0),e):0===(42&zi)||0!==(1073741824&zi)&&0===(261930&ml)?(Ps=!0,e.memoizedState=n):(e=Xl(),Hi.lanes|=e,Sl|=e,t)}function Ja(e,t,n,r,o){var i=D.p;D.p=0!==i&&8>i?i:8;var a=j.T,s={};j.T=s,ds(e,!1,t,n);try{var c=o(),l=j.S;if(null!==l&&l(s,c),null!==c&&"object"===typeof c&&"function"===typeof c.then)us(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(c,r),ql());else us(e,t,r,ql())}catch(u){us(e,t,{then:function(){},status:"rejected",reason:u},ql())}finally{D.p=i,null!==a&&null!==s.types&&(a.types=s.types),j.T=a}}function es(){}function ts(e,t,n,r){if(5!==e.tag)throw Error(a(476));var o=ns(e).queue;Ja(e,o,t,M,null===n?es:function(){return rs(e),n(r)})}function ns(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function rs(e){var t=ns(e);null===t.next&&(t=e.alternate.memoizedState),us(e,t.next.queue,{},ql())}function os(){return Po(uh)}function is(){return la().memoizedState}function as(){return la().memoizedState}function ss(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=ql(),r=bi(t,e=wi(n),n);return null!==r&&(Kl(r,t,n),_i(r,t,n)),t={cache:Uo()},void(e.payload=t)}t=t.return}}function cs(e,t,n){var r=ql();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},hs(e)?fs(t,n):null!==(n=Rr(e,t,n,r))&&(Kl(n,e,r),ps(n,t,r))}function ls(e,t,n){us(e,t,n,ql())}function us(e,t,n,r){var o={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(hs(e))fs(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,$n(s,a))return Or(e,t,o,0),null===pl&&kr(),!1}catch(c){}if(null!==(n=Rr(e,t,o,r)))return Kl(n,e,r),ps(n,t,r),!0}return!1}function ds(e,t,n,r){if(r={lane:2,revertLane:zu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},hs(e)){if(t)throw Error(a(479))}else null!==(t=Rr(e,n,r,2))&&Kl(t,e,2)}function hs(e){var t=e.alternate;return e===Hi||null!==t&&t===Hi}function fs(e,t){Xi=qi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ps(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,je(e,n)}}var gs={readContext:Po,use:da,useCallback:Ji,useContext:Ji,useEffect:Ji,useImperativeHandle:Ji,useLayoutEffect:Ji,useInsertionEffect:Ji,useMemo:Ji,useReducer:Ji,useRef:Ji,useState:Ji,useDebugValue:Ji,useDeferredValue:Ji,useTransition:Ji,useSyncExternalStore:Ji,useId:Ji,useHostTransitionStatus:Ji,useFormState:Ji,useActionState:Ji,useOptimistic:Ji,useMemoCache:Ji,useCacheRefresh:Ji};gs.useEffectEvent=Ji;var ms={readContext:Po,use:da,useCallback:function(e,t){return ca().memoizedState=[e,void 0===t?null:t],e},useContext:Po,useEffect:Va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Fa(4194308,4,qa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fa(4194308,4,e,t)},useInsertionEffect:function(e,t){Fa(4,2,e,t)},useMemo:function(e,t){var n=ca();t=void 0===t?null:t;var r=e();if(Ki){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=ca();if(void 0!==n){var o=n(t);if(Ki){we(!0);try{n(t)}finally{we(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=cs.bind(null,Hi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ca().memoizedState=e},useState:function(e){var t=(e=Ea(e)).queue,n=ls.bind(null,Hi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ka,useDeferredValue:function(e,t){return Za(ca(),e,t)},useTransition:function(){var e=Ea(!1);return e=Ja.bind(null,Hi,e.queue,!0,!1),ca().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Hi,o=ca();if(ho){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===pl)throw Error(a(349));0!==(127&ml)||va(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Va(ba.bind(null,r,i,e),[e]),r.flags|=2048,La(9,{destroy:void 0},wa.bind(null,r,i,n,t),null),n},useId:function(){var e=ca(),t=pl.identifierPrefix;if(ho){var n=ro;t="_"+t+"R_"+(n=(no&~(1<<32-be(no)-1)).toString(32)+n),0<(n=Yi++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=$i++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:os,useFormState:Ra,useActionState:Ra,useOptimistic:function(e){var t=ca();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ds.bind(null,Hi,!0,n),n.dispatch=t,[e,t]},useMemoCache:ha,useCacheRefresh:function(){return ca().memoizedState=ss.bind(null,Hi)},useEffectEvent:function(e){var t=ca(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&fl))throw Error(a(440));return n.impl.apply(void 0,arguments)}}},ys={readContext:Po,use:da,useCallback:Ya,useContext:Po,useEffect:za,useImperativeHandle:Xa,useInsertionEffect:Ga,useLayoutEffect:Wa,useMemo:Qa,useReducer:pa,useRef:Ba,useState:function(){return pa(fa)},useDebugValue:Ka,useDeferredValue:function(e,t){return $a(la(),Gi.memoizedState,e,t)},useTransition:function(){var e=pa(fa)[0],t=la().memoizedState;return["boolean"===typeof e?e:ua(e),t]},useSyncExternalStore:ya,useId:is,useHostTransitionStatus:os,useFormState:Pa,useActionState:Pa,useOptimistic:function(e,t){return Sa(la(),0,e,t)},useMemoCache:ha,useCacheRefresh:as};ys.useEffectEvent=Ha;var vs={readContext:Po,use:da,useCallback:Ya,useContext:Po,useEffect:za,useImperativeHandle:Xa,useInsertionEffect:Ga,useLayoutEffect:Wa,useMemo:Qa,useReducer:ma,useRef:Ba,useState:function(){return ma(fa)},useDebugValue:Ka,useDeferredValue:function(e,t){var n=la();return null===Gi?Za(n,e,t):$a(n,Gi.memoizedState,e,t)},useTransition:function(){var e=ma(fa)[0],t=la().memoizedState;return["boolean"===typeof e?e:ua(e),t]},useSyncExternalStore:ya,useId:is,useHostTransitionStatus:os,useFormState:Ma,useActionState:Ma,useOptimistic:function(e,t){var n=la();return null!==Gi?Sa(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ha,useCacheRefresh:as};function ws(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}vs.useEffectEvent=Ha;var bs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ql(),o=wi(r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=bi(e,o,r))&&(Kl(t,e,r),_i(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ql(),o=wi(r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=bi(e,o,r))&&(Kl(t,e,r),_i(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ql(),r=wi(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=bi(e,r,n))&&(Kl(t,e,n),_i(t,e,n))}};function _s(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,r)||!Jn(o,i))}function Cs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bs.enqueueReplaceState(t,t.state,null)}function Es(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var o in n===t&&(n=f({},n)),e)void 0===n[o]&&(n[o]=e[o]);return n}function Ss(e){Ir(e)}function As(e){console.error(e)}function Is(e){Ir(e)}function xs(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ns(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ts(e,t,n){return(n=wi(n)).tag=3,n.payload={element:null},n.callback=function(){xs(e,t)},n}function ks(e){return(e=wi(e)).tag=3,e}function Os(e,t,n,r){var o=n.type.getDerivedStateFromError;if("function"===typeof o){var i=r.value;e.payload=function(){return o(i)},e.callback=function(){Ns(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){Ns(t,n,r),"function"!==typeof o&&(null===Ml?Ml=new Set([this]):Ml.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Rs=Error(a(461)),Ps=!1;function js(e,t,n,r){t.child=null===e?gi(t,null,n,r):pi(t,e.child,n,r)}function Ds(e,t,n,r,o){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return Ro(t),r=ta(e,t,n,a,i,o),s=ia(),null===e||Ps?(ho&&s&&ao(t),t.flags|=1,js(e,t,r,o),t.child):(aa(e,t,o),oc(e,t,o))}function Ms(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Fr(i)||void 0!==i.defaultProps||null!==n.compare?((e=zr(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ls(e,t,i,r,o))}if(i=e.child,!ic(e,o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(a,r)&&e.ref===t.ref)return oc(e,t,o)}return t.flags|=1,(e=Ur(i,r)).ref=t.ref,e.return=t,t.child=e}function Ls(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(Jn(i,r)&&e.ref===t.ref){if(Ps=!1,t.pendingProps=r=i,!ic(e,o))return t.lanes=e.lanes,oc(e,t,o);0!==(131072&e.flags)&&(Ps=!0)}}return Gs(e,t,n,r,o)}function Bs(e,t,n,r){var o=r.children,i=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(i=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,o=0;null!==r;)o=o|r.lanes|r.childLanes,r=r.sibling;r=o&~i}else r=0,t.child=null;return Us(e,t,i,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Us(e,t,null!==i?i.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Qo(0,null!==i?i.cachePool:null),null!==i?ki(t,i):Oi(),Li(t)}else null!==i?(Qo(0,i.cachePool),ki(t,i),Bi(),t.memoizedState=null):(null!==e&&Qo(0,null),Oi(),Bi());return js(e,t,o,n),t.child}function Fs(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Us(e,t,n,r,o){var i=Yo();return i=null===i?null:{parent:Fo._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Qo(0,null),Oi(),Li(t),null!==e&&ko(e,t,r,!0),t.childLanes=o,null}function Vs(e,t){return(t=Js({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function zs(e,t,n){return pi(t,e.child,null,n),(e=Vs(t,t.pendingProps)).flags|=2,Fi(t),t.memoizedState=null,e}function Hs(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Gs(e,t,n,r,o){return Ro(t),n=ta(e,t,n,r,void 0,o),r=ia(),null===e||Ps?(ho&&r&&ao(t),t.flags|=1,js(e,t,n,o),t.child):(aa(e,t,o),oc(e,t,o))}function Ws(e,t,n,r,o,i){return Ro(t),t.updateQueue=null,n=ra(t,r,n,o),na(e),r=ia(),null===e||Ps?(ho&&r&&ao(t),t.flags|=1,js(e,t,n,i),t.child):(aa(e,t,i),oc(e,t,i))}function qs(e,t,n,r,o){if(Ro(t),null===t.stateNode){var i=Mr,a=n.contextType;"object"===typeof a&&null!==a&&(i=Po(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=bs,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},yi(t),a=n.contextType,i.context="object"===typeof a&&null!==a?Po(a):Mr,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(ws(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&bs.enqueueReplaceState(i,i.state,null),Ai(t,r,i,o),Si(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var s=t.memoizedProps,c=Es(n,s);i.props=c;var l=i.context,u=n.contextType;a=Mr,"object"===typeof u&&null!==u&&(a=Po(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s||l!==a)&&Cs(t,i,r,a),mi=!1;var h=t.memoizedState;i.state=h,Ai(t,r,i,o),Si(),l=t.memoizedState,s||h!==l||mi?("function"===typeof d&&(ws(t,n,d,r),l=t.memoizedState),(c=mi||_s(t,n,c,r,h,l,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=a,r=c):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,vi(e,t),u=Es(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,l=n.contextType,c=Mr,"object"===typeof l&&null!==l&&(c=Po(l)),(l="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==c)&&Cs(t,i,r,c),mi=!1,h=t.memoizedState,i.state=h,Ai(t,r,i,o),Si();var f=t.memoizedState;a!==d||h!==f||mi||null!==e&&null!==e.dependencies&&Oo(e.dependencies)?("function"===typeof s&&(ws(t,n,s,r),f=t.memoizedState),(u=mi||_s(t,n,u,r,h,f,c)||null!==e&&null!==e.dependencies&&Oo(e.dependencies))?(l||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,c),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=c,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Hs(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=pi(t,e.child,null,o),t.child=pi(t,null,n,o)):js(e,t,n,o),t.memoizedState=i.state,e=t.child):e=oc(e,t,o),e}function Xs(e,t,n,r){return bo(),t.flags|=256,js(e,t,n,r),t.child}var Ks={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ys(e){return{baseLanes:e,cachePool:Zo()}}function Qs(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=xl),e}function Zs(e,t,n){var r,o=t.pendingProps,i=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Ui.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(ho){if(i?Di(t):Bi(),(e=uo)?null!==(e=null!==(e=kd(e,po))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==to?{id:no,overflow:ro}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,lo=t,uo=null):e=null,null===e)throw mo(t);return Rd(e)?t.lanes=32:t.lanes=536870912,null}var c=o.children;return o=o.fallback,i?(Bi(),c=Js({mode:"hidden",children:c},i=t.mode),o=Hr(o,i,n,null),c.return=t,o.return=t,c.sibling=o,t.child=c,(o=t.child).memoizedState=Ys(n),o.childLanes=Qs(e,r,n),t.memoizedState=Ks,Fs(null,o)):(Di(t),$s(t,c))}var l=e.memoizedState;if(null!==l&&null!==(c=l.dehydrated)){if(s)256&t.flags?(Di(t),t.flags&=-257,t=ec(e,t,n)):null!==t.memoizedState?(Bi(),t.child=e.child,t.flags|=128,t=null):(Bi(),c=o.fallback,i=t.mode,o=Js({mode:"visible",children:o.children},i),(c=Hr(c,i,n,null)).flags|=2,o.return=t,c.return=t,o.sibling=c,t.child=o,pi(t,e.child,null,n),(o=t.child).memoizedState=Ys(n),o.childLanes=Qs(e,r,n),t.memoizedState=Ks,t=Fs(null,o));else if(Di(t),Rd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(o=Error(a(419))).stack="",o.digest=r,Co({value:o,source:null,stack:null}),t=ec(e,t,n)}else if(Ps||ko(e,t,n,!1),r=0!==(n&e.childLanes),Ps||r){if(null!==(r=pl)&&(0!==(o=De(r,n))&&o!==l.retryLane))throw l.retryLane=o,Pr(e,o),Kl(r,e,o),Rs;Od(c)||au(),t=ec(e,t,n)}else Od(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,uo=Pd(c.nextSibling),lo=t,ho=!0,fo=null,po=!1,null!==e&&co(t,e),(t=$s(t,o.children)).flags|=4096);return t}return i?(Bi(),c=o.fallback,i=t.mode,u=(l=e.child).sibling,(o=Ur(l,{mode:"hidden",children:o.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?c=Ur(u,c):(c=Hr(c,i,n,null)).flags|=2,c.return=t,o.return=t,o.sibling=c,t.child=o,Fs(null,o),o=t.child,null===(c=e.child.memoizedState)?c=Ys(n):(null!==(i=c.cachePool)?(l=Fo._currentValue,i=i.parent!==l?{parent:l,pool:l}:i):i=Zo(),c={baseLanes:c.baseLanes|n,cachePool:i}),o.memoizedState=c,o.childLanes=Qs(e,r,n),t.memoizedState=Ks,Fs(e.child,o)):(Di(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function $s(e,t){return(t=Js({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Js(e,t){return(e=Br(22,e,null,t)).lanes=0,e}function ec(e,t,n){return pi(t,e.child,null,n),(e=$s(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tc(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),No(e.return,t,n)}function nc(e,t,n,r,o,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,treeForkCount:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o,a.treeForkCount=i)}function rc(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;r=r.children;var a=Ui.current,s=0!==(2&a);if(s?(a=1&a|2,t.flags|=128):a&=1,V(Ui,a),js(e,t,r,n),r=ho?$r:0,!s&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tc(e,n,t);else if(19===e.tag)tc(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Vi(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),nc(t,!1,o,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Vi(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}nc(t,!0,n,null,i,r);break;case"together":nc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function oc(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Sl|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ko(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ic(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Oo(e))}function ac(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ps=!0;else{if(!ic(e,n)&&0===(128&t.flags))return Ps=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),Io(0,Fo,e.memoizedState.cache),bo();break;case 27:case 5:Q(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:Io(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Mi(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Di(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Zs(e,t,n):(Di(t),null!==(e=oc(e,t,n))?e.sibling:null);Di(t);break;case 19:var o=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(ko(e,t,n,!1),r=0!==(n&t.childLanes)),o){if(r)return rc(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),V(Ui,Ui.current),r)break;return null;case 22:return t.lanes=0,Bs(e,t,n,t.pendingProps);case 24:Io(0,Fo,e.memoizedState.cache)}return oc(e,t,n)}(e,t,n);Ps=0!==(131072&e.flags)}else Ps=!1,ho&&0!==(1048576&t.flags)&&io(t,$r,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=oi(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var o=e.$$typeof;if(o===C){t.tag=11,t=Ds(null,t,e,r,n);break e}if(o===A){t.tag=14,t=Ms(null,t,e,r,n);break e}}throw t=R(e)||e,Error(a(306,t,""))}Fr(e)?(r=Es(e,r),t.tag=1,t=qs(null,t,e,r,n)):(t.tag=0,t=Gs(null,t,e,r,n))}return t;case 0:return Gs(e,t,t.type,t.pendingProps,n);case 1:return qs(e,t,r=t.type,o=Es(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var i=t.memoizedState;o=i.element,vi(e,t),Ai(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Io(0,Fo,r),r!==i.cache&&To(t,[Fo],n,!0),Si(),r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Xs(e,t,r,n);break e}if(r!==o){Co(o=Kr(Error(a(424)),t)),t=Xs(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(uo=Pd(e.firstChild),lo=t,ho=!0,fo=null,po=!0,n=gi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(bo(),r===o){t=oc(e,t,n);break e}js(e,t,r,n)}t=t.child}return t;case 26:return Hs(e,t),null===e?(n=Wd(t.type,null,t.pendingProps,null))?t.memoizedState=n:ho||(n=t.type,e=t.pendingProps,(r=md(q.current).createElement(n))[Ve]=t,r[ze]=e,hd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Wd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&ho&&(r=t.stateNode=Ld(t.type,t.pendingProps,q.current),lo=t,po=!0,o=uo,Id(t.type)?(jd=o,uo=Pd(r.firstChild)):uo=o),js(e,t,t.pendingProps.children,n),Hs(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ho&&((o=r=uo)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ke])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==o.rel||e.getAttribute("href")!==(null==o.href||""===o.href?null:o.href)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin)||e.getAttribute("title")!==(null==o.title?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==o.src?null:o.src)||e.getAttribute("type")!==(null==o.type?null:o.type)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==o.name?null:""+o.name;if("hidden"===o.type&&e.getAttribute("name")===i)return e}if(null===(e=Pd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,po))?(t.stateNode=r,lo=t,uo=Pd(r.firstChild),po=!1,o=!0):o=!1),o||mo(t)),Q(t),o=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,r=i.children,wd(o,i)?r=null:null!==s&&wd(o,s)&&(t.flags|=32),null!==t.memoizedState&&(o=ta(e,t,oa,null,null,n),uh._currentValue=o),Hs(e,t),js(e,t,r,n),t.child;case 6:return null===e&&ho&&((e=n=uo)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Pd(e.nextSibling)))return null}return e}(n,t.pendingProps,po))?(t.stateNode=n,lo=t,uo=null,e=!0):e=!1),e||mo(t)),null;case 13:return Zs(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=pi(t,null,r,n):js(e,t,r,n),t.child;case 11:return Ds(e,t,t.type,t.pendingProps,n);case 7:return js(e,t,t.pendingProps,n),t.child;case 8:case 12:return js(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Io(0,t.type,r.value),js(e,t,r.children,n),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,Ro(t),r=r(o=Po(o)),t.flags|=1,js(e,t,r,n),t.child;case 14:return Ms(e,t,t.type,t.pendingProps,n);case 15:return Ls(e,t,t.type,t.pendingProps,n);case 19:return rc(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,o=0!==(128&t.flags);if(t.flags&=-129,null===e){if(ho){if("hidden"===r.mode)return e=Vs(t,r),t.lanes=536870912,Fs(null,e);if(Mi(t),(e=uo)?null!==(e=null!==(e=kd(e,po))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==to?{id:no,overflow:ro}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,lo=t,uo=null):e=null,null===e)throw mo(t);return t.lanes=536870912,null}return Vs(t,r)}var i=e.memoizedState;if(null!==i){var s=i.dehydrated;if(Mi(t),o)if(256&t.flags)t.flags&=-257,t=zs(e,t,n);else{if(null===t.memoizedState)throw Error(a(558));t.child=e.child,t.flags|=128,t=null}else if(Ps||ko(e,t,n,!1),o=0!==(n&e.childLanes),Ps||o){if(null!==(r=pl)&&0!==(s=De(r,n))&&s!==i.retryLane)throw i.retryLane=s,Pr(e,s),Kl(r,e,s),Rs;au(),t=zs(e,t,n)}else e=i.treeContext,uo=Pd(s.nextSibling),lo=t,ho=!0,fo=null,po=!1,null!==e&&co(t,e),(t=Vs(t,r)).flags|=4096;return t}return(e=Ur(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Bs(e,t,n,t.pendingProps);case 24:return Ro(t),r=Po(Fo),null===e?(null===(o=Yo())&&(o=pl,i=Uo(),o.pooledCache=i,i.refCount++,null!==i&&(o.pooledCacheLanes|=n),o=i),t.memoizedState={parent:r,cache:o},yi(t),Io(0,Fo,o)):(0!==(e.lanes&n)&&(vi(e,t),Ai(t,null,null,n),Si()),o=e.memoizedState,i=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),Io(0,Fo,r)):(r=i.cache,Io(0,Fo,r),r!==o.cache&&To(t,[Fo],n,!0))),js(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function sc(e){e.flags|=4}function cc(e,t,n,r,o){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&o)===o)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw ii=ti,Jo;e.flags|=8192}}else e.flags&=-16777217}function lc(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!oh(t)){if(!ru())throw ii=ti,Jo;e.flags|=8192}}function uc(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,Nl|=t)}function dc(e,t){if(!ho)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hc(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=65011712&o.subtreeFlags,r|=65011712&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fc(e,t,n){var r=t.pendingProps;switch(so(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hc(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),xo(Fo),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(wo(t)?sc(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,_o())),hc(t),null;case 26:var o=t.type,i=t.memoizedState;return null===e?(sc(t),null!==i?(hc(t),lc(t,i)):(hc(t),cc(t,o,0,0,n))):i?i!==e.memoizedState?(sc(t),hc(t),lc(t,i)):(hc(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&sc(t),hc(t),cc(t,o,0,0,n)),null;case 27:if(Z(t),n=q.current,o=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sc(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return hc(t),null}e=G.current,wo(t)?yo(t):(e=Ld(o,r,n),t.stateNode=e,sc(t))}return hc(t),null;case 5:if(Z(t),o=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sc(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return hc(t),null}if(i=G.current,wo(t))yo(t);else{var s=md(q.current);switch(i){case 1:i=s.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=s.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=s.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=s.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":(i=s.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?i.multiple=!0:r.size&&(i.size=r.size);break;default:i="string"===typeof r.is?s.createElement(o,{is:r.is}):s.createElement(o)}}i[Ve]=t,i[ze]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)i.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=i;e:switch(hd(i,o,r),o){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&sc(t)}}return hc(t),cc(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&sc(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=q.current,wo(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(o=lo))switch(o.tag){case 27:case 5:r=o.memoizedProps}e[Ve]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||ld(e.nodeValue,n)))||mo(t,!0)}else(e=md(e).createTextNode(r))[Ve]=t,t.stateNode=e}return hc(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=wo(t),null!==n){if(null===e){if(!r)throw Error(a(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(557));e[Ve]=t}else bo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hc(t),e=!1}else n=_o(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Fi(t),t):(Fi(t),null);if(0!==(128&t.flags))throw Error(a(558))}return hc(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=wo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[Ve]=t}else bo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hc(t),o=!1}else o=_o(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(Fi(t),t):(Fi(t),null)}return Fi(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(o=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(o=r.alternate.memoizedState.cachePool.pool),i=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==o&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),uc(t,t.updateQueue),hc(t),null);case 4:return Y(),null===e&&Ju(t.stateNode.containerInfo),hc(t),null;case 10:return xo(t.type),hc(t),null;case 19:if(U(Ui),null===(r=t.memoizedState))return hc(t),null;if(o=0!==(128&t.flags),null===(i=r.rendering))if(o)dc(r,!1);else{if(0!==El||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=Vi(e))){for(t.flags|=128,dc(r,!1),e=i.updateQueue,t.updateQueue=e,uc(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vr(n,e),n=n.sibling;return V(Ui,1&Ui.current|2),ho&&oo(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&ce()>jl&&(t.flags|=128,o=!0,dc(r,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=Vi(i))){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,uc(t,e),dc(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!ho)return hc(t),null}else 2*ce()-r.renderingStartTime>jl&&536870912!==n&&(t.flags|=128,o=!0,dc(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=r.last)?e.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ce(),e.sibling=null,n=Ui.current,V(Ui,o?1&n|2:1&n),ho&&oo(t,r.treeForkCount),e):(hc(t),null);case 22:case 23:return Fi(t),Ri(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(hc(t),6&t.subtreeFlags&&(t.flags|=8192)):hc(t),null!==(n=t.updateQueue)&&uc(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&U(Ko),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xo(Fo),hc(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function pc(e,t){switch(so(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xo(Fo),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Z(t),null;case 31:if(null!==t.memoizedState){if(Fi(t),null===t.alternate)throw Error(a(340));bo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Fi(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));bo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(Ui),null;case 4:return Y(),null;case 10:return xo(t.type),null;case 22:case 23:return Fi(t),Ri(),null!==e&&U(Ko),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xo(Fo),null;default:return null}}function gc(e,t){switch(so(t),t.tag){case 3:xo(Fo),Y();break;case 26:case 27:case 5:Z(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&Fi(t);break;case 13:Fi(t);break;case 19:U(Ui);break;case 10:xo(t.type);break;case 22:case 23:Fi(t),Ri(),null!==e&&U(Ko);break;case 24:xo(Fo)}}function mc(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var o=r.next;n=o;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==o)}}catch(s){Eu(t,t.return,s)}}function yc(e,t,n){try{var r=t.updateQueue,o=null!==r?r.lastEffect:null;if(null!==o){var i=o.next;r=i;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,o=t;var c=n,l=s;try{l()}catch(u){Eu(o,c,u)}}}r=r.next}while(r!==i)}}catch(u){Eu(t,t.return,u)}}function vc(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{xi(t,n)}catch(r){Eu(e,e.return,r)}}}function wc(e,t,n){n.props=Es(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Eu(e,t,r)}}function bc(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(o){Eu(e,t,o)}}function _c(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(o){Eu(e,t,o)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){Eu(e,t,i)}else n.current=null}function Cc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(o){Eu(e,e.return,o)}}function Ec(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,i=null,s=null,c=null,l=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":l=h;default:r.hasOwnProperty(p)||ud(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":i=p;break;case"name":o=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":s=p;break;case"defaultValue":c=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==h&&ud(e,t,f,p,r,h)}}return void vt(e,s,c,l,u,d,i,o);case"select":for(i in p=s=c=f=null,n)if(l=n[i],n.hasOwnProperty(i)&&null!=l)switch(i){case"value":break;case"multiple":p=l;default:r.hasOwnProperty(i)||ud(e,t,i,null,r,l)}for(o in r)if(i=r[o],l=n[o],r.hasOwnProperty(o)&&(null!=i||null!=l))switch(o){case"value":f=i;break;case"defaultValue":c=i;break;case"multiple":s=i;default:i!==l&&ud(e,t,o,i,r,l)}return t=c,n=s,r=p,void(null!=f?_t(e,!!n,f,!1):!!r!==!!n&&(null!=t?_t(e,!!n,t,!0):_t(e,!!n,n?[]:"",!1)));case"textarea":for(c in p=f=null,n)if(o=n[c],n.hasOwnProperty(c)&&null!=o&&!r.hasOwnProperty(c))switch(c){case"value":case"children":break;default:ud(e,t,c,null,r,o)}for(s in r)if(o=r[s],i=n[s],r.hasOwnProperty(s)&&(null!=o||null!=i))switch(s){case"value":f=o;break;case"defaultValue":p=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(a(91));break;default:o!==i&&ud(e,t,s,o,r,i)}return void Ct(e,f,p);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else ud(e,t,g,null,r,f);for(l in r)if(f=r[l],p=n[l],r.hasOwnProperty(l)&&f!==p&&(null!=f||null!=p))if("selected"===l)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else ud(e,t,l,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&ud(e,t,m,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:ud(e,t,u,f,r,p)}return;default:if(Nt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&dd(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||dd(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&ud(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||ud(e,t,h,f,r,p)}(r,e.type,n,t),r[ze]=t}catch(o){Eu(e,e.return,o)}}function Sc(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Id(e.type)||4===e.tag}function Ac(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Id(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Ic(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Rt));else if(4!==r&&(27===r&&Id(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Ic(e,t,n),e=e.sibling;null!==e;)Ic(e,t,n),e=e.sibling}function xc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Id(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(xc(e,t,n),e=e.sibling;null!==e;)xc(e,t,n),e=e.sibling}function Nc(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);hd(t,r,n),t[Ve]=e,t[ze]=n}catch(i){Eu(e,e.return,i)}}var Tc=!1,kc=!1,Oc=!1,Rc="function"===typeof WeakSet?WeakSet:Set,Pc=null;function jc(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Kc(e,n),4&r&&mc(5,n);break;case 1:if(Kc(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){Eu(n,n.return,a)}else{var o=Es(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){Eu(n,n.return,s)}}64&r&&vc(n),512&r&&bc(n,n.return);break;case 3:if(Kc(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{xi(e,t)}catch(a){Eu(n,n.return,a)}}break;case 27:null===t&&4&r&&Nc(n);case 26:case 5:Kc(e,n),null===t&&4&r&&Cc(n),512&r&&bc(n,n.return);break;case 12:Kc(e,n);break;case 31:Kc(e,n),4&r&&Uc(e,n);break;case 13:Kc(e,n),4&r&&Vc(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=xu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Tc)){t=null!==t&&null!==t.memoizedState||kc,o=Tc;var i=kc;Tc=r,(kc=t)&&!i?Qc(e,n,0!==(8772&n.subtreeFlags)):Kc(e,n),Tc=o,kc=i}break;case 30:break;default:Kc(e,n)}}function Dc(e){var t=e.alternate;null!==t&&(e.alternate=null,Dc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Mc=null,Lc=!1;function Bc(e,t,n){for(n=n.child;null!==n;)Fc(e,t,n),n=n.sibling}function Fc(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(i){}switch(n.tag){case 26:kc||_c(n,t),Bc(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:kc||_c(n,t);var r=Mc,o=Lc;Id(n.type)&&(Mc=n.stateNode,Lc=!1),Bc(e,t,n),Bd(n.stateNode),Mc=r,Lc=o;break;case 5:kc||_c(n,t);case 6:if(r=Mc,o=Lc,Mc=null,Bc(e,t,n),Lc=o,null!==(Mc=r))if(Lc)try{(9===Mc.nodeType?Mc.body:"HTML"===Mc.nodeName?Mc.ownerDocument.body:Mc).removeChild(n.stateNode)}catch(a){Eu(n,t,a)}else try{Mc.removeChild(n.stateNode)}catch(a){Eu(n,t,a)}break;case 18:null!==Mc&&(Lc?(xd(9===(e=Mc).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Gh(e)):xd(Mc,n.stateNode));break;case 4:r=Mc,o=Lc,Mc=n.stateNode.containerInfo,Lc=!0,Bc(e,t,n),Mc=r,Lc=o;break;case 0:case 11:case 14:case 15:yc(2,n,t),kc||yc(4,n,t),Bc(e,t,n);break;case 1:kc||(_c(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&wc(n,t,r)),Bc(e,t,n);break;case 21:Bc(e,t,n);break;case 22:kc=(r=kc)||null!==n.memoizedState,Bc(e,t,n),kc=r;break;default:Bc(e,t,n)}}function Uc(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Gh(e)}catch(n){Eu(t,t.return,n)}}}function Vc(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Gh(e)}catch(n){Eu(t,t.return,n)}}function zc(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Rc),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Rc),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Nu.bind(null,e,t);t.then(r,r)}})}function Hc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r],i=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 27:if(Id(c.type)){Mc=c.stateNode,Lc=!1;break e}break;case 5:Mc=c.stateNode,Lc=!1;break e;case 3:case 4:Mc=c.stateNode.containerInfo,Lc=!0;break e}c=c.return}if(null===Mc)throw Error(a(160));Fc(i,s,o),Mc=null,Lc=!1,null!==(i=o.alternate)&&(i.return=null),o.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Wc(t,e),t=t.sibling}var Gc=null;function Wc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hc(t,e),qc(e),4&r&&(yc(3,e,e.return),mc(3,e),yc(5,e,e.return));break;case 1:Hc(t,e),qc(e),512&r&&(kc||null===n||_c(n,n.return)),64&r&&Tc&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var o=Gc;if(Hc(t,e),qc(e),512&r&&(kc||null===n||_c(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":(!(i=o.getElementsByTagName("title")[0])||i[Ke]||i[Ve]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=o.createElement(r),o.head.insertBefore(i,o.querySelector("head > title"))),hd(i,r,n),i[Ve]=e,et(i),r=i;break e;case"link":var s=nh("link","href",o).get(r+(n.href||""));if(s)for(var c=0;c<s.length;c++)if((i=s[c]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(c,1);break t}hd(i=o.createElement(r),r,n),o.head.appendChild(i);break;case"meta":if(s=nh("meta","content",o).get(r+(n.content||"")))for(c=0;c<s.length;c++)if((i=s[c]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(c,1);break t}hd(i=o.createElement(r),r,n),o.head.appendChild(i);break;default:throw Error(a(468,r))}i[Ve]=e,et(i),r=i}e.stateNode=r}else rh(o,e.type,e.stateNode);else e.stateNode=Zd(o,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?rh(o,e.type,e.stateNode):Zd(o,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Ec(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hc(t,e),qc(e),512&r&&(kc||null===n||_c(n,n.return)),null!==n&&4&r&&Ec(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hc(t,e),qc(e),512&r&&(kc||null===n||_c(n,n.return)),32&e.flags){o=e.stateNode;try{St(o,"")}catch(g){Eu(e,e.return,g)}}4&r&&null!=e.stateNode&&Ec(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&r&&(Oc=!0);break;case 6:if(Hc(t,e),qc(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(g){Eu(e,e.return,g)}}break;case 3:if(th=null,o=Gc,Gc=Vd(t.containerInfo),Hc(t,e),Gc=o,qc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gh(t.containerInfo)}catch(g){Eu(e,e.return,g)}Oc&&(Oc=!1,Xc(e));break;case 4:r=Gc,Gc=Vd(e.stateNode.containerInfo),Hc(t,e),qc(e),Gc=r;break;case 12:default:Hc(t,e),qc(e);break;case 31:case 19:Hc(t,e),qc(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,zc(e,r)));break;case 13:Hc(t,e),qc(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Rl=ce()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,zc(e,r)));break;case 22:o=null!==e.memoizedState;var l=null!==n&&null!==n.memoizedState,u=Tc,d=kc;if(Tc=u||o,kc=d||l,Hc(t,e),kc=d,Tc=u,qc(e),8192&r)e:for(t=e.stateNode,t._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===n||l||Tc||kc||Yc(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){l=n=t;try{if(i=l.stateNode,o)"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{c=l.stateNode;var h=l.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;c.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(g){Eu(l,l.return,g)}}}else if(6===t.tag){if(null===n){l=t;try{l.stateNode.nodeValue=o?"":l.memoizedProps}catch(g){Eu(l,l.return,g)}}}else if(18===t.tag){if(null===n){l=t;try{var p=l.stateNode;o?Nd(p,!0):Nd(l.stateNode,!1)}catch(g){Eu(l,l.return,g)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,zc(e,n))));case 30:case 21:}}function qc(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(Sc(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var o=n.stateNode;xc(e,Ac(e),o);break;case 5:var i=n.stateNode;32&n.flags&&(St(i,""),n.flags&=-33),xc(e,Ac(e),i);break;case 3:case 4:var s=n.stateNode.containerInfo;Ic(e,Ac(e),s);break;default:throw Error(a(161))}}catch(c){Eu(e,e.return,c)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Xc(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Xc(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Kc(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)jc(e,t.alternate,t),t=t.sibling}function Yc(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yc(4,t,t.return),Yc(t);break;case 1:_c(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&wc(t,t.return,n),Yc(t);break;case 27:Bd(t.stateNode);case 26:case 5:_c(t,t.return),Yc(t);break;case 22:null===t.memoizedState&&Yc(t);break;default:Yc(t)}e=e.sibling}}function Qc(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,o=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:Qc(o,i,n),mc(4,i);break;case 1:if(Qc(o,i,n),"function"===typeof(o=(r=i).stateNode).componentDidMount)try{o.componentDidMount()}catch(l){Eu(r,r.return,l)}if(null!==(o=(r=i).updateQueue)){var s=r.stateNode;try{var c=o.shared.hiddenCallbacks;if(null!==c)for(o.shared.hiddenCallbacks=null,o=0;o<c.length;o++)Ii(c[o],s)}catch(l){Eu(r,r.return,l)}}n&&64&a&&vc(i),bc(i,i.return);break;case 27:Nc(i);case 26:case 5:Qc(o,i,n),n&&null===r&&4&a&&Cc(i),bc(i,i.return);break;case 12:Qc(o,i,n);break;case 31:Qc(o,i,n),n&&4&a&&Uc(o,i);break;case 13:Qc(o,i,n),n&&4&a&&Vc(o,i);break;case 22:null===i.memoizedState&&Qc(o,i,n),bc(i,i.return);break;case 30:break;default:Qc(o,i,n)}t=t.sibling}}function Zc(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Vo(n))}function $c(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Vo(e))}function Jc(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)el(e,t,n,r),t=t.sibling}function el(e,t,n,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Jc(e,t,n,r),2048&o&&mc(9,t);break;case 1:case 31:case 13:default:Jc(e,t,n,r);break;case 3:Jc(e,t,n,r),2048&o&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Vo(e)));break;case 12:if(2048&o){Jc(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,s=i.onPostCommit;"function"===typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(c){Eu(t,t.return,c)}}else Jc(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?Jc(e,t,n,r):nl(e,t):2&i._visibility?Jc(e,t,n,r):(i._visibility|=2,tl(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&o&&Zc(a,t);break;case 24:Jc(e,t,n,r),2048&o&&$c(t.alternate,t)}}function tl(e,t,n,r,o){for(o=o&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var i=e,a=t,s=n,c=r,l=a.flags;switch(a.tag){case 0:case 11:case 15:tl(i,a,s,c,o),mc(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?tl(i,a,s,c,o):nl(i,a):(u._visibility|=2,tl(i,a,s,c,o)),o&&2048&l&&Zc(a.alternate,a);break;case 24:tl(i,a,s,c,o),o&&2048&l&&$c(a.alternate,a);break;default:tl(i,a,s,c,o)}t=t.sibling}}function nl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,o=r.flags;switch(r.tag){case 22:nl(n,r),2048&o&&Zc(r.alternate,r);break;case 24:nl(n,r),2048&o&&$c(r.alternate,r);break;default:nl(n,r)}t=t.sibling}}var rl=8192;function ol(e,t,n){if(e.subtreeFlags&rl)for(e=e.child;null!==e;)il(e,t,n),e=e.sibling}function il(e,t,n){switch(e.tag){case 26:ol(e,t,n),e.flags&rl&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var o=qd(r.href),i=t.querySelector(Xd(o));if(i)return null!==(t=i._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ah.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,void et(i);i=t.ownerDocument||t,r=Kd(r),(o=Fd.get(o))&&Jd(r,o),et(i=i.createElement("link"));var a=i;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),hd(i,"link",r),n.instance=i}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=ah.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Gc,e.memoizedState,e.memoizedProps);break;case 5:default:ol(e,t,n);break;case 3:case 4:var r=Gc;Gc=Vd(e.stateNode.containerInfo),ol(e,t,n),Gc=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rl,rl=16777216,ol(e,t,n),rl=r):ol(e,t,n))}}function al(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function sl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Pc=r,ul(r,e)}al(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)cl(e),e=e.sibling}function cl(e){switch(e.tag){case 0:case 11:case 15:sl(e),2048&e.flags&&yc(9,e,e.return);break;case 3:case 12:default:sl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,ll(e)):sl(e)}}function ll(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Pc=r,ul(r,e)}al(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yc(8,t,t.return),ll(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,ll(t));break;default:ll(t)}e=e.sibling}}function ul(e,t){for(;null!==Pc;){var n=Pc;switch(n.tag){case 0:case 11:case 15:yc(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Vo(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Pc=r;else e:for(n=e;null!==Pc;){var o=(r=Pc).sibling,i=r.return;if(Dc(r),r===n){Pc=null;break e}if(null!==o){o.return=i,Pc=o;break e}Pc=i}}}var dl={getCacheForType:function(e){var t=Po(Fo),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Po(Fo).controller.signal}},hl="function"===typeof WeakMap?WeakMap:Map,fl=0,pl=null,gl=null,ml=0,yl=0,vl=null,wl=!1,bl=!1,_l=!1,Cl=0,El=0,Sl=0,Al=0,Il=0,xl=0,Nl=0,Tl=null,kl=null,Ol=!1,Rl=0,Pl=0,jl=1/0,Dl=null,Ml=null,Ll=0,Bl=null,Fl=null,Ul=0,Vl=0,zl=null,Hl=null,Gl=0,Wl=null;function ql(){return 0!==(2&fl)&&0!==ml?ml&-ml:null!==j.T?zu():Be()}function Xl(){if(0===xl)if(0===(536870912&ml)||ho){var e=Se;0===(3932160&(Se<<=1))&&(Se=262144),xl=e}else xl=536870912;return null!==(e=Pi.current)&&(e.flags|=32),xl}function Kl(e,t,n){(e!==pl||2!==yl&&9!==yl)&&null===e.cancelPendingCommit||(tu(e,0),$l(e,ml,xl,!1)),Re(e,n),0!==(2&fl)&&e===pl||(e===pl&&(0===(2&fl)&&(Al|=n),4===El&&$l(e,ml,xl,!1)),Du(e))}function Yl(e,t,n){if(0!==(6&fl))throw Error(a(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Ne(e,t),o=r?function(e,t){var n=fl;fl|=2;var r=ou(),o=iu();pl!==e||ml!==t?(Dl=null,jl=ce()+500,tu(e,t)):bl=Ne(e,t);e:for(;;)try{if(0!==yl&&null!==gl){t=gl;var i=vl;t:switch(yl){case 1:yl=0,vl=null,hu(e,t,i,1);break;case 2:case 9:if(ni(i)){yl=0,vl=null,du(t);break}t=function(){2!==yl&&9!==yl||pl!==e||(yl=7),Du(e)},i.then(t,t);break e;case 3:yl=7;break e;case 4:yl=5;break e;case 7:ni(i)?(yl=0,vl=null,du(t)):(yl=0,vl=null,hu(e,t,i,7));break;case 5:var s=null;switch(gl.tag){case 26:s=gl.memoizedState;case 5:case 27:var c=gl;if(s?oh(s):c.stateNode.complete){yl=0,vl=null;var l=c.sibling;if(null!==l)gl=l;else{var u=c.return;null!==u?(gl=u,fu(u)):gl=null}break t}}yl=0,vl=null,hu(e,t,i,5);break;case 6:yl=0,vl=null,hu(e,t,i,6);break;case 8:eu(),El=6;break e;default:throw Error(a(462))}}lu();break}catch(d){nu(e,d)}return Ao=So=null,j.H=r,j.A=o,fl=n,null!==gl?0:(pl=null,ml=0,kr(),El)}(e,t):su(e,t,!0),i=r;;){if(0===o){bl&&!r&&$l(e,t,0,!1);break}if(n=e.current.alternate,!i||Zl(n)){if(2===o){if(i=t,e.errorRecoveryDisabledLanes&i)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var c=e;o=Tl;var l=c.current.memoizedState.isDehydrated;if(l&&(tu(c,s).flags|=256),2!==(s=su(c,s,!1))){if(_l&&!l){c.errorRecoveryDisabledLanes|=i,Al|=i,o=4;break e}i=kl,kl=o,null!==i&&(null===kl?kl=i:kl.push.apply(kl,i))}o=s}if(i=!1,2!==o)continue}}if(1===o){tu(e,0),$l(e,t,0,!0);break}e:{switch(r=e,i=o){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:$l(r,t,xl,!wl);break e;case 2:kl=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(o=Rl+300-ce())){if($l(r,t,xl,!wl),0!==xe(r,0,!0))break e;Ul=t,r.timeoutHandle=_d(Ql.bind(null,r,n,kl,Dl,Ol,t,xl,Al,Nl,wl,i,"Throttled",-0,0),o)}else Ql(r,n,kl,Dl,Ol,t,xl,Al,Nl,wl,i,null,-0,0)}break}o=su(e,t,!1),i=!1}Du(e)}function Ql(e,t,n,r,o,i,a,s,c,l,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){il(t,i,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rt});var p=(62914560&i)===i?Rl-ce():(4194048&i)===i?Pl-ce():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&ch(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ih&&(ih=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var o=n[r],i=o.transferSize,a=o.initiatorType,s=o.duration;if(i&&s&&fd(a)){for(a=0,s=o.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&fd(d)&&(a+=u*((c=c.responseEnd)<s?1:(s-l)/(c-l)))}if(--r,t+=8*(i+a)/(o.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var o=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ih?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(o)}}:null}(d,p)))return Ul=i,e.cancelPendingCommit=p(gu.bind(null,e,t,i,n,r,o,a,s,c,u,d,null,h,f)),void $l(e,i,a,!l)}gu(e,t,i,n,r,o,a,s,c)}function Zl(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!$n(i(),o))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $l(e,t,n,r){t&=~Il,t&=~Al,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var i=31-be(o),a=1<<i;r[i]=-1,o&=~a}0!==n&&Pe(e,n,t)}function Jl(){return 0!==(6&fl)||(Mu(0,!1),!1)}function eu(){if(null!==gl){if(0===yl)var e=gl.return;else Ao=So=null,sa(e=gl),ci=null,li=0,e=gl;for(;null!==e;)gc(e.alternate,e),e=e.return;gl=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Ul=0,eu(),pl=e,gl=n=Ur(e.current,null),ml=t,yl=0,vl=null,wl=!1,bl=Ne(e,t),_l=!1,Nl=xl=Il=Al=Sl=El=0,kl=Tl=null,Ol=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var o=31-be(r),i=1<<o;t|=e[o],r&=~i}return Cl=t,kr(),n}function nu(e,t){Hi=null,j.H=gs,t===$o||t===ei?(t=ai(),yl=3):t===Jo?(t=ai(),yl=4):yl=t===Rs?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,vl=t,null===gl&&(El=1,xs(e,Kr(t,e.current)))}function ru(){var e=Pi.current;return null===e||((4194048&ml)===ml?null===ji:((62914560&ml)===ml||0!==(536870912&ml))&&e===ji)}function ou(){var e=j.H;return j.H=gs,null===e?gs:e}function iu(){var e=j.A;return j.A=dl,e}function au(){El=4,wl||(4194048&ml)!==ml&&null!==Pi.current||(bl=!0),0===(134217727&Sl)&&0===(134217727&Al)||null===pl||$l(pl,ml,xl,!1)}function su(e,t,n){var r=fl;fl|=2;var o=ou(),i=iu();pl===e&&ml===t||(Dl=null,tu(e,t)),t=!1;var a=El;e:for(;;)try{if(0!==yl&&null!==gl){var s=gl,c=vl;switch(yl){case 8:eu(),a=6;break e;case 3:case 2:case 9:case 6:null===Pi.current&&(t=!0);var l=yl;if(yl=0,vl=null,hu(e,s,c,l),n&&bl){a=0;break e}break;default:l=yl,yl=0,vl=null,hu(e,s,c,l)}}cu(),a=El;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,Ao=So=null,fl=r,j.H=o,j.A=i,null===gl&&(pl=null,ml=0,kr()),a}function cu(){for(;null!==gl;)uu(gl)}function lu(){for(;null!==gl&&!ae();)uu(gl)}function uu(e){var t=ac(e.alternate,e,Cl);e.memoizedProps=e.pendingProps,null===t?fu(e):gl=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ws(n,t,t.pendingProps,t.type,void 0,ml);break;case 11:t=Ws(n,t,t.pendingProps,t.type.render,t.ref,ml);break;case 5:sa(t);default:gc(n,t),t=ac(n,t=gl=Vr(t,Cl),Cl)}e.memoizedProps=e.pendingProps,null===t?fu(e):gl=t}function hu(e,t,n,r){Ao=So=null,sa(t),ci=null,li=0;var o=t.return;try{if(function(e,t,n,r,o){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&ko(t,n,o,!0),null!==(n=Pi.current)){switch(n.tag){case 31:case 13:return null===ji?au():null===n.alternate&&0===El&&(El=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===ti?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Su(e,r,o)),!1;case 22:return n.flags|=65536,r===ti?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Su(e,r,o)),!1}throw Error(a(435,n.tag))}return Su(e,r,o),au(),!1}if(ho)return null!==(t=Pi.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==go&&Co(Kr(e=Error(a(422),{cause:r}),n))):(r!==go&&Co(Kr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,r=Kr(r,n),Ci(e,o=Ts(e.stateNode,r,o)),4!==El&&(El=2)),!1;var i=Error(a(520),{cause:r});if(i=Kr(i,n),null===Tl?Tl=[i]:Tl.push(i),4!==El&&(El=2),null===t)return!0;r=Kr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,Ci(n,e=Ts(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Ml||!Ml.has(i))))return n.flags|=65536,o&=-o,n.lanes|=o,Os(o=ks(o),e,n,r),Ci(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,ml))return El=1,xs(e,Kr(n,e.current)),void(gl=null)}catch(i){if(null!==o)throw gl=o,i;return El=1,xs(e,Kr(n,e.current)),void(gl=null)}32768&t.flags?(ho||1===r?e=!0:bl||0!==(536870912&ml)?e=!1:(wl=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Pi.current)&&13===r.tag&&(r.flags|=16384))),pu(t,e)):fu(t)}function fu(e){var t=e;do{if(0!==(32768&t.flags))return void pu(t,wl);e=t.return;var n=fc(t.alternate,t,Cl);if(null!==n)return void(gl=n);if(null!==(t=t.sibling))return void(gl=t);gl=t=e}while(null!==t);0===El&&(El=5)}function pu(e,t){do{var n=pc(e.alternate,e);if(null!==n)return n.flags&=32767,void(gl=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(gl=e);gl=e=n}while(null!==e);El=6,gl=null}function gu(e,t,n,r,o,i,s,c,l){e.cancelPendingCommit=null;do{bu()}while(0!==Ll);if(0!==(6&fl))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,o,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-be(n),d=1<<u;s[u]=0,c[u]=-1;var h=l[u];if(null!==h)for(l[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Pe(e,r,0),0!==i&&0===o&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=Tr,s,c,l),e===pl&&(gl=pl=null,ml=0),Fl=t,Bl=e,Ul=n,Vl=i,zl=o,Hl=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,oe(he,function(){return _u(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=j.T,j.T=null,o=D.p,D.p=2,s=fl,fl|=4;try{!function(e,t){if(e=e.containerInfo,pd=wh,or(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(m){n=null;break e}var s=0,c=-1,l=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==o&&3!==h.nodeType||(c=s+o),h!==i||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===o&&(c=s),f===i&&++d===r&&(l=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(gd={focusedElem:e,selectionRange:n},wh=!1,Pc=t;null!==Pc;)if(e=(t=Pc).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Pc=e;else for(;null!==Pc;){switch(i=(t=Pc).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(o=e[n]).ref.impl=o.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,o=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var g=Es(n.type,o);e=r.getSnapshotBeforeUpdate(g,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){Eu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Td(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Td(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Pc=e;break}Pc=t.return}}(e,t)}finally{fl=s,D.p=o,j.T=r}}Ll=1,mu(),yu(),vu()}}function mu(){if(1===Ll){Ll=0;var e=Bl,t=Fl,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=j.T,j.T=null;var r=D.p;D.p=2;var o=fl;fl|=4;try{Wc(t,e);var i=gd,a=rr(e.containerInfo),s=i.focusedElem,c=i.selectionRange;if(a!==s&&s&&s.ownerDocument&&nr(s.ownerDocument.documentElement,s)){if(null!==c&&or(s)){var l=c.start,u=c.end;if(void 0===u&&(u=l),"selectionStart"in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=s.textContent.length,g=Math.min(c.start,p),m=void 0===c.end?g:Math.min(c.end,p);!f.extend&&g>m&&(a=m,m=g,g=a);var y=tr(s,g),v=tr(s,m);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var w=d.createRange();w.setStart(y.node,y.offset),f.removeAllRanges(),g>m?(f.addRange(w),f.extend(v.node,v.offset)):(w.setEnd(v.node,v.offset),f.addRange(w))}}}}for(d=[],f=s;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}wh=!!pd,gd=pd=null}finally{fl=o,D.p=r,j.T=n}}e.current=t,Ll=2}}function yu(){if(2===Ll){Ll=0;var e=Bl,t=Fl,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=j.T,j.T=null;var r=D.p;D.p=2;var o=fl;fl|=4;try{jc(e,t.alternate,t)}finally{fl=o,D.p=r,j.T=n}}Ll=3}}function vu(){if(4===Ll||3===Ll){Ll=0,se();var e=Bl,t=Fl,n=Ul,r=Hl;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Ll=5:(Ll=0,Fl=Bl=null,wu(e,e.pendingLanes));var o=e.pendingLanes;if(0===o&&(Ml=null),Le(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(c){}if(null!==r){t=j.T,o=D.p,D.p=2,j.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];i(s.value,{componentStack:s.stack})}}finally{j.T=t,D.p=o}}0!==(3&Ul)&&bu(),Du(e),o=e.pendingLanes,0!==(261930&n)&&0!==(42&o)?e===Wl?Gl++:(Gl=0,Wl=e):Gl=0,Mu(0,!1)}}function wu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Vo(t)))}function bu(){return mu(),yu(),vu(),_u()}function _u(){if(5!==Ll)return!1;var e=Bl,t=Vl;Vl=0;var n=Le(Ul),r=j.T,o=D.p;try{D.p=32>n?32:n,j.T=null,n=zl,zl=null;var i=Bl,s=Ul;if(Ll=0,Fl=Bl=null,Ul=0,0!==(6&fl))throw Error(a(331));var c=fl;if(fl|=4,cl(i.current),el(i,i.current,s,n),fl=c,Mu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,i)}catch(l){}return!0}finally{D.p=o,j.T=r,wu(e,t)}}function Cu(e,t,n){t=Kr(n,t),null!==(e=bi(e,t=Ts(e.stateNode,t,2),2))&&(Re(e,2),Du(e))}function Eu(e,t,n){if(3===e.tag)Cu(e,e,n);else for(;null!==t;){if(3===t.tag){Cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ml||!Ml.has(r))){e=Kr(n,e),null!==(r=bi(t,n=ks(2),2))&&(Os(n,r,t,e),Re(r,2),Du(r));break}}t=t.return}}function Su(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hl;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(_l=!0,o.add(n),e=Au.bind(null,e,t,n),t.then(e,e))}function Au(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pl===e&&(ml&n)===n&&(4===El||3===El&&(62914560&ml)===ml&&300>ce()-Rl?0===(2&fl)&&tu(e,0):Il|=n,Nl===ml&&(Nl=0)),Du(e)}function Iu(e,t){0===t&&(t=ke()),null!==(e=Pr(e,t))&&(Re(e,t),Du(e))}function xu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Iu(e,n)}function Nu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),Iu(e,n)}var Tu=null,ku=null,Ou=!1,Ru=!1,Pu=!1,ju=0;function Du(e){e!==ku&&null===e.next&&(null===ku?Tu=ku=e:ku=ku.next=e),Ru=!0,Ou||(Ou=!0,Sd(function(){0!==(6&fl)?oe(ue,Lu):Bu()}))}function Mu(e,t){if(!Pu&&Ru){Pu=!0;do{for(var n=!1,r=Tu;null!==r;){if(!t)if(0!==e){var o=r.pendingLanes;if(0===o)var i=0;else{var a=r.suspendedLanes,s=r.pingedLanes;i=(1<<31-be(42|e)+1)-1,i=201326741&(i&=o&~(a&~s))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Vu(r,i))}else i=ml,0===(3&(i=xe(r,r===pl?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Ne(r,i)||(n=!0,Vu(r,i));r=r.next}}while(n);Pu=!1}}function Lu(){Bu()}function Bu(){Ru=Ou=!1;var e=0;0!==ju&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==bd&&(bd=e,!0);return bd=null,!1}()&&(e=ju);for(var t=ce(),n=null,r=Tu;null!==r;){var o=r.next,i=Fu(r,t);0===i?(r.next=null,null===n?Tu=o:n.next=o,null===o&&(ku=n)):(n=r,(0!==e||0!==(3&i))&&(Ru=!0)),r=o}0!==Ll&&5!==Ll||Mu(e,!1),0!==ju&&(ju=0)}function Fu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-be(i),s=1<<a,c=o[a];-1===c?0!==(s&n)&&0===(s&r)||(o[a]=Te(s,t)):c<=t&&(e.expiredLanes|=s),i&=~s}if(n=ml,n=xe(e,e===(t=pl)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===yl||9===yl)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ne(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Le(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=pe}return r=Uu.bind(null,e),n=oe(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function Uu(e,t){if(0!==Ll&&5!==Ll)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(bu()&&e.callbackNode!==n)return null;var r=ml;return 0===(r=xe(e,e===pl?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Yl(e,r,t),Fu(e,ce()),null!=e.callbackNode&&e.callbackNode===n?Uu.bind(null,e):null)}function Vu(e,t){if(bu())return null;Yl(e,t,!0)}function zu(){if(0===ju){var e=Go;0===e&&(e=Ee,0===(261888&(Ee<<=1))&&(Ee=256)),ju=e}return ju}function Hu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Ot(""+e)}function Gu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Wu=0;Wu<Sr.length;Wu++){var qu=Sr[Wu];Ar(qu.toLowerCase(),"on"+(qu[0].toUpperCase()+qu.slice(1)))}Ar(mr,"onAnimationEnd"),Ar(yr,"onAnimationIteration"),Ar(vr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(wr,"onTransitionRun"),Ar(br,"onTransitionStart"),Ar(_r,"onTransitionCancel"),Ar(Cr,"onTransitionEnd"),ot("onMouseEnter",["mouseout","mouseover"]),ot("onMouseLeave",["mouseout","mouseover"]),ot("onPointerEnter",["pointerout","pointerover"]),ot("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ku=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xu));function Yu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==i&&o.isPropagationStopped())break e;i=s,o.currentTarget=l;try{i(o)}catch(u){Ir(u)}o.currentTarget=null,i=c}else for(a=0;a<r.length;a++){if(c=(s=r[a]).instance,l=s.currentTarget,s=s.listener,c!==i&&o.isPropagationStopped())break e;i=s,o.currentTarget=l;try{i(o)}catch(u){Ir(u)}o.currentTarget=null,i=c}}}}function Qu(e,t){var n=t[Ge];void 0===n&&(n=t[Ge]=new Set);var r=e+"__bubble";n.has(r)||(ed(t,e,2,!1),n.add(r))}function Zu(e,t,n){var r=0;t&&(r|=4),ed(n,e,r,t)}var $u="_reactListening"+Math.random().toString(36).slice(2);function Ju(e){if(!e[$u]){e[$u]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Ku.has(t)||Zu(t,!1,e),Zu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$u]||(t[$u]=!0,Zu("selectionchange",!1,t))}}function ed(e,t,n,r){switch(Ih(t)){case 2:var o=bh;break;case 8:o=_h;break;default:o=Ch}n=o.bind(null,t,n,e),o=void 0,!zt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function td(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&a.stateNode.containerInfo===o)return;a=a.return}for(;null!==s;){if(null===(a=Qe(s)))return;if(5===(l=a.tag)||6===l||26===l||27===l){r=i=a;continue e}s=s.parentNode}}r=r.return}Ft(function(){var r=i,o=jt(n),a=[];e:{var s=Er.get(e);if(void 0!==s){var l=nn,u=e;switch(e){case"keypress":if(0===Kt(n))break e;case"keydown":case"keyup":l=vn;break;case"focusin":u="focus",l=ln;break;case"focusout":u="blur",l=ln;break;case"beforeblur":case"afterblur":l=ln;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=cn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=bn;break;case mr:case yr:case vr:l=un;break;case Cr:l=_n;break;case"scroll":case"scrollend":l=on;break;case"wheel":l=Cn;break;case"copy":case"cut":case"paste":l=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=wn;break;case"toggle":case"beforetoggle":l=En}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==s?s+"Capture":null:s;d=[];for(var p,g=r;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=Ut(g,f))&&d.push(nd(g,m,p)),h)break;g=g.return}0<d.length&&(s=new l(s,u,null,n,o),a.push({event:s,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Pt||!(u=n.relatedTarget||n.fromElement)||!Qe(u)&&!u[He])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?Qe(u):null)&&(h=c(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(l=null,u=r),l!==u)){if(d=sn,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=wn,m="onPointerLeave",f="onPointerEnter",g="pointer"),h=null==l?s:$e(l),p=null==u?s:$e(u),(s=new d(m,g+"leave",l,n,o)).target=h,s.relatedTarget=p,m=null,Qe(o)===r&&((d=new d(f,g+"enter",u,n,o)).target=p,d.relatedTarget=h,m=d),h=m,l&&u)e:{for(d=od,g=u,p=0,m=f=l;m;m=d(m))p++;m=0;for(var y=g;y;y=d(y))m++;for(;0<p-m;)f=d(f),p--;for(;0<m-p;)g=d(g),m--;for(;p--;){if(f===g||null!==g&&f===g.alternate){d=f;break e}f=d(f),g=d(g)}d=null}else d=null;null!==l&&id(a,s,l,d,!1),null!==u&&null!==h&&id(a,h,u,d,!0)}if("select"===(l=(s=r?$e(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=Vn;else if(Dn(s))if(zn)v=Zn;else{v=Yn;var w=Kn}else!(l=s.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Nt(r.elementType)&&(v=Vn):v=Qn;switch(v&&(v=v(e,r))?Mn(a,v,n,o):(w&&w(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&bt(s,"number",s.value)),w=r?$e(r):window,e){case"focusin":(Dn(w)||"true"===w.contentEditable)&&(ar=w,sr=r,cr=null);break;case"focusout":cr=sr=ar=null;break;case"mousedown":lr=!0;break;case"contextmenu":case"mouseup":case"dragend":lr=!1,ur(a,n,o);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":ur(a,n,o)}var b;if(An)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Pn?On(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Nn&&"ko"!==n.locale&&(Pn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Pn&&(b=Xt()):(Wt="value"in(Gt=o)?Gt.value:Gt.textContent,Pn=!0)),0<(w=rd(r,_)).length&&(_=new hn(_,e,null,n,o),a.push({event:_,listeners:w}),b?_.data=b:null!==(b=Rn(n))&&(_.data=b))),(b=xn?function(e,t){switch(e){case"compositionend":return Rn(t);case"keypress":return 32!==t.which?null:(kn=!0,Tn);case"textInput":return(e=t.data)===Tn&&kn?null:e;default:return null}}(e,n):function(e,t){if(Pn)return"compositionend"===e||!An&&On(e,t)?(e=Xt(),qt=Wt=Gt=null,Pn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(_=rd(r,"onBeforeInput")).length&&(w=new hn("onBeforeInput","beforeinput",null,n,o),a.push({event:w,listeners:_}),w.data=b)),function(e,t,n,r,o){if("submit"===t&&n&&n.stateNode===o){var i=Hu((o[ze]||null).action),a=r.submitter;a&&null!==(t=(t=a[ze]||null)?Hu(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var s=new nn("action","action",null,r,o);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==ju){var e=a?Gu(o,a):new FormData(o);ts(n,{pending:!0,data:e,method:o.method,action:i},null,e)}}else"function"===typeof i&&(s.preventDefault(),e=a?Gu(o,a):new FormData(o),ts(n,{pending:!0,data:e,method:o.method,action:i},i,e))},currentTarget:o}]})}}(a,e,r,n,o)}Yu(a,t)})}function nd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rd(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;if(5!==(o=o.tag)&&26!==o&&27!==o||null===i||(null!=(o=Ut(e,n))&&r.unshift(nd(e,o,i)),null!=(o=Ut(e,t))&&r.push(nd(e,o,i))),3===e.tag)return r;e=e.return}return[]}function od(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function id(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,null!==c&&c===r)break;5!==s&&26!==s&&27!==s||null===l||(c=l,o?null!=(l=Ut(n,i))&&a.unshift(nd(n,l,c)):o||null!=(l=Ut(n,i))&&a.push(nd(n,l,c))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ad=/\r\n?/g,sd=/\u0000|\uFFFD/g;function cd(e){return("string"===typeof e?e:""+e).replace(ad,"\n").replace(sd,"")}function ld(e,t){return t=cd(t),cd(e)===t}function ud(e,t,n,r,o,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&St(e,""+r);break;case"className":lt(e,"class",r);break;case"tabIndex":lt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":lt(e,n,r);break;case"style":xt(e,r,i);break;case"data":if("object"!==t){lt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ot(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&ud(e,t,"name",o.name,o,null),ud(e,t,"formEncType",o.formEncType,o,null),ud(e,t,"formMethod",o.formMethod,o,null),ud(e,t,"formTarget",o.formTarget,o,null)):(ud(e,t,"encType",o.encType,o,null),ud(e,t,"method",o.method,o,null),ud(e,t,"target",o.target,o,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ot(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Ot(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Qu("beforetoggle",e),Qu("toggle",e),ct(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":ct(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&ct(e,n=Tt.get(n)||n,r)}}function dd(e,t,n,r,o,i){switch(n){case"style":xt(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?St(e,r):("number"===typeof r||"bigint"===typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"===typeof(i=null!=(i=e[ze]||null)?i[n]:null)&&e.removeEventListener(t,i,o),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):ct(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,o)))}}function hd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qu("error",e),Qu("load",e);var r,o=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":o=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:ud(e,t,r,s,n,null)}}return i&&ud(e,t,"srcSet",n.srcSet,n,null),void(o&&ud(e,t,"src",n.src,n,null));case"input":Qu("invalid",e);var c=r=s=i=null,l=null,u=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":i=d;break;case"type":s=d;break;case"checked":l=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":c=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:ud(e,t,o,d,n,null)}}return void wt(e,r,c,l,u,s,i,!1);case"select":for(i in Qu("invalid",e),o=s=r=null,n)if(n.hasOwnProperty(i)&&null!=(c=n[i]))switch(i){case"value":r=c;break;case"defaultValue":s=c;break;case"multiple":o=c;default:ud(e,t,i,c,n,null)}return t=r,n=s,e.multiple=!!o,void(null!=t?_t(e,!!o,t,!1):null!=n&&_t(e,!!o,n,!0));case"textarea":for(s in Qu("invalid",e),r=i=o=null,n)if(n.hasOwnProperty(s)&&null!=(c=n[s]))switch(s){case"value":o=c;break;case"defaultValue":i=c;break;case"children":r=c;break;case"dangerouslySetInnerHTML":if(null!=c)throw Error(a(91));break;default:ud(e,t,s,c,n,null)}return void Et(e,o,i,r);case"option":for(l in n)if(n.hasOwnProperty(l)&&null!=(o=n[l]))if("selected"===l)e.selected=o&&"function"!==typeof o&&"symbol"!==typeof o;else ud(e,t,l,o,n,null);return;case"dialog":Qu("beforetoggle",e),Qu("toggle",e),Qu("cancel",e),Qu("close",e);break;case"iframe":case"object":Qu("load",e);break;case"video":case"audio":for(o=0;o<Xu.length;o++)Qu(Xu[o],e);break;case"image":Qu("error",e),Qu("load",e);break;case"details":Qu("toggle",e);break;case"embed":case"source":case"link":Qu("error",e),Qu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:ud(e,t,u,o,n,null)}return;default:if(Nt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(o=n[d])&&dd(e,t,d,o,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(null!=(o=n[c])&&ud(e,t,c,o,n,null))}function fd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var pd=null,gd=null;function md(e){return 9===e.nodeType?e:e.ownerDocument}function yd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bd=null;var _d="function"===typeof setTimeout?setTimeout:void 0,Cd="function"===typeof clearTimeout?clearTimeout:void 0,Ed="function"===typeof Promise?Promise:void 0,Sd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Ed?function(e){return Ed.resolve(null).then(e).catch(Ad)}:_d;function Ad(e){setTimeout(function(){throw e})}function Id(e){return"head"===e}function xd(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)||"/&"===n){if(0===r)return e.removeChild(o),void Gh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Bd(e.ownerDocument.documentElement);else if("head"===n){Bd(n=e.ownerDocument.head);for(var i=n.firstChild;i;){var a=i.nextSibling,s=i.nodeName;i[Ke]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=a}}else"body"===n&&Bd(e.ownerDocument.body);n=o}while(n);Gh(t)}function Nd(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Td(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Td(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function kd(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Pd(e.nextSibling)))return null}return e}function Od(e){return"$?"===e.data||"$~"===e.data}function Rd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Pd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var jd=null;function Dd(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Pd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Md(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Ld(e,t,n){switch(t=md(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Bd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var Fd=new Map,Ud=new Set;function Vd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var zd=D.d;D.d={f:function(){var e=zd.f(),t=Jl();return e||t},r:function(e){var t=Ze(e);null!==t&&5===t.tag&&"form"===t.type?rs(t):zd.r(e)},D:function(e){zd.D(e),Gd("dns-prefetch",e,null)},C:function(e,t){zd.C(e,t),Gd("preconnect",e,t)},L:function(e,t,n){zd.L(e,t,n);var r=Hd;if(r&&e&&t){var o='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(o+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(o+='[imagesizes="'+yt(n.imageSizes)+'"]')):o+='[href="'+yt(e)+'"]';var i=o;switch(t){case"style":i=qd(e);break;case"script":i=Yd(e)}Fd.has(i)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Fd.set(i,e),null!==r.querySelector(o)||"style"===t&&r.querySelector(Xd(i))||"script"===t&&r.querySelector(Qd(i))||(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){zd.m(e,t);var n=Hd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",o='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',i=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Yd(e)}if(!Fd.has(i)&&(e=f({rel:"modulepreload",href:e},t),Fd.set(i,e),null===n.querySelector(o))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Qd(i)))return}hd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){zd.X(e,t);var n=Hd;if(n&&e){var r=Je(n).hoistableScripts,o=Yd(e),i=r.get(o);i||((i=n.querySelector(Qd(o)))||(e=f({src:e,async:!0},t),(t=Fd.get(o))&&eh(e,t),et(i=n.createElement("script")),hd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}},S:function(e,t,n){zd.S(e,t,n);var r=Hd;if(r&&e){var o=Je(r).hoistableStyles,i=qd(e);t=t||"default";var a=o.get(i);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(Xd(i)))s.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Fd.get(i))&&Jd(e,n);var c=a=r.createElement("link");et(c),hd(c,"link",e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener("load",function(){s.loading|=1}),c.addEventListener("error",function(){s.loading|=2}),s.loading|=4,$d(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},o.set(i,a)}}},M:function(e,t){zd.M(e,t);var n=Hd;if(n&&e){var r=Je(n).hoistableScripts,o=Yd(e),i=r.get(o);i||((i=n.querySelector(Qd(o)))||(e=f({src:e,async:!0,type:"module"},t),(t=Fd.get(o))&&eh(e,t),et(i=n.createElement("script")),hd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}}};var Hd="undefined"===typeof document?null:document;function Gd(e,t,n){var r=Hd;if(r&&"string"===typeof t&&t){var o=yt(t);o='link[rel="'+e+'"][href="'+o+'"]',"string"===typeof n&&(o+='[crossorigin="'+n+'"]'),Ud.has(o)||(Ud.add(o),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(o)&&(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Wd(e,t,n,r){var o,i,s,c,l=(l=q.current)?Vd(l):null;if(!l)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=qd(n.href),(r=(n=Je(l).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=qd(n.href);var u=Je(l).hoistableStyles,d=u.get(e);if(d||(l=l.ownerDocument||l,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=l.querySelector(Xd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Fd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Fd.set(e,n),u||(o=l,i=e,s=n,c=d.state,o.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=o.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),hd(i,"link",s),et(i),o.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Yd(n),(r=(n=Je(l).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function qd(e){return'href="'+yt(e)+'"'}function Xd(e){return'link[rel="stylesheet"]['+e+"]"}function Kd(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Yd(e){return'[src="'+yt(e)+'"]'}function Qd(e){return"script[async]"+e}function Zd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var o=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),hd(r,"style",o),$d(r,n.precedence,e),t.instance=r;case"stylesheet":o=qd(n.href);var i=e.querySelector(Xd(o));if(i)return t.state.loading|=4,t.instance=i,et(i),i;r=Kd(n),(o=Fd.get(o))&&Jd(r,o),et(i=(e.ownerDocument||e).createElement("link"));var s=i;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),hd(i,"link",r),t.state.loading|=4,$d(i,n.precedence,e),t.instance=i;case"script":return i=Yd(n.src),(o=e.querySelector(Qd(i)))?(t.instance=o,et(o),o):(r=n,(o=Fd.get(i))&&eh(r=f({},n),o),et(o=(e=e.ownerDocument||e).createElement("script")),hd(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,$d(r,n.precedence,e));return t.instance}function $d(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,i=o,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)i=s;else if(i!==o)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Jd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var r=new Map,o=th=new Map;o.set(n,r)}else(r=(o=th).get(n))||(r=new Map,o.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var i=n[o];if(!(i[Ke]||i[Ve]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(i):r.set(a,[i])}}return r}function rh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function oh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ih=0;function ah(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ch(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var sh=null;function ch(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,sh=new Map,t.forEach(lh,e),sh=null,ah.call(e))}function lh(e,t){if(!(4&t.state.loading)){var n=sh.get(e);if(n)var r=n.get(null);else{n=new Map,sh.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<o.length;i++){var a=o[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(o=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,o),n.set(a,o),this.count++,r=ah.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),i?i.parentNode.insertBefore(o,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(o,e.firstChild),t.state.loading|=4}}var uh={$$typeof:_,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function dh(e,t,n,r,o,i,a,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oe(0),this.hiddenUpdates=Oe(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function hh(e,t,n,r,o,i,a,s,c,l,u,d){return e=new dh(e,t,n,a,c,l,u,d,s),t=1,!0===i&&(t|=24),i=Br(3,null,null,t),e.current=i,i.stateNode=e,(t=Uo()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},yi(i),e}function fh(e){return e?e=Mr:Mr}function ph(e,t,n,r,o,i){o=fh(o),null===r.context?r.context=o:r.pendingContext=o,(r=wi(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=bi(e,r,t))&&(Kl(n,0,t),_i(n,e,t))}function gh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function mh(e,t){gh(e,t),(e=e.alternate)&&gh(e,t)}function yh(e){if(13===e.tag||31===e.tag){var t=Pr(e,67108864);null!==t&&Kl(t,0,67108864),mh(e,67108864)}}function vh(e){if(13===e.tag||31===e.tag){var t=ql(),n=Pr(e,t=Me(t));null!==n&&Kl(n,0,t),mh(e,t)}}var wh=!0;function bh(e,t,n,r){var o=j.T;j.T=null;var i=D.p;try{D.p=2,Ch(e,t,n,r)}finally{D.p=i,j.T=o}}function _h(e,t,n,r){var o=j.T;j.T=null;var i=D.p;try{D.p=8,Ch(e,t,n,r)}finally{D.p=i,j.T=o}}function Ch(e,t,n,r){if(wh){var o=Eh(r);if(null===o)td(e,t,r,Sh,n),Dh(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Nh=Mh(Nh,e,t,n,r,o),!0;case"dragenter":return Th=Mh(Th,e,t,n,r,o),!0;case"mouseover":return kh=Mh(kh,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Oh.set(i,Mh(Oh.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Rh.set(i,Mh(Rh.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Dh(e,r),4&t&&-1<jh.indexOf(e)){for(;null!==o;){var i=Ze(o);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=Ie(i.pendingLanes);if(0!==a){var s=i;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var c=1<<31-be(a);s.entanglements[1]|=c,a&=~c}Du(i),0===(6&fl)&&(jl=ce()+500,Mu(0,!1))}}break;case 31:case 13:null!==(s=Pr(i,2))&&Kl(s,0,2),Jl(),mh(i,2)}if(null===(i=Eh(r))&&td(e,t,r,Sh,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else td(e,t,r,null,n)}}function Eh(e){return Ah(e=jt(e))}var Sh=null;function Ah(e){if(Sh=null,null!==(e=Qe(e))){var t=c(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=l(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Sh=e,null}function Ih(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(le()){case ue:return 2;case de:return 8;case he:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var xh=!1,Nh=null,Th=null,kh=null,Oh=new Map,Rh=new Map,Ph=[],jh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dh(e,t){switch(e){case"focusin":case"focusout":Nh=null;break;case"dragenter":case"dragleave":Th=null;break;case"mouseover":case"mouseout":kh=null;break;case"pointerover":case"pointerout":Oh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(t.pointerId)}}function Mh(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=Ze(t))&&yh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Lh(e){var t=Qe(e.target);if(null!==t){var n=c(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=l(n)))return e.blockedOn=t,void Fe(e.priority,function(){vh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Fe(e.priority,function(){vh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Eh(e.nativeEvent);if(null!==n)return null!==(t=Ze(n))&&yh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Pt=r,n.target.dispatchEvent(r),Pt=null,t.shift()}return!0}function Fh(e,t,n){Bh(e)&&n.delete(t)}function Uh(){xh=!1,null!==Nh&&Bh(Nh)&&(Nh=null),null!==Th&&Bh(Th)&&(Th=null),null!==kh&&Bh(kh)&&(kh=null),Oh.forEach(Fh),Rh.forEach(Fh)}function Vh(e,t){e.blockedOn===t&&(e.blockedOn=null,xh||(xh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Uh)))}var zh=null;function Hh(e){zh!==e&&(zh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){zh===e&&(zh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],o=e[t+2];if("function"!==typeof r){if(null===Ah(r||n))continue;break}var i=Ze(n);null!==i&&(e.splice(t,3),t-=3,ts(i,{pending:!0,data:o,method:n.method,action:r},r,o))}}))}function Gh(e){function t(t){return Vh(t,e)}null!==Nh&&Vh(Nh,e),null!==Th&&Vh(Th,e),null!==kh&&Vh(kh,e),Oh.forEach(t),Rh.forEach(t);for(var n=0;n<Ph.length;n++){var r=Ph[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Ph.length&&null===(n=Ph[0]).blockedOn;)Lh(n),null===n.blockedOn&&Ph.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var o=n[r],i=n[r+1],a=o[ze]||null;if("function"===typeof i)a||Hh(n);else if(a){var s=null;if(i&&i.hasAttribute("formAction")){if(o=i,a=i[ze]||null)s=a.formAction;else if(null!==Ah(o))continue}else s=a.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Hh(n)}}}function Wh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return o=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==o&&(o(),o=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==o&&(o(),o=null)}}}function qh(e){this._internalRoot=e}function Xh(e){this._internalRoot=e}Xh.prototype.render=qh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));ph(t.current,ql(),e,t,null,null)},Xh.prototype.unmount=qh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ph(e.current,2,null,e,null,null),Jl(),t[He]=null}},Xh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Be();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ph.length&&0!==t&&t<Ph[n].priority;n++);Ph.splice(n,0,e),0===n&&Lh(e)}};var Kh=o.version;if("19.2.3"!==Kh)throw Error(a(527,Kh,"19.2.3"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=c(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return d(o),e;if(i===r)return d(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Yh={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{ye=Qh.inject(Yh),ve=Qh}catch($h){}}t.createRoot=function(e,t){if(!s(e))throw Error(a(299));var n=!1,r="",o=Ss,i=As,c=Is;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(o=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(c=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,r,null,o,i,c,Wh),e[He]=t.current,Ju(e),new qh(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(a(299));var r=!1,o="",i=Ss,c=As,l=Is,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(c=n.onCaughtError),void 0!==n.onRecoverableError&&(l=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=hh(e,1,!0,t,0,r,o,u,i,c,l,Wh)).context=fh(null),n=t.current,(o=wi(r=Me(r=ql()))).callback=null,bi(n,o,r),n=r,t.current.lanes=n,Re(t,n),Du(t),e[He]=t.current,Ju(e),new Xh(t)},t.version="19.2.3"},7305(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(799)),o=i(n(2778));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t={};for(var n in o.default)o.default.hasOwnProperty(n)&&(e.hasAttribute("jsbarcode-"+n.toLowerCase())&&(t[n]=e.getAttribute("jsbarcode-"+n.toLowerCase())),e.hasAttribute("data-"+n.toLowerCase())&&(t[n]=e.getAttribute("data-"+n.toLowerCase())));return t.value=e.getAttribute("jsbarcode-value")||e.getAttribute("data-value"),t=(0,r.default)(t)}},7347(e){"use strict";var t={single_source_shortest_paths:function(e,n,r){var o={},i={};i[n]=0;var a,s,c,l,u,d,h,f=t.PriorityQueue.make();for(f.push(n,0);!f.empty();)for(c in s=(a=f.pop()).value,l=a.cost,u=e[s]||{})u.hasOwnProperty(c)&&(d=l+u[c],h=i[c],("undefined"===typeof i[c]||h>d)&&(i[c]=d,f.push(c,d),o[c]=s));if("undefined"!==typeof r&&"undefined"===typeof i[r]){var p=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(p)}return o},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,n,r){var o=t.single_source_shortest_paths(e,n,r);return t.extract_shortest_path_from_predecessor_list(o,r)},PriorityQueue:{make:function(e){var n,r=t.PriorityQueue,o={};for(n in e=e||{},r)r.hasOwnProperty(n)&&(o[n]=r[n]);return o.queue=[],o.sorter=e.sorter||r.default_sorter,o},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},7421(e,t,n){const r=n(3257),o=n(8511);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return o.testNumeric(e)?t.NUMERIC:o.testAlphanumeric(e)?t.ALPHANUMERIC:o.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!==typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(r){return n}}},7587(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(6190),a=(r=i)&&r.__esModule?r:{default:r},s=n(1029);var c=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.A_START_CHAR+e,n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"valid",value:function(){return new RegExp("^"+s.A_CHARS+"+$").test(this.data)}}]),t}(a.default);t.default=c},7626(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.START_BIN="1010",t.END_BIN="11101",t.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]},7754(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(6190)),o=i(n(6441));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var s=function(e){function t(e,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),/^[\x00-\x7F\xC8-\xD3]+$/.test(e))var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,o.default)(e),n));else r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a(r)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default);t.default=s},7908(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e}},7950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(6672)},7969(e,t){let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!==typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return"undefined"!==typeof n},t.toSJIS=function(e){return n(e)}},8176(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(2522)),o=a(n(2978)),i=a(n(1157));function a(e){return e&&e.__esModule?e:{default:e}}t.default={CanvasRenderer:r.default,SVGRenderer:o.default,ObjectRenderer:i.default}},8177(e,t,n){const r=n(1312);function o(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}o.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},o.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=r.mod(t,this.genPoly),o=this.degree-n.length;if(o>0){const e=new Uint8Array(this.degree);return e.set(n,o),e}return n},e.exports=o},8293(e,t){function n(e){if("number"===typeof e&&(e=e.toString()),"string"!==typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const t="undefined"===typeof e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,o=e.scale||4;return{width:r,scale:r?4:o,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){const r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){const o=n.modules.size,i=n.modules.data,a=t.getScale(o,r),s=Math.floor((o+2*r.margin)*a),c=r.margin*a,l=[r.color.light,r.color.dark];for(let t=0;t<s;t++)for(let n=0;n<s;n++){let u=4*(t*s+n),d=r.color.light;if(t>=c&&n>=c&&t<s-c&&n<s-c){d=l[i[Math.floor((t-c)/a)*o+Math.floor((n-c)/a)]?1:0]}e[u++]=d.r,e[u++]=d.g,e[u++]=d.b,e[u]=d.a}}},8495(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CODE93FullASCII=t.CODE93=void 0;var r=i(n(2146)),o=i(n(4440));function i(e){return e&&e.__esModule?e:{default:e}}t.CODE93=r.default,t.CODE93FullASCII=o.default},8511(e,t){const n="[0-9]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+")(?:.|[\r\n]))+";t.KANJI=new RegExp(r,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(o,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const i=new RegExp("^"+r+"$"),a=new RegExp("^"+n+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return i.test(e)},t.testNumeric=function(e){return a.test(e)},t.testAlphanumeric=function(e){return s.test(e)}},8697(e,t,n){const r=n(7421);function o(e){this.mode=r.BYTE,this.data="string"===typeof e?(new TextEncoder).encode(e):new Uint8Array(e)}o.getBitsLength=function(e){return 8*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=o},8807(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5310),a=(r=i)&&r.__esModule?r:{default:r};var s=function(e){var t=e.substr(0,13).split("").map(function(e){return parseInt(e,10)}).reduce(function(e,t,n){return e+t*(3-n%2*2)},0);return 10*Math.ceil(t/10)-t},c=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{13}$/)&&(e+=s(e)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===s(this.data)}}]),t}(a.default);t.default=c},8853(e,t,n){"use strict";e.exports=n(5896)},8859(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UPCE=t.UPC=t.EAN2=t.EAN5=t.EAN8=t.EAN13=void 0;var r=l(n(2179)),o=l(n(6843)),i=l(n(2352)),a=l(n(917)),s=l(n(4709)),c=l(n(422));function l(e){return e&&e.__esModule?e:{default:e}}t.EAN13=r.default,t.EAN8=o.default,t.EAN5=i.default,t.EAN2=a.default,t.UPC=s.default,t.UPCE=c.default},8970(e,t,n){const r=n(6116),o=n(4772),i=n(2182),a=n(5487);function s(e,t,n,i,a){const s=[].slice.call(arguments,1),c=s.length,l="function"===typeof s[c-1];if(!l&&!r())throw new Error("Callback required as last argument");if(!l){if(c<1)throw new Error("Too few arguments provided");return 1===c?(n=t,t=i=void 0):2!==c||t.getContext||(i=n,n=t,t=void 0),new Promise(function(r,a){try{const a=o.create(n,i);r(e(a,t,i))}catch(s){a(s)}})}if(c<2)throw new Error("Too few arguments provided");2===c?(a=n,n=t,t=i=void 0):3===c&&(t.getContext&&"undefined"===typeof a?(a=i,i=void 0):(a=i,i=n,n=t,t=void 0));try{const r=o.create(n,i);a(null,e(r,t,i))}catch(u){a(u)}}t.create=o.create,t.toCanvas=s.bind(null,i.render),t.toDataURL=s.bind(null,i.renderToDataURL),t.toString=s.bind(null,function(e,t,n){return a.render(e,n)})},8997(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mod10=function(e){for(var t=0,n=0;n<e.length;n++){var r=parseInt(e[n]);(n+e.length)%2===0?t+=r:t+=2*r%10+Math.floor(2*r/10)}return(10-t%10)%10},t.mod11=function(e){for(var t=0,n=[2,3,4,5,6,7],r=0;r<e.length;r++){var o=parseInt(e[e.length-1-r]);t+=n[r%n.length]*o}return(11-t%11)%11}},9007(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9918);t.default=function(e,t,n){var o=e.split("").map(function(e,n){return r.BINARIES[t[n]]}).map(function(t,n){return t?t[e[n]]:""});if(n){var i=e.length-1;o=o.map(function(e,t){return t<i?e+n:e})}return o.join("")}},9011(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(9918),i=a(n(9007));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.fontSize=!n.flat&&n.fontSize>10*n.width?10*n.width:n.fontSize,r.guardHeight=n.height+r.fontSize/2+n.textMargin,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(e,t){return this.text.substr(e,t)}},{key:"leftEncode",value:function(e,t){return(0,i.default)(e,t)}},{key:"rightText",value:function(e,t){return this.text.substr(e,t)}},{key:"rightEncode",value:function(e,t){return(0,i.default)(e,t)}},{key:"encodeGuarded",value:function(){var e={fontSize:this.fontSize},t={height:this.guardHeight};return[{data:o.SIDE_BIN,options:t},{data:this.leftEncode(),text:this.leftText(),options:e},{data:o.MIDDLE_BIN,options:t},{data:this.rightEncode(),text:this.rightText(),options:e},{data:o.SIDE_BIN,options:t}]}},{key:"encodeFlat",value:function(){return{data:[o.SIDE_BIN,this.leftEncode(),o.MIDDLE_BIN,this.rightEncode(),o.SIDE_BIN].join(""),text:this.text}}}]),t}(a(n(5301)).default);t.default=s},9021(e,t,n){const r=n(7969).getSymbolSize;t.getPositions=function(e){const t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},9224(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t){return n({},e,t)}},9298(e,t,n){"use strict";var r=h(n(5865)),o=h(n(9224)),i=h(n(4238)),a=h(n(7908)),s=h(n(2922)),c=h(n(799)),l=h(n(1466)),u=n(3530),d=h(n(2778));function h(e){return e&&e.__esModule?e:{default:e}}var f=function(){},p=function(e,t,n){var r=new f;if("undefined"===typeof e)throw Error("No element to render on was provided.");return r._renderProperties=(0,s.default)(e),r._encodings=[],r._options=d.default,r._errorHandler=new l.default(r),"undefined"!==typeof t&&((n=n||{}).format||(n.format=v()),r.options(n)[n.format](t,n).render()),r};for(var g in p.getModule=function(e){return r.default[e]},r.default)r.default.hasOwnProperty(g)&&m(r.default,g);function m(e,t){f.prototype[t]=f.prototype[t.toUpperCase()]=f.prototype[t.toLowerCase()]=function(n,r){var i=this;return i._errorHandler.wrapBarcodeCall(function(){r.text="undefined"===typeof r.text?void 0:""+r.text;var a=(0,o.default)(i._options,r);a=(0,c.default)(a);var s=e[t],l=y(n,s,a);return i._encodings.push(l),i})}}function y(e,t,n){var r=new t(e=""+e,n);if(!r.valid())throw new u.InvalidInputException(r.constructor.name,e);var a=r.encode();a=(0,i.default)(a);for(var s=0;s<a.length;s++)a[s].options=(0,o.default)(n,a[s].options);return a}function v(){return r.default.CODE128?"CODE128":Object.keys(r.default)[0]}function w(e,t,n){t=(0,i.default)(t);for(var r=0;r<t.length;r++)t[r].options=(0,o.default)(n,t[r].options),(0,a.default)(t[r].options);(0,a.default)(n),new(0,e.renderer)(e.element,t,n).render(),e.afterRender&&e.afterRender()}f.prototype.options=function(e){return this._options=(0,o.default)(this._options,e),this},f.prototype.blank=function(e){var t=new Array(e+1).join("0");return this._encodings.push({data:t}),this},f.prototype.init=function(){var e;if(this._renderProperties)for(var t in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){e=this._renderProperties[t];var n=(0,o.default)(this._options,e.options);"auto"==n.format&&(n.format=v()),this._errorHandler.wrapBarcodeCall(function(){var t=y(n.value,r.default[n.format.toUpperCase()],n);w(e,t,n)})}},f.prototype.render=function(){if(!this._renderProperties)throw new u.NoElementException;if(Array.isArray(this._renderProperties))for(var e=0;e<this._renderProperties.length;e++)w(this._renderProperties[e],this._encodings,this._options);else w(this._renderProperties,this._encodings,this._options);return this},f.prototype._defaults=d.default,"undefined"!==typeof window&&(window.JsBarcode=p),"undefined"!==typeof jQuery&&(jQuery.fn.JsBarcode=function(e,t){var n=[];return jQuery(this).each(function(){n.push(this)}),p(n,e,t)}),e.exports=p},9382(e,t,n){const r=n(7969).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,n=r(e),o=145===n?26:2*Math.ceil((n-13)/(2*t-2)),i=[n-7];for(let r=1;r<t-1;r++)i[r]=i[r-1]-o;return i.push(6),i.reverse()},t.getPositions=function(e){const n=[],r=t.getRowColCoords(e),o=r.length;for(let t=0;t<o;t++)for(let e=0;e<o;e++)0===t&&0===e||0===t&&e===o-1||t===o-1&&0===e||n.push([r[t],r[e]]);return n}},9642(e,t,n){const r=n(7421),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(e){this.mode=r.ALPHANUMERIC,this.data=e}i.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*o.indexOf(this.data[t]);n+=o.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(o.indexOf(this.data[t]),6)},e.exports=i},9801(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(6190),a=(r=i)&&r.__esModule?r:{default:r},s=n(1029);var c=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.B_START_CHAR+e,n))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"valid",value:function(){return new RegExp("^"+s.B_CHARS+"+$").test(this.data)}}]),t}(a.default);t.default=c},9918(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SIDE_BIN="101",t.MIDDLE_BIN="01010",t.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},t.EAN2_STRUCTURE=["LL","LG","GL","GG"],t.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],t.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]},9938(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)","\xff"],t.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"],t.MULTI_SYMBOLS={"\0":["(%)","U"],"\x01":["($)","A"],"\x02":["($)","B"],"\x03":["($)","C"],"\x04":["($)","D"],"\x05":["($)","E"],"\x06":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"\t":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"\x0e":["($)","N"],"\x0f":["($)","O"],"\x10":["($)","P"],"\x11":["($)","Q"],"\x12":["($)","R"],"\x13":["($)","S"],"\x14":["($)","T"],"\x15":["($)","U"],"\x16":["($)","V"],"\x17":["($)","W"],"\x18":["($)","X"],"\x19":["($)","Y"],"\x1a":["($)","Z"],"\x1b":["(%)","A"],"\x1c":["(%)","B"],"\x1d":["(%)","C"],"\x1e":["(%)","D"],"\x1f":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"\x7f":["(%)","T"]}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),(()=>{"use strict";var e=n(5043),t=n(4391);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const l=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296===(64512&o)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<e.length;o+=3){const t=e[o],i=o+1<e.length,a=i?e[o+1]:0,s=o+2<e.length,c=s?e[o+2]:0,l=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|c>>6,h=63&c;s||(h=64,i||(d=64)),r.push(n[l],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(l(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){const i=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<e.length;){const t=n[e.charAt(o++)],i=o<e.length?n[e.charAt(o)]:0;++o;const a=o<e.length?n[e.charAt(o)]:64;++o;const s=o<e.length?n[e.charAt(o)]:64;if(++o,null==t||null==i||null==a||null==s)throw new d;const c=t<<2|i>>4;if(r.push(c),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class d extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h=function(e){return function(e){const t=l(e);return u.encodeByteArray(t,!0)}(e).replace(/\./g,"")},f=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function p(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const g=()=>{try{return p().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Billing",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&f(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},m=e=>{var t;return null===(t=g())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},y=()=>{var e;return null===(e=g())||void 0===e?void 0:e.config},v=e=>{var t;return null===(t=g())||void 0===t?void 0:t["_".concat(e)]};class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function b(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function _(e){return(await fetch(e,{credentials:"include"})).ok}const C={};let E=!1;function S(e,t){if("undefined"===typeof window||"undefined"===typeof document||!b(window.location.host)||C[e]===t||C[e]||E)return;function n(e){return"__firebase__banner__".concat(e)}C[e]=t;const r="__firebase__banner",o=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(C))C[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{E=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),s=n("learnmore"),c=document.getElementById(s)||document.createElement("a"),l=n("preprendIcon"),u=document.getElementById(l)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(c,s);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,l),t.append(u,a,c,n),document.body.appendChild(t)}o?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function A(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function I(){var e;const t=null===(e=g())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function x(){return!I()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N(){try{return"object"===typeof indexedDB}catch(e){return!1}}class T extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,T.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,k.prototype.create)}}class k{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],o=r?function(e,t){return e.replace(O,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(o," (").concat(n,").");return new T(n,i,t)}}const O=/\{\$([^}]+)}/g;function R(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const n=e[o],i=t[o];if(P(n)&&P(i)){if(!R(n,i))return!1}else if(n!==i)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function P(e){return null!==e&&"object"===typeof e}function j(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function D(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function M(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class L{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=B),void 0===r.error&&(r.error=B),void 0===r.complete&&(r.complete=B);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),o}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B(){}function F(e){return e&&e._delegate?e._delegate:e}class U{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const V="[DEFAULT]";class z{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new w;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:V})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(o)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const i=this.instances.get(r);return i&&e(i,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const o of n)try{o(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(o=t,o===V?void 0:o),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var o;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return this.component?this.component.multipleInstances?e:V:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class H{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new z(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const G=[];var W;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(W||(W={}));const q={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},X=W.INFO,K={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},Y=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=K[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class Q{constructor(e){this.name=e,this._logLevel=X,this._logHandler=Y,this._userLogHandler=null,G.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in W))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?q[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...t),this._logHandler(this,W.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...t),this._logHandler(this,W.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,W.INFO,...t),this._logHandler(this,W.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,W.WARN,...t),this._logHandler(this,W.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,W.ERROR,...t),this._logHandler(this,W.ERROR,...t)}}let Z,$;const J=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakMap;let oe={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ee.get(e);if("objectStoreNames"===t)return e.objectStoreNames||te.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return se(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ie(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?($||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ce(this),n),se(J.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return se(e.apply(ce(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];const i=e.call(ce(this),t,...r);return te.set(i,t.sort?t.sort():[t]),se(i)}}function ae(e){return"function"===typeof e?ie(e):(e instanceof IDBTransaction&&function(e){if(ee.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)});ee.set(e,t)}(e),t=e,(Z||(Z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,oe):e);var t}function se(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(se(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&J.set(t,e)}).catch(()=>{}),re.set(t,e),t}(e);if(ne.has(e))return ne.get(e);const t=ae(e);return t!==e&&(ne.set(e,t),re.set(t,e)),t}const ce=e=>re.get(e);const le=["get","getKey","getAll","getAllKeys","count"],ue=["put","add","delete","clear"],de=new Map;function he(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(de.get(t))return de.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=ue.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!le.includes(n))return;const i=async function(e){const t=this.transaction(e,o?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),c=1;c<a;c++)s[c-1]=arguments[c];return r&&(i=i.index(s.shift())),(await Promise.all([i[n](...s),o&&t.done]))[0]};return de.set(t,i),i}oe=(e=>s(s({},e),{},{get:(t,n,r)=>he(t,n)||e.get(t,n,r),has:(t,n)=>!!he(t,n)||e.has(t,n)}))(oe);class fe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const pe="@firebase/app",ge="0.14.6",me=new Q("@firebase/app"),ye="@firebase/app-compat",ve="@firebase/analytics-compat",we="@firebase/analytics",be="@firebase/app-check-compat",_e="@firebase/app-check",Ce="@firebase/auth",Ee="@firebase/auth-compat",Se="@firebase/database",Ae="@firebase/data-connect",Ie="@firebase/database-compat",xe="@firebase/functions",Ne="@firebase/functions-compat",Te="@firebase/installations",ke="@firebase/installations-compat",Oe="@firebase/messaging",Re="@firebase/messaging-compat",Pe="@firebase/performance",je="@firebase/performance-compat",De="@firebase/remote-config",Me="@firebase/remote-config-compat",Le="@firebase/storage",Be="@firebase/storage-compat",Fe="@firebase/firestore",Ue="@firebase/ai",Ve="@firebase/firestore-compat",ze="firebase",He="[DEFAULT]",Ge={[pe]:"fire-core",[ye]:"fire-core-compat",[we]:"fire-analytics",[ve]:"fire-analytics-compat",[_e]:"fire-app-check",[be]:"fire-app-check-compat",[Ce]:"fire-auth",[Ee]:"fire-auth-compat",[Se]:"fire-rtdb",[Ae]:"fire-data-connect",[Ie]:"fire-rtdb-compat",[xe]:"fire-fn",[Ne]:"fire-fn-compat",[Te]:"fire-iid",[ke]:"fire-iid-compat",[Oe]:"fire-fcm",[Re]:"fire-fcm-compat",[Pe]:"fire-perf",[je]:"fire-perf-compat",[De]:"fire-rc",[Me]:"fire-rc-compat",[Le]:"fire-gcs",[Be]:"fire-gcs-compat",[Fe]:"fire-fst",[Ve]:"fire-fst-compat",[Ue]:"fire-vertex","fire-js":"fire-js",[ze]:"fire-js-all"},We=new Map,qe=new Map,Xe=new Map;function Ke(e,t){try{e.container.addComponent(t)}catch(n){me.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ye(e){const t=e.name;if(Xe.has(t))return me.debug("There were multiple attempts to register component ".concat(t,".")),!1;Xe.set(t,e);for(const n of We.values())Ke(n,e);for(const n of qe.values())Ke(n,e);return!0}function Qe(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ze(e){return null!==e&&void 0!==e&&void 0!==e.settings}const $e=new k("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Je{constructor(e,t,n){this._isDeleted=!1,this._options=s({},e),this._config=s({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new U("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $e.create("app-deleted",{appName:this._name})}}const et="12.6.0";function tt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=s({name:He,automaticDataCollectionEnabled:!0},t),o=r.name;if("string"!==typeof o||!o)throw $e.create("bad-app-name",{appName:String(o)});if(n||(n=y()),!n)throw $e.create("no-options");const i=We.get(o);if(i){if(R(n,i.options)&&R(r,i.config))return i;throw $e.create("duplicate-app",{appName:o})}const a=new H(o);for(const s of Xe.values())a.addComponent(s);const c=new Je(n,r,a);return We.set(o,c),c}function nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;const t=We.get(e);if(!t&&e===He&&y())return tt();if(!t)throw $e.create("no-app",{appName:e});return t}function rt(e,t,n){var r;let o=null!==(r=Ge[e])&&void 0!==r?r:e;n&&(o+="-".concat(n));const i=o.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(o,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(o,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void me.warn(e.join(" "))}Ye(new U("".concat(o,"-version"),()=>({library:o,version:t}),"VERSION"))}const ot="firebase-heartbeat-store";let it=null;function at(){return it||(it=function(e,t){let{blocked:n,upgrade:r,blocking:o,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=se(a);return r&&a.addEventListener("upgradeneeded",e=>{r(se(a.result),e.oldVersion,e.newVersion,se(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{i&&e.addEventListener("close",()=>i()),o&&e.addEventListener("versionchange",e=>o(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ot)}catch(n){console.warn(n)}}}).catch(e=>{throw $e.create("idb-open",{originalErrorMessage:e.message})})),it}async function st(e,t){try{const n=(await at()).transaction(ot,"readwrite"),r=n.objectStore(ot);await r.put(t,ct(e)),await n.done}catch(n){if(n instanceof T)me.warn(n.message);else{const e=$e.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});me.warn(e.message)}}}function ct(e){return"".concat(e.name,"!").concat(e.options.appId)}class lt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ut();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){me.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ut(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const o of e){const e=n.find(e=>e.agent===o.agent);if(e){if(e.dates.push(o.date),ht(n)>t){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),ht(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),o=h(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return me.warn(t),""}}}function ut(){return(new Date).toISOString().substring(0,10)}class dt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!N()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await at()).transaction(ot),n=await t.objectStore(ot).get(ct(e));return await t.done,n}catch(t){if(t instanceof T)me.warn(t.message);else{const e=$e.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});me.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return st(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return st(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ht(e){return h(JSON.stringify({version:2,heartbeats:e})).length}var ft;ft="",Ye(new U("platform-logger",e=>new fe(e),"PRIVATE")),Ye(new U("heartbeat",e=>new lt(e),"PRIVATE")),rt(pe,ge,ft),rt(pe,ge,"esm2020"),rt("fire-js","");const pt=["providerId"],gt=["uid","auth","stsTokenManager"],mt=["providerId","signInMethod"];function yt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vt=yt,wt=new k("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),bt=new Q("@firebase/auth");function _t(e){if(bt.logLevel<=W.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];bt.error("Auth (".concat(et,"): ").concat(e),...n)}}function Ct(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw It(e,...n)}function Et(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return It(e,...n)}function St(e,t,n){const r=s(s({},vt()),{},{[t]:n});return new k("auth","Firebase",r).create(t,{appName:e.name})}function At(e){return St(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function It(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return wt.create(e,...n)}function xt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];throw It(t,...r)}}function Nt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw _t(t),new Error(t)}function Tt(e,t){e||Nt(t)}function kt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ot(){return"http:"===Rt()||"https:"===Rt()}function Rt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Pt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ot()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class jt{constructor(e,t){this.shortDelay=e,this.longDelay=t,Tt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(A())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Pt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Dt(e,t){Tt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Mt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Nt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Nt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Nt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Lt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Bt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ft=new jt(3e4,6e4);function Ut(e,t){return e.tenantId&&!t.tenantId?s(s({},t),{},{tenantId:e.tenantId}):t}async function Vt(e,t,n,r){return zt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let o={},i={};r&&("GET"===t?i=r:o={body:JSON.stringify(r)});const a=j(s({key:e.config.apiKey},i)).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const l=s({method:t,headers:c},o);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&b(e.emulatorConfig.host)&&(l.credentials="include"),Mt.fetch()(await Gt(e,e.config.apiHost,n,a),l)})}async function zt(e,t,n){e._canInitEmulator=!1;const r=s(s({},Lt),t);try{const t=new qt(e),o=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await o.json();if("needConfirmation"in i)throw Xt(e,"account-exists-with-different-credential",i);if(o.ok&&!("errorMessage"in i))return i;{const t=o.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Xt(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Xt(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Xt(e,"user-disabled",i);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw St(e,s,a);Ct(e,s)}}catch(o){if(o instanceof T)throw o;Ct(e,"network-request-failed",{message:String(o)})}}async function Ht(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await Vt(e,t,n,r,o);return"mfaPendingCredential"in i&&Ct(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function Gt(e,t,n,r){const o="".concat(t).concat(n,"?").concat(r),i=e,a=i.config.emulator?Dt(e.config,o):"".concat(e.config.apiScheme,"://").concat(o);if(Bt.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function Wt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Et(this.auth,"network-request-failed")),Ft.get())})}}function Xt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Et(e,t,r);return o.customData._tokenResponse=n,o}function Kt(e){return void 0!==e&&void 0!==e.enterprise}class Yt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Wt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Qt(e,t){return Vt(e,"GET","/v2/recaptchaConfig",Ut(e,t))}async function Zt(e,t){return Vt(e,"POST","/v1/accounts:lookup",t)}function $t(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Jt(e){return 1e3*Number(e)}function en(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return _t("JWT malformed, contained fewer than 3 sections"),null;try{const e=f(n);return e?JSON.parse(e):(_t("Failed to decode base64 JWT payload"),null)}catch(o){return _t("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function tn(e){const t=en(e);return xt(t,"internal-error"),xt("undefined"!==typeof t.exp,"internal-error"),xt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function nn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof T&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class rn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class on{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$t(this.lastLoginAt),this.creationTime=$t(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function an(e){var t;const n=e.auth,r=await e.getIdToken(),o=await nn(e,Zt(n,{idToken:r}));xt(null===o||void 0===o?void 0:o.users.length,n,"internal-error");const i=o.users[0];e._notifyReloadListener(i);const a=null!==(t=i.providerUserInfo)&&void 0!==t&&t.length?sn(i.providerUserInfo):[],s=(c=e.providerData,l=a,[...c.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var c,l;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null!==s&&void 0!==s&&s.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new on(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function sn(e){return e.map(e=>{let{providerId:t}=e,n=c(e,pt);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class cn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xt(e.idToken,"internal-error"),xt("undefined"!==typeof e.idToken,"internal-error"),xt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):tn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xt(0!==e.length,"internal-error");const t=tn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(xt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:o}=await async function(e,t){const n=await zt(e,{},async()=>{const n=j({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=e.config,i=await Gt(e,r,"/v1/token","key=".concat(o)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const s={method:"POST",headers:a,body:n};return e.emulatorConfig&&b(e.emulatorConfig.host)&&(s.credentials="include"),Mt.fetch()(i,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:o}=t,i=new cn;return n&&(xt("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(xt("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),o&&(xt("number"===typeof o,"internal-error",{appName:e}),i.expirationTime=o),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cn,this.toJSON())}_performRefresh(){return Nt("not implemented")}}function ln(e,t){xt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class un{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,o=c(e,gt);this.providerId="firebase",this.proactiveRefresh=new rn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new on(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await nn(this,this.stsTokenManager.getToken(this.auth,e));return xt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=F(e),r=await n.getIdToken(t),o=en(r);xt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const i="object"===typeof o.firebase?o.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:o,token:r,authTime:$t(Jt(o.auth_time)),issuedAtTime:$t(Jt(o.iat)),expirationTime:$t(Jt(o.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=F(e);await an(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(xt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>s({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new un(s(s({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){xt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await an(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ze(this.auth.app))return Promise.reject(At(this.auth));const e=await this.getIdToken();return await nn(this,async function(e,t){return Vt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return s(s({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>s({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,o,i,a,c,l,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,p=null!==(i=t.photoURL)&&void 0!==i?i:void 0,g=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(c=t._redirectEventId)&&void 0!==c?c:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:w,emailVerified:b,isAnonymous:_,providerData:C,stsTokenManager:E}=t;xt(w&&E,e,"internal-error");const S=cn.fromJSON(this.name,E);xt("string"===typeof w,e,"internal-error"),ln(d,e.name),ln(h,e.name),xt("boolean"===typeof b,e,"internal-error"),xt("boolean"===typeof _,e,"internal-error"),ln(f,e.name),ln(p,e.name),ln(g,e.name),ln(m,e.name),ln(y,e.name),ln(v,e.name);const A=new un({uid:w,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:_,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:S,createdAt:y,lastLoginAt:v});return C&&Array.isArray(C)&&(A.providerData=C.map(e=>s({},e))),m&&(A._redirectEventId=m),A}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new cn;r.updateFromServerResponse(t);const o=new un({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await an(o),o}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];xt(void 0!==r.localId,"internal-error");const o=void 0!==r.providerUserInfo?sn(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null!==o&&void 0!==o&&o.length),a=new cn;a.updateFromIdToken(n);const s=new un({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new on(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==o&&void 0!==o&&o.length)};return Object.assign(s,c),s}}const dn=new Map;function hn(e){Tt(e instanceof Function,"Expected a class definition");let t=dn.get(e);return t?(Tt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,dn.set(e,t),t)}class fn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}fn.type="NONE";const pn=fn;function gn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class mn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:o}=this.auth;this.fullUserKey=gn(this.userKey,r.apiKey,o),this.fullPersistenceKey=gn("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Zt(this.auth,{idToken:e}).catch(()=>{});return t?un._fromGetAccountInfoResponse(this.auth,t,e):null}return un._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new mn(hn(pn),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let o=r[0]||hn(pn);const i=gn(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(i);if(t){let n;if("string"===typeof t){const r=await Zt(e,{idToken:t}).catch(()=>{});if(!r)break;n=await un._fromGetAccountInfoResponse(e,r,t)}else n=un._fromJSON(e,t);l!==o&&(a=n),o=l;break}}catch(c){}const s=r.filter(e=>e._shouldAllowMigration);return o._shouldAllowMigration&&s.length?(o=s[0],a&&await o._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==o)try{await e._remove(i)}catch(t){}})),new mn(o,e,n)):new mn(o,e,n)}}function yn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_n(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(vn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(En(t))return"Blackberry";if(Sn(t))return"Webos";if(wn(t))return"Safari";if((t.includes("chrome/")||bn(t))&&!t.includes("edge/"))return"Chrome";if(Cn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A();return/firefox\//i.test(e)}function wn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:A()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A();return/crios\//i.test(e)}function _n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A();return/iemobile/i.test(e)}function Cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A();return/android/i.test(e)}function En(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A();return/blackberry/i.test(e)}function Sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A();return/webos/i.test(e)}function An(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function In(){return function(){const e=A();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function xn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A();return An(e)||Cn(e)||Sn(e)||En(e)||/windows phone/i.test(e)||_n(e)}function Nn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=yn(A());break;case"Worker":t="".concat(yn(A()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(et,"/").concat(r)}class Tn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(o){r(o)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class kn{constructor(e){var t,n,r,o;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,o,i,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(o=s.containsUppercaseLetter)||void 0===o||o),s.isValid&&(s.isValid=null===(i=s.containsNumericCharacter)||void 0===i||i),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class On{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pn(this),this.idTokenSubscription=new Pn(this),this.beforeStateQueue=new Tn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hn(t)),this._initializationPromise=this.queue(async()=>{var n,r,o;if(!this._deleted&&(this.persistenceManager=await mn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(o=this.currentUser)||void 0===o?void 0:o.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Zt(this,{idToken:e}),n=await un._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ze(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var o,i;await this.getOrInitRedirectPersistenceManager();const t=null===(o=this.redirectUser)||void 0===o?void 0:o._redirectEventId,a=null===(i=n)||void 0===i?void 0:i._redirectEventId,s=await this.tryRedirectSignIn(e);t&&t!==a||null===s||void 0===s||!s.user||(n=s.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return xt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await an(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ze(this.app))return Promise.reject(At(this));const t=e?F(e):null;return t&&xt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&xt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ze(this.app)?Promise.reject(At(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ze(this.app)?Promise.reject(At(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Vt(e,"GET","/v2/passwordPolicy",Ut(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new kn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new k("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Vt(e,"POST","/v2/accounts:revokeToken",Ut(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&hn(e)||this._popupRedirectResolver;xt(t,this,"argument-error"),this.redirectPersistenceManager=await mn.create(this,[hn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const o="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(xt(a,this,"internal-error"),a.then(()=>{i||o(this.currentUser)}),"function"===typeof t){const o=e.addObserver(t,n,r);return()=>{i=!0,o()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Ze(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(bt.logLevel<=W.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];bt.warn("Auth (".concat(et,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Rn(e){return F(e)}class Pn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new L(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return xt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let jn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Dn(e){return jn.loadJS(e)}function Mn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ln{constructor(){this.enterprise=new Bn}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Bn{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Fn="NO_RECAPTCHA";class Un{constructor(e){this.type="recaptcha-enterprise",this.auth=Rn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const o=window.grecaptcha;Kt(o)?o.enterprise.ready(()=>{o.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Fn)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ln).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Qt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Yt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(o=>{if(!t&&Kt(window.grecaptcha))n(o,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=jn.recaptchaEnterpriseScript;0!==t.length&&(t+=o),Dn(t).then(()=>{n(o,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Vn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new Un(e);let a;if(o)a=Fn;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const c=s({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in c){const e=c.phoneEnrollmentInfo.phoneNumber,t=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const e=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function zn(e,t,n,r,o){if("EMAIL_PASSWORD_PROVIDER"===o){var i;if(null!==(i=e._getRecaptchaConfig())&&void 0!==i&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Vn(e,t,n,"getOobCode"===n);return r(e,o)}return r(e,t).catch(async o=>{if(o.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const o=await Vn(e,t,n,"getOobCode"===n);return r(e,o)}return Promise.reject(o)})}if("PHONE_PROVIDER"===o){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const o=await Vn(e,t,n);return r(e,o).catch(async o=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(o.code==="auth/".concat("missing-recaptcha-token")||o.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const o=await Vn(e,t,n,!1,!0);return r(e,o)}return Promise.reject(o)})}{const o=await Vn(e,t,n,!1,!0);return r(e,o)}}return Promise.reject(o+" provider is not supported.")}async function Hn(e){const t=Rn(e),n=await Qt(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Yt(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Un(t).verify()}}function Gn(e,t,n){const r=Rn(e);xt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!(null===n||void 0===n||!n.disableWarnings),i=Wn(t),{host:a,port:s}=function(e){const t=Wn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const e=o[1];return{host:e,port:qn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:qn(t)}}}(t),c=null===s?"":":".concat(s),l={url:"".concat(i,"//").concat(a).concat(c,"/")},u=Object.freeze({host:a,port:s,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator)return xt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void xt(R(l,r.config.emulator)&&R(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,b(a)?(_("".concat(i,"//").concat(a).concat(c)),S("Auth",!0)):o||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Wn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function qn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Xn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Nt("not implemented")}_getIdTokenResponse(e){return Nt("not implemented")}_linkToIdToken(e,t){return Nt("not implemented")}_getReauthenticationResolver(e){return Nt("not implemented")}}async function Kn(e,t){return Vt(e,"POST","/v1/accounts:signUp",t)}async function Yn(e,t){return Ht(e,"POST","/v1/accounts:signInWithPassword",Ut(e,t))}class Qn extends Xn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Qn(e,t,"password")}static _fromEmailAndCode(e,t){return new Qn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return zn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Yn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Ht(e,"POST","/v1/accounts:signInWithEmailLink",Ut(e,t))}(e,{email:this._email,oobCode:this._password});default:Ct(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return zn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Kn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Ht(e,"POST","/v1/accounts:signInWithEmailLink",Ut(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ct(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Zn(e,t){return Ht(e,"POST","/v1/accounts:signInWithIdp",Ut(e,t))}class $n extends Xn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ct("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,o=c(t,mt);if(!n||!r)return null;const i=new $n(n,r);return i.idToken=o.idToken||void 0,i.accessToken=o.accessToken||void 0,i.secret=o.secret,i.nonce=o.nonce,i.pendingToken=o.pendingToken||null,i}_getIdTokenResponse(e){return Zn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Zn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=j(t)}return e}}async function Jn(e,t){return Vt(e,"POST","/v1/accounts:sendVerificationCode",Ut(e,t))}const er={USER_NOT_FOUND:"user-not-found"};class tr extends Xn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new tr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new tr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Ht(e,"POST","/v1/accounts:signInWithPhoneNumber",Ut(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Ht(e,"POST","/v1/accounts:signInWithPhoneNumber",Ut(e,t));if(n.temporaryProof)throw Xt(e,"account-exists-with-different-credential",n);return n}(e,s({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Ht(e,"POST","/v1/accounts:signInWithPhoneNumber",Ut(e,s(s({},t),{},{operation:"REAUTH"})),er)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:o}=e;return n||t||r||o?new tr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:o}):null}}class nr{constructor(e){var t,n,r,o,i,a;const s=D(M(e)),c=null!==(t=s.apiKey)&&void 0!==t?t:null,l=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);xt(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(o=s.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(i=s.lang)&&void 0!==i?i:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=D(M(e)).link,n=t?D(M(t)).deep_link_id:null,r=D(M(e)).deep_link_id;return(r?D(M(r)).link:null)||r||n||t||e}(e);try{return new nr(t)}catch(n){return null}}}class rr{constructor(){this.providerId=rr.PROVIDER_ID}static credential(e,t){return Qn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=nr.parseLink(t);return xt(n,"argument-error"),Qn._fromEmailAndCode(e,n.code,n.tenantId)}}rr.PROVIDER_ID="password",rr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",rr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class or{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ir extends or{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ar extends ir{constructor(){super("facebook.com")}static credential(e){return $n._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ar.credential(t.oauthAccessToken)}catch(n){return null}}}ar.FACEBOOK_SIGN_IN_METHOD="facebook.com",ar.PROVIDER_ID="facebook.com";class sr extends ir{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $n._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return sr.credential(n,r)}catch(o){return null}}}sr.GOOGLE_SIGN_IN_METHOD="google.com",sr.PROVIDER_ID="google.com";class cr extends ir{constructor(){super("github.com")}static credential(e){return $n._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return cr.credential(t.oauthAccessToken)}catch(n){return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com",cr.PROVIDER_ID="github.com";class lr extends ir{constructor(){super("twitter.com")}static credential(e,t){return $n._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return lr.credential(n,r)}catch(o){return null}}}async function ur(e,t){return Ht(e,"POST","/v1/accounts:signUp",Ut(e,t))}lr.TWITTER_SIGN_IN_METHOD="twitter.com",lr.PROVIDER_ID="twitter.com";class dr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=await un._fromIdTokenResponse(e,n,r),i=hr(n);return new dr({user:o,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=hr(n);return new dr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function hr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class fr extends T{constructor(e,t,n,r){var o;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,fr.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new fr(e,t,n,r)}}function pr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw fr._fromErrorAndOperation(e,n,t,r);throw n})}async function gr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await nn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return dr._forOperation(e,"link",r)}async function mr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Ze(r.app))return Promise.reject(At(r));const o="reauthenticate";try{const i=await nn(e,pr(r,o,t,e),n);xt(i.idToken,r,"internal-error");const a=en(i.idToken);xt(a,r,"internal-error");const{sub:s}=a;return xt(e.uid===s,r,"user-mismatch"),dr._forOperation(e,o,i)}catch(i){throw(null===i||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&Ct(r,"user-mismatch"),i}}async function yr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ze(e.app))return Promise.reject(At(e));const r="signIn",o=await pr(e,r,t),i=await dr._fromIdTokenResponse(e,r,o);return n||await e._updateCurrentUser(i.user),i}async function vr(e,t){return yr(Rn(e),t)}async function wr(e){const t=Rn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function br(e,t,n){if(Ze(e.app))return Promise.reject(At(e));const r=Rn(e),o=zn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ur,"EMAIL_PASSWORD_PROVIDER"),i=await o.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&wr(e),t}),a=await dr._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}function _r(e,t,n){return Ze(e.app)?Promise.reject(At(e)):vr(F(e),rr.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&wr(e),t})}function Cr(e,t){return Vt(e,"POST","/v2/accounts/mfaEnrollment:start",Ut(e,t))}new WeakMap;const Er="__sak";class Sr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Er,"1"),this.storage.removeItem(Er),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ar extends Sr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},o=this.storage.getItem(n);In()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ar.type="LOCAL";const Ir=Ar;function xr(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),o=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(o))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Nr(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Tr{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Nr(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return xr(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Nr(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Nr(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=xr(n);const o=setInterval(()=>{const e=xr(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(o))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Tr.type="COOKIE";class kr extends Sr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kr.type="SESSION";const Or=kr;class Rr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Rr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:o}=t.data,i=this.handlersMap[r];if(null===i||void 0===i||!i.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,o)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Pr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Rr.receivers=[];class jr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,i;return new Promise((a,s)=>{const c=Pr("",20);r.port1.start();const l=setTimeout(()=>{s(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),o=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(t.data.response);break;default:clearTimeout(l),clearTimeout(o),s(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Dr(){return window}function Mr(){return"undefined"!==typeof Dr().WorkerGlobalScope&&"function"===typeof Dr().importScripts}const Lr="firebaseLocalStorageDb",Br="firebaseLocalStorage",Fr="fbase_key";class Ur{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vr(e,t){return e.transaction([Br],t?"readwrite":"readonly").objectStore(Br)}function zr(){const e=indexedDB.open(Lr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Br,{keyPath:Fr})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Br)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Lr);return new Ur(e).toPromise()}(),t(await zr()))})})}async function Hr(e,t,n){const r=Vr(e,!0).put({[Fr]:t,value:n});return new Ur(r).toPromise()}function Gr(e,t){const n=Vr(e,!0).delete(t);return new Ur(n).toPromise()}class Wr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await zr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rr._getInstance(Mr()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new jr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zr();return await Hr(e,Er,"1"),await Gr(e,Er),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Hr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Vr(e,!1).get(t),r=await new Ur(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Gr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Vr(e,!1).getAll();return new Ur(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:o}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Wr.type="LOCAL";const qr=Wr;function Xr(e,t){return Vt(e,"POST","/v2/accounts/mfaSignIn:start",Ut(e,t))}Mn("rcb"),new jt(3e4,6e4);const Kr="recaptcha";async function Yr(e,t,n){if(!e._getRecaptchaConfig())try{await Hn(e)}catch(o){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let o;if(o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){xt("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=zn(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Fn){xt((null===n||void 0===n?void 0:n.type)===Kr,e,"argument-error");return Cr(e,await Qr(e,t,n))}return Cr(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;xt("signin"===t.type,e,"internal-error");const i=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;xt(i,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},s=zn(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Fn){xt((null===n||void 0===n?void 0:n.type)===Kr,e,"argument-error");return Xr(e,await Qr(e,t,n))}return Xr(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:o.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=zn(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Fn){xt((null===n||void 0===n?void 0:n.type)===Kr,e,"argument-error");return Jn(e,await Qr(e,t,n))}return Jn(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Qr(e,t,n){xt(n.type===Kr,e,"argument-error");const r=await n.verify();xt("string"===typeof r,e,"argument-error");const o=s({},t);if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.captchaResponse,n=o.phoneEnrollmentInfo.clientType,i=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),o}if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.captchaResponse,t=o.phoneSignInInfo.clientType,n=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),o}return Object.assign(o,{recaptchaToken:r}),o}class Zr{constructor(e){this.providerId=Zr.PROVIDER_ID,this.auth=Rn(e)}verifyPhoneNumber(e,t){return Yr(this.auth,e,F(t))}static credential(e,t){return tr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Zr.credentialFromTaggedObject(t)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?tr._fromTokenResponse(n,r):null}}function $r(e,t){return t?hn(t):(xt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Zr.PROVIDER_ID="phone",Zr.PHONE_SIGN_IN_METHOD="phone";class Jr extends Xn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eo(e){return yr(e.auth,new Jr(e),e.bypassAuthState)}function to(e){const{auth:t,user:n}=e;return xt(n,t,"internal-error"),mr(n,new Jr(e),e.bypassAuthState)}async function no(e){const{auth:t,user:n}=e;return xt(n,t,"internal-error"),gr(n,new Jr(e),e.bypassAuthState)}class ro{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:o,error:i,type:a}=e;if(i)return void this.reject(i);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eo;case"linkViaPopup":case"linkViaRedirect":return no;case"reauthViaPopup":case"reauthViaRedirect":return to;default:Ct(this.auth,"internal-error")}}resolve(e){Tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oo=new jt(2e3,1e4);class io extends ro{constructor(e,t,n,r,o){super(e,t,r,o),this.provider=n,this.authWindow=null,this.pollId=null,io.currentPopupAction&&io.currentPopupAction.cancel(),io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xt(e,this.auth,"internal-error"),e}async onExecution(){Tt(1===this.filter.length,"Popup operations only handle one event");const e=Pr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Et(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Et(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,oo.get())};e()}}io.currentPopupAction=null;const ao=new Map;class so extends ro{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ao.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=uo(t),r=lo(e);if(!await r._isAvailable())return!1;const o="true"===await r._get(n);return await r._remove(n),o}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}ao.set(this.auth._key(),e)}return this.bypassAuthState||ao.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function co(e,t){ao.set(e._key(),t)}function lo(e){return hn(e._redirectPersistence)}function uo(e){return gn("pendingRedirect",e.config.apiKey,e.name)}async function ho(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ze(e.app))return Promise.reject(At(e));const r=Rn(e),o=$r(r,t),i=new so(r,o,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class fo{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return go(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!go(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Et(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(po(e))}saveEventToCache(e){this.cachedEventUids.add(po(e)),this.lastProcessedEventTime=Date.now()}}function po(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function go(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const mo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yo=/^https?/;async function vo(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Vt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(wo(r))return}catch(n){}Ct(e,"unauthorized-domain")}function wo(e){const t=kt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return""===o.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!yo.test(n))return!1;if(mo.test(e))return r===e;const o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const bo=new jt(3e4,6e4);function _o(){const e=Dr().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Co(e){return new Promise((t,n)=>{var r,o;function i(){_o(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_o(),n(Et(e,"network-request-failed"))},timeout:bo.get()})}if(null!==(r=Dr().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(o=Dr().gapi)||void 0===o||!o.load){const t=Mn("iframefcb");return Dr()[t]=()=>{gapi.load?i():n(Et(e,"network-request-failed"))},Dn("".concat(jn.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}i()}}).catch(e=>{throw Eo=null,e})}let Eo=null;const So=new jt(5e3,15e3),Ao={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Io=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xo(e){const t=e.config;xt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Dt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:et},o=Io.get(e.config.apiHost);o&&(r.eid=o);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(j(r).slice(1))}async function No(e){const t=await function(e){return Eo=Eo||Co(e),Eo}(e),n=Dr().gapi;return xt(n,e,"internal-error"),t.open({where:document.body,url:xo(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ao,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const o=Et(e,"network-request-failed"),i=Dr().setTimeout(()=>{r(o)},So.get());function a(){Dr().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(o)})}))}const To={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ko{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Oo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-o)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l=s(s({},To),{},{width:r.toString(),height:o.toString(),top:i,left:a}),u=A().toLowerCase();n&&(c=bn(u)?"_blank":n),vn(u)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return An(arguments.length>0&&void 0!==arguments[0]?arguments[0]:A())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new ko(null);const h=window.open(t||"",c,d);xt(h,e,"popup-blocked");try{h.focus()}catch(f){}return new ko(h)}const Ro="__/auth/handler",Po="emulator/auth/handler",jo=encodeURIComponent("fac");async function Do(e,t,n,r,o,i){xt(e.config.authDomain,e,"auth-domain-config-required"),xt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:et,eventId:o};if(t instanceof or){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof ir){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const u of Object.keys(s))void 0===s[u]&&delete s[u];const c=await e._getAppCheckToken(),l=c?"#".concat(jo,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ro);return Dt(t,Po)}(e),"?").concat(j(s).slice(1)).concat(l)}const Mo="webStorageSupport";const Lo=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Or,this._completeRedirectFn=ho,this._overrideRedirectResult=co}async _openPopup(e,t,n,r){var o;Tt(null===(o=this.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");return Oo(e,await Do(e,t,n,kt(),r),Pr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Dr().location.href=e}(await Do(e,t,n,kt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Tt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await No(e),n=new fo(e);return t.register("authEvent",t=>{xt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mo,{type:Mo},n=>{var r;const o=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Mo];void 0!==o&&t(!!o),Ct(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vo(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xn()||wn()||An()}};var Bo="@firebase/auth",Fo="1.12.0";class Uo{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Vo=v("authIdTokenMaxAge")||300;let zo=null;var Ho;jn={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Et("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ho="Browser",Ye(new U("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;xt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:s,clientPlatform:Ho,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nn(Ho)},l=new On(r,o,i,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(hn);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ye(new U("auth-internal",e=>(e=>new Uo(e))(Rn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),rt(Bo,Fo,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ho)),rt(Bo,Fo,"esm2020");var Go,Wo,qo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Xo={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var o=0;o<16;++o)r[o]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(o=0;o<16;++o)r[o]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],o=e.g[2];let i,a=e.g[3];i=t+(a^n&(o^a))+r[0]+3614090360&4294967295,i=a+(o^(t=n+(i<<7&4294967295|i>>>25))&(n^o))+r[1]+3905402710&4294967295,a=t+(i<<12&4294967295|i>>>20),i=o+(n^a&(t^n))+r[2]+606105819&4294967295,i=n+(t^(o=a+(i<<17&4294967295|i>>>15))&(a^t))+r[3]+3250441966&4294967295,i=t+(a^(n=o+(i<<22&4294967295|i>>>10))&(o^a))+r[4]+4118548399&4294967295,i=a+(o^(t=n+(i<<7&4294967295|i>>>25))&(n^o))+r[5]+1200080426&4294967295,a=t+(i<<12&4294967295|i>>>20),i=o+(n^a&(t^n))+r[6]+2821735955&4294967295,i=n+(t^(o=a+(i<<17&4294967295|i>>>15))&(a^t))+r[7]+4249261313&4294967295,i=t+(a^(n=o+(i<<22&4294967295|i>>>10))&(o^a))+r[8]+1770035416&4294967295,i=a+(o^(t=n+(i<<7&4294967295|i>>>25))&(n^o))+r[9]+2336552879&4294967295,a=t+(i<<12&4294967295|i>>>20),i=o+(n^a&(t^n))+r[10]+4294925233&4294967295,i=n+(t^(o=a+(i<<17&4294967295|i>>>15))&(a^t))+r[11]+2304563134&4294967295,i=t+(a^(n=o+(i<<22&4294967295|i>>>10))&(o^a))+r[12]+1804603682&4294967295,i=a+(o^(t=n+(i<<7&4294967295|i>>>25))&(n^o))+r[13]+4254626195&4294967295,a=t+(i<<12&4294967295|i>>>20),i=o+(n^a&(t^n))+r[14]+2792965006&4294967295,i=n+(t^(o=a+(i<<17&4294967295|i>>>15))&(a^t))+r[15]+1236535329&4294967295,i=t+(o^a&((n=o+(i<<22&4294967295|i>>>10))^o))+r[1]+4129170786&4294967295,i=a+(n^o&((t=n+(i<<5&4294967295|i>>>27))^n))+r[6]+3225465664&4294967295,a=t+(i<<9&4294967295|i>>>23),i=o+(t^n&(a^t))+r[11]+643717713&4294967295,i=n+(a^t&((o=a+(i<<14&4294967295|i>>>18))^a))+r[0]+3921069994&4294967295,i=t+(o^a&((n=o+(i<<20&4294967295|i>>>12))^o))+r[5]+3593408605&4294967295,i=a+(n^o&((t=n+(i<<5&4294967295|i>>>27))^n))+r[10]+38016083&4294967295,a=t+(i<<9&4294967295|i>>>23),i=o+(t^n&(a^t))+r[15]+3634488961&4294967295,i=n+(a^t&((o=a+(i<<14&4294967295|i>>>18))^a))+r[4]+3889429448&4294967295,i=t+(o^a&((n=o+(i<<20&4294967295|i>>>12))^o))+r[9]+568446438&4294967295,i=a+(n^o&((t=n+(i<<5&4294967295|i>>>27))^n))+r[14]+3275163606&4294967295,a=t+(i<<9&4294967295|i>>>23),i=o+(t^n&(a^t))+r[3]+4107603335&4294967295,i=n+(a^t&((o=a+(i<<14&4294967295|i>>>18))^a))+r[8]+1163531501&4294967295,i=t+(o^a&((n=o+(i<<20&4294967295|i>>>12))^o))+r[13]+2850285829&4294967295,i=a+(n^o&((t=n+(i<<5&4294967295|i>>>27))^n))+r[2]+4243563512&4294967295,a=t+(i<<9&4294967295|i>>>23),i=o+(t^n&(a^t))+r[7]+1735328473&4294967295,i=n+(a^t&((o=a+(i<<14&4294967295|i>>>18))^a))+r[12]+2368359562&4294967295,i=t+((n=o+(i<<20&4294967295|i>>>12))^o^a)+r[5]+4294588738&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^o)+r[8]+2272392833&4294967295,a=t+(i<<11&4294967295|i>>>21),i=o+(a^t^n)+r[11]+1839030562&4294967295,i=n+((o=a+(i<<16&4294967295|i>>>16))^a^t)+r[14]+4259657740&4294967295,i=t+((n=o+(i<<23&4294967295|i>>>9))^o^a)+r[1]+2763975236&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^o)+r[4]+1272893353&4294967295,a=t+(i<<11&4294967295|i>>>21),i=o+(a^t^n)+r[7]+4139469664&4294967295,i=n+((o=a+(i<<16&4294967295|i>>>16))^a^t)+r[10]+3200236656&4294967295,i=t+((n=o+(i<<23&4294967295|i>>>9))^o^a)+r[13]+681279174&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^o)+r[0]+3936430074&4294967295,a=t+(i<<11&4294967295|i>>>21),i=o+(a^t^n)+r[3]+3572445317&4294967295,i=n+((o=a+(i<<16&4294967295|i>>>16))^a^t)+r[6]+76029189&4294967295,i=t+((n=o+(i<<23&4294967295|i>>>9))^o^a)+r[9]+3654602809&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^o)+r[12]+3873151461&4294967295,a=t+(i<<11&4294967295|i>>>21),i=o+(a^t^n)+r[15]+530742520&4294967295,i=n+((o=a+(i<<16&4294967295|i>>>16))^a^t)+r[2]+3299628645&4294967295,i=t+(o^((n=o+(i<<23&4294967295|i>>>9))|~a))+r[0]+4096336452&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~o))+r[7]+1126891415&4294967295,a=t+(i<<10&4294967295|i>>>22),i=o+(t^(a|~n))+r[14]+2878612391&4294967295,i=n+(a^((o=a+(i<<15&4294967295|i>>>17))|~t))+r[5]+4237533241&4294967295,i=t+(o^((n=o+(i<<21&4294967295|i>>>11))|~a))+r[12]+1700485571&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~o))+r[3]+2399980690&4294967295,a=t+(i<<10&4294967295|i>>>22),i=o+(t^(a|~n))+r[10]+4293915773&4294967295,i=n+(a^((o=a+(i<<15&4294967295|i>>>17))|~t))+r[1]+2240044497&4294967295,i=t+(o^((n=o+(i<<21&4294967295|i>>>11))|~a))+r[8]+1873313359&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~o))+r[15]+4264355552&4294967295,a=t+(i<<10&4294967295|i>>>22),i=o+(t^(a|~n))+r[6]+2734768916&4294967295,i=n+(a^((o=a+(i<<15&4294967295|i>>>17))|~t))+r[13]+1309151649&4294967295,i=t+(o^((n=o+(i<<21&4294967295|i>>>11))|~a))+r[4]+4149444226&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~o))+r[11]+3174756917&4294967295,a=t+(i<<10&4294967295|i>>>22),i=o+(t^(a|~n))+r[2]+718787259&4294967295,i=n+(a^((o=a+(i<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(o+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+o&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let o=e.length-1;o>=0;o--){const i=0|e[o];r&&i==t||(n[o]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[n].apply(e,o)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,o=this.C;let i=this.h,a=0;for(;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(o[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,o),i=0;break}}else for(;a<t;)if(o[i++]=e[a++],i==this.blockSize){n(this,o),i=0;break}}this.h=i,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var o={};function i(e){return-128<=e&&e<128?function(e,t){var n=o;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return s;if(e<0)return h(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var s=i(0),c=i(1),l=i(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(c)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(s,s);if(d(e))return t=m(h(e),t),new g(h(t.g),h(t.h));if(d(t))return t=m(e,h(t)),new g(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=t;r.l(e)<=0;)n=y(n),r=y(r);var o=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var l=i.add(r);l.l(e)<=0&&(o=o.add(n),i=l),r=v(r,1),n=v(n,1)}return t=f(e,o.j(t)),new g(o,t)}for(o=s;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),l=(i=a(n)).j(t);d(l)||l.l(e)>0;)l=(i=a(n-=r)).j(t);u(i)&&(i=c),o=o.add(i),e=f(e,l)}return new g(o,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const o=e.g.length-n,i=[];for(let r=0;r<o;r++)i[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const o=m(n,t).g;let i=(((n=f(n,o.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=o))return i+r;for(;i.length<6;)i="0"+i;r=i+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let o=0;for(let r=0;r<=t;r++){let t=o+(65535&this.i(r))+(65535&e.i(r)),i=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);o=i>>>16,t&=65535,i&=65535,n[r]=i<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return s;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(l)<0&&e.l(l)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var o=0;o<2*t;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(let t=0;t<e.g.length;t++){const r=this.i(o)>>>16,i=65535&this.i(o),a=e.i(t)>>>16,s=65535&e.i(t);n[2*o+2*t]+=i*s,p(n,2*o+2*t),n[2*o+2*t+1]+=r*s,p(n,2*o+2*t+1),n[2*o+2*t+1]+=i*a,p(n,2*o+2*t+1),n[2*o+2*t+2]+=r*a,p(n,2*o+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return m(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Wo=Xo.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let o=s;for(let s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s);const e=parseInt(t.substring(s,s+i),n);i<8?(i=a(Math.pow(n,i)),o=o.j(i).add(a(e))):(o=o.j(r),o=o.add(a(e)))}return o},Go=Xo.Integer=r}).apply("undefined"!==typeof qo?qo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Ko,Yo,Qo,Zo,$o,Jo,ei,ti,ni="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ri={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ni&&ni];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var o=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in o))break e;o=o[a]}(r=r(i=o[e=e[e.length-1]]))!=i&&null!=r&&t(o,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var o=o||{},i=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){return(c=s).apply(null,arguments)}function l(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[n].apply(e,o)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let o=0;o<r;o++)e[n+o]=t[o]}else e.push(t)}}function p(e){i.setTimeout(()=>{throw e},0)}function g(){var e=b;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var m=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,w=!1,b=new class{constructor(){this.h=this.g=null}add(e,t){const n=m.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},_=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(C)}};function C(){for(var e;e=g();){try{e.h.call(e.g)}catch(n){p(n)}var t=m;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}w=!1}function E(){this.u=this.u,this.C=this.C}function S(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},S.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function I(e){return/^[\s\xa0]*$/.test(e)}function x(e,t){S.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(x,S),x.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&x.Z.h.call(this)},x.prototype.h=function(){x.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var N="closure_listenable_"+(1e6*Math.random()|0),T=0;function k(e,t,n,r,o){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=o,this.key=++T,this.da=this.fa=!1}function O(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function R(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function P(e){const t={};for(const n in e)t[n]=e[n];return t}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(e,t){let n,r;for(let o=1;o<arguments.length;o++){for(n in r=arguments[o],r)e[n]=r[n];for(let t=0;t<j.length;t++)n=j[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function M(e){this.src=e,this.g={},this.h=0}function L(e,t){const n=t.type;if(n in e.g){var r,o=e.g[n],i=Array.prototype.indexOf.call(o,t,void 0);(r=i>=0)&&Array.prototype.splice.call(o,i,1),r&&(O(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(let o=0;o<e.length;++o){const i=e[o];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return o}return-1}M.prototype.add=function(e,t,n,r,o){const i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);const a=B(e,t,r,o);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new k(t,this.src,i,!!r,o)).fa=n,e.push(t)),t};var F="closure_lm_"+(1e6*Math.random()|0),U={};function V(e,t,n,r,o){if(r&&r.once)return H(e,t,n,r,o);if(Array.isArray(t)){for(let i=0;i<t.length;i++)V(e,t[i],n,r,o);return null}return n=Q(n),e&&e[N]?e.J(t,n,a(r)?!!r.capture:!!r,o):z(e,t,n,!1,r,o)}function z(e,t,n,r,o,i){if(!t)throw Error("Invalid event type");const s=a(o)?!!o.capture:!!o;let c=K(e);if(c||(e[F]=c=new M(e)),(n=c.add(t,n,r,s,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)A||(o=s),void 0===o&&(o=!1),e.addEventListener(t.toString(),r,o);else if(e.attachEvent)e.attachEvent(q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function H(e,t,n,r,o){if(Array.isArray(t)){for(let i=0;i<t.length;i++)H(e,t[i],n,r,o);return null}return n=Q(n),e&&e[N]?e.K(t,n,a(r)?!!r.capture:!!r,o):z(e,t,n,!0,r,o)}function G(e,t,n,r,o){if(Array.isArray(t))for(var i=0;i<t.length;i++)G(e,t[i],n,r,o);else r=a(r)?!!r.capture:!!r,n=Q(n),e&&e[N]?(e=e.i,(i=String(t).toString())in e.g&&((n=B(t=e.g[i],n,r,o))>-1&&(O(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[i],e.h--)))):e&&(e=K(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,o)),(n=e>-1?t[e]:null)&&W(n))}function W(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[N])L(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=K(t))?(L(n,e),0==n.h&&(n.src=null,t[F]=null)):O(e)}}}function q(e){return e in U?U[e]:U[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new x(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&W(e),e=n.call(r,t)}return e}function K(e){return(e=e[F])instanceof M?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function Q(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function Z(){E.call(this),this.i=new M(this),this.M=this,this.G=null}function $(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new S(t,e);else if(t instanceof S)t.target=t.target||e;else{var o=t;D(t=new S(r,e),o)}let i,a;if(o=!0,n)for(a=n.length-1;a>=0;a--)i=t.g=n[a],o=J(i,r,!0,t)&&o;if(i=t.g=e,o=J(i,r,!0,t)&&o,o=J(i,r,!1,t)&&o,n)for(a=0;a<n.length;a++)i=t.g=n[a],o=J(i,r,!1,t)&&o}function J(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let o=!0;for(let i=0;i<t.length;++i){const a=t[i];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&L(e.i,a),o=!1!==t.call(n,r)&&o}}return o&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return Number(t)>2147483647?-1:i.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(Z,E),Z.prototype[N]=!0,Z.prototype.removeEventListener=function(e,t,n,r){G(this,e,t,n,r)},Z.prototype.N=function(){if(Z.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)O(n[e]);delete e.g[t],e.h--}}this.G=null},Z.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Z.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends E{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){E.call(this),this.h=e,this.g={}}u(ne,E);var re=[];function oe(e){R(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),oe(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ie=i.JSON.stringify,ae=i.JSON.parse,se=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function ce(){}function le(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){S.call(this,"d")}function he(){S.call(this,"c")}u(de,S),u(he,S);var fe={},pe=null;function ge(){return pe=pe||new Z}function me(e){S.call(this,fe.Ia,e)}function ye(e){const t=ge();$(t,new me(t))}function ve(e,t){S.call(this,fe.STAT_EVENT,e),this.stat=t}function we(e){const t=ge();$(t,new ve(t,e))}function be(e,t){S.call(this,fe.Ja,e),this.size=t}function _e(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ce(){this.g=!0}function Ee(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const i=JSON.parse(t);if(i)for(e=0;e<i.length;e++)if(Array.isArray(i[e])){var n=i[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(let e=1;e<r.length;e++)r[e]=""}}}return ie(i)}catch(i){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(me,S),fe.STAT_EVENT="statevent",u(ve,S),fe.Ja="timingevent",u(be,S),Ce.prototype.ua=function(){this.g=!1},Ce.prototype.info=function(){};var Se,Ae={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ie={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function xe(){}function Ne(e){return encodeURIComponent(String(e))}function Te(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ke(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}u(xe,ce),xe.prototype.g=function(){return new XMLHttpRequest},Se=new xe;var Re={},Pe={};function je(e,t,n){e.M=1,e.A=it(et(t)),e.u=n,e.R=!0,De(e,null)}function De(e,t){e.F=Date.now(),Be(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),wt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Oe,e.g=an(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(c(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var o="readystatechange";Array.isArray(o)||(o&&(re[0]=o.toString()),o=re);for(let i=0;i<o.length;i++){const e=V(n,o[i],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?P(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,o,i){e.info(function(){if(e.g)if(i){var a="",s=i.split("&");for(let e=0;e<s.length;e++){var c=s[e].split("=");if(c.length>1){const e=c[0];c=c[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+c+"&":a+(e+"=redacted&")}}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Me(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Le(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Pe:(n=Number(t.substring(n,r)),isNaN(n)?Re:(r+=1)+n>t.length?Pe:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.T=Date.now()+e.H,Fe(e,e.H)}function Fe(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=_e(c(e.aa,e),t)}function Ue(e){e.D&&(i.clearTimeout(e.D),e.D=null)}function Ve(e){0==e.j.I||e.K||en(e.j,e)}function ze(e){Ue(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,oe(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function He(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Ke(n.h,e)))if(!e.L&&Ke(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Jt(n),Ht(n)}Qt(n),we(18)}}else n.xa=o[1],0<n.xa-n.K&&o[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=_e(c(n.Va,n),6e3));Xe(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Jt(n),!I(t))for(o=n.Ba.g.parse(t),t=0;t<o.length;t++){let c=o[t];const u=c[0];if(!(u<=n.K))if(n.K=u,c=c[1],2==n.I)if("c"==c[0]){n.M=c[1],n.ba=c[2];const t=c[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const o=c[4];null!=o&&(n.za=o,n.j.info("SVER="+n.za));const u=c[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Ye(i,i.h),i.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,ot(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=on(r,r.L?r.ba:null,r.W),a.L){Qe(r.h,a);var s=a,l=r.O;l&&(s.H=l),s.D&&(Ue(s),Be(s)),r.g=a}else Yt(r);n.i.length>0&&Wt(n)}else"stop"!=c[0]&&"close"!=c[0]||nn(n,7);else 3==n.I&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?nn(n,7):zt(n):"noop"!=c[0]&&n.l&&n.l.qa(c),n.A=0)}ye()}catch(u){}}ke.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Bt(e)?t.j():this.Y(e)},ke.prototype.Y=function(e){try{if(e==this.g)e:{const c=Bt(this.g),l=this.g.ya();this.g.ca();if(!(c<3)&&(3!=c||this.g&&(this.h.h||this.g.la()||Ft(this.g)))){this.K||4!=c||7==l||ye(),Ue(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Me(e))return e.g.la();const t=Ft(e.g);if(""===t)return"";let n="";const r=t.length,o=4==Bt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return ze(e),Ve(e),"";e.h.i=new i.TextDecoder}for(let i=0;i<r;i++)e.h.h=!0,n+=e.h.i.decode(t[i],{stream:!(o&&i==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,o,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.v,this.B,this.l,this.S,c,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,o=this.g;if((r=o.g?o.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,we(12),ze(this),Ve(this);break e}Ee(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,He(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Le(this,n),t==Pe){4==c&&(this.m=4,we(14),e=!1),Ee(this.i,this.l,null,"[Incomplete Response]");break}if(t==Re){this.m=4,we(15),Ee(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ee(this.i,this.l,t,null),He(this,t)}if(Me(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=c||0!=n.length||this.h.h||(this.m=1,we(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var s=this.j;s.g==this&&s.aa&&!s.P&&(s.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Zt(s),s.P=!0,we(11))}}else Ee(this.i,this.l,n,"[Invalid Chunked Response]"),ze(this),Ve(this)}else Ee(this.i,this.l,n,null),He(this,n);4==c&&ze(this),this.o&&!this.K&&(4==c?en(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&Bt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(I(e[r]))continue;var n=Te(e[r]);const o=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[o]||[];t[o]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,we(12)):(this.m=0,we(13)),ze(this),Ve(this)}}}catch(Li){}},ke.prototype.cancel=function(){this.K=!0,ze(this)},ke.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),we(17)),ze(this),this.m=2,Ve(this)):Fe(this,this.T-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,i.PerformanceNavigationTiming?e=(e=i.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ke(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Qe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ze(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}We.prototype.cancel=function(){if(this.i=Ze(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Je(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Je?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,bt(e.i)),this.m=e.m):e&&(t=String(e).match($e))?(this.l=!1,tt(this,t[1]||"",!0),this.o=at(t[2]||""),this.g=at(t[3]||"",!0),nt(this,t[4]),this.h=at(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=at(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Je(e)}function tt(e,t,n){e.j=n?at(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(gt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(mt(this,t),wt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=st(t,ht)),e.i=new pt(t,e.l))}function ot(e,t,n){e.i.set(t,n)}function it(e){return ot(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function at(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function st(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ct),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ct(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Je.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(st(t,lt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(st(t,lt,!0),"@"),e.push(Ne(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(st(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",st(n,ft)),e.join("")},Je.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var o=t.h.lastIndexOf("/");-1!=o&&(r=t.h.slice(0,o+1)+r)}if(".."==(o=r)||"."==o)r="";else if(-1!=o.indexOf("./")||-1!=o.indexOf("/.")){r=0==o.lastIndexOf("/",0),o=o.split("/");const e=[];for(let t=0;t<o.length;){const n=o[t++];"."==n?r&&t==o.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==o.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=o}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,bt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var lt=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function gt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let o,i=null;r>=0?(o=e[n].substring(0,r),i=e[n].substring(r+1)):o=e[n],t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function mt(e,t){gt(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return gt(e),t=_t(e,t),e.g.has(t)}function vt(e,t){gt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(_t(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function wt(e,t,n){mt(e,t),n.length>0&&(e.i=null,e.g.set(_t(e,t),h(n)),e.h+=n.length)}function bt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,o){try{o&&(o.onload=null,o.onerror=null,o.onabort=null,o.ontimeout=null),r(n)}catch(i){}}function Et(){this.g=new se}function St(e){this.i=e.Sb||null,this.h=e.ab||!1}function At(e,t){Z.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function It(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function xt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Nt(e)}function Nt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Tt(e){let t="";return R(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function kt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Tt(n),"string"===typeof e?null!=n&&Ne(n):ot(e,t,n))}function Ot(e){Z.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){gt(this),this.i=null,e=_t(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){gt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return gt(this),this.i=null,yt(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const o=Ne(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=o;""!==n[t]&&(r+="="+Ne(n[t])),e.push(r)}}return this.i=e.join("&")},u(St,ce),St.prototype.g=function(){return new At(this.i,this.h)},u(At,Z),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Nt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||i).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,xt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Nt(this)),this.g&&(this.readyState=3,Nt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;It(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?xt(this):Nt(this),3==this.readyState&&It(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,xt(this))},e.Na=function(e){this.g&&(this.response=e,xt(this))},e.ga=function(){this.g&&xt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Ot,Z);var Rt=/^https?$/i,Pt=["POST","PUT"];function jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Dt(e),Lt(e)}function Dt(e){e.A||(e.A=!0,$(e,"complete"),$(e,"error"))}function Mt(e){if(e.h&&"undefined"!=typeof o)if(e.v&&4==Bt(e))setTimeout(e.Ca.bind(e),0);else if($(e,"readystatechange"),4==Bt(e)){e.h=!1;try{const o=e.ca();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){let t=String(e.D).match($e)[1]||null;!t&&i.self&&i.self.location&&(t=i.self.location.protocol.slice(0,-1)),r=!Rt.test(t?t.toLowerCase():"")}n=r}if(n)$(e,"complete"),$(e,"success");else{e.o=6;try{var a=Bt(e)>2?e.g.statusText:""}catch(s){a=""}e.l=a+" ["+e.ca()+"]",Dt(e)}}finally{Lt(e)}}}function Lt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||$(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Bt(e){return e.g?e.g.readyState:0}function Ft(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ut(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Vt(e){this.za=0,this.i=[],this.j=new Ce,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ut("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ut("baseRetryDelayMs",5e3,e),this.Za=Ut("retryDelaySeedMs",1e4,e),this.Ta=Ut("forwardChannelMaxRetries",2,e),this.va=Ut("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new We(e&&e.concurrentRequestLimit),this.Ba=new Et,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function zt(e){if(Gt(e),3==e.I){var t=e.V++,n=et(e.J);if(ot(n,"SID",e.M),ot(n,"RID",t),ot(n,"TYPE","terminate"),Xt(e,n),(t=new ke(e,e.j,t)).M=2,t.A=it(et(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.A,n=!0),n||(t.g=an(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Be(t)}rn(e)}function Ht(e){e.g&&(Zt(e),e.g.cancel(),e.g=null)}function Gt(e){Ht(e),e.v&&(i.clearTimeout(e.v),e.v=null),Jt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&i.clearTimeout(e.m),e.m=null)}function Wt(e){if(!qe(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||_(),w||(v(),w=!0),b.add(t,e),e.D=0}}function qt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);ot(r,"SID",e.M),ot(r,"RID",n),ot(r,"AID",e.K),Xt(e,r),e.u&&e.o&&kt(r,e.u,e.o),n=new ke(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Kt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),je(n,r,t)}function Xt(e,t){e.H&&R(e.H,function(e,n){ot(t,n,e)}),e.l&&R({},function(e,n){ot(t,n,e)})}function Kt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?c(e.l.Ka,e.l,e):null;e:{var o=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=o[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let c=!0;for(let l=0;l<n;l++){var i=o[l].g;const n=o[l].map;if((i-=t)<0)t=Math.max(0,o[l].g-100),c=!1;else try{i="req"+i+"_"||0;try{var s=n instanceof Map?n:Object.entries(n);for(const[t,n]of s){let r=n;a(n)&&(r=ie(n)),e.push(i+t+"="+encodeURIComponent(r))}}catch(ii){throw e.push(i+"type="+encodeURIComponent("_badmap")),ii}}catch(ii){r&&r(n)}}if(c){s=e.join("&");break e}}s=void 0}return e=e.i.splice(0,n),t.G=e,s}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||_(),w||(v(),w=!0),b.add(t,e),e.A=0}}function Qt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=_e(c(e.Da,e),tn(e,e.A)),e.A++,!0)}function Zt(e){null!=e.B&&(i.clearTimeout(e.B),e.B=null)}function $t(e){e.g=new ke(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);ot(t,"RID","rpc"),ot(t,"SID",e.M),ot(t,"AID",e.K),ot(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&ot(t,"TO",e.ia),ot(t,"TYPE","xmlhttp"),Xt(e,t),e.u&&e.o&&kt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=it(et(t)),n.u=null,n.R=!0,De(n,e)}function Jt(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Jt(e),Zt(e),e.g=null;var r=2}else{if(!Ke(e.h,t))return;n=t.G,Qe(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var o=e.D;$(r=ge(),new be(r,n)),Wt(e)}else Yt(e);else if(3==(o=t.m)||0==o&&t.X>0||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=_e(c(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Qt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),o){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.bb,e),r=e.Ua;const t=!r;r=new Je(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||tt(r,"https"),it(r),t?function(e,t){const n=new Ce;if(i.Image){const r=new Image;r.onload=l(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=l(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=l(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=l(Ct,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ce;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ct(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ct(0,0,!1,t)})}(r.toString(),n)}else we(2);e.I=0,e.l&&e.l.pa(t),rn(e),Gt(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Ze(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function on(e,t,n){var r=n instanceof Je?et(n):new Je(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;const e=new Je(null);r&&tt(e,r),t&&(e.g=t),o&&nt(e,o),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&ot(r,n,t),ot(r,"VER",e.ka),Xt(e,r),r}function an(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Ot(new St({ab:n})):new Ot(e.ma)).Fa(e.L),t}function sn(){}function cn(){}function ln(e,t){Z.call(this),this.g=new Vt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!I(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!I(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function un(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=Ot.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Se.g(),this.g.onreadystatechange=d(c(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void jt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),o=i.FormData&&e instanceof i.FormData,!(Array.prototype.indexOf.call(Pt,t,void 0)>=0)||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,s]of n)this.g.setRequestHeader(i,s);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){jt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,$(this,"complete"),$(this,"abort"),Lt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lt(this,!0)),Ot.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Mt(this):this.Xa())},e.Xa=function(){Mt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Bt(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ae(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Vt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){we(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=on(this,null,this.W),Wt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const o=new ke(this,this.j,e);let i=this.o;if(this.U&&(i?(i=P(i),D(i,this.U)):i=this.U),null!==this.u||this.R||(o.J=i,i=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Kt(this,o,t),ot(n=et(this.J),"RID",e),ot(n,"CVER",22),this.G&&ot(n,"X-HTTP-Session-Id",this.G),Xt(this,n),i&&(this.R?t="headers="+Ne(Tt(i))+"&"+t:this.u&&kt(n,this.u,i)),Ye(this.h,o),this.Ra&&ot(n,"TYPE","init"),this.S?(ot(n,"$req",t),ot(n,"SID","null"),o.U=!0,je(o,n,null)):je(o,n,t),this.I=2}}else 3==this.I&&(e?qt(this,e):0==this.i.length||qe(this.h)||qt(this))},e.Da=function(){if(this.v=null,$t(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=_e(c(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,we(10),Ht(this),$t(this))},e.Va=function(){null!=this.C&&(this.C=null,Ht(this),Qt(this),we(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=sn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},cn.prototype.g=function(e,t){return new ln(e,t)},u(ln,Z),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){zt(this.g)},ln.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ie(e),e=n);t.i.push(new Ge(t.Ya++,e)),3==t.I&&Wt(t)},ln.prototype.N=function(){this.g.l=null,delete this.j,zt(this.g),delete this.g,ln.Z.N.call(this)},u(un,de),u(dn,he),u(hn,sn),hn.prototype.ra=function(){$(this.g,"a")},hn.prototype.qa=function(e){$(this.g,new un(e))},hn.prototype.pa=function(e){$(this.g,new dn)},hn.prototype.oa=function(){$(this.g,"b")},cn.prototype.createWebChannel=cn.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,ti=ri.createWebChannelTransport=function(){return new cn},ei=ri.getStatEventTarget=function(){return ge()},Jo=ri.Event=fe,$o=ri.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,Zo=ri.ErrorCode=Ae,Ie.COMPLETE="complete",Qo=ri.EventType=Ie,le.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",Z.prototype.listen=Z.prototype.J,Yo=ri.WebChannel=le,ri.FetchXmlHttpFactory=St,Ot.prototype.listenOnce=Ot.prototype.K,Ot.prototype.getLastError=Ot.prototype.Ha,Ot.prototype.getLastErrorCode=Ot.prototype.ya,Ot.prototype.getStatus=Ot.prototype.ca,Ot.prototype.getResponseJson=Ot.prototype.La,Ot.prototype.getResponseText=Ot.prototype.la,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Fa,Ko=ri.XhrIo=Ot}).apply("undefined"!==typeof ni?ni:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const oi="@firebase/firestore",ii="4.9.3";class ai{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ai.UNAUTHENTICATED=new ai(null),ai.GOOGLE_CREDENTIALS=new ai("google-credentials-uid"),ai.FIRST_PARTY=new ai("first-party-uid"),ai.MOCK_USER=new ai("mock-user");let si="12.7.0";const ci=new Q("@firebase/firestore");function li(){return ci.logLevel}function ui(e){if(ci.logLevel<=W.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(fi);ci.debug("Firestore (".concat(si,"): ").concat(e),...o)}}function di(e){if(ci.logLevel<=W.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(fi);ci.error("Firestore (".concat(si,"): ").concat(e),...o)}}function hi(e){if(ci.logLevel<=W.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(fi);ci.warn("Firestore (".concat(si,"): ").concat(e),...o)}}function fi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function pi(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,gi(e,r,n)}function gi(e,t,n){let r="FIRESTORE (".concat(si,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw di(r),new Error(r)}function mi(e,t,n,r){let o="Unexpected state";"string"==typeof n?o=n:r=n,e||gi(t,o,r)}function yi(e,t){return e}const vi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wi extends T{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class bi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _i{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ci{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ai.UNAUTHENTICATED))}shutdown(){}}class Ei{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Si{constructor(e){this.t=e,this.currentUser=ai.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mi(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let o=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new bi,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=o;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{ui("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(ui("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new bi)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ui("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(mi("string"==typeof t.accessToken,31837,{l:t}),new _i(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mi(null===e||"string"==typeof e,2055,{h:e}),new ai(e)}}class Ai{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=ai.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ii{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Ai(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ai.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ni{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ze(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mi(void 0===this.o,3512);const n=e=>{null!=e.error&&ui("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,ui("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{ui("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):ui("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new xi(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(mi("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new xi(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ti(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ki{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Ti(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Oi(e,t){return e<t?-1:e>t?1:0}function Ri(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),o=t.charAt(r);if(n!==o)return Di(n)===Di(o)?Oi(n,o):Di(n)?1:-1}return Oi(e.length,t.length)}const Pi=55296,ji=57343;function Di(e){const t=e.charCodeAt(0);return t>=Pi&&t<=ji}function Mi(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Li="__name__";class Bi{constructor(e,t,n){void 0===t?t=0:t>e.length&&pi(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&pi(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Bi.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bi?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Bi.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Oi(e.length,t.length)}static compareSegments(e,t){const n=Bi.isNumericId(e),r=Bi.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Bi.extractNumericId(e).compare(Bi.extractNumericId(t)):Ri(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Go.fromString(e.substring(4,e.length-2))}}class Fi extends Bi{construct(e,t,n){return new Fi(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n){if(o.indexOf("//")>=0)throw new wi(vi.INVALID_ARGUMENT,"Invalid segment (".concat(o,"). Paths must not contain // in them."));e.push(...o.split("/").filter(e=>e.length>0))}return new Fi(e)}static emptyPath(){return new Fi([])}}const Ui=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vi extends Bi{construct(e,t,n){return new Vi(e,t,n)}static isValidIdentifier(e){return Ui.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Li}static keyField(){return new Vi([Li])}static fromServerFormat(e){const t=[];let n="",r=0;const o=()=>{if(0===n.length)throw new wi(vi.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new wi(vi.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new wi(vi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(o(),r++)}if(o(),i)throw new wi(vi.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vi(t)}static emptyPath(){return new Vi([])}}class zi{constructor(e){this.path=e}static fromPath(e){return new zi(Fi.fromString(e))}static fromName(e){return new zi(Fi.fromString(e).popFirst(5))}static empty(){return new zi(Fi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Fi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Fi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zi(new Fi(e.slice()))}}function Hi(e,t,n){if(!n)throw new wi(vi.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Gi(e){if(!zi.isDocumentKey(e))throw new wi(vi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Wi(e){if(zi.isDocumentKey(e))throw new wi(vi.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function qi(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Xi(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":pi(12329,{type:typeof e})}function Ki(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new wi(vi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xi(e);throw new wi(vi.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Yi(e,t){if(t<=0)throw new wi(vi.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function Qi(e,t){const n={typeString:e};return t&&(n.value=t),n}function Zi(e,t){if(!qi(e))throw new wi(vi.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const o=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(o&&typeof a!==o){n="JSON field '".concat(r,"' must be a ").concat(o,".");break}if(void 0!==i&&a!==i.value){n="Expected '".concat(r,"' field to equal '").concat(i.value,"'");break}}if(n)throw new wi(vi.INVALID_ARGUMENT,n);return!0}const $i=-62135596800,Ji=1e6;class ea{static now(){return ea.fromMillis(Date.now())}static fromDate(e){return ea.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Ji);return new ea(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new wi(vi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new wi(vi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<$i)throw new wi(vi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new wi(vi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ji}_compareTo(e){return this.seconds===e.seconds?Oi(this.nanoseconds,e.nanoseconds):Oi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ea._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zi(e,ea._jsonSchema))return new ea(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$i;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ea._jsonSchemaVersion="firestore/timestamp/1.0",ea._jsonSchema={type:Qi("string",ea._jsonSchemaVersion),seconds:Qi("number"),nanoseconds:Qi("number")};class ta{static fromTimestamp(e){return new ta(e)}static min(){return new ta(new ea(0,0))}static max(){return new ta(new ea(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const na=-1;class ra{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ra.UNKNOWN_ID=-1;function oa(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,o=ta.fromTimestamp(1e9===r?new ea(n+1,0):new ea(n,r));return new aa(o,zi.empty(),t)}function ia(e){return new aa(e.readTime,e.key,na)}class aa{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new aa(ta.min(),zi.empty(),na)}static max(){return new aa(ta.max(),zi.empty(),na)}}function sa(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=zi.comparator(e.documentKey,t.documentKey),0!==n?n:Oi(e.largestBatchId,t.largestBatchId))}const ca="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class la{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ua(e){if(e.code!==vi.FAILED_PRECONDITION||e.message!==ca)throw e;ui("LocalStore","Unexpectedly lost primary lease")}class da{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pi(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new da((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof da?t:da.resolve(t)}catch(e){return da.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):da.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):da.reject(t)}static resolve(e){return new da((t,n)=>{t(e)})}static reject(e){return new da((t,n)=>{n(e)})}static waitFor(e){return new da((t,n)=>{let r=0,o=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++o,i&&o===r&&t()},e=>n(e))}),i=!0,o===r&&t()})}static or(e){let t=da.resolve(!1);for(const n of e)t=t.next(e=>e?da.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new da((n,r)=>{const o=e.length,i=new Array(o);let a=0;for(let s=0;s<o;s++){const c=s;t(e[c]).next(e=>{i[c]=e,++a,a===o&&n(i)},e=>r(e))}})}static doWhile(e,t){return new da((n,r)=>{const o=()=>{!0===e()?t().next(()=>{o()},r):n()};o()})}}function ha(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fa(e){return"IndexedDbTransactionError"===e.name}class pa{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}pa.ce=-1;const ga=-1;function ma(e){return null==e}function ya(e){return 0===e&&1/e==-1/0}function va(e){return"number"==typeof e&&Number.isInteger(e)&&!ya(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const wa="\x01";function ba(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ca(t)),t=_a(e.get(n),t);return Ca(t)}function _a(e,t){let n=t;const r=e.length;for(let o=0;o<r;o++){const t=e.charAt(o);switch(t){case"\0":n+="\x01\x10";break;case wa:n+="\x01\x11";break;default:n+=t}}return n}function Ca(e){return e+wa+"\x01"}const Ea="remoteDocuments",Sa="owner",Aa="mutationQueues",Ia="mutations";const xa="documentMutations",Na="remoteDocumentsV14",Ta="remoteDocumentGlobal",ka="targets",Oa="targetDocuments",Ra="targetGlobal",Pa="collectionParents",ja="clientMetadata",Da="bundles",Ma="namedQueries",La="indexConfiguration",Ba="indexState",Fa="indexEntries",Ua="documentOverlays",Va="globals",za=[Aa,Ia,xa,Ea,ka,Sa,Ra,Oa,ja,Ta,Pa,Da,Ma],Ha=[Aa,Ia,xa,Na,ka,Sa,Ra,Oa,ja,Ta,Pa,Da,Ma,Ua],Ga=Ha,Wa=[...Ga,La,Ba,Fa];function qa(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Xa(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ka(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ya{constructor(e,t){this.comparator=e,this.root=t||Za.EMPTY}insert(e,t){return new Ya(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Za.BLACK,null,null))}remove(e){return new Ya(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Za.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qa(this.root,e,this.comparator,!0)}}class Qa{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Za{constructor(e,t,n,r,o){this.key=e,this.value=t,this.color=null!=n?n:Za.RED,this.left=null!=r?r:Za.EMPTY,this.right=null!=o?o:Za.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,o){return new Za(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const o=n(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Za.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Za.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Za.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Za.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pi(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pi(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pi(27949);return e+(this.isRed()?0:1)}}Za.EMPTY=null,Za.RED=!0,Za.BLACK=!1,Za.EMPTY=new class{constructor(){this.size=0}get key(){throw pi(57766)}get value(){throw pi(16141)}get color(){throw pi(16727)}get left(){throw pi(29726)}get right(){throw pi(36894)}copy(e,t,n,r,o){return this}insert(e,t,n){return new Za(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $a{constructor(e){this.comparator=e,this.data=new Ya(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ja(this.data.getIterator())}getIteratorFrom(e){return new Ja(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof $a))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $a(this.comparator);return t.data=e,t}}class Ja{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class es{constructor(e){this.fields=e,e.sort(Vi.comparator)}static empty(){return new es([])}unionWith(e){let t=new $a(Vi.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new es(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mi(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class ts extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ns{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ts("Invalid base64 string: "+e):e}}(e);return new ns(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ns(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ns.EMPTY_BYTE_STRING=new ns("");const rs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(e){if(mi(!!e,39018),"string"==typeof e){let t=0;const n=rs.exec(e);if(mi(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:is(e.seconds),nanos:is(e.nanos)}}function is(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function as(e){return"string"==typeof e?ns.fromBase64String(e):ns.fromUint8Array(e)}const ss="server_timestamp",cs="__type__",ls="__previous_value__",us="__local_write_time__";function ds(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[cs])||void 0===t?void 0:t.stringValue)===ss}function hs(e){const t=e.mapValue.fields[ls];return ds(t)?hs(t):t}function fs(e){const t=os(e.mapValue.fields[us].timestampValue);return new ea(t.seconds,t.nanos)}class ps{constructor(e,t,n,r,o,i,a,s,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l}}const gs="(default)";class ms{constructor(e,t){this.projectId=e,this.database=t||gs}static empty(){return new ms("","")}get isDefaultDatabase(){return this.database===gs}isEqual(e){return e instanceof ms&&e.projectId===this.projectId&&e.database===this.database}}const ys="__type__",vs="__max__",ws={mapValue:{fields:{__type__:{stringValue:vs}}}},bs="__vector__",_s="value";function Cs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ds(e)?4:Fs(e)?9007199254740991:Ls(e)?10:11:pi(28295,{value:e})}function Es(e,t){if(e===t)return!0;const n=Cs(e);if(n!==Cs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return fs(e).isEqual(fs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=os(e.timestampValue),r=os(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return as(e.bytesValue).isEqual(as(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return is(e.geoPointValue.latitude)===is(t.geoPointValue.latitude)&&is(e.geoPointValue.longitude)===is(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return is(e.integerValue)===is(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=is(e.doubleValue),r=is(t.doubleValue);return n===r?ya(n)===ya(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Mi(e.arrayValue.values||[],t.arrayValue.values||[],Es);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(qa(n)!==qa(r))return!1;for(const o in n)if(n.hasOwnProperty(o)&&(void 0===r[o]||!Es(n[o],r[o])))return!1;return!0}(e,t);default:return pi(52216,{left:e})}}function Ss(e,t){return void 0!==(e.values||[]).find(e=>Es(e,t))}function As(e,t){if(e===t)return 0;const n=Cs(e),r=Cs(t);if(n!==r)return Oi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oi(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=is(e.integerValue||e.doubleValue),r=is(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Is(e.timestampValue,t.timestampValue);case 4:return Is(fs(e),fs(t));case 5:return Ri(e.stringValue,t.stringValue);case 6:return function(e,t){const n=as(e),r=as(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let o=0;o<n.length&&o<r.length;o++){const e=Oi(n[o],r[o]);if(0!==e)return e}return Oi(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Oi(is(e.latitude),is(t.latitude));return 0!==n?n:Oi(is(e.longitude),is(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return xs(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,o,i;const a=e.fields||{},s=t.fields||{},c=null===(n=a[_s])||void 0===n?void 0:n.arrayValue,l=null===(r=s[_s])||void 0===r?void 0:r.arrayValue,u=Oi((null===c||void 0===c||null===(o=c.values)||void 0===o?void 0:o.length)||0,(null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:xs(c,l)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ws.mapValue&&t===ws.mapValue)return 0;if(e===ws.mapValue)return 1;if(t===ws.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),o=t.fields||{},i=Object.keys(o);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=Ri(r[a],i[a]);if(0!==e)return e;const t=As(n[r[a]],o[i[a]]);if(0!==t)return t}return Oi(r.length,i.length)}(e.mapValue,t.mapValue);default:throw pi(23264,{he:n})}}function Is(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Oi(e,t);const n=os(e),r=os(t),o=Oi(n.seconds,r.seconds);return 0!==o?o:Oi(n.nanos,r.nanos)}function xs(e,t){const n=e.values||[],r=t.values||[];for(let o=0;o<n.length&&o<r.length;++o){const e=As(n[o],r[o]);if(e)return e}return Oi(n.length,r.length)}function Ns(e){return Ts(e)}function Ts(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=os(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return as(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return zi.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ts(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const o of t)r?r=!1:n+=",",n+="".concat(o,":").concat(Ts(e.fields[o]));return n+"}"}(e.mapValue):pi(61005,{value:e})}function ks(e){switch(Cs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=hs(e);return t?16+ks(t):16;case 5:return 2*e.stringValue.length;case 6:return as(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+ks(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Xa(e.fields,(e,n)=>{t+=e.length+ks(n)}),t}(e.mapValue);default:throw pi(13486,{value:e})}}function Os(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Rs(e){return!!e&&"integerValue"in e}function Ps(e){return!!e&&"arrayValue"in e}function js(e){return!!e&&"nullValue"in e}function Ds(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ms(e){return!!e&&"mapValue"in e}function Ls(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ys])||void 0===t?void 0:t.stringValue)===bs}function Bs(e){if(e.geoPointValue)return{geoPointValue:s({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:s({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Xa(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Bs(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Bs(e.arrayValue.values[n]);return t}return s({},e)}function Fs(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===vs}class Us{constructor(e){this.value=e}static empty(){return new Us({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ms(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bs(t)}setAll(e){let t=Vi.emptyPath(),n={},r=[];e.forEach((e,o)=>{if(!t.isImmediateParentOf(o)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=o.popLast()}e?n[o.lastSegment()]=Bs(e):r.push(o.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,n,r)}delete(e){const t=this.field(e.popLast());Ms(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Es(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ms(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Xa(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Us(Bs(this.value))}}function Vs(e){const t=[];return Xa(e.fields,(e,n)=>{const r=new Vi([e]);if(Ms(n)){const e=Vs(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new es(t)}class zs{constructor(e,t,n,r,o,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=o,this.data=i,this.documentState=a}static newInvalidDocument(e){return new zs(e,0,ta.min(),ta.min(),ta.min(),Us.empty(),0)}static newFoundDocument(e,t,n,r){return new zs(e,1,t,ta.min(),n,r,0)}static newNoDocument(e,t){return new zs(e,2,t,ta.min(),ta.min(),Us.empty(),0)}static newUnknownDocument(e,t){return new zs(e,3,t,ta.min(),ta.min(),Us.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ta.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Us.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Us.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ta.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof zs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Hs{constructor(e,t){this.position=e,this.inclusive=t}}function Gs(e,t,n){let r=0;for(let o=0;o<e.position.length;o++){const i=t[o],a=e.position[o];if(r=i.field.isKeyField()?zi.comparator(zi.fromName(a.referenceValue),n.key):As(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function Ws(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Es(e.position[n],t.position[n]))return!1;return!0}class qs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Xs(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ks{}class Ys extends Ks{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new rc(e,t,n):"array-contains"===t?new sc(e,n):"in"===t?new cc(e,n):"not-in"===t?new lc(e,n):"array-contains-any"===t?new uc(e,n):new Ys(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new oc(e,n):new ic(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(As(t,this.value)):null!==t&&Cs(this.value)===Cs(t)&&this.matchesComparison(As(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pi(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qs extends Ks{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Qs(e,t)}matches(e){return Zs(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Zs(e){return"and"===e.op}function $s(e){return Js(e)&&Zs(e)}function Js(e){for(const t of e.filters)if(t instanceof Qs)return!1;return!0}function ec(e){if(e instanceof Ys)return e.field.canonicalString()+e.op.toString()+Ns(e.value);if($s(e))return e.filters.map(e=>ec(e)).join(",");{const t=e.filters.map(e=>ec(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function tc(e,t){return e instanceof Ys?function(e,t){return t instanceof Ys&&e.op===t.op&&e.field.isEqual(t.field)&&Es(e.value,t.value)}(e,t):e instanceof Qs?function(e,t){return t instanceof Qs&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&tc(n,t.filters[r]),!0)}(e,t):void pi(19439)}function nc(e){return e instanceof Ys?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ns(e.value))}(e):e instanceof Qs?function(e){return e.op.toString()+" {"+e.getFilters().map(nc).join(" ,")+"}"}(e):"Filter"}class rc extends Ys{constructor(e,t,n){super(e,t,n),this.key=zi.fromName(n.referenceValue)}matches(e){const t=zi.comparator(e.key,this.key);return this.matchesComparison(t)}}class oc extends Ys{constructor(e,t){super(e,"in",t),this.keys=ac("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ic extends Ys{constructor(e,t){super(e,"not-in",t),this.keys=ac("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ac(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>zi.fromName(e.referenceValue))}class sc extends Ys{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ps(t)&&Ss(t.arrayValue,this.value)}}class cc extends Ys{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ss(this.value.arrayValue,t)}}class lc extends Ys{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ss(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ss(this.value.arrayValue,t)}}class uc extends Ys{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ps(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ss(this.value.arrayValue,e))}}class dc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=i,this.endAt=a,this.Te=null}}function hc(e){return new dc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function fc(e){const t=yi(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>ec(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ma(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ns(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ns(e)).join(",")),t.Te=e}return t.Te}function pc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Xs(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!tc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ws(e.startAt,t.startAt)&&Ws(e.endAt,t.endAt)}function gc(e){return zi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class mc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=i,this.startAt=a,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function yc(e,t,n,r,o,i,a,s){return new mc(e,t,n,r,o,i,a,s)}function vc(e){return new mc(e)}function wc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function bc(e){return null!==e.collectionGroup}function _c(e){const t=yi(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new $a(Vi.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new qs(r,n))}),e.has(Vi.keyField().canonicalString())||t.Ie.push(new qs(Vi.keyField(),n))}return t.Ie}function Cc(e){const t=yi(e);return t.Ee||(t.Ee=Ec(t,_c(e))),t.Ee}function Ec(e,t){if("F"===e.limitType)return hc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new qs(e.field,t)});const n=e.endAt?new Hs(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Hs(e.startAt.position,e.startAt.inclusive):null;return hc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Sc(e,t){const n=e.filters.concat([t]);return new mc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ac(e,t,n){return new mc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ic(e,t){return pc(Cc(e),Cc(t))&&e.limitType===t.limitType}function xc(e){return"".concat(fc(Cc(e)),"|lt:").concat(e.limitType)}function Nc(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>nc(e)).join(", "),"]")),ma(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ns(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ns(e)).join(",")),"Target(".concat(t,")")}(Cc(e)),"; limitType=").concat(e.limitType,")")}function Tc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):zi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of _c(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Gs(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,_c(e),t))&&!(e.endAt&&!function(e,t,n){const r=Gs(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,_c(e),t))}(e,t)}function kc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Oc(e){return(t,n)=>{let r=!1;for(const o of _c(e)){const e=Rc(o,t,n);if(0!==e)return e;r=r||o.field.isKeyField()}return 0}}function Rc(e,t,n){const r=e.field.isKeyField()?zi.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),o=n.data.field(e);return null!==r&&null!==o?As(r,o):pi(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return pi(19790,{direction:e.dir})}}class Pc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,o]of n)if(this.equalsFn(r,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Xa(this.inner,(t,n)=>{for(const[r,o]of n)e(r,o)})}isEmpty(){return Ka(this.inner)}size(){return this.innerSize}}const jc=new Ya(zi.comparator);function Dc(){return jc}const Mc=new Ya(zi.comparator);function Lc(){let e=Mc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n)e=e.insert(o.key,o);return e}function Bc(e){let t=Mc;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Fc(){return Vc()}function Uc(){return Vc()}function Vc(){return new Pc(e=>e.toString(),(e,t)=>e.isEqual(t))}const zc=new Ya(zi.comparator),Hc=new $a(zi.comparator);function Gc(){let e=Hc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n)e=e.add(o);return e}const Wc=new $a(Oi);function qc(){return Wc}function Xc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ya(t)?"-0":t}}function Kc(e){return{integerValue:""+e}}function Yc(e,t){return va(t)?Kc(t):Xc(e,t)}class Qc{constructor(){this._=void 0}}function Zc(e,t,n){return e instanceof el?function(e,t){const n={fields:{[cs]:{stringValue:ss},[us]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ds(t)&&(t=hs(t)),t&&(n.fields[ls]=t),{mapValue:n}}(n,t):e instanceof tl?nl(e,t):e instanceof rl?ol(e,t):function(e,t){const n=Jc(e,t),r=al(n)+al(e.Ae);return Rs(n)&&Rs(e.Ae)?Kc(r):Xc(e.serializer,r)}(e,t)}function $c(e,t,n){return e instanceof tl?nl(e,t):e instanceof rl?ol(e,t):n}function Jc(e,t){return e instanceof il?function(e){return Rs(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class el extends Qc{}class tl extends Qc{constructor(e){super(),this.elements=e}}function nl(e,t){const n=sl(t);for(const r of e.elements)n.some(e=>Es(e,r))||n.push(r);return{arrayValue:{values:n}}}class rl extends Qc{constructor(e){super(),this.elements=e}}function ol(e,t){let n=sl(t);for(const r of e.elements)n=n.filter(e=>!Es(e,r));return{arrayValue:{values:n}}}class il extends Qc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function al(e){return is(e.integerValue||e.doubleValue)}function sl(e){return Ps(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class cl{constructor(e,t){this.field=e,this.transform=t}}class ll{constructor(e,t){this.version=e,this.transformResults=t}}class ul{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ul}static exists(e){return new ul(void 0,e)}static updateTime(e){return new ul(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class hl{}function fl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new El(e.key,ul.none()):new vl(e.key,e.data,ul.none());{const n=e.data,r=Us.empty();let o=new $a(Vi.comparator);for(let e of t.fields)if(!o.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),o=o.add(e)}return new wl(e.key,r,new es(o.toArray()),ul.none())}}function pl(e,t,n){e instanceof vl?function(e,t,n){const r=e.value.clone(),o=_l(e.fieldTransforms,t,n.transformResults);r.setAll(o),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof wl?function(e,t,n){if(!dl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=_l(e.fieldTransforms,t,n.transformResults),o=t.data;o.setAll(bl(e)),o.setAll(r),t.convertToFoundDocument(n.version,o).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function gl(e,t,n,r){return e instanceof vl?function(e,t,n,r){if(!dl(e.precondition,t))return n;const o=e.value.clone(),i=Cl(e.fieldTransforms,r,t);return o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null}(e,t,n,r):e instanceof wl?function(e,t,n,r){if(!dl(e.precondition,t))return n;const o=Cl(e.fieldTransforms,r,t),i=t.data;return i.setAll(bl(e)),i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return dl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ml(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),o=Jc(r.transform,e||null);null!=o&&(null===n&&(n=Us.empty()),n.set(r.field,o))}return n||null}function yl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Mi(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof tl&&t instanceof tl||e instanceof rl&&t instanceof rl?Mi(e.elements,t.elements,Es):e instanceof il&&t instanceof il?Es(e.Ae,t.Ae):e instanceof el&&t instanceof el}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class vl extends hl{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class wl extends hl{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function bl(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function _l(e,t,n){const r=new Map;mi(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let o=0;o<n.length;o++){const i=e[o],a=i.transform,s=t.data.field(i.field);r.set(i.field,$c(a,s,n[o]))}return r}function Cl(e,t,n){const r=new Map;for(const o of e){const e=o.transform,i=n.data.field(o.field);r.set(o.field,Zc(e,i,t))}return r}class El extends hl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sl extends hl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Al{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&pl(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=gl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=gl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Uc();return this.mutations.forEach(r=>{const o=e.get(r.key),i=o.overlayedDocument;let a=this.applyToLocalView(i,o.mutatedFields);a=t.has(r.key)?null:a;const s=fl(i,a);null!==s&&n.set(r.key,s),i.isValidDocument()||i.convertToNoDocument(ta.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gc())}isEqual(e){return this.batchId===e.batchId&&Mi(this.mutations,e.mutations,(e,t)=>yl(e,t))&&Mi(this.baseMutations,e.baseMutations,(e,t)=>yl(e,t))}}class Il{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){mi(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=zc;const o=e.mutations;for(let i=0;i<o.length;i++)r=r.insert(o[i].key,n[i].version);return new Il(e,t,n,r)}}class xl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Nl{constructor(e,t){this.count=e,this.unchangedNames=t}}var Tl,kl;function Ol(e){switch(e){case vi.OK:return pi(64938);case vi.CANCELLED:case vi.UNKNOWN:case vi.DEADLINE_EXCEEDED:case vi.RESOURCE_EXHAUSTED:case vi.INTERNAL:case vi.UNAVAILABLE:case vi.UNAUTHENTICATED:return!1;case vi.INVALID_ARGUMENT:case vi.NOT_FOUND:case vi.ALREADY_EXISTS:case vi.PERMISSION_DENIED:case vi.FAILED_PRECONDITION:case vi.ABORTED:case vi.OUT_OF_RANGE:case vi.UNIMPLEMENTED:case vi.DATA_LOSS:return!0;default:return pi(15467,{code:e})}}function Rl(e){if(void 0===e)return di("GRPC error has no .code"),vi.UNKNOWN;switch(e){case Tl.OK:return vi.OK;case Tl.CANCELLED:return vi.CANCELLED;case Tl.UNKNOWN:return vi.UNKNOWN;case Tl.DEADLINE_EXCEEDED:return vi.DEADLINE_EXCEEDED;case Tl.RESOURCE_EXHAUSTED:return vi.RESOURCE_EXHAUSTED;case Tl.INTERNAL:return vi.INTERNAL;case Tl.UNAVAILABLE:return vi.UNAVAILABLE;case Tl.UNAUTHENTICATED:return vi.UNAUTHENTICATED;case Tl.INVALID_ARGUMENT:return vi.INVALID_ARGUMENT;case Tl.NOT_FOUND:return vi.NOT_FOUND;case Tl.ALREADY_EXISTS:return vi.ALREADY_EXISTS;case Tl.PERMISSION_DENIED:return vi.PERMISSION_DENIED;case Tl.FAILED_PRECONDITION:return vi.FAILED_PRECONDITION;case Tl.ABORTED:return vi.ABORTED;case Tl.OUT_OF_RANGE:return vi.OUT_OF_RANGE;case Tl.UNIMPLEMENTED:return vi.UNIMPLEMENTED;case Tl.DATA_LOSS:return vi.DATA_LOSS;default:return pi(39323,{code:e})}}(kl=Tl||(Tl={}))[kl.OK=0]="OK",kl[kl.CANCELLED=1]="CANCELLED",kl[kl.UNKNOWN=2]="UNKNOWN",kl[kl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kl[kl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kl[kl.NOT_FOUND=5]="NOT_FOUND",kl[kl.ALREADY_EXISTS=6]="ALREADY_EXISTS",kl[kl.PERMISSION_DENIED=7]="PERMISSION_DENIED",kl[kl.UNAUTHENTICATED=16]="UNAUTHENTICATED",kl[kl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kl[kl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kl[kl.ABORTED=10]="ABORTED",kl[kl.OUT_OF_RANGE=11]="OUT_OF_RANGE",kl[kl.UNIMPLEMENTED=12]="UNIMPLEMENTED",kl[kl.INTERNAL=13]="INTERNAL",kl[kl.UNAVAILABLE=14]="UNAVAILABLE",kl[kl.DATA_LOSS=15]="DATA_LOSS";let Pl=null;function jl(){return new TextEncoder}const Dl=new Go([4294967295,4294967295],0);function Ml(e){const t=jl().encode(e),n=new Wo;return n.update(t),new Uint8Array(n.digest())}function Ll(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Go([n,r],0),new Go([o,i],0)]}class Bl{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Fl("Invalid padding: ".concat(t));if(n<0)throw new Fl("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Fl("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Fl("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=Go.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Go.fromNumber(n)));return 1===r.compare(Dl)&&(r=new Go([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Ml(e),[n,r]=Ll(t);for(let o=0;o<this.hashCount;o++){const e=this.ye(n,r,o);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),i=new Bl(o,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=Ml(e),[n,r]=Ll(t);for(let o=0;o<this.hashCount;o++){const e=this.ye(n,r,o);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Fl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ul{constructor(e,t,n,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Vl.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ul(ta.min(),r,new Ya(Oi),Dc(),Gc())}}class Vl{constructor(e,t,n,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Vl(n,t,Gc(),Gc(),Gc())}}class zl{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Hl{constructor(e,t){this.targetId=e,this.Ce=t}}class Gl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ns.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Wl{constructor(){this.ve=0,this.Fe=Kl(),this.Me=ns.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Gc(),t=Gc(),n=Gc();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:pi(38017,{changeType:o})}}),new Vl(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Kl()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,mi(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ql{constructor(e){this.Ge=e,this.ze=new Map,this.je=Dc(),this.Je=Xl(),this.He=Xl(),this.Ye=new Ya(Oi)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:pi(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(gc(i))if(0===n){const e=new zi(i.path);this.et(t,e,zs.newNoDocument(e,ta.min()))}else mi(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var o;const n=this.ut(e),i=n?this.ct(n,e,r):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(o=Pl)||void 0===o||o.lt(function(e,t,n,r,o){var i,a,s,c,l;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===o,hashCount:null!==(i=null===d||void 0===d?void 0:d.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(a=null===d||void 0===d||null===(s=d.bits)||void 0===s||null===(s=s.bitmap)||void 0===s?void 0:s.length)&&void 0!==a?a:0,padding:null!==(c=null===d||void 0===d||null===(l=d.bits)||void 0===l?void 0:l.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:o=0}=t;let i,a;try{i=as(n).toUint8Array()}catch(e){if(e instanceof ts)return hi("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Bl(i,r,o)}catch(e){return hi(e instanceof Fl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const o=this.Ge.ht(),i="projects/".concat(o.projectId,"/databases/").concat(o.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const o=this.ot(r);if(o){if(n.current&&gc(o.target)){const t=new zi(o.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,zs.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Gc();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Ul(e,t,this.Ye,this.je,n);return this.je=Dc(),this.Je=Xl(),this.He=Xl(),this.Ye=new Ya(Oi),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Wl,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new $a(Oi),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new $a(Oi),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||ui("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wl),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Xl(){return new Ya(zi.comparator)}function Kl(){return new Ya(zi.comparator)}const Yl={asc:"ASCENDING",desc:"DESCENDING"},Ql={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zl={and:"AND",or:"OR"};class $l{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jl(e,t){return e.useProto3Json||ma(t)?t:{value:t}}function eu(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function tu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function nu(e,t){return eu(e,t.toTimestamp())}function ru(e){return mi(!!e,49232),ta.fromTimestamp(function(e){const t=os(e);return new ea(t.seconds,t.nanos)}(e))}function ou(e,t){return iu(e,t).canonicalString()}function iu(e,t){const n=function(e){return new Fi(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function au(e){const t=Fi.fromString(e);return mi(Iu(t),10190,{key:t.toString()}),t}function su(e,t){return ou(e.databaseId,t.path)}function cu(e,t){const n=au(t);if(n.get(1)!==e.databaseId.projectId)throw new wi(vi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new wi(vi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new zi(hu(n))}function lu(e,t){return ou(e.databaseId,t)}function uu(e){const t=au(e);return 4===t.length?Fi.emptyPath():hu(t)}function du(e){return new Fi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function hu(e){return mi(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function fu(e,t,n){return{name:su(e,t),fields:n.value.mapValue.fields}}function pu(e,t){let n;if(t instanceof vl)n={update:fu(e,t.key,t.value)};else if(t instanceof El)n={delete:su(e,t.key)};else if(t instanceof wl)n={update:fu(e,t.key,t.data),updateMask:Au(t.fieldMask)};else{if(!(t instanceof Sl))return pi(16599,{Vt:t.type});n={verify:su(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof el)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof tl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof rl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof il)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw pi(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:nu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:pi(27497)}(e,t.precondition)),n}function gu(e,t){return{documents:[lu(e,t.path)]}}function mu(e,t){const n={structuredQuery:{}},r=t.path;let o;null!==t.collectionGroup?(o=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lu(e,o);const i=function(e){if(0!==e.length)return Su(Qs.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Cu(e.field),direction:wu(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=Jl(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:o}}function yu(e){let t=uu(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){mi(1===r,65062);const e=n.from[0];e.allDescendants?o=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=vu(e);return t instanceof Qs&&$s(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new qs(Eu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,ma(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new Hs(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new Hs(n,t)}(n.endAt)),yc(t,o,a,i,s,"F",c,l)}function vu(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Eu(e.unaryFilter.field);return Ys.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Eu(e.unaryFilter.field);return Ys.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Eu(e.unaryFilter.field);return Ys.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Eu(e.unaryFilter.field);return Ys.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pi(61313);default:return pi(60726)}}(e):void 0!==e.fieldFilter?function(e){return Ys.create(Eu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pi(58110);default:return pi(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Qs.create(e.compositeFilter.filters.map(e=>vu(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return pi(1026)}}(e.compositeFilter.op))}(e):pi(30097,{filter:e})}function wu(e){return Yl[e]}function bu(e){return Ql[e]}function _u(e){return Zl[e]}function Cu(e){return{fieldPath:e.canonicalString()}}function Eu(e){return Vi.fromServerFormat(e.fieldPath)}function Su(e){return e instanceof Ys?function(e){if("=="===e.op){if(Ds(e.value))return{unaryFilter:{field:Cu(e.field),op:"IS_NAN"}};if(js(e.value))return{unaryFilter:{field:Cu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ds(e.value))return{unaryFilter:{field:Cu(e.field),op:"IS_NOT_NAN"}};if(js(e.value))return{unaryFilter:{field:Cu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cu(e.field),op:bu(e.op),value:e.value}}}(e):e instanceof Qs?function(e){const t=e.getFilters().map(e=>Su(e));return 1===t.length?t[0]:{compositeFilter:{op:_u(e.op),filters:t}}}(e):pi(54877,{filter:e})}function Au(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Iu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class xu{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ta.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ta.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ns.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new xu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Nu{constructor(e){this.yt=e}}function Tu(e){const t=yu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ac(t,t.limit,"L"):t}class ku{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(is(e.integerValue));else if("doubleValue"in e){const n=is(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),ya(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=os(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(as(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Fs(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ls(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):pi(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const o=_s,i=(null===(n=r[o].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(is(i)),this.Ot(o,t),this.Ct(r[o],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),zi.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ku.Kt=new ku;class Ou{constructor(){this.Cn=new Ru}addToCollectionParentIndex(e,t){return this.Cn.add(t),da.resolve()}getCollectionParents(e,t){return da.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return da.resolve()}deleteFieldIndex(e,t){return da.resolve()}deleteAllFieldIndexes(e){return da.resolve()}createTargetIndexes(e,t){return da.resolve()}getDocumentsMatchingTarget(e,t){return da.resolve(null)}getIndexType(e,t){return da.resolve(0)}getFieldIndexes(e,t){return da.resolve([])}getNextCollectionGroupToUpdate(e){return da.resolve(null)}getMinOffset(e,t){return da.resolve(aa.min())}getMinOffsetFromCollectionGroup(e,t){return da.resolve(aa.min())}updateCollectionGroup(e,t,n){return da.resolve()}updateIndexEntries(e,t){return da.resolve()}}class Ru{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new $a(Fi.comparator),o=!r.has(n);return this.index[t]=r.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new $a(Fi.comparator)).toArray()}}new Uint8Array(0);const Pu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ju=41943040;class Du{static withCacheSize(e){return new Du(e,Du.DEFAULT_COLLECTION_PERCENTILE,Du.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Du.DEFAULT_COLLECTION_PERCENTILE=10,Du.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Du.DEFAULT=new Du(ju,Du.DEFAULT_COLLECTION_PERCENTILE,Du.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Du.DISABLED=new Du(-1,0,0);class Mu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mu(0)}static cr(){return new Mu(-1)}}const Lu="LruGarbageCollector",Bu=1048576;function Fu(e,t){let[n,r]=e,[o,i]=t;const a=Oi(n,o);return 0===a?Oi(r,i):a}class Uu{constructor(e){this.Ir=e,this.buffer=new $a(Fu),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Fu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Vu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){ui(Lu,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){fa(e)?ui(Lu,"Ignoring IndexedDB error during garbage collection: ",e):await ua(e)}await this.Vr(3e5)})}}class zu{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return da.resolve(pa.ce);const n=new Uu(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ui("LruGarbageCollector","Garbage collection skipped; disabled"),da.resolve(Pu)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ui("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Pu):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,o,i,a,s,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(ui("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(o=t,s=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),li()<=W.DEBUG&&ui("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(o," targets in ")+(s-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-s)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),da.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:e})))}}function Hu(e,t){return new zu(e,t)}class Gu{constructor(){this.changes=new Pc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?da.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class qu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&gl(n.mutation,e,es.empty(),ea.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Gc()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gc();const r=Fc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Lc();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Fc();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Gc()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let o=Dc();const i=Vc(),a=Vc();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof wl)?o=o.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),gl(a.mutation,t,a.mutation.getFieldMask(),ea.now())):i.set(t.key,es.empty())}),this.recalculateAndSaveOverlays(e,o).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Wu(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Vc();let r=new Ya((e,t)=>e-t),o=Gc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const o of e)o.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||es.empty();a=o.applyToLocalView(i,a),n.set(e,a);const s=(r.get(o.batchId)||Gc()).add(e);r=r.insert(o.batchId,s)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,c=r.value,l=Uc();c.forEach(e=>{if(!o.has(e)){const r=fl(t.get(e),n.get(e));null!==r&&l.set(e,r),o=o.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,s,l))}return da.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return zi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(o=>{const i=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-o.size):da.resolve(Fc());let a=na,s=o;return i.next(t=>da.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),o.get(t)?da.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,o)).next(()=>this.computeViews(e,s,t,Gc())).next(e=>({batchId:a,changes:Bc(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zi(t)).next(e=>{let t=Lc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const o=t.collectionGroup;let i=Lc();return this.indexManager.getCollectionParents(e,o).next(a=>da.forEach(a,a=>{const s=function(e,t){return new mc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(o));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(o=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,r))).next(e=>{o.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,zs.newInvalidDocument(r)))});let n=Lc();return e.forEach((e,r)=>{const i=o.get(e);void 0!==i&&gl(i.mutation,r,es.empty(),ea.now()),Tc(t,r)&&(n=n.insert(e,r))}),n})}}class Xu{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return da.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ru(e.createTime)}}(t)),da.resolve()}getNamedQuery(e,t){return da.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Tu(e.bundledQuery),readTime:ru(e.readTime)}}(t)),da.resolve()}}class Ku{constructor(){this.overlays=new Ya(zi.comparator),this.qr=new Map}getOverlay(e,t){return da.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Fc();return da.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),da.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),da.resolve()}getOverlaysForCollection(e,t,n){const r=Fc(),o=t.length+1,i=new zi(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===o&&e.largestBatchId>n&&r.set(e.getKey(),e)}return da.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let o=new Ya((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=o.get(e.largestBatchId);null===t&&(t=Fc(),o=o.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Fc(),s=o.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return da.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new xl(t,n));let o=this.qr.get(t);void 0===o&&(o=Gc(),this.qr.set(t,o)),this.qr.set(t,o.add(n.key))}}class Yu{constructor(){this.sessionToken=ns.EMPTY_BYTE_STRING}getSessionToken(e){return da.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,da.resolve()}}class Qu{constructor(){this.Qr=new $a(Zu.$r),this.Ur=new $a(Zu.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Zu(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Zu(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new zi(new Fi([])),n=new Zu(t,e),r=new Zu(t,e+1),o=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),o.push(e.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new zi(new Fi([])),n=new Zu(t,e),r=new Zu(t,e+1);let o=Gc();return this.Ur.forEachInRange([n,r],e=>{o=o.add(e.key)}),o}containsKey(e){const t=new Zu(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Zu{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return zi.comparator(e.key,t.key)||Oi(e.Yr,t.Yr)}static Kr(e,t){return Oi(e.Yr,t.Yr)||zi.comparator(e.key,t.key)}}class $u{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new $a(Zu.$r)}checkEmpty(e){return da.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Al(o,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Zr=this.Zr.add(new Zu(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return da.resolve(i)}lookupMutationBatch(e,t){return da.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),o=r<0?0:r;return da.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return da.resolve(0===this.mutationQueue.length?ga:this.tr-1)}getAllMutationBatches(e){return da.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Zu(t,0),r=new Zu(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);o.push(t)}),da.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new $a(Oi);return t.forEach(e=>{const t=new Zu(e,0),r=new Zu(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),da.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let o=n;zi.isDocumentKey(o)||(o=o.child(""));const i=new Zu(new zi(o),0);let a=new $a(Oi);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},i),da.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){mi(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return da.forEach(t.mutations,r=>{const o=new Zu(r.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Zu(t,0),r=this.Zr.firstAfterOrEqual(n);return da.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,da.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ju{constructor(e){this.ri=e,this.docs=new Ya(zi.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),o=r?r.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return da.resolve(n?n.document.mutableCopy():zs.newInvalidDocument(t))}getEntries(e,t){let n=Dc();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():zs.newInvalidDocument(e))}),da.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let o=Dc();const i=t.path,a=new zi(i.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||sa(ia(a),n)<=0||(r.has(a.key)||Tc(t,a))&&(o=o.insert(a.key,a.mutableCopy()))}return da.resolve(o)}getAllFromCollectionGroup(e,t,n,r){pi(9500)}ii(e,t){return da.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ed(this)}getSize(e){return da.resolve(this.size)}}class ed extends Gu{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),da.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class td{constructor(e){this.persistence=e,this.si=new Pc(e=>fc(e),pc),this.lastRemoteSnapshotVersion=ta.min(),this.highestTargetId=0,this.oi=0,this._i=new Qu,this.targetCount=0,this.ai=Mu.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),da.resolve()}getLastRemoteSnapshotVersion(e){return da.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return da.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),da.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),da.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Mu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,da.resolve()}updateTargetData(e,t){return this.Pr(t),da.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,da.resolve()}removeTargets(e,t,n){let r=0;const o=[];return this.si.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(i),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),da.waitFor(o).next(()=>r)}getTargetCount(e){return da.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return da.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),da.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(t=>{o.push(r.markPotentiallyOrphaned(e,t))}),da.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),da.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return da.resolve(n)}containsKey(e,t){return da.resolve(this._i.containsKey(t))}}class nd{constructor(e,t){this.ui={},this.overlays={},this.ci=new pa(0),this.li=!1,this.li=!0,this.hi=new Yu,this.referenceDelegate=e(this),this.Pi=new td(this),this.indexManager=new Ou,this.remoteDocumentCache=function(e){return new Ju(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Nu(t),this.Ii=new Xu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ku,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new $u(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ui("MemoryPersistence","Starting transaction:",e);const r=new rd(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return da.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class rd extends la{constructor(e){super(),this.currentSequenceNumber=e}}class od{constructor(e){this.persistence=e,this.Ri=new Qu,this.Vi=null}static mi(e){return new od(e)}get fi(){if(this.Vi)return this.Vi;throw pi(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),da.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),da.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),da.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return da.forEach(this.fi,n=>{const r=zi.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ta.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return da.or([()=>da.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class id{constructor(e,t){this.persistence=e,this.pi=new Pc(e=>ba(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Hu(this,t)}static mi(e,t){return new id(e,t)}Ei(){}di(e){return da.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return da.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?da.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,o.removeEntry(r,ta.min()))})).next(()=>o.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),da.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),da.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),da.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),da.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ks(e.data.value)),t}br(e,t,n){return da.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return da.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ad{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Gc(),r=Gc();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new ad(e,t.fromCache,n,r)}}class sd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class cd{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=x()?8:ha(A())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const o={result:null};return this.ys(e,t).next(e=>{o.result=e}).next(()=>{if(!o.result)return this.ws(e,t,r,n).next(e=>{o.result=e})}).next(()=>{if(o.result)return;const n=new sd;return this.Ss(e,t,n).next(r=>{if(o.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>o.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(li()<=W.DEBUG&&ui("QueryEngine","SDK will not create cache indexes for query:",Nc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),da.resolve()):(li()<=W.DEBUG&&ui("QueryEngine","Query:",Nc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(li()<=W.DEBUG&&ui("QueryEngine","The SDK decides to create cache indexes for query:",Nc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cc(t))):da.resolve())}ys(e,t){if(wc(t))return da.resolve(null);let n=Cc(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Ac(t,null,"F"),n=Cc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const o=Gc(...r);return this.ps.getDocuments(e,o).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,r);return this.Cs(t,i,o,n.readTime)?this.ys(e,Ac(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,r){return wc(t)||r.isEqual(ta.min())?da.resolve(null):this.ps.getDocuments(e,n).next(o=>{const i=this.Ds(t,o);return this.Cs(t,i,n,r)?da.resolve(null):(li()<=W.DEBUG&&ui("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Nc(t)),this.vs(e,i,t,oa(r,na)).next(e=>e))})}Ds(e,t){let n=new $a(Oc(e));return t.forEach((t,r)=>{Tc(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,t,n){return li()<=W.DEBUG&&ui("QueryEngine","Using full collection scan to execute query:",Nc(t)),this.ps.getDocumentsMatchingQuery(e,t,aa.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const ld="LocalStore";class ud{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Ya(Oi),this.xs=new Pc(e=>fc(e),pc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qu(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function dd(e,t,n,r){return new ud(e,t,n,r)}async function hd(e,t){const n=yi(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(o=>(r=o,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const o=[],i=[];let a=Gc();for(const e of r){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:o,addedBatchIds:i}))})})}function fd(e){const t=yi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function pd(e,t,n){let r=Gc(),o=Gc();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Dc();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(o=o.add(n)),i.isNoDocument()&&i.version.isEqual(ta.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):ui(ld,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{ks:r,qs:o}})}function gd(e,t){const n=yi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=ga),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function md(e,t){const n=yi(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(o=>o?(r=o,da.resolve(r)):n.Pi.allocateTargetId(e).next(o=>(r=new xu(t,o,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function yd(e,t,n){const r=yi(e),o=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,o))}catch(e){if(!fa(e))throw e;ui(ld,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function vd(e,t,n){const r=yi(e);let o=ta.min(),i=Gc();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=yi(e),o=r.xs.get(n);return void 0!==o?da.resolve(r.Ms.get(o)):r.Pi.getTargetData(t,n)}(r,e,Cc(t)).next(t=>{if(t)return o=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?o:ta.min(),n?i:Gc())).next(e=>(wd(r,kc(t),e),{documents:e,Qs:i})))}function wd(e,t,n){let r=e.Os.get(t)||ta.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class bd{constructor(){this.activeTargetIds=qc()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _d{constructor(){this.Mo=new bd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new bd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Cd{Oo(e){}shutdown(){}}const Ed="ConnectivityMonitor";class Sd{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ui(Ed,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ui(Ed,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ad=null;function Id(){return null===Ad?Ad=268435456+Math.round(2147483648*Math.random()):Ad++,"0x"+Ad.toString(16)}const xd="RestConnection",Nd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Td{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===gs?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,o){const i=Id(),a=this.zo(e,t.toUriEncodedString());ui(xd,"Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,o);const{host:c}=new URL(a),l=b(c);return this.Jo(e,a,s,n,l).then(t=>(ui(xd,"Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw hi(xd,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,o,i){return this.Go(e,t,n,r,o)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+si,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Nd[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class kd{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Od="WebChannelConnection";class Rd extends Td{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,o){const i=Id();return new Promise((o,a)=>{const s=new Ko;s.setWithCredentials(!0),s.listenOnce(Qo.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case Zo.NO_ERROR:const n=s.getResponseJson();ui(Od,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(n)),o(n);break;case Zo.TIMEOUT:ui(Od,"RPC '".concat(e,"' ").concat(i," timed out")),a(new wi(vi.DEADLINE_EXCEEDED,"Request time out"));break;case Zo.HTTP_ERROR:const r=s.getStatus();if(ui(Od,"RPC '".concat(e,"' ").concat(i," failed with status:"),r,"response text:",s.getResponseText()),r>0){var t;let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(vi).indexOf(t)>=0?t:vi.UNKNOWN}(n.status);a(new wi(e,n.message))}else a(new wi(vi.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new wi(vi.UNAVAILABLE,"Connection failed."));break;default:pi(9055,{l_:e,streamId:i,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{ui(Od,"RPC '".concat(e,"' ").concat(i," completed."))}});const c=JSON.stringify(r);ui(Od,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",c,n,15)})}T_(e,t,n){const r=Id(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ti(),a=ei(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const l=o.join("");ui(Od,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),s);const u=i.createWebChannel(l,s);this.I_(u);let d=!1,h=!1;const f=new kd({Yo:t=>{h?ui(Od,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(ui(Od,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),ui(Od,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Yo.EventType.OPEN,()=>{h||(ui(Od,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,Yo.EventType.CLOSE,()=>{h||(h=!0,ui(Od,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,Yo.EventType.ERROR,t=>{h||(h=!0,hi(Od,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new wi(vi.UNAVAILABLE,"The operation could not be completed")))}),p(u,Yo.EventType.MESSAGE,t=>{if(!h){var n;const o=t.data[0];mi(!!o,16349);const i=o,a=(null===i||void 0===i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){ui(Od,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Tl[e];if(void 0!==t)return Rl(t)}(t),o=a.message;void 0===n&&(n=vi.INTERNAL,o="Unknown error status: "+t+" with message "+a.message),h=!0,f.a_(new wi(n,o)),u.close()}else ui(Od,"RPC '".concat(e,"' stream ").concat(r," received:"),o),f.u_(o)}}),p(a,Jo.STAT_EVENT,t=>{t.stat===$o.PROXY?ui(Od,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===$o.NOPROXY&&ui(Od,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Pd(){return"undefined"!=typeof document?document:null}function jd(e){return new $l(e,!0)}class Dd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&ui("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Md="PersistentStream";class Ld{constructor(e,t,n,r,o,i,a,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=o,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Dd(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===vi.RESOURCE_EXHAUSTED?(di(t.toString()),di("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===vi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new wi(vi.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ui(Md,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ui(Md,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Bd extends Ld{constructor(e,t,n,r,o,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:pi(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(mi(void 0===t||"string"==typeof t,58123),ns.fromBase64String(t||"")):(mi(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),ns.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?vi.UNKNOWN:Rl(e.code);return new wi(t,e.message||"")}(a);n=new Gl(r,o,i,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=cu(e,r.document.name),i=ru(r.document.updateTime),a=r.document.createTime?ru(r.document.createTime):ta.min(),s=new Us({mapValue:{fields:r.document.fields}}),c=zs.newFoundDocument(o,i,a,s),l=r.targetIds||[],u=r.removedTargetIds||[];n=new zl(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=cu(e,r.document),i=r.readTime?ru(r.readTime):ta.min(),a=zs.newNoDocument(o,i),s=r.removedTargetIds||[];n=new zl([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=cu(e,r.document),i=r.removedTargetIds||[];n=new zl([],i,o,null)}else{if(!("filter"in t))return pi(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:o}=e,i=new Nl(r,o),a=e.targetId;n=new Hl(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ta.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ta.min():t.readTime?ru(t.readTime):ta.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=du(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=gc(r)?{documents:gu(e,r)}:{query:mu(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=tu(e,t.resumeToken);const r=Jl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ta.min())>0){n.readTime=eu(e,t.snapshotVersion.toTimestamp());const r=Jl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pi(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=du(this.serializer),t.removeTarget=e,this.q_(t)}}class Fd extends Ld{constructor(e,t,n,r,o,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return mi(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mi(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){mi(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(mi(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?ru(e.updateTime):ru(t);return n.isEqual(ta.min())&&(n=ru(t)),new ll(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=ru(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=du(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>pu(this.serializer,e))};this.q_(t)}}class Ud{}class Vd extends Ud{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new wi(vi.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[i,a]=o;return this.connection.Go(e,iu(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===vi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new wi(vi.UNKNOWN,e.toString())})}Ho(e,t,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,s]=i;return this.connection.Ho(e,iu(t,n),r,a,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===vi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new wi(vi.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class zd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(di(t),this.aa=!1):ui("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Hd="RemoteStore";class Gd{constructor(e,t,n,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Jd(this)&&(ui(Hd,"Restarting streams for network reachability change."),await async function(e){const t=yi(e);t.Ea.add(4),await qd(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Wd(t)}(this))})}),this.Ra=new zd(n,r)}}async function Wd(e){if(Jd(e))for(const t of e.da)await t(!0)}async function qd(e){for(const t of e.da)await t(!1)}function Xd(e,t){const n=yi(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),$d(n)?Zd(n):vh(n).O_()&&Yd(n,t))}function Kd(e,t){const n=yi(e),r=vh(n);n.Ia.delete(t),r.O_()&&Qd(n,t),0===n.Ia.size&&(r.O_()?r.L_():Jd(n)&&n.Ra.set("Unknown"))}function Yd(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ta.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}vh(e).Y_(t)}function Qd(e,t){e.Va.Ue(t),vh(e).Z_(t)}function Zd(e){e.Va=new ql({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),vh(e).start(),e.Ra.ua()}function $d(e){return Jd(e)&&!vh(e).x_()&&e.Ia.size>0}function Jd(e){return 0===yi(e).Ea.size}function eh(e){e.Va=void 0}async function th(e){e.Ra.set("Online")}async function nh(e){e.Ia.forEach((t,n)=>{Yd(e,t)})}async function rh(e,t){eh(e),$d(e)?(e.Ra.ha(t),Zd(e)):e.Ra.set("Unknown")}async function oh(e,t,n){if(e.Ra.set("Online"),t instanceof Gl&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){ui(Hd,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ih(e,n)}else if(t instanceof zl?e.Va.Ze(t):t instanceof Hl?e.Va.st(t):e.Va.tt(t),!n.isEqual(ta.min()))try{const t=await fd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const o=e.Ia.get(r);o&&e.Ia.set(r,o.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(ns.EMPTY_BYTE_STRING,r.snapshotVersion)),Qd(e,t);const o=new xu(r.target,t,n,r.sequenceNumber);Yd(e,o)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ui(Hd,"Failed to raise snapshot:",t),await ih(e,t)}}async function ih(e,t,n){if(!fa(t))throw t;e.Ea.add(1),await qd(e),e.Ra.set("Offline"),n||(n=()=>fd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ui(Hd,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Wd(e)})}function ah(e,t){return t().catch(n=>ih(e,n,t))}async function sh(e){const t=yi(e),n=wh(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ga;for(;ch(t);)try{const e=await gd(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,lh(t,e)}catch(e){await ih(t,e)}uh(t)&&dh(t)}function ch(e){return Jd(e)&&e.Ta.length<10}function lh(e,t){e.Ta.push(t);const n=wh(e);n.O_()&&n.X_&&n.ea(t.mutations)}function uh(e){return Jd(e)&&!wh(e).x_()&&e.Ta.length>0}function dh(e){wh(e).start()}async function hh(e){wh(e).ra()}async function fh(e){const t=wh(e);for(const n of e.Ta)t.ea(n.mutations)}async function ph(e,t,n){const r=e.Ta.shift(),o=Il.from(r,t,n);await ah(e,()=>e.remoteSyncer.applySuccessfulWrite(o)),await sh(e)}async function gh(e,t){t&&wh(e).X_&&await async function(e,t){if(function(e){return Ol(e)&&e!==vi.ABORTED}(t.code)){const n=e.Ta.shift();wh(e).B_(),await ah(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await sh(e)}}(e,t),uh(e)&&dh(e)}async function mh(e,t){const n=yi(e);n.asyncQueue.verifyOperationInProgress(),ui(Hd,"RemoteStore received new credentials");const r=Jd(n);n.Ea.add(3),await qd(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Wd(n)}async function yh(e,t){const n=yi(e);t?(n.Ea.delete(2),await Wd(n)):t||(n.Ea.add(2),await qd(n),n.Ra.set("Unknown"))}function vh(e){return e.ma||(e.ma=function(e,t,n){const r=yi(e);return r.sa(),new Bd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:th.bind(null,e),t_:nh.bind(null,e),r_:rh.bind(null,e),H_:oh.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),$d(e)?Zd(e):e.Ra.set("Unknown")):(await e.ma.stop(),eh(e))})),e.ma}function wh(e){return e.fa||(e.fa=function(e,t,n){const r=yi(e);return r.sa(),new Fd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:hh.bind(null,e),r_:gh.bind(null,e),ta:fh.bind(null,e),na:ph.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await sh(e)):(await e.fa.stop(),e.Ta.length>0&&(ui(Hd,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class bh{constructor(e,t,n,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,o){const i=Date.now()+n,a=new bh(e,t,i,r,o);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new wi(vi.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _h(e,t){if(di("AsyncQueue","".concat(t,": ").concat(e)),fa(e))return new wi(vi.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ch{static emptySet(e){return new Ch(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||zi.comparator(t.key,n.key):(e,t)=>zi.comparator(e.key,t.key),this.keyedMap=Lc(),this.sortedSet=new Ya(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ch))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ch;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Eh{constructor(){this.ga=new Ya(zi.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):pi(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Sh{constructor(e,t,n,r,o,i,a,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,o){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Sh(e,t,Ch.emptySet(t),i,n,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ic(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ah{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Ih{constructor(){this.queries=xh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=yi(e),r=n.queries;n.queries=xh(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new wi(vi.ABORTED,"Firestore shutting down"))}}function xh(){return new Pc(e=>xc(e),Ic)}async function Nh(e,t){const n=yi(e);let r=3;const o=t.query;let i=n.queries.get(o);i?!i.ba()&&t.Da()&&(r=2):(i=new Ah,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(o,!0);break;case 1:i.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(e){const n=_h(e,"Initialization of query '".concat(Nc(t.query),"' failed"));return void t.onError(n)}n.queries.set(o,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Rh(n)}async function Th(e,t){const n=yi(e),r=t.query;let o=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?o=t.Da()?0:1:!i.ba()&&t.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kh(e,t){const n=yi(e);let r=!1;for(const o of t){const e=o.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(o)&&(r=!0);t.wa=o}}r&&Rh(n)}function Oh(e,t,n){const r=yi(e),o=r.queries.get(t);if(o)for(const i of o.Sa)i.onError(n);r.queries.delete(t)}function Rh(e){e.Ca.forEach(e=>{e.next()})}var Ph,jh;(jh=Ph||(Ph={})).Ma="default",jh.Cache="cache";class Dh{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Sh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Sh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ph.Cache}}class Mh{constructor(e){this.key=e}}class Lh{constructor(e){this.key=e}}class Bh{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Gc(),this.mutatedKeys=Gc(),this.eu=Oc(e),this.tu=new Ch(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Eh,r=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const l=r.get(e),u=Tc(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(l,u)||(n.track({type:2,doc:u}),f=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(a=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(s||c)&&(a=!0)),f&&(u?(i=i.add(u),o=h?o.add(e):o.delete(e)):(i=i.delete(e),o=o.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),o=o.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pi(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],s=0===this.Xa.size&&this.current&&!r?1:0,c=s!==this.Za;return this.Za=s,0!==i.length||c?{snapshot:new Sh(this.query,e.tu,o,i,e.mutatedKeys,0===s,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Eh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Gc(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Lh(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Mh(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Gc();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Sh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Fh="SyncEngine";class Uh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Vh{constructor(e){this.key=e,this.hu=!1}}class zh{constructor(e,t,n,r,o,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Pc(e=>xc(e),Ic),this.Iu=new Map,this.Eu=new Set,this.du=new Ya(zi.comparator),this.Au=new Map,this.Ru=new Qu,this.Vu={},this.mu=new Map,this.fu=Mu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Hh(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=df(e);let o;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),o=i.view.lu()):o=await Wh(r,t,n,!0),o}async function Gh(e,t){const n=df(e);await Wh(n,t,!0,!1)}async function Wh(e,t,n,r){const o=await md(e.localStore,Cc(t)),i=o.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let s;return r&&(s=await qh(e,t,i,"current"===a,o.resumeToken)),e.isPrimaryClient&&n&&Xd(e.remoteStore,o),s}async function qh(e,t,n,r,o){e.pu=(t,n,r)=>async function(e,t,n,r){let o=t.view.ru(n);o.Cs&&(o=await vd(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,o)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(o,e.isPrimaryClient,i,a);return of(e,t.targetId,s.au),s.snapshot}(e,t,n,r);const i=await vd(e.localStore,t,!0),a=new Bh(t,i.Qs),s=a.ru(i.documents),c=Vl.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,o),l=a.applyChanges(s,e.isPrimaryClient,c);of(e,n,l.au);const u=new Uh(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function Xh(e,t,n){const r=yi(e),o=r.Tu.get(t),i=r.Iu.get(o.targetId);if(i.length>1)return r.Iu.set(o.targetId,i.filter(e=>!Ic(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await yd(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Kd(r.remoteStore,o.targetId),nf(r,o.targetId)}).catch(ua)):(nf(r,o.targetId),await yd(r.localStore,o.targetId,!0))}async function Kh(e,t){const n=yi(e),r=n.Tu.get(t),o=n.Iu.get(r.targetId);n.isPrimaryClient&&1===o.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kd(n.remoteStore,r.targetId))}async function Yh(e,t){const n=yi(e);try{const e=await function(e,t){const n=yi(e),r=t.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const a=[];t.targetChanges.forEach((i,s)=>{const c=o.get(s);if(!c)return;a.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,s).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,s)));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?l=l.withResumeToken(ns.EMPTY_BYTE_STRING,ta.min()).withLastLimboFreeSnapshotVersion(ta.min()):i.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(i.resumeToken,r)),o=o.insert(s,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(c,l,i)&&a.push(n.Pi.updateTargetData(e,l))});let s=Dc(),c=Gc();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(pd(e,i,t.documentUpdates).next(e=>{s=e.ks,c=e.qs})),!r.isEqual(ta.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return da.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,s,c)).next(()=>s)}).then(e=>(n.Ms=o,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(mi(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?mi(r.hu,14607):e.removedDocuments.size>0&&(mi(r.hu,42227),r.hu=!1))}),await cf(n,e,t)}catch(e){await ua(e)}}function Qh(e,t,n){const r=yi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const o=r.view.va(t);o.snapshot&&e.push(o.snapshot)}),function(e,t){const n=yi(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const o of n.Sa)o.va(t)&&(r=!0)}),r&&Rh(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Zh(e,t,n){const r=yi(e);r.sharedClientState.updateQueryState(t,"rejected",n);const o=r.Au.get(t),i=o&&o.key;if(i){let e=new Ya(zi.comparator);e=e.insert(i,zs.newNoDocument(i,ta.min()));const n=Gc().add(i),o=new Ul(ta.min(),new Map,new Ya(Oi),e,n);await Yh(r,o),r.du=r.du.remove(i),r.Au.delete(t),sf(r)}else await yd(r.localStore,t,!1).then(()=>nf(r,t,n)).catch(ua)}async function $h(e,t){const n=yi(e),r=t.batch.batchId;try{const e=await function(e,t){const n=yi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const o=n.batch,i=o.keys();let a=da.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);mi(null!==i,48541),t.version.compareTo(i)<0&&(o.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,o))}(n,e,t,o).next(()=>o.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Gc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);tf(n,r,null),ef(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cf(n,e)}catch(e){await ua(e)}}async function Jh(e,t,n){const r=yi(e);try{const e=await function(e,t){const n=yi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(mi(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);tf(r,t,n),ef(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await cf(r,e)}catch(n){await ua(n)}}function ef(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function tf(e,t,n){const r=yi(e);let o=r.Vu[r.currentUser.toKey()];if(o){const e=o.get(t);e&&(n?e.reject(n):e.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function nf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||rf(e,t)})}function rf(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Kd(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),sf(e))}function of(e,t,n){for(const r of n)r instanceof Mh?(e.Ru.addReference(r.key,t),af(e,r)):r instanceof Lh?(ui(Fh,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||rf(e,r.key)):pi(19791,{wu:r})}function af(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(ui(Fh,"New document in limbo: "+n),e.Eu.add(r),sf(e))}function sf(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new zi(Fi.fromString(t)),r=e.fu.next();e.Au.set(r,new Vh(n)),e.du=e.du.insert(n,r),Xd(e.remoteStore,new xu(Cc(vc(n.path)),r,"TargetPurposeLimboResolution",pa.ce))}}async function cf(e,t,n){const r=yi(e),o=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,s)=>{a.push(r.pu(s,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const o=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,o?"current":"not-current")}if(e){o.push(e);const t=ad.As(s.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Pu.H_(o),await async function(e,t){const n=yi(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>da.forEach(t,t=>da.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>da.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!fa(e))throw e;ui(ld,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,o=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,o)}}}(r.localStore,i))}async function lf(e,t){const n=yi(e);if(!n.currentUser.isEqual(t)){ui(Fh,"User change. New user:",t.toKey());const e=await hd(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new wi(vi.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await cf(n,e.Ls)}}function uf(e,t){const n=yi(e),r=n.Au.get(t);if(r&&r.hu)return Gc().add(r.key);{let e=Gc();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function df(e){const t=yi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Yh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=uf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Zh.bind(null,t),t.Pu.H_=kh.bind(null,t.eventManager),t.Pu.yu=Oh.bind(null,t.eventManager),t}function hf(e){const t=yi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$h.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Jh.bind(null,t),t}class ff{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return dd(this.persistence,new cd,e.initialUser,this.serializer)}Cu(e){return new nd(od.mi,this.serializer)}Du(e){return new _d}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ff.provider={build:()=>new ff};class pf extends ff{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){mi(this.persistence.referenceDelegate instanceof id,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Vu(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Du.withCacheSize(this.cacheSizeBytes):Du.DEFAULT;return new nd(e=>id.mi(e,t),this.serializer)}}class gf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Qh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=lf.bind(null,this.syncEngine),await yh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ih}createDatastore(e){const t=jd(e.databaseInfo.databaseId),n=function(e){return new Rd(e)}(e.databaseInfo);return function(e,t,n,r){return new Vd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,o){return new Gd(e,t,n,r,o)}(this.localStore,this.datastore,e.asyncQueue,e=>Qh(this.syncEngine,e,0),Sd.v()?new Sd:new Cd)}createSyncEngine(e,t){return function(e,t,n,r,o,i,a){const s=new zh(e,t,n,r,o,i);return a&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=yi(e);ui(Hd,"RemoteStore shutting down."),t.Ea.add(5),await qd(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}gf.provider={build:()=>new gf};class mf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):di("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const yf="FirestoreClient";class vf{constructor(e,t,n,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ai.UNAUTHENTICATED,this.clientId=ki.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,async e=>{ui(yf,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(ui(yf,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=_h(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function wf(e,t){e.asyncQueue.verifyOperationInProgress(),ui(yf,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await hd(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function bf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await _f(e);ui(yf,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>mh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>mh(t.remoteStore,n)),e._onlineComponents=t}async function _f(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ui(yf,"Using user provided OfflineComponentProvider");try{await wf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===vi.FAILED_PRECONDITION||e.code===vi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;hi("Error using user provided cache. Falling back to memory cache: "+n),await wf(e,new ff)}}else ui(yf,"Using default OfflineComponentProvider"),await wf(e,new pf(void 0));return e._offlineComponents}async function Cf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ui(yf,"Using user provided OnlineComponentProvider"),await bf(e,e._uninitializedComponentsProvider._online)):(ui(yf,"Using default OnlineComponentProvider"),await bf(e,new gf))),e._onlineComponents}function Ef(e){return Cf(e).then(e=>e.syncEngine)}async function Sf(e){const t=await Cf(e),n=t.eventManager;return n.onListen=Hh.bind(null,t.syncEngine),n.onUnlisten=Xh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Gh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Kh.bind(null,t.syncEngine),n}function Af(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new bi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,o){const i=new mf({next:s=>{i.Nu(),t.enqueueAndForget(()=>Th(e,a));const c=s.docs.has(n);!c&&s.fromCache?o.reject(new wi(vi.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&s.fromCache&&r&&"server"===r.source?o.reject(new wi(vi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):o.resolve(s)},error:e=>o.reject(e)}),a=new Dh(vc(n.path),i,{includeMetadataChanges:!0,qa:!0});return Nh(e,a)}(await Sf(e),e.asyncQueue,t,n,r)),r.promise}function If(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new bi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,o){const i=new mf({next:n=>{i.Nu(),t.enqueueAndForget(()=>Th(e,a)),n.fromCache&&"server"===r.source?o.reject(new wi(vi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):o.resolve(n)},error:e=>o.reject(e)}),a=new Dh(n,i,{includeMetadataChanges:!0,qa:!0});return Nh(e,a)}(await Sf(e),e.asyncQueue,t,n,r)),r.promise}function xf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Nf=new Map,Tf="firestore.googleapis.com",kf=!0;class Of{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new wi(vi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Tf,this.ssl=kf}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:kf;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=ju;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Bu)throw new wi(vi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new wi(vi.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new wi(vi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new wi(vi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new wi(vi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Of({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new wi(vi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new wi(vi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Of(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ci;switch(e.type){case"firstParty":return new Ii(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new wi(vi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Nf.get(e);t&&(ui("ComponentProvider","Removing Datastore"),Nf.delete(e),t.terminate())}(this),Promise.resolve()}}function Pf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Ki(e,Rf);const o=b(t),i=e._getSettings(),a=s(s({},i),{},{emulatorOptions:e._getEmulatorOptions()}),c="".concat(t,":").concat(n);o&&(_("https://".concat(c)),S("Firestore",!0)),i.host!==Tf&&i.host!==c&&hi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=s(s({},i),{},{host:c,ssl:o,emulatorOptions:r});if(!R(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ai.MOCK_USER;else{var u;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=s({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[h(JSON.stringify({alg:"none",type:"JWT"})),h(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new wi(vi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ai(o)}e._authCredentials=new Ei(new _i(t,n))}}class jf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new jf(this.firestore,e,this._query)}}class Df{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Df(this.firestore,e,this._key)}toJSON(){return{type:Df._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Zi(t,Df._jsonSchema))return new Df(e,n||null,new zi(Fi.fromString(t.referencePath)))}}Df._jsonSchemaVersion="firestore/documentReference/1.0",Df._jsonSchema={type:Qi("string",Df._jsonSchemaVersion),referencePath:Qi("string")};class Mf extends jf{constructor(e,t,n){super(e,t,vc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Df(this.firestore,null,new zi(e))}withConverter(e){return new Mf(this.firestore,e,this._path)}}function Lf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(e=F(e),Hi("collection","path",t),e instanceof Rf){const n=Fi.fromString(t,...r);return Wi(n),new Mf(e,null,n)}{if(!(e instanceof Df||e instanceof Mf))throw new wi(vi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Fi.fromString(t,...r));return Wi(n),new Mf(e.firestore,null,n)}}function Bf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(e=F(e),1===arguments.length&&(t=ki.newId()),Hi("doc","path",t),e instanceof Rf){const n=Fi.fromString(t,...r);return Gi(n),new Df(e,null,new zi(n))}{if(!(e instanceof Df||e instanceof Mf))throw new wi(vi.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Fi.fromString(t,...r));return Gi(n),new Df(e.firestore,e instanceof Mf?e.converter:null,new zi(n))}}const Ff="AsyncQueue";class Uf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Dd(this,"async_queue_retry"),this._c=()=>{const e=Pd();e&&ui(Ff,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Pd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Pd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new bi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!fa(e))throw e;ui(Ff,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,di("INTERNAL UNHANDLED ERROR: ",Vf(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=bh.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&pi(47125,{Pc:Vf(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Vf(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function zf(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Hf extends Rf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Uf,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Uf(e),this._firestoreClient=void 0,await e}}}function Gf(e){if(e._terminated)throw new wi(vi.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Wf(e),e._firestoreClient}function Wf(e){var t,n,r;const o=e._freezeSettings(),i=function(e,t,n,r){return new ps(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,xf(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,o);e._componentsProvider||null!==(n=o.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=o.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),e._firestoreClient=new vf(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class qf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qf(ns.fromBase64String(e))}catch(e){throw new wi(vi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new qf(ns.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qf._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zi(e,qf._jsonSchema))return qf.fromBase64String(e.bytes)}}qf._jsonSchemaVersion="firestore/bytes/1.0",qf._jsonSchema={type:Qi("string",qf._jsonSchemaVersion),bytes:Qi("string")};class Xf{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new wi(vi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vi(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kf{constructor(e){this._methodName=e}}class Yf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new wi(vi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new wi(vi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oi(this._lat,e._lat)||Oi(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yf._jsonSchemaVersion}}static fromJSON(e){if(Zi(e,Yf._jsonSchema))return new Yf(e.latitude,e.longitude)}}Yf._jsonSchemaVersion="firestore/geoPoint/1.0",Yf._jsonSchema={type:Qi("string",Yf._jsonSchemaVersion),latitude:Qi("number"),longitude:Qi("number")};class Qf{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Qf._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zi(e,Qf._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Qf(e.vectorValues);throw new wi(vi.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qf._jsonSchemaVersion="firestore/vectorValue/1.0",Qf._jsonSchema={type:Qi("string",Qf._jsonSchemaVersion),vectorValues:Qi("object")};const Zf=/^__.*__$/;class $f{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new wl(e,this.data,this.fieldMask,t,this.fieldTransforms):new vl(e,this.data,t,this.fieldTransforms)}}class Jf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new wl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ep(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pi(40011,{Ac:e})}}class tp{constructor(e,t,n,r,o,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===o&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new tp(s(s({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(ep(this.Ac)&&Zf.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class np{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||jd(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new tp({Ac:e,methodName:t,Dc:n,path:Vi.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rp(e){const t=e._freezeSettings(),n=jd(e._databaseId);return new np(e._databaseId,!!t.ignoreUndefinedProperties,n)}function op(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,o);fp("Data must be an object, but it was:",a,r);const s=dp(r,a);let c,l;if(i.merge)c=new es(a.fieldMask),l=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const o=pp(t,r,n);if(!a.contains(o))throw new wi(vi.INVALID_ARGUMENT,"Field '".concat(o,"' is specified in your field mask but missing from your input data."));vp(e,o)||e.push(o)}c=new es(e),l=a.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,l=a.fieldTransforms;return new $f(new Us(s),c,l)}class ip extends Kf{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ip}}class ap extends Kf{_toFieldTransform(e){return new cl(e.path,new el)}isEqual(e){return e instanceof ap}}function sp(e,t,n,r){const o=e.Cc(1,t,n);fp("Data must be an object, but it was:",o,r);const i=[],a=Us.empty();Xa(r,(e,r)=>{const s=mp(t,e,n);r=F(r);const c=o.yc(s);if(r instanceof ip)i.push(s);else{const e=up(r,c);null!=e&&(i.push(s),a.set(s,e))}});const s=new es(i);return new Jf(a,s,o.fieldTransforms)}function cp(e,t,n,r,o,i){const a=e.Cc(1,t,n),s=[pp(t,r,n)],c=[o];if(i.length%2!=0)throw new wi(vi.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)s.push(pp(t,i[h])),c.push(i[h+1]);const l=[],u=Us.empty();for(let h=s.length-1;h>=0;--h)if(!vp(l,s[h])){const e=s[h];let t=c[h];t=F(t);const n=a.yc(e);if(t instanceof ip)l.push(e);else{const r=up(t,n);null!=r&&(l.push(e),u.set(e,r))}}const d=new es(l);return new Jf(u,d,a.fieldTransforms)}function lp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return up(n,e.Cc(r?4:3,t))}function up(e,t){if(hp(e=F(e)))return fp("Unsupported field value:",t,e),dp(e,t);if(e instanceof Kf)return function(e,t){if(!ep(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const o of e){let e=up(o,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=F(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Yc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ea.fromDate(e);return{timestampValue:eu(t.serializer,n)}}if(e instanceof ea){const n=new ea(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:eu(t.serializer,n)}}if(e instanceof Yf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof qf)return{bytesValue:tu(t.serializer,e._byteString)};if(e instanceof Df){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:ou(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Qf)return function(e,t){return{mapValue:{fields:{[ys]:{stringValue:bs},[_s]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Xc(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Xi(e)))}(e,t)}function dp(e,t){const n={};return Ka(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xa(e,(e,r)=>{const o=up(r,t.mc(e));null!=o&&(n[e]=o)}),{mapValue:{fields:n}}}function hp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ea||e instanceof Yf||e instanceof qf||e instanceof Df||e instanceof Kf||e instanceof Qf)}function fp(e,t,n){if(!hp(n)||!qi(n)){const r=Xi(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function pp(e,t,n){if((t=F(t))instanceof Xf)return t._internalPath;if("string"==typeof t)return mp(e,t);throw yp("Field path arguments must be of type string or ",e,!1,void 0,n)}const gp=new RegExp("[~\\*/\\[\\]]");function mp(e,t,n){if(t.search(gp)>=0)throw yp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Xf(...t.split("."))._internalPath}catch(r){throw yp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function yp(e,t,n,r,o){const i=r&&!r.isEmpty(),a=void 0!==o;let s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=" in field ".concat(r)),a&&(c+=" in document ".concat(o)),c+=")"),new wi(vi.INVALID_ARGUMENT,s+e+c)}function vp(e,t){return e.some(e=>e.isEqual(t))}class wp{constructor(e,t,n,r,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Df(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_p("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bp extends wp{data(){return super.data()}}function _p(e,t){return"string"==typeof t?mp(e,t):t instanceof Xf?t._internalPath:t._delegate._internalPath}function Cp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new wi(vi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ep{}class Sp extends Ep{}function Ap(e,t){let n=[];for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];t instanceof Ep&&n.push(t),n=n.concat(o),function(e){const t=e.filter(e=>e instanceof Np).length,n=e.filter(e=>e instanceof Ip).length;if(t>1||t>0&&n>0)throw new wi(vi.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Ip extends Sp{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ip(e,t,n)}_apply(e){const t=this._parse(e);return Dp(e._query,t),new jf(e.firestore,e.converter,Sc(e._query,t))}_parse(e){const t=rp(e.firestore),n=function(e,t,n,r,o,i,a){let s;if(o.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new wi(vi.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){jp(a,i);const t=[];for(const n of a)t.push(Pp(r,e,n));s={arrayValue:{values:t}}}else s=Pp(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||jp(a,i),s=lp(n,t,a,"in"===i||"not-in"===i);return Ys.create(o,i,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function xp(e,t,n){const r=t,o=_p("where",e);return Ip._create(o,r,n)}class Np extends Ep{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Np(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Qs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const o of r)Dp(n,o),n=Sc(n,o)}(e._query,t),new jf(e.firestore,e.converter,Sc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Tp extends Sp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Tp(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new wi(vi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new wi(vi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qs(t,n)}(e._query,this._field,this._direction);return new jf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new mc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function kp(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=_p("orderBy",e);return Tp._create(n,t)}class Op extends Sp{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Op(e,t,n)}_apply(e){return new jf(e.firestore,e.converter,Ac(e._query,this._limit,this._limitType))}}function Rp(e){return Yi("limit",e),Op._create("limit",e,"F")}function Pp(e,t,n){if("string"==typeof(n=F(n))){if(""===n)throw new wi(vi.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bc(t)&&-1!==n.indexOf("/"))throw new wi(vi.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Fi.fromString(n));if(!zi.isDocumentKey(r))throw new wi(vi.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Os(e,new zi(r))}if(n instanceof Df)return Os(e,n._key);throw new wi(vi.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Xi(n),"."))}function jp(e,t){if(!Array.isArray(e)||0===e.length)throw new wi(vi.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Dp(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new wi(vi.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new wi(vi.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Mp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return is(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(as(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pi(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Xa(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[_s].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>is(e.doubleValue));return new Qf(n)}convertGeoPoint(e){return new Yf(is(e.latitude),is(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=hs(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(fs(e));default:return null}}convertTimestamp(e){const t=os(e);return new ea(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Fi.fromString(e);mi(Iu(n),9688,{name:e});const r=new ms(n.get(1),n.get(3)),o=new zi(n.popFirst(5));return r.isEqual(t)||di("Document ".concat(o," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),o}}function Lp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Bp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fp extends wp{constructor(e,t,n,r,o,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Up(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(_p("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new wi(vi.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Fp._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Fp._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fp._jsonSchema={type:Qi("string",Fp._jsonSchemaVersion),bundleSource:Qi("string","DocumentSnapshot"),bundleName:Qi("string"),bundle:Qi("string")};class Up extends Fp{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Vp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Bp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Up(this._firestore,this._userDataWriter,n.key,n,new Bp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new wi(vi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Up(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Bp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Up(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Bp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let o=-1,i=-1;return 0!==t.type&&(o=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:zp(t.type),doc:r,oldIndex:o,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new wi(vi.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vp._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ki.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pi(61501,{type:e})}}function Hp(e){e=Ki(e,Df);const t=Ki(e.firestore,Hf);return Af(Gf(t),e._key).then(n=>$p(t,e,n))}Vp._jsonSchemaVersion="firestore/querySnapshot/1.0",Vp._jsonSchema={type:Qi("string",Vp._jsonSchemaVersion),bundleSource:Qi("string","QuerySnapshot"),bundleName:Qi("string"),bundle:Qi("string")};class Gp extends Mp{constructor(e){super(),this.firestore=e}convertBytes(e){return new qf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Df(this.firestore,null,t)}}function Wp(e){e=Ki(e,jf);const t=Ki(e.firestore,Hf),n=Gf(t),r=new Gp(t);return Cp(e._query),If(n,e._query).then(n=>new Vp(t,r,e,n))}function qp(e,t,n){e=Ki(e,Df);const r=Ki(e.firestore,Hf),o=Lp(e.converter,t,n);return Zp(r,[op(rp(r),"setDoc",e._key,o,null!==e.converter,n).toMutation(e._key,ul.none())])}function Xp(e,t,n){e=Ki(e,Df);const r=Ki(e.firestore,Hf),o=rp(r);let i;for(var a=arguments.length,s=new Array(a>3?a-3:0),c=3;c<a;c++)s[c-3]=arguments[c];return i="string"==typeof(t=F(t))||t instanceof Xf?cp(o,"updateDoc",e._key,t,n,s):sp(o,"updateDoc",e._key,t),Zp(r,[i.toMutation(e._key,ul.exists(!0))])}function Kp(e){return Zp(Ki(e.firestore,Hf),[new El(e._key,ul.none())])}function Yp(e,t){const n=Ki(e.firestore,Hf),r=Bf(e),o=Lp(e.converter,t);return Zp(n,[op(rp(e.firestore),"addDoc",r._key,o,null!==e.converter,{}).toMutation(r._key,ul.exists(!1))]).then(()=>r)}function Qp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=F(e);let o={includeMetadataChanges:!1,source:"default"},i=0;"object"!=typeof n[i]||zf(n[i])||(o=n[i++]);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(zf(n[i])){var s,c,l;const e=n[i];n[i]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[i+1]=null===(c=e.error)||void 0===c?void 0:c.bind(e),n[i+2]=null===(l=e.complete)||void 0===l?void 0:l.bind(e)}let u,d,h;if(e instanceof Df)d=Ki(e.firestore,Hf),h=vc(e._key.path),u={next:t=>{n[i]&&n[i]($p(d,e,t))},error:n[i+1],complete:n[i+2]};else{const t=Ki(e,jf);d=Ki(t.firestore,Hf),h=t._query;const r=new Gp(d);u={next:e=>{n[i]&&n[i](new Vp(d,r,t,e))},error:n[i+1],complete:n[i+2]},Cp(e._query)}return function(e,t,n,r){const o=new mf(r),i=new Dh(t,o,n);return e.asyncQueue.enqueueAndForget(async()=>Nh(await Sf(e),i)),()=>{o.Nu(),e.asyncQueue.enqueueAndForget(async()=>Th(await Sf(e),i))}}(Gf(d),h,a,u)}function Zp(e,t){return function(e,t){const n=new bi;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=hf(e);try{const e=await function(e,t){const n=yi(e),r=ea.now(),o=t.reduce((e,t)=>e.add(t.key),Gc());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let s=Dc(),c=Gc();return n.Ns.getEntries(e,o).next(e=>{s=e,s.forEach((e,t)=>{t.isValidDocument()||(c=c.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,s)).next(o=>{i=o;const a=[];for(const e of t){const t=ml(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new wl(e.key,t,Vs(t.value.mapValue),ul.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Bc(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Ya(Oi)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await cf(r,e.changes),await sh(r.remoteStore)}catch(e){const t=_h(e,"Failed to persist write");n.reject(t)}}(await Ef(e),t,n)),n.promise}(Gf(e),t)}function $p(e,t,n){const r=n.docs.get(t._key),o=new Gp(e);return new Fp(e,o,t._key,r,new Bp(n.hasPendingWrites,n.fromCache),t.converter)}function Jp(){return new ap("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){si=e}(et),Ye(new U("firestore",(e,n)=>{let{instanceIdentifier:r,options:o}=n;const i=e.getProvider("app").getImmediate(),a=new Hf(new Si(e.getProvider("auth-internal")),new Ni(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new wi(vi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ms(e.options.projectId,t)}(i,r),i);return o=s({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),rt(oi,ii,e),rt(oi,ii,"esm2020")}();rt("firebase","12.7.0","app");const eg=tt({apiKey:"AIzaSyA_wUERgvmONHbydzo4PzbuKyLd4Ocmo1k",authDomain:"praba-7c10c.firebaseapp.com",projectId:"praba-7c10c",storageBucket:"praba-7c10c.firebasestorage.app",messagingSenderId:"841497281260",appId:"1:841497281260:web:69763d4d7596abd4d01bc9",measurementId:"G-DEYLXL9VT2"}),tg=function(e,t){const n="object"==typeof e?e:nt(),r="string"==typeof e?e:t||gs,o=Qe(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const e=(e=>{const t=m(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Pf(o,...e)}return o}(eg),ng=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();const t=Qe(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Qe(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(R(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ct(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Lo,persistence:[qr,Ir,Or]}),r=v("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(o=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Vo)return;const r=null===t||void 0===t?void 0:t.token;zo!==r&&(zo=r,await fetch(o,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){F(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){F(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var o;const i=m("auth");return i&&Gn(n,"http://".concat(i)),n}(eg);var rg=n(579);const og=(0,e.createContext)(),ig=()=>(0,e.useContext)(og),ag=t=>{let{children:n}=t;const[r,o]=(0,e.useState)(null),[i,a]=(0,e.useState)(!0);(0,e.useEffect)(()=>{const e=function(e,t,n,r){return F(e).onAuthStateChanged(t,n,r)}(ng,async e=>{o(e),e&&await(async e=>{if(e)try{const t=Bf(tg,"users",e.uid),n={uid:e.uid,email:e.email,lastLogin:Jp()};(await Hp(t)).exists()?await qp(t,n,{merge:!0}):(await qp(t,s(s({},n),{},{displayName:e.displayName||e.email.split("@")[0],createdAt:Jp()})),console.log("\u2705 New user profile created:",e.email))}catch(t){console.error("\u274c Error storing user details:",t)}})(e),a(!1)});return e},[]);const c={currentUser:r,logout:()=>function(e){return F(e).signOut()}(ng)};return(0,rg.jsx)(og.Provider,{value:c,children:!i&&n})},sg=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},cg=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var lg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ug=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],dg=(0,e.forwardRef)((t,n)=>{let{color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:u,iconNode:d}=t,h=c(t,ug);return(0,e.createElement)("svg",s(s(s({ref:n},lg),{},{width:o,height:o,stroke:r,strokeWidth:a?24*Number(i)/Number(o):i,className:cg("lucide",l)},!u&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"}),h),[...d.map(t=>{let[n,r]=t;return(0,e.createElement)(n,r)}),...Array.isArray(u)?u:[u]])}),hg=["className"],fg=(t,n)=>{const r=(0,e.forwardRef)((r,o)=>{let{className:i}=r,a=c(r,hg);return(0,e.createElement)(dg,s({ref:o,iconNode:n,className:cg("lucide-".concat((l=sg(t),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(t),i)},a));var l});return r.displayName=sg(t),r},pg=fg("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]),gg=fg("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),mg=fg("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),yg=fg("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),vg=fg("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);window.testFirebaseAuth=async()=>{try{if(console.log("Testing Firebase Auth connection..."),console.log("Auth instance:",ng),console.log("Auth config:",ng.config),!ng)throw new Error("Firebase Auth not initialized");return console.log("\u2705 Firebase Auth is properly configured"),!0}catch(e){return console.error("\u274c Firebase Auth test failed:",e),!1}},window.createTestUser=async()=>{try{const e="test".concat(Date.now(),"@prabastore.com"),t="test123456";console.log("Creating test user:",e);const n=await br(ng,e,t);return console.log("\u2705 Test user created successfully:",n.user.email),await n.user.delete(),console.log("\u2705 Test user cleaned up"),!0}catch(e){return console.error("\u274c Test user creation failed:",e),!1}};const wg=()=>{const[t,n]=(0,e.useState)(!0),[r,o]=(0,e.useState)(""),[i,a]=(0,e.useState)(""),[s,c]=(0,e.useState)(!1),[l,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)("");return(0,rg.jsx)("div",{className:"login-container",children:(0,rg.jsxs)("div",{className:"login-card",children:[(0,rg.jsxs)("div",{className:"login-header",children:[(0,rg.jsx)(pg,{size:40,className:"store-icon"}),(0,rg.jsx)("h1",{children:"Praba Store"}),(0,rg.jsx)("p",{children:"Supermarket Billing System"})]}),(0,rg.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),u(!0),h(""),!r||!i)return h("Please fill in all fields"),void u(!1);if(i.length<6)return h("Password must be at least 6 characters"),void u(!1);try{if(console.log("Attempting authentication...",{isLogin:t,email:r}),t){const e=await _r(ng,r,i);console.log("\u2705 Login successful:",e.user.email),setTimeout(()=>{console.log("\ud83d\udd04 Authentication state should be updated")},100)}else{const e=await br(ng,r,i);console.log("\u2705 Account created:",e.user.email)}}catch(d){console.error("\u274c Authentication error:",d);let t=d.message;switch(d.code){case"auth/configuration-not-found":t="Authentication service not configured. Please contact support.";break;case"auth/email-already-in-use":t="An account with this email already exists. Try signing in instead.";break;case"auth/weak-password":t="Password is too weak. Please use at least 6 characters.";break;case"auth/user-not-found":t="No account found with this email. Try creating an account.";break;case"auth/wrong-password":t="Incorrect password. Please try again.";break;case"auth/invalid-email":t="Please enter a valid email address.";break;case"auth/network-request-failed":t="Network error. Please check your internet connection.";break;default:t="Authentication failed: ".concat(d.message)}h(t)}finally{u(!1)}},className:"login-form",children:[(0,rg.jsx)("h2",{children:t?"Sign In":"Create Account"}),d&&(0,rg.jsx)("div",{className:"error-message",children:d}),(0,rg.jsxs)("div",{className:"input-group",children:[(0,rg.jsx)(gg,{size:20,className:"input-icon"}),(0,rg.jsx)("input",{type:"email",placeholder:"Email address",value:r,onChange:e=>o(e.target.value),required:!0})]}),(0,rg.jsxs)("div",{className:"input-group",children:[(0,rg.jsx)(mg,{size:20,className:"input-icon"}),(0,rg.jsx)("input",{type:s?"text":"password",placeholder:"Password",value:i,onChange:e=>a(e.target.value),required:!0}),(0,rg.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>c(!s),children:s?(0,rg.jsx)(yg,{size:20}):(0,rg.jsx)(vg,{size:20})})]}),(0,rg.jsx)("button",{type:"submit",className:"login-btn",disabled:l,children:l?"Processing...":t?"Sign In":"Create Account"}),(0,rg.jsx)("button",{type:"button",className:"demo-btn",onClick:async()=>{u(!0),h("");try{await _r(ng,"prakashn1234@gmail.com","admin123")}catch(d){try{await _r(ng,"demo@mystore.com","demo123")}catch(e){h("Demo login failed. Please use manual login.")}}finally{u(!1)}},disabled:l,children:"Try Demo Login"}),(0,rg.jsxs)("p",{className:"switch-mode",children:[t?"Don't have an account? ":"Already have an account? ",(0,rg.jsx)("button",{type:"button",className:"link-btn",onClick:()=>n(!t),children:t?"Sign Up":"Sign In"})]})]}),(0,rg.jsxs)("div",{className:"demo-credentials",children:[(0,rg.jsx)("h4",{children:"Demo Credentials:"}),(0,rg.jsx)("p",{children:"Email: demo@prabastore.com"}),(0,rg.jsx)("p",{children:"Password: demo123"})]})]})})},bg=fg("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),_g=fg("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),Cg=fg("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),Eg=fg("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Sg=fg("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Ag=fg("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),Ig=fg("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),xg=fg("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ng=fg("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Tg=fg("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),kg="super_admin",Og="admin",Rg="cashier",Pg={[kg]:["view_dashboard","manage_users","manage_stores","system_settings"],[Og]:["view_dashboard","manage_inventory","view_inventory","view_reports","manage_barcodes","view_activity","export_data","manage_store_users","store_settings"],[Rg]:["view_dashboard","manage_billing","view_inventory"]},jg={"nprakash315349@gmail.com":{role:kg,storeId:null,storeName:"Company Admin"},"draupathiitsolutions@gmail.com":{role:kg,storeId:null,storeName:"Company Admin"},"ututhay@gmail.com":{role:kg,storeId:null,storeName:"Company Admin"},"admin@mystore.com":{role:Og,storeId:"store_001",storeName:"ABC"},"manager@mystore.com":{role:Og,storeId:"store_001",storeName:"ABC"},"admin@branch1.com":{role:Og,storeId:"store_002",storeName:"XYZ Store"},"manager@branch1.com":{role:Og,storeId:"store_002",storeName:"XYZ Store"},"admin@branch2.com":{role:Og,storeId:"store_003",storeName:"PQR Store"},"manager@branch2.com":{role:Og,storeId:"store_003",storeName:"PQR Store"},"cashier@mystore.com":{role:Rg,storeId:"store_001",storeName:"ABC"},"cashier1@mystore.com":{role:Rg,storeId:"store_001",storeName:"ABC"},"cashier@xyzstore.com":{role:Rg,storeId:"store_002",storeName:"XYZ Store"},"cashier1@xyzstore.com":{role:Rg,storeId:"store_002",storeName:"XYZ Store"},"cashier@pqrstore.com":{role:Rg,storeId:"store_003",storeName:"PQR Store"},"cashier1@pqrstore.com":{role:Rg,storeId:"store_003",storeName:"PQR Store"}},Dg=e=>{if(!e)return null;const t=jg[e.toLowerCase()];return t?t.role:null},Mg=e=>{if(!e)return null;const t=jg[e.toLowerCase()];return t?t.storeId:null},Lg=e=>{if(!e)return null;const t=jg[e.toLowerCase()];return t?t.storeName:null},Bg=e=>{if(!e)return null;const t=jg[e.toLowerCase()];return t?{email:e.toLowerCase(),role:t.role,storeId:t.storeId,storeName:t.storeName,permissions:Pg[t.role]||[],isSuperAdmin:t.role===kg,displayName:Ug(t.role)}:null},Fg=e=>{const t=Dg(e);return t&&Pg[t]||[]},Ug=e=>({[kg]:"Super Administrator",[Og]:"Administrator",[Rg]:"Cashier"}[e]||"Unknown Role"),Vg=e=>{let{activeView:t,setActiveView:n,userEmail:r}=e;const{logout:o}=ig(),i=(e=>{const t=Fg(e),n=Bg(e);return[{id:"dashboard",label:"Dashboard",permission:"view_dashboard",icon:"Home"},{id:"billing",label:"Billing",permission:"manage_billing",icon:"CreditCard"},{id:"inventory",label:"Inventory",permission:"view_inventory",icon:"Package"},{id:"stores",label:"Stores",permission:"manage_stores",icon:"Store",superAdminOnly:!0},{id:"users",label:"Users",permission:"manage_users",icon:"Users",superAdminOnly:!0},{id:"reports",label:"Reports",permission:"view_reports",icon:"BarChart3"},{id:"barcode",label:"Barcodes",permission:"manage_barcodes",icon:"QrCode"},{id:"activity",label:"Activity",permission:"view_activity",icon:"Activity"},{id:"lowstock",label:"Low Stock",permission:"view_inventory",icon:"AlertTriangle"},{id:"settings",label:"Settings",permission:["store_settings"],icon:"Settings",storeAdminOnly:!0}].filter(e=>!!(Array.isArray(e.permission)?e.permission:[e.permission]).some(e=>t.includes(e))&&!(e.superAdminOnly&&(null===n||void 0===n||!n.isSuperAdmin))&&(!e.storeAdminOnly||null===n||void 0===n||!n.isSuperAdmin))})(r),a=Dg(r),s=Ug(a),c=Bg(r),l={Home:bg,CreditCard:_g,Package:Cg,Store:pg,Users:Eg,BarChart3:Sg,QrCode:Ag,Activity:Ig,AlertTriangle:xg,Settings:Ng};return(0,rg.jsxs)("div",{className:"sidebar",children:[(0,rg.jsxs)("div",{className:"sidebar-header",children:[(0,rg.jsxs)("div",{className:"logo",children:[(0,rg.jsx)(pg,{size:24}),(0,rg.jsx)("span",{children:"My Store"})]}),(0,rg.jsxs)("div",{className:"user-role-badge",children:[(0,rg.jsx)("span",{className:"role-indicator ".concat(a),children:s}),(0,rg.jsx)("span",{className:"user-name",children:r?r.split("@")[0]:"user"}),(null===c||void 0===c?void 0:c.storeName)&&"Company Admin"!==c.storeName&&(0,rg.jsx)("span",{className:"store-name",children:c.storeName})]})]}),(0,rg.jsx)("nav",{className:"sidebar-nav",children:i.map(e=>{const r=l[e.icon]||Cg;return(0,rg.jsxs)("button",{className:"nav-item ".concat(t===e.id?"active":""),onClick:()=>n(e.id),title:e.label,children:[(0,rg.jsx)(r,{size:20}),(0,rg.jsx)("span",{children:e.label})]},e.id)})}),(0,rg.jsx)("div",{className:"sidebar-footer",children:(0,rg.jsxs)("button",{className:"nav-item logout",onClick:async()=>{try{await o()}catch(e){console.error("Failed to logout:",e)}},children:[(0,rg.jsx)(Tg,{size:20}),(0,rg.jsx)("span",{children:"Logout"})]})})]})},zg=fg("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),Hg=fg("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Gg=fg("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Wg=async e=>{try{const t=Lf(tg,"inventory");if(e.code){const n=Bf(t,e.code);return await qp(n,s(s({},e),{},{id:e.code,createdAt:Jp(),updatedAt:Jp()})),e.code}return(await Yp(t,s(s({},e),{},{createdAt:Jp(),updatedAt:Jp()}))).id}catch(t){throw console.error("Error adding product:",t),t}},qg=async(e,t)=>{try{const n=Bf(tg,"inventory",e);await Xp(n,s(s({},t),{},{updatedAt:Jp()}))}catch(n){throw console.error("Error updating product:",n),n}},Xg=async e=>{try{const t=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";try{const t=Bf(tg,"counters","bills_".concat(e)),n=await Hp(t);let r=1;n.exists()?(r=(n.data().count||0)+1,await Xp(t,{count:r,lastUpdated:Jp()})):await qp(t,{count:r,createdAt:Jp(),lastUpdated:Jp(),storeId:e});const o="BILLNO".concat(r.toString().padStart(4,"0"));return console.log("Generated bill number: ".concat(o," for store: ").concat(e)),o}catch(t){console.error("Error generating bill number:",t);const e="BILLNO".concat(Date.now().toString().slice(-6));return console.warn("Using fallback bill number: ".concat(e)),e}}(e.storeId||"default"),n=Bf(Lf(tg,"sales"),t);return await qp(n,s(s({},e),{},{billNumber:t,id:t,timestamp:Jp(),date:(new Date).toISOString().split("T")[0]})),console.log("Sale saved with bill number: ".concat(t)),t}catch(t){throw console.error("Error saving sale:",t),t}},Kg=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;try{const t=Ap(Lf(tg,"sales"),kp("timestamp","desc"),Rp(e));return(await Wp(t)).docs.map(e=>s({id:e.id},e.data()))}catch(t){throw console.error("Error fetching sales:",t),t}},Yg=async()=>{try{console.log("\ud83d\udd0d Fetching stores from Firestore...");const e=Lf(tg,"stores"),t=(await Wp(e)).docs.map(e=>s({id:e.id},e.data()));return console.log("\u2705 Stores fetched successfully:",t.length),t}catch(e){throw console.error("\u274c Error fetching stores:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),e}},Qg=async e=>{try{console.log("\u2795 Adding store to Firestore:",e);const t=Lf(tg,"stores"),n=await Yp(t,s(s({},e),{},{createdAt:Jp(),updatedAt:Jp()}));return console.log("\u2705 Store added successfully with ID:",n.id),n.id}catch(t){throw console.error("\u274c Error adding store:",t),console.error("Error code:",t.code),console.error("Error message:",t.message),"permission-denied"===t.code?new Error("Permission denied. Please check Firestore security rules."):"unavailable"===t.code?new Error("Firestore is currently unavailable. Please try again later."):new Error("Failed to add store: ".concat(t.message))}},Zg=async(e,t)=>{try{console.log("\ud83d\udcdd Updating store:",e,t);const n=Bf(tg,"stores",e);await Xp(n,s(s({},t),{},{updatedAt:Jp()})),console.log("\u2705 Store updated successfully")}catch(n){throw console.error("\u274c Error updating store:",n),console.error("Error code:",n.code),console.error("Error message:",n.message),"permission-denied"===n.code?new Error("Permission denied. Please check Firestore security rules."):new Error("Failed to update store: ".concat(n.message))}},$g=(e,t)=>{try{console.log("\ud83d\udc42 Setting up stores listener...");return Qp(Lf(tg,"stores"),t=>{const n=t.docs.map(e=>s({id:e.id},e.data()));console.log("\ud83d\udce1 Stores updated:",n.length),e(n)},e=>{console.error("\u274c Stores subscription error:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),t&&t(e)})}catch(n){console.error("\u274c Error setting up stores listener:",n),t&&t(n)}},Jg=async e=>{try{console.log("\u2795 Adding user to Firestore:",s(s({},e),{},{password:"[HIDDEN]"}));const t=Lf(tg,"users"),n=await Yp(t,s(s({},e),{},{createdAt:Jp(),updatedAt:Jp(),joinDate:(new Date).toISOString().split("T")[0],lastLogin:"Never"}));return console.log("\u2705 User added successfully with ID:",n.id),n.id}catch(t){throw console.error("\u274c Error adding user:",t),console.error("Error code:",t.code),console.error("Error message:",t.message),"permission-denied"===t.code?new Error("Permission denied. Please check Firestore security rules."):"unavailable"===t.code?new Error("Firestore is currently unavailable. Please try again later."):new Error("Failed to add user: ".concat(t.message))}},em=async(e,t)=>{try{console.log("\ud83d\udcdd Updating user:",e,s(s({},t),{},{password:"[HIDDEN]"}));const n=Bf(tg,"users",e);await Xp(n,s(s({},t),{},{updatedAt:Jp()})),console.log("\u2705 User updated successfully")}catch(n){throw console.error("\u274c Error updating user:",n),console.error("Error code:",n.code),console.error("Error message:",n.message),"permission-denied"===n.code?new Error("Permission denied. Please check Firestore security rules."):new Error("Failed to update user: ".concat(n.message))}},tm=async e=>{try{console.log("\ud83d\uddd1\ufe0f Deleting user:",e);const t=Bf(tg,"users",e);await Kp(t),console.log("\u2705 User deleted successfully")}catch(t){throw console.error("\u274c Error deleting user:",t),console.error("Error code:",t.code),console.error("Error message:",t.message),"permission-denied"===t.code?new Error("Permission denied. Please check Firestore security rules."):new Error("Failed to delete user: ".concat(t.message))}},nm=(e,t)=>{try{console.log("\ud83d\udc42 Setting up users listener...");return Qp(Lf(tg,"users"),t=>{const n=t.docs.map(e=>s({id:e.id},e.data()));console.log("\ud83d\udce1 Users updated:",n.length),e(n)},e=>{console.error("\u274c Users subscription error:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),t&&t(e)})}catch(n){console.error("\u274c Error setting up users listener:",n),t&&t(n)}},rm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;try{const o=Lf(tg,"sales");let i;return i=e?Ap(o,xp("storeId","==",e),kp("timestamp","desc"),Rp(t)):Ap(o,kp("timestamp","desc"),Rp(t)),Qp(i,e=>{const t=e.docs.map(e=>s({id:e.id},e.data()));console.log("\ud83d\udcca Sales updated via subscription:",t.length),n(t)},e=>{console.error("Error in sales subscription:",e),r&&r(e)})}catch(o){return console.error("Error setting up sales subscription:",o),r&&r(o),()=>{}}},om="super_admin",im="admin",am="cashier",sm={[om]:["view_dashboard","manage_users","manage_stores","system_settings"],[im]:["view_dashboard","manage_inventory","view_inventory","view_reports","manage_barcodes","view_activity","export_data","manage_store_users"],[am]:["view_dashboard","manage_billing","view_inventory"]};let cm=new Map,lm=0;const um=3e5,dm=async e=>{if(!e)return null;try{const t=Date.now();if(cm.has(e.toLowerCase())&&t<lm)return cm.get(e.toLowerCase());const n=Ap(Lf(tg,"authorized_users"),xp("email","==",e.toLowerCase())),r=await Wp(n);if(r.empty){const n={"nprakash315349@gmail.com":"Prakash N","draupathiitsolutions@gmail.com":"Draupathi IT Solutions","ututhay@gmail.com":"Ututhay"};if(n[e.toLowerCase()]){const r={email:e.toLowerCase(),role:om,storeId:null,storeName:"Company Admin",permissions:sm[om],isSuperAdmin:!0,displayName:"Super Administrator",isActive:!0,name:n[e.toLowerCase()],phone:"",createdAt:new Date,updatedAt:new Date};return cm.set(e.toLowerCase(),r),lm=t+um,r}return null}const o=r.docs[0].data(),i={id:r.docs[0].id,email:o.email,role:o.role,storeId:o.storeId,storeName:o.storeName,permissions:sm[o.role]||[],isSuperAdmin:o.role===om,displayName:mm(o.role),isActive:!1!==o.isActive,name:o.name||e.split("@")[0],phone:o.phone||"",createdAt:o.createdAt,updatedAt:o.updatedAt};return cm.set(e.toLowerCase(),i),lm=t+um,i}catch(t){return console.error("Error fetching user info from database:",t),null}},hm=async e=>{try{const t=Lf(tg,"authorized_users"),n=await Yp(t,s(s({},e),{},{email:e.email.toLowerCase(),createdAt:new Date,updatedAt:new Date,isActive:!0}));return gm(),n.id}catch(t){throw console.error("Error adding user to database:",t),t}},fm=async(e,t)=>{try{const n=Bf(tg,"authorized_users",e);await Xp(n,s(s({},t),{},{updatedAt:new Date})),gm()}catch(n){throw console.error("Error updating user in database:",n),n}},pm=async()=>{try{const e=Lf(tg,"authorized_users");return(await Wp(e)).docs.map(e=>s({id:e.id},e.data()))}catch(e){return console.error("Error fetching all users from database:",e),[]}},gm=()=>{cm.clear(),lm=0},mm=e=>({[om]:"Super Administrator",[im]:"Administrator",[am]:"Cashier"}[e]||"Unknown Role"),ym=t=>{let{setActiveView:n}=t;const{currentUser:r,logout:o}=ig(),[i,a]=(0,e.useState)([]),[s,c]=(0,e.useState)([]),[l,u]=(0,e.useState)(!0),[d,h]=(0,e.useState)(null),[f,p]=(0,e.useState)({totalStores:0,totalUsers:0,activeStores:0,activeUsers:0});(0,e.useEffect)(()=>{(async()=>{if(null!==r&&void 0!==r&&r.email){const e=await dm(r.email);h(e)}})()},[r]),(0,e.useEffect)(()=>{const e=$g(e=>{a(e),u(!1)},e=>{console.error("Error loading stores for dashboard:",e),u(!1)}),t=nm(e=>{c(e)},e=>{console.error("Error loading users for dashboard:",e)});return()=>{e&&e(),t&&t()}},[]);const g=(0,e.useCallback)(()=>{const e=i.filter(e=>e.status&&"active"===e.status.toLowerCase()).length,t=s.filter(e=>e.status&&"active"===e.status.toLowerCase()).length,n={totalStores:i.length,totalUsers:s.length,activeStores:e,activeUsers:t};p(n)},[i,s]);(0,e.useEffect)(()=>{g()},[i,s,g]);const m=async e=>{switch(e){case"store":case"add-store":n("stores");break;case"user":case"add-user":n("users");break;case"settings":n("settings");break;default:console.log("Unknown action:",e)}},y=[{id:"add-store",label:"Add Store",icon:zg,color:"blue"},{id:"add-user",label:"Add User",icon:Hg,color:"purple"},{id:"store",label:"Manage Stores",icon:pg,color:"green"},{id:"user",label:"Manage Users",icon:Eg,color:"orange"}],v=()=>null!==d&&void 0!==d&&d.name?d.name:null!==r&&void 0!==r&&r.email?r.email.split("@")[0]:"superadmin";return l?(0,rg.jsx)("div",{className:"dashboard",children:(0,rg.jsxs)("div",{className:"loading-state",children:[(0,rg.jsx)(Gg,{size:48}),(0,rg.jsx)("p",{children:"Loading Super Admin dashboard..."})]})}):(0,rg.jsxs)("div",{className:"dashboard super-admin-dashboard",children:[(0,rg.jsxs)("div",{className:"dashboard-header",children:[(0,rg.jsxs)("div",{className:"welcome-section",children:[(0,rg.jsxs)("div",{className:"role-badge super-admin",children:[(0,rg.jsx)(Gg,{size:16}),(0,rg.jsx)("span",{children:d?mm(d.role):"Loading..."})]}),(0,rg.jsx)("h1",{children:"Super Admin Dashboard"}),(0,rg.jsx)("div",{className:"welcome-banner",children:(0,rg.jsxs)("span",{children:["Welcome back, ",v(),"! Manage users and stores across the system."]})})]}),(0,rg.jsxs)("div",{className:"user-profile",children:[(0,rg.jsx)("div",{className:"avatar super-admin",children:v().charAt(0).toUpperCase()}),(0,rg.jsxs)("div",{className:"user-info",children:[(0,rg.jsx)("span",{className:"user-name",children:v()}),(0,rg.jsx)("span",{className:"user-role",children:"Super Administrator"}),(0,rg.jsx)("span",{className:"user-email",children:null===r||void 0===r?void 0:r.email})]}),(0,rg.jsx)("button",{className:"logout-btn",onClick:async()=>{try{await o()}catch(e){console.error("Failed to logout:",e)}},children:"Logout"})]})]}),(0,rg.jsxs)("div",{className:"stats-grid",children:[(0,rg.jsxs)("div",{className:"stat-card stores",children:[(0,rg.jsx)("div",{className:"stat-icon",children:(0,rg.jsx)(pg,{size:24})}),(0,rg.jsxs)("div",{className:"stat-content",children:[(0,rg.jsx)("div",{className:"stat-label",children:"TOTAL STORES"}),(0,rg.jsx)("div",{className:"stat-value",children:f.totalStores})]})]}),(0,rg.jsxs)("div",{className:"stat-card users",children:[(0,rg.jsx)("div",{className:"stat-icon",children:(0,rg.jsx)(Eg,{size:24})}),(0,rg.jsxs)("div",{className:"stat-content",children:[(0,rg.jsx)("div",{className:"stat-label",children:"TOTAL USERS"}),(0,rg.jsx)("div",{className:"stat-value",children:f.totalUsers})]})]}),(0,rg.jsxs)("div",{className:"stat-card stores",children:[(0,rg.jsx)("div",{className:"stat-icon",children:(0,rg.jsx)(zg,{size:24})}),(0,rg.jsxs)("div",{className:"stat-content",children:[(0,rg.jsx)("div",{className:"stat-label",children:"ACTIVE STORES"}),(0,rg.jsx)("div",{className:"stat-value",children:f.activeStores})]})]}),(0,rg.jsxs)("div",{className:"stat-card users",children:[(0,rg.jsx)("div",{className:"stat-icon",children:(0,rg.jsx)(Hg,{size:24})}),(0,rg.jsxs)("div",{className:"stat-content",children:[(0,rg.jsx)("div",{className:"stat-label",children:"ACTIVE USERS"}),(0,rg.jsx)("div",{className:"stat-value",children:f.activeUsers})]})]})]}),(0,rg.jsxs)("div",{className:"dashboard-content",children:[(0,rg.jsxs)("div",{className:"quick-actions",children:[(0,rg.jsx)("h3",{children:"Quick Actions"}),(0,rg.jsx)("div",{className:"actions-grid",children:y.map(e=>{const t=e.icon;return(0,rg.jsxs)("button",{className:"action-card ".concat(e.color),onClick:()=>m(e.id),title:"Navigate to ".concat(e.label),children:[(0,rg.jsx)(t,{size:20}),(0,rg.jsx)("span",{children:e.label})]},e.id)})})]}),(0,rg.jsxs)("div",{className:"admin-tools",children:[(0,rg.jsx)("h3",{children:"System Management"}),(0,rg.jsxs)("div",{className:"admin-tools-grid",children:[(0,rg.jsxs)("button",{className:"admin-tool-card database",onClick:()=>m("store"),children:[(0,rg.jsx)(pg,{size:24}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("h4",{children:"Store Management"}),(0,rg.jsx)("p",{children:"Create and manage stores across the system"})]})]}),(0,rg.jsxs)("button",{className:"admin-tool-card barcode",onClick:()=>m("user"),children:[(0,rg.jsx)(Eg,{size:24}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("h4",{children:"User Management"}),(0,rg.jsx)("p",{children:"Create and manage user accounts and roles"})]})]}),(0,rg.jsxs)("button",{className:"admin-tool-card settings",onClick:()=>n("settings"),children:[(0,rg.jsx)(Ng,{size:24}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("h4",{children:"System Settings"}),(0,rg.jsx)("p",{children:"Configure system-wide settings"})]})]})]})]}),(0,rg.jsxs)("div",{className:"system-overview",children:[(0,rg.jsx)("h3",{children:"System Overview"}),(0,rg.jsxs)("div",{className:"overview-grid",children:[(0,rg.jsxs)("div",{className:"overview-card",children:[(0,rg.jsxs)("div",{className:"overview-header",children:[(0,rg.jsx)(pg,{size:20}),(0,rg.jsx)("span",{children:"Store Network"})]}),(0,rg.jsxs)("div",{className:"overview-content",children:[(0,rg.jsxs)("p",{children:[f.totalStores," stores in the system"]}),(0,rg.jsxs)("p",{children:[f.activeStores," currently active"]}),(0,rg.jsx)("button",{className:"overview-btn",onClick:()=>n("stores"),children:"Manage Stores"})]})]}),(0,rg.jsxs)("div",{className:"overview-card",children:[(0,rg.jsxs)("div",{className:"overview-header",children:[(0,rg.jsx)(Eg,{size:20}),(0,rg.jsx)("span",{children:"User Base"})]}),(0,rg.jsxs)("div",{className:"overview-content",children:[(0,rg.jsxs)("p",{children:[f.totalUsers," users in the system"]}),(0,rg.jsxs)("p",{children:[f.activeUsers," currently active"]}),(0,rg.jsx)("button",{className:"overview-btn",onClick:()=>n("users"),children:"Manage Users"})]})]})]})]})]})]})},vm=fg("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),wm=fg("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),bm=fg("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var _m=n(8970);const Cm=function(e,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(n)return n;const r=Em(e);return"".concat(r).concat(String(1).padStart(3,"0"))},Em=e=>{const t=e.toLowerCase();return t.includes("rice")?"RICE":t.includes("wheat")?"WHEAT":t.includes("flour")?"FLOUR":t.includes("oil")?"OIL":t.includes("ghee")?"GHEE":t.includes("butter")?"BUTTER":t.includes("sugar")?"SUGAR":t.includes("salt")?"SALT":t.includes("milk")?"MILK":t.includes("bread")?"BREAD":t.includes("biscuit")?"BISCUIT":t.includes("tea")?"TEA":t.includes("coffee")?"COFFEE":t.includes("juice")?"JUICE":t.includes("egg")?"EGGS":t.includes("soap")?"SOAP":t.includes("shampoo")?"SHAMPOO":t.includes("toothpaste")?"PASTE":t.includes("detergent")?"DETERGENT":t.includes("cleaner")?"CLEANER":e.substring(0,4).toUpperCase().replace(/[^A-Z]/g,"X")},Sm=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=s(s({},{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"M"}),t);try{return await _m.toDataURL(e,n)}catch(r){return console.error("Error generating QR code:",r),null}},Am=function(e,t,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(r)return r;let o=Cm(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"001",r),i=0;for(;!Im(o,n,t)&&i<100;){const t=Em(e),n=i+1;o="".concat(t).concat(String(n).padStart(3,"0")),i++}return o},Im=(e,t,n)=>!t||0===t.length||!t.some(t=>t.qrcode===e&&t.id!==n),xm=e=>{if(!e)return!1;if(/^[A-Z]{3,10}\d{3}$/.test(e))return!0;return/^ST\d{3}_[A-Z]+_\d{6}$/.test(e)},Nm=e=>{if(!xm(e))return null;const t=e.split("_");return{storeId:t[0].substring(2),category:t[1],sequence:t[2]}},Tm=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"001";const n=e.filter(e=>!e.qrcode);if(0===n.length)return console.log("All items already have QR codes"),{success:!0,updated:0,message:"All items already have QR codes"};console.log("Generating QR codes for ".concat(n.length," items..."));try{const r=n.map(async n=>{const r=Am(n.name,n.id,e,t,n.code);return await qg(n.id,{qrcode:r}),console.log("Generated QR code ".concat(r," for ").concat(n.name)),{id:n.id,name:n.name,qrcode:r}}),o=await Promise.all(r);return{success:!0,updated:o.length,message:"Successfully generated QR codes for ".concat(o.length," items"),results:o}}catch(r){return console.error("Error generating QR codes:",r),{success:!1,updated:0,message:"Failed to generate QR codes: ".concat(r.message),error:r}}},km=e=>{if(!e||"string"!==typeof e)return"PROD";const t=e.trim().toUpperCase(),n=["THE","AND","OR","OF","IN","ON","AT","TO","FOR","WITH","BY"],r=t.split(/[\s\-_]+/).filter(e=>e.length>0&&!n.includes(e));if(0===r.length)return"PROD";let o="";if(1===r.length){const e=r[0].replace(/[^A-Z0-9]/g,"");o=e.substring(0,Math.min(6,Math.max(4,e.length)))}else if(2===r.length){const e=r[0].replace(/[^A-Z0-9]/g,""),t=r[1].replace(/[^A-Z0-9]/g,"");o=e.substring(0,3)+t.substring(0,3)}else o=r.slice(0,3).map(e=>e.replace(/[^A-Z0-9]/g,"").substring(0,2)).join("");return o.length<3&&(o=o.padEnd(3,"X")),o.length>6&&(o=o.substring(0,6)),o},Om=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=km(e),r=t.map(e=>e.id||e.code).filter(e=>e&&e.startsWith(n)).map(e=>{const t=e.match(/(\d+)$/);return t?parseInt(t[1],10):0}).sort((e,t)=>e-t);let o=1;for(const a of r)if(a===o)o++;else if(a>o)break;const i=o.toString().padStart(3,"0");return"".concat(n).concat(i)},Rm=e=>{const t=[],n=[];return e.forEach(e=>{const r=Om(e.name,[...t,...n]),o=s(s({},e),{},{id:e.id||r,code:r});t.push(o),n.push({id:r,code:r})}),t},Pm=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=[],r=km(e);if(n.push("".concat(r,"001")),t>1){const t=e.trim().toUpperCase().split(/[\s\-_]+/).filter(e=>e.length>0);if(t.length>1){const e=t.map(e=>e[0]).join("").substring(0,4);e!==r&&e.length>=3&&n.push("".concat(e.padEnd(4,"X"),"001"));const o=t[t.length-1].substring(0,4);o!==r&&o.length>=3&&n.push("".concat(o.padEnd(4,"X"),"001"))}}for(;n.length<t;){const e=r+(n.length+1).toString().padStart(3,"0");n.push(e)}return n.slice(0,t)};const jm=async()=>{try{console.log("\ud83d\udd04 Starting product code sync...");const e=Lf(tg,"inventory"),t=(await Wp(e)).docs.map(e=>s({id:e.id},e.data()));console.log("\ud83d\udce6 Found ".concat(t.length," products to sync"));let n=0,r=0;for(const o of t){const e=o.code;if(!e){console.warn("\u26a0\ufe0f Product ".concat(o.name," (").concat(o.id,") has no product code, skipping...")),r++;continue}if(o.barcode!==e||o.qrcode!==e){const t=Bf(tg,"inventory",o.id);await Xp(t,{barcode:e,qrcode:e}),console.log("\u2705 Updated ".concat(o.name,": code=").concat(e,", barcode=").concat(e,", qrcode=").concat(e)),n++}else console.log("\u2713 ".concat(o.name," already synced")),r++}return console.log("\n\u2728 Sync complete!"),console.log("   Updated: ".concat(n," products")),console.log("   Skipped: ".concat(r," products")),{success:!0,total:t.length,updated:n,skipped:r,message:"Successfully synced ".concat(n," products")}}catch(e){return console.error("\u274c Error syncing product codes:",e),{success:!1,error:e.message,message:"Failed to sync: ".concat(e.message)}}},Dm=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=e.toLowerCase().trim(),r={rice:"RICE",wheat:"WHEAT",flour:"FLOUR",oil:"OIL",ghee:"GHEE",butter:"BUTTER",sugar:"SUGAR",salt:"SALT",milk:"MILK",bread:"BREAD",biscuit:"BISCUIT",tea:"TEA",coffee:"COFFEE",juice:"JUICE",egg:"EGGS",soap:"SOAP",shampoo:"SHAMPOO",toothpaste:"PASTE",detergent:"DETERGENT",cleaner:"CLEANER"};let o=null;for(const[s,c]of Object.entries(r))if(n.includes(s)){o=c;break}o||(o=e.substring(0,4).toUpperCase().replace(/[^A-Z]/g,"X"));let i=1,a="".concat(o).concat(String(i).padStart(3,"0"));for(;t.includes(a)&&i<999;)i++,a="".concat(o).concat(String(i).padStart(3,"0"));return a},Mm=async()=>{try{console.log("\ud83d\udd04 Auto-generating missing product codes...");const e=Lf(tg,"inventory"),t=(await Wp(e)).docs.map(e=>s({id:e.id},e.data())),n=t.filter(e=>e.code).map(e=>e.code);let r=0;for(const o of t)if(!o.code){const e=Dm(o.name,n);n.push(e);const t=Bf(tg,"inventory",o.id);await Xp(t,{code:e,barcode:e,qrcode:e}),console.log("\u2705 Generated code for ".concat(o.name,": ").concat(e)),r++}return console.log("\n\u2728 Auto-generation complete! Generated ".concat(r," codes")),{success:!0,generated:r,message:"Generated codes for ".concat(r," products")}}catch(e){return console.error("\u274c Error auto-generating codes:",e),{success:!1,error:e.message}}},Lm=t=>{let{inventory:n,setActiveView:r}=t;const{currentUser:o,logout:i}=ig(),[a,c]=(0,e.useState)([]),[l,u]=(0,e.useState)([]),[d,h]=(0,e.useState)(!0),[f,p]=(0,e.useState)({totalProducts:0,totalSales:0,totalBills:0,lowStockItems:0,productsWithQRCodes:0,productsWithoutQRCodes:0,productsWithCodes:0,productsWithoutCodes:0,totalCashiers:0,activeCashiers:0,inactiveCashiers:0}),g=Bg(null===o||void 0===o?void 0:o.email),m=Mg(null===o||void 0===o?void 0:o.email),y=(0,e.useCallback)(async()=>{try{h(!1)}catch(e){console.error("Error loading dashboard data:",e),h(!1)}},[]);(0,e.useEffect)(()=>{if(!m)return;console.log("\ud83d\udcca Admin: Setting up sales subscription for store:",m);const e=rm(m,50,e=>{console.log("\ud83d\udcb0 Admin: Sales data received:",e.length,"sales"),c(e)},e=>{console.error("Admin: Error in sales subscription:",e)});return()=>{console.log("\ud83d\udd0c Admin: Unsubscribing from sales"),e()}},[m]);const v=(0,e.useCallback)(async()=>{try{const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=Lf(tg,"stores");let r;if(e)r=n;else{if(!t)return[];r=Ap(n,xp("id","==",t))}return(await Wp(r)).docs.map(e=>s({id:e.id},e.data()))}catch(n){throw console.error("Error fetching accessible stores:",n),n}}(!1,m);console.log("Store data loaded:",e)}catch(e){console.error("Error loading store data:",e)}},[m]);(0,e.useEffect)(()=>{const e=nm(e=>{const t=e.filter(e=>e.storeId===m||e.email&&e.email.includes("@mystore.com"));u(t)},e=>{console.error("Error loading store users:",e)});return()=>e()},[m]),(0,e.useEffect)(()=>{y(),v()},[y,v]);const w=(0,e.useCallback)(()=>{const e=n.filter(e=>!m||e.storeId===m);console.log("\ud83d\udcca Calculating stats from sales:",a.length,"sales"),console.log("\ud83d\udcb0 Sales data sample:",a.slice(0,2));const t=a.reduce((e,t)=>{const n=t.total||0;return console.log("Adding sale total:",n),e+n},0);console.log("\ud83d\udcb5 Total sales calculated:",t);const r=e.filter(e=>e.qrcode||e.barcode).length,o=e.length-r,i=e.filter(e=>e.code).length,s=e.length-i,c=e.filter(e=>e.stock<10).length;console.log("\ud83d\udc65 Users data for stats calculation:",l),console.log("\ud83c\udfea Current store ID:",m);const u=l.filter(e=>{const t=e.role?e.role.toLowerCase():"",n=e.email?e.email.toLowerCase():"";return!("cashier"!==t&&!t.includes("cashier"))||(!("user"!==t||!n.includes("cashier"))||(!(t||!n.includes("cashier"))||!("user"!==t&&t||n.includes("admin")||n.includes("manager")||!n.includes("@mystore.com"))))});console.log("\ud83d\udcb0 Filtered cashiers:",u);const d=u.filter(e=>"active"===(e.status?e.status.toLowerCase():"active")).length,h=u.length-d;console.log("\ud83d\udcca Cashier stats:",{total:u.length,active:d,inactive:h});const f={totalProducts:e.length,totalSales:t,totalBills:a.length,lowStockItems:c,productsWithQRCodes:r,productsWithoutQRCodes:o,productsWithCodes:i,productsWithoutCodes:s,totalCashiers:u.length,activeCashiers:d,inactiveCashiers:h};p(f)},[n,a,l,m]);(0,e.useEffect)(()=>{w()},[n,a,l,w]);const b=async e=>{switch(e){case"product":r("inventory");break;case"barcode":r("barcode");break;case"reports":r("reports");break;case"activity":r("activity");break;case"lowstock":r("lowstock");break;case"users":r("store-users");break;case"settings":r("settings");break;case"generate-codes":await S();break;case"generate-qrcodes":await E();break;case"sync-codes":await _();break;case"auto-generate":await C();break;default:console.log("Unknown action:",e)}},_=async()=>{if(window.confirm("Sync all products to have matching code, barcode, and QR code?\n\nThis will set barcode = code and qrcode = code for all products."))try{h(!0);const e=await jm();e.success?alert("Success! Synced ".concat(e.updated," products.\n\nAll products now have matching codes.")):alert("Error: ".concat(e.message))}catch(e){console.error("Error syncing codes:",e),alert("Failed to sync codes. Please try again.")}finally{h(!1)}},C=async()=>{const e=n.filter(e=>!e.code);if(0===e.length)return void alert("All products already have codes!");if(window.confirm("Auto-generate codes for ".concat(e.length," products?\n\nThis will create product codes, barcodes, and QR codes automatically.")))try{h(!0);const e=await Mm();e.success?alert("Success! Generated codes for ".concat(e.generated," products.")):alert("Error: ".concat(e.message))}catch(t){console.error("Error auto-generating codes:",t),alert("Failed to auto-generate codes. Please try again.")}finally{h(!1)}},E=async()=>{const e=n.filter(e=>!e.qrcode);if(0===e.length)return void alert("All products already have QR codes!");if(window.confirm("Generate QR codes for ".concat(e.length," products without QR codes?")))try{h(!0);const e=await Tm(n,m||"001");e.success?alert("Success! Generated QR codes for ".concat(e.updated," products.")):alert("Error: ".concat(e.message))}catch(t){console.error("Error generating QR codes:",t),alert("Failed to generate QR codes. Please try again.")}finally{h(!1)}},S=async()=>{const e=n.filter(e=>!e.code);if(0===e.length)return void alert("All products already have product codes!");if(window.confirm("Generate product codes for ".concat(e.length," products without codes?")))try{h(!0);const e=await(async e=>{const t=e.filter(e=>!e.code);if(0===t.length)return console.log("All items already have product codes"),{success:!0,updated:0,message:"All items already have product codes"};console.log("Generating product codes for ".concat(t.length," items..."));try{const n=t.map(async t=>{const n=Om(t.name,e);return await qg(t.id,{code:n}),console.log("Generated code ".concat(n," for ").concat(t.name)),{id:t.id,name:t.name,code:n}}),r=await Promise.all(n);return{success:!0,updated:r.length,message:"Successfully generated product codes for ".concat(r.length," items"),results:r}}catch(n){return console.error("Error generating product codes:",n),{success:!1,updated:0,message:"Failed to generate product codes: ".concat(n.message),error:n}}})(n);e.success?alert("Success! Generated product codes for ".concat(e.updated," products.")):alert("Error: ".concat(e.message))}catch(t){console.error("Error generating product codes:",t),alert("Failed to generate product codes. Please try again.")}finally{h(!1)}},A=[{id:"product",label:"Add Product",icon:vm,color:"green"},{id:"reports",label:"Sales Reports",icon:Sg,color:"indigo"},{id:"barcode",label:"Manage Barcodes",icon:Ag,color:"teal"},{id:"users",label:"Manage Users",icon:wm,color:"purple"},{id:"activity",label:"View Activity",icon:Ig,color:"blue"},{id:"lowstock",label:"Low Stock",icon:xg,color:"orange"},{id:"settings",label:"Store Settings",icon:Ng,color:"gray"}],I=n.filter(e=>e.stock<10),x=Dg(null===o||void 0===o?void 0:o.email),N=()=>null!==o&&void 0!==o&&o.email?o.email.split("@")[0]:"admin";return d?(0,rg.jsx)("div",{className:"dashboard",children:(0,rg.jsxs)("div",{className:"loading-state",children:[(0,rg.jsx)(Cg,{size:48}),(0,rg.jsx)("p",{children:"Loading Admin dashboard..."})]})}):(0,rg.jsxs)("div",{className:"dashboard admin-dashboard",children:[(0,rg.jsx)("div",{className:"store-context-header",children:(0,rg.jsxs)("div",{className:"store-info-card",children:[(0,rg.jsx)("div",{className:"store-icon",children:(0,rg.jsx)(Cg,{size:24})}),(0,rg.jsxs)("div",{className:"store-details",children:[(0,rg.jsx)("h2",{children:"Currently Managing"}),(0,rg.jsx)("h1",{children:(null===g||void 0===g?void 0:g.storeName)||"ABC"}),(0,rg.jsxs)("div",{className:"store-meta",children:[(0,rg.jsxs)("span",{className:"store-id",children:["Store ID: ",m||"store_001"]}),(0,rg.jsx)("span",{className:"admin-role",children:"Administrator Access"})]})]}),(0,rg.jsxs)("div",{className:"store-status",children:[(0,rg.jsx)("div",{className:"status-indicator active"}),(0,rg.jsx)("span",{children:"Active"})]})]})}),(0,rg.jsxs)("div",{className:"dashboard-header",children:[(0,rg.jsxs)("div",{className:"welcome-section",children:[(0,rg.jsxs)("div",{className:"role-badge admin",children:[(0,rg.jsx)(wm,{size:16}),(0,rg.jsx)("span",{children:Ug(x)})]}),(0,rg.jsx)("h1",{children:"Admin Dashboard"}),(0,rg.jsx)("div",{className:"welcome-banner",children:(0,rg.jsxs)("span",{children:["Welcome back, ",N(),"! Managing ",(null===g||void 0===g?void 0:g.storeName)||"ABC"," efficiently."]})})]}),(0,rg.jsxs)("div",{className:"user-profile",children:[(0,rg.jsx)("div",{className:"avatar admin",children:N().charAt(0).toUpperCase()}),(0,rg.jsxs)("div",{className:"user-info",children:[(0,rg.jsx)("span",{className:"user-name",children:N()}),(0,rg.jsx)("span",{className:"user-role",children:"Administrator"}),(0,rg.jsx)("span",{className:"user-email",children:null===o||void 0===o?void 0:o.email}),(0,rg.jsx)("span",{className:"user-store",children:(null===g||void 0===g?void 0:g.storeName)||"ABC"})]}),(0,rg.jsx)("button",{className:"logout-btn",onClick:async()=>{try{await i()}catch(e){console.error("Failed to logout:",e)}},children:"Logout"})]})]}),(0,rg.jsxs)("div",{className:"stats-grid",children:[(0,rg.jsxs)("div",{className:"stat-card products",children:[(0,rg.jsx)("div",{className:"stat-icon",children:(0,rg.jsx)(Cg,{size:24})}),(0,rg.jsxs)("div",{className:"stat-content",children:[(0,rg.jsx)("div",{className:"stat-label",children:"TOTAL PRODUCTS"}),(0,rg.jsx)("div",{className:"stat-value",children:f.totalProducts})]})]}),(0,rg.jsxs)("div",{className:"stat-card sales",children:[(0,rg.jsx)("div",{className:"stat-icon",children:(0,rg.jsx)(bm,{size:24})}),(0,rg.jsxs)("div",{className:"stat-content",children:[(0,rg.jsx)("div",{className:"stat-label",children:"TOTAL SALES"}),(0,rg.jsxs)("div",{className:"stat-value",children:["\u20b9",f.totalSales.toFixed(0)]})]})]}),(0,rg.jsxs)("div",{className:"stat-card bills",children:[(0,rg.jsx)("div",{className:"stat-icon",children:(0,rg.jsx)(_g,{size:24})}),(0,rg.jsxs)("div",{className:"stat-content",children:[(0,rg.jsx)("div",{className:"stat-label",children:"TOTAL BILLS"}),(0,rg.jsx)("div",{className:"stat-value",children:f.totalBills})]})]}),(0,rg.jsxs)("div",{className:"stat-card warning",children:[(0,rg.jsx)("div",{className:"stat-icon",children:(0,rg.jsx)(xg,{size:24})}),(0,rg.jsxs)("div",{className:"stat-content",children:[(0,rg.jsx)("div",{className:"stat-label",children:"LOW STOCK ITEMS"}),(0,rg.jsx)("div",{className:"stat-value",children:f.lowStockItems})]})]}),(0,rg.jsxs)("div",{className:"stat-card users",children:[(0,rg.jsx)("div",{className:"stat-icon",children:(0,rg.jsx)(Eg,{size:24})}),(0,rg.jsxs)("div",{className:"stat-content",children:[(0,rg.jsx)("div",{className:"stat-label",children:"TOTAL CASHIERS"}),(0,rg.jsx)("div",{className:"stat-value",children:f.totalCashiers}),(0,rg.jsxs)("div",{className:"stat-detail",children:[f.activeCashiers," active, ",f.inactiveCashiers," inactive"]})]})]}),(0,rg.jsxs)("div",{className:"stat-card codes",children:[(0,rg.jsx)("div",{className:"stat-icon",children:(0,rg.jsx)(Cg,{size:24})}),(0,rg.jsxs)("div",{className:"stat-content",children:[(0,rg.jsx)("div",{className:"stat-label",children:"WITH CODES"}),(0,rg.jsxs)("div",{className:"stat-value",children:[f.productsWithCodes,"/",f.totalProducts]})]})]})]}),(0,rg.jsxs)("div",{className:"dashboard-content",children:[(0,rg.jsxs)("div",{className:"quick-actions",children:[(0,rg.jsx)("h3",{children:"Quick Actions"}),(0,rg.jsx)("div",{className:"actions-grid",children:A.map(e=>{const t=e.icon;return(0,rg.jsxs)("button",{className:"action-card ".concat(e.color),onClick:()=>b(e.id),title:"Navigate to ".concat(e.label),children:[(0,rg.jsx)(t,{size:20}),(0,rg.jsx)("span",{children:e.label})]},e.id)})})]}),I.length>0&&(0,rg.jsxs)("div",{className:"low-stock-alert",children:[(0,rg.jsxs)("div",{className:"alert-header",children:[(0,rg.jsx)(xg,{size:20}),(0,rg.jsx)("span",{children:"Low Stock Alert"})]}),(0,rg.jsx)("div",{className:"low-stock-items",children:I.slice(0,5).map(e=>(0,rg.jsxs)("div",{className:"low-stock-item",children:[(0,rg.jsx)("span",{className:"item-name",children:e.name}),(0,rg.jsxs)("span",{className:"item-stock",children:[e.stock," left"]})]},e.id))}),(0,rg.jsx)("button",{className:"view-all-btn",onClick:()=>r("lowstock"),children:"View All Low Stock Items"})]}),(f.productsWithoutQRCodes>0||f.productsWithoutCodes>0)&&(0,rg.jsxs)("div",{className:"barcode-alert",children:[(0,rg.jsxs)("div",{className:"alert-header",children:[(0,rg.jsx)(Sg,{size:20}),(0,rg.jsx)("span",{children:"Product Code Management"})]}),(0,rg.jsxs)("div",{className:"barcode-info",children:[f.productsWithoutCodes>0&&(0,rg.jsxs)("p",{children:["\u26a0\ufe0f ",f.productsWithoutCodes," products need product codes"]}),f.productsWithoutQRCodes>0&&(0,rg.jsxs)("p",{children:["\u26a0\ufe0f ",f.productsWithoutQRCodes," products need QR codes"]}),(0,rg.jsx)("p",{children:'\ud83d\udca1 Tip: Use "Sync All Codes" to ensure barcode = qrcode = product code'})]}),(0,rg.jsxs)("div",{className:"barcode-actions",children:[f.productsWithoutCodes>0&&(0,rg.jsx)("button",{className:"generate-all-btn",onClick:()=>b("auto-generate"),title:"Auto-generate codes for products missing them",children:"\ud83d\udd04 Auto-Generate Codes"}),(0,rg.jsx)("button",{className:"generate-all-btn sync-btn",onClick:()=>b("sync-codes"),title:"Sync all products: barcode = qrcode = product code",children:"\u2728 Sync All Codes"}),(0,rg.jsx)("button",{className:"manage-btn",onClick:()=>r("barcode"),children:"\ud83d\udcca Manage Barcodes"})]})]}),f.totalProducts>0&&0===f.productsWithoutCodes&&0===f.productsWithoutQRCodes&&(0,rg.jsxs)("div",{className:"barcode-alert success",children:[(0,rg.jsxs)("div",{className:"alert-header",children:[(0,rg.jsx)(Sg,{size:20}),(0,rg.jsx)("span",{children:"All Products Have Codes \u2705"})]}),(0,rg.jsxs)("div",{className:"barcode-info",children:[(0,rg.jsxs)("p",{children:["All ",f.totalProducts," products have product codes, barcodes, and QR codes"]}),(0,rg.jsx)("p",{children:'\ud83d\udca1 Use "Sync All Codes" if you want to ensure they all match'})]}),(0,rg.jsxs)("div",{className:"barcode-actions",children:[(0,rg.jsx)("button",{className:"generate-all-btn sync-btn",onClick:()=>b("sync-codes"),title:"Sync all products: barcode = qrcode = product code",children:"\u2728 Sync All Codes"}),(0,rg.jsx)("button",{className:"manage-btn",onClick:()=>r("barcode"),children:"\ud83d\udcca View Barcodes"})]})]})]})]})},Bm=fg("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Fm=fg("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Um=t=>{let{inventory:n,setActiveView:r}=t;const{currentUser:o,logout:i}=ig(),[a,s]=(0,e.useState)(!0),[c,l]=(0,e.useState)({todaySales:0,todayBills:0,averageBill:0}),u=Bg(null===o||void 0===o?void 0:o.email),d=Mg(null===o||void 0===o?void 0:o.email),h=(0,e.useCallback)(e=>{console.log("\ud83d\udcca Calculating today stats from sales:",e.length);const t=new Date;t.setHours(0,0,0,0);const n=t.getTime(),r=e.filter(e=>{var t;let r;if(null!==(t=e.timestamp)&&void 0!==t&&t.seconds)r=1e3*e.timestamp.seconds;else{if(!e.timestamp)return!1;r=e.timestamp}const o=new Date(r);return o.setHours(0,0,0,0),o.getTime()===n});console.log("\ud83d\udcc5 Today's sales count:",r.length);const o=r.reduce((e,t)=>e+(t.total||0),0),i=r.length,a=i>0?o/i:0;console.log("\ud83d\udcb0 Today total:",o,"Bills:",i,"Average:",a),l({todaySales:o,todayBills:i,averageBill:a})},[]),f=(0,e.useCallback)(async()=>{try{s(!1)}catch(e){console.error("Error loading dashboard data:",e),s(!1)}},[]);(0,e.useEffect)(()=>{if(!d)return;console.log("\ud83d\udcca Setting up sales subscription for store:",d);const e=rm(d,50,e=>{console.log("\ud83d\udcb0 Sales data received:",e.length,"sales"),h(e)},e=>{console.error("Error in sales subscription:",e)});return()=>{console.log("\ud83d\udd0c Unsubscribing from sales"),e()}},[d,h]),(0,e.useEffect)(()=>{f()},[f]);const p=[{id:"bill",label:"New Bill",icon:Bm,color:"orange"},{id:"inventory",label:"View Inventory",icon:Cg,color:"blue"},{id:"lowstock",label:"Low Stock Items",icon:xg,color:"red"}],g=n.filter(e=>e.stock<10&&(!d||e.storeId===d)),m=n.filter(e=>0===e.stock&&(!d||e.storeId===d)),y=Dg(null===o||void 0===o?void 0:o.email),v=()=>null!==o&&void 0!==o&&o.email?o.email.split("@")[0]:"cashier",w=()=>{const e=(new Date).getHours();return e>=6&&e<14?"Morning Shift":e>=14&&e<22?"Evening Shift":"Night Shift"};return a?(0,rg.jsx)("div",{className:"dashboard",children:(0,rg.jsxs)("div",{className:"loading-state",children:[(0,rg.jsx)(Cg,{size:48}),(0,rg.jsx)("p",{children:"Loading Cashier dashboard..."})]})}):(0,rg.jsxs)("div",{className:"dashboard cashier-dashboard",children:[(0,rg.jsx)("div",{className:"store-context-header",children:(0,rg.jsxs)("div",{className:"store-info-card cashier",children:[(0,rg.jsx)("div",{className:"store-icon",children:(0,rg.jsx)(Cg,{size:24})}),(0,rg.jsxs)("div",{className:"store-details",children:[(0,rg.jsx)("h2",{children:"Currently Working At"}),(0,rg.jsx)("h1",{children:(null===u||void 0===u?void 0:u.storeName)||"ABC"}),(0,rg.jsxs)("div",{className:"store-meta",children:[(0,rg.jsxs)("span",{className:"store-id",children:["Store ID: ",d||"store_001"]}),(0,rg.jsx)("span",{className:"admin-role",children:w()})]})]}),(0,rg.jsxs)("div",{className:"store-status",children:[(0,rg.jsx)("div",{className:"status-indicator active"}),(0,rg.jsx)("span",{children:"Active"})]})]})}),(0,rg.jsxs)("div",{className:"dashboard-header",children:[(0,rg.jsxs)("div",{className:"welcome-section",children:[(0,rg.jsxs)("div",{className:"role-badge cashier",children:[(0,rg.jsx)(gg,{size:16}),(0,rg.jsx)("span",{children:Ug(y)})]}),(0,rg.jsx)("h1",{children:"Cashier Dashboard"}),(0,rg.jsx)("div",{className:"welcome-banner",children:(0,rg.jsxs)("span",{children:["Welcome, ",v(),"! Ready to serve customers at ",(null===u||void 0===u?void 0:u.storeName)||"ABC","."]})}),(0,rg.jsxs)("div",{className:"shift-info",children:[(0,rg.jsx)(Fm,{size:16}),(0,rg.jsx)("span",{children:w()})]})]}),(0,rg.jsxs)("div",{className:"user-profile",children:[(0,rg.jsx)("div",{className:"avatar cashier",children:v().charAt(0).toUpperCase()}),(0,rg.jsxs)("div",{className:"user-info",children:[(0,rg.jsx)("span",{className:"user-name",children:v()}),(0,rg.jsx)("span",{className:"user-role",children:"Cashier"}),(0,rg.jsx)("span",{className:"user-email",children:null===o||void 0===o?void 0:o.email}),(0,rg.jsx)("span",{className:"user-store",children:(null===u||void 0===u?void 0:u.storeName)||"ABC"})]}),(0,rg.jsx)("button",{className:"logout-btn",onClick:async()=>{try{await i()}catch(e){console.error("Failed to logout:",e)}},children:"Logout"})]})]}),(0,rg.jsxs)("div",{className:"stats-grid",children:[(0,rg.jsxs)("div",{className:"stat-card sales",children:[(0,rg.jsx)("div",{className:"stat-icon",children:(0,rg.jsx)(bm,{size:24})}),(0,rg.jsxs)("div",{className:"stat-content",children:[(0,rg.jsx)("div",{className:"stat-label",children:"TODAY'S SALES"}),(0,rg.jsxs)("div",{className:"stat-value",children:["\u20b9",c.todaySales.toFixed(0)]})]})]}),(0,rg.jsxs)("div",{className:"stat-card bills",children:[(0,rg.jsx)("div",{className:"stat-icon",children:(0,rg.jsx)(_g,{size:24})}),(0,rg.jsxs)("div",{className:"stat-content",children:[(0,rg.jsx)("div",{className:"stat-label",children:"TODAY'S BILLS"}),(0,rg.jsx)("div",{className:"stat-value",children:c.todayBills})]})]}),(0,rg.jsxs)("div",{className:"stat-card average",children:[(0,rg.jsx)("div",{className:"stat-icon",children:(0,rg.jsx)(Bm,{size:24})}),(0,rg.jsxs)("div",{className:"stat-content",children:[(0,rg.jsx)("div",{className:"stat-label",children:"AVERAGE BILL"}),(0,rg.jsxs)("div",{className:"stat-value",children:["\u20b9",c.averageBill.toFixed(0)]})]})]}),(0,rg.jsxs)("div",{className:"stat-card products",children:[(0,rg.jsx)("div",{className:"stat-icon",children:(0,rg.jsx)(Cg,{size:24})}),(0,rg.jsxs)("div",{className:"stat-content",children:[(0,rg.jsx)("div",{className:"stat-label",children:"AVAILABLE PRODUCTS"}),(0,rg.jsx)("div",{className:"stat-value",children:n.filter(e=>e.stock>0&&(!d||e.storeId===d)).length})]})]})]}),(0,rg.jsxs)("div",{className:"dashboard-content",children:[(0,rg.jsxs)("div",{className:"quick-actions",children:[(0,rg.jsx)("h3",{children:"Quick Actions"}),(0,rg.jsx)("div",{className:"actions-grid",children:p.map(e=>{const t=e.icon;return(0,rg.jsxs)("button",{className:"action-card ".concat(e.color," large"),onClick:()=>(e=>{switch(e){case"bill":r("billing");break;case"inventory":r("inventory");break;case"lowstock":r("lowstock");break;default:console.log("Unknown action:",e)}})(e.id),title:"Navigate to ".concat(e.label),children:[(0,rg.jsx)(t,{size:24}),(0,rg.jsx)("span",{children:e.label})]},e.id)})})]}),m.length>0&&(0,rg.jsxs)("div",{className:"out-of-stock-alert",children:[(0,rg.jsxs)("div",{className:"alert-header",children:[(0,rg.jsx)(xg,{size:20}),(0,rg.jsx)("span",{children:"Out of Stock Items"})]}),(0,rg.jsxs)("div",{className:"alert-content",children:[(0,rg.jsxs)("p",{children:[m.length," items are currently out of stock"]}),(0,rg.jsxs)("div",{className:"out-of-stock-items",children:[m.slice(0,5).map(e=>(0,rg.jsxs)("div",{className:"out-of-stock-item",children:[(0,rg.jsx)("span",{className:"item-name",children:e.name}),(0,rg.jsx)("span",{className:"item-status",children:"Out of Stock"})]},e.id)),m.length>5&&(0,rg.jsxs)("p",{className:"more-items",children:["...and ",m.length-5," more items"]})]})]})]}),g.length>0&&(0,rg.jsxs)("div",{className:"low-stock-alert",children:[(0,rg.jsxs)("div",{className:"alert-header",children:[(0,rg.jsx)(xg,{size:20}),(0,rg.jsx)("span",{children:"Low Stock Alert"})]}),(0,rg.jsxs)("div",{className:"alert-content",children:[(0,rg.jsxs)("p",{children:[g.length," items are running low on stock"]}),(0,rg.jsxs)("div",{className:"low-stock-items",children:[g.slice(0,5).map(e=>(0,rg.jsxs)("div",{className:"low-stock-item",children:[(0,rg.jsx)("span",{className:"item-name",children:e.name}),(0,rg.jsxs)("span",{className:"item-stock",children:[e.stock," left"]})]},e.id)),g.length>5&&(0,rg.jsxs)("p",{className:"more-items",children:["...and ",g.length-5," more items"]})]})]})]}),(0,rg.jsxs)("div",{className:"cashier-tips",children:[(0,rg.jsx)("h3",{children:"Cashier Tips"}),(0,rg.jsxs)("div",{className:"tips-grid",children:[(0,rg.jsxs)("div",{className:"tip-card",children:[(0,rg.jsx)("h4",{children:"\ud83d\udd0d Quick Search"}),(0,rg.jsx)("p",{children:"Use product codes (e.g., RICE001) or scan barcodes for faster billing"})]}),(0,rg.jsxs)("div",{className:"tip-card",children:[(0,rg.jsx)("h4",{children:"\ud83d\udcf1 Mobile Friendly"}),(0,rg.jsx)("p",{children:"The billing system works great on tablets and mobile devices"})]}),(0,rg.jsxs)("div",{className:"tip-card",children:[(0,rg.jsx)("h4",{children:"\ud83e\uddfe Print Bills"}),(0,rg.jsx)("p",{children:"After checkout, you can print, download, or save bills as PDF"})]}),(0,rg.jsxs)("div",{className:"tip-card",children:[(0,rg.jsx)("h4",{children:"\u26a0\ufe0f Stock Alerts"}),(0,rg.jsx)("p",{children:"Check stock levels before adding items to avoid out-of-stock issues"})]})]})]})]})]})},Vm=fg("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),zm=fg("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Hm=()=>{const{currentUser:e,logout:t}=ig();return(0,rg.jsx)("div",{className:"unauthorized-container",children:(0,rg.jsxs)("div",{className:"unauthorized-content",children:[(0,rg.jsxs)("div",{className:"unauthorized-icon",children:[(0,rg.jsx)(Gg,{size:64}),(0,rg.jsx)(xg,{size:32,className:"warning-overlay"})]}),(0,rg.jsx)("h1",{children:"Access Denied"}),(0,rg.jsxs)("p",{className:"unauthorized-message",children:["Your email address ",(0,rg.jsx)("strong",{children:null===e||void 0===e?void 0:e.email})," is not authorized to access this system."]}),(0,rg.jsxs)("div",{className:"unauthorized-details",children:[(0,rg.jsxs)("div",{className:"detail-item",children:[(0,rg.jsx)(Vm,{size:20}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("h3",{children:"Contact Administrator"}),(0,rg.jsx)("p",{children:"Please contact your system administrator to request access to this application."})]})]}),(0,rg.jsxs)("div",{className:"detail-item",children:[(0,rg.jsx)(Gg,{size:20}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("h3",{children:"Authorization Required"}),(0,rg.jsx)("p",{children:"Only authorized email addresses can access this billing system for security purposes."})]})]})]}),(0,rg.jsx)("div",{className:"unauthorized-actions",children:(0,rg.jsxs)("button",{className:"btn-logout",onClick:async()=>{try{await t()}catch(e){console.error("Failed to logout:",e)}},children:[(0,rg.jsx)(zm,{size:16}),"Sign Out & Try Different Account"]})}),(0,rg.jsxs)("div",{className:"contact-info",children:[(0,rg.jsx)("h4",{children:"Need Help?"}),(0,rg.jsx)("p",{children:"Contact your system administrator at:"}),(0,rg.jsxs)("ul",{children:[(0,rg.jsx)("li",{children:"Email: nprakash315349@gmail.com"}),(0,rg.jsx)("li",{children:"Email: draupathiitsolutions@gmail.com"}),(0,rg.jsx)("li",{children:"Phone: +91 9876543210"})]})]})]})})},Gm=fg("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Wm=fg("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),qm=fg("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Xm=fg("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),Km=fg("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ym=fg("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);n(9298);const Qm=(e,t)=>{const n=Zm(e),r=$m(t);return"78"+n+r+Jm("78"+n+r)},Zm=e=>{const t=e.toLowerCase();return t.includes("rice")||t.includes("wheat")||t.includes("flour")?"01":t.includes("oil")||t.includes("ghee")||t.includes("butter")?"02":t.includes("sugar")||t.includes("salt")||t.includes("spice")?"03":t.includes("milk")||t.includes("yogurt")||t.includes("cheese")?"04":t.includes("bread")||t.includes("biscuit")||t.includes("cake")?"05":t.includes("tea")||t.includes("coffee")||t.includes("juice")?"06":t.includes("soap")||t.includes("shampoo")||t.includes("toothpaste")?"10":t.includes("cream")||t.includes("lotion")||t.includes("powder")?"11":t.includes("detergent")||t.includes("cleaner")||t.includes("brush")?"20":t.includes("tissue")||t.includes("paper")||t.includes("napkin")?"21":t.includes("battery")||t.includes("bulb")||t.includes("wire")?"30":t.includes("pen")||t.includes("pencil")||t.includes("notebook")?"40":"99"},$m=e=>{let t="";if(e){let n=0;for(let t=0;t<e.length;t++){n=(n<<5)-n+e.charCodeAt(t),n&=n}t=Math.abs(n).toString().padStart(6,"0").slice(-6)}else t=Math.floor(1e6*Math.random()).toString().padStart(6,"0");return t},Jm=e=>{let t=0;for(let n=0;n<e.length;n++){const r=parseInt(e[n]);t+=n%2===0?r:3*r}return((10-t%10)%10).toString()},ey=e=>{if(!(e=>!(!e||11!==e.length)&&e.slice(-1)===Jm(e.slice(0,-1)))(e))return null;const t=e.slice(0,2),n=e.slice(2,4),r=e.slice(4,10),o=e.slice(10,11);return{storePrefix:t,categoryCode:n,categoryName:ty(n),productSequence:r,checkDigit:o,fullBarcode:e}},ty=e=>({"01":"Grains & Cereals","02":"Oils & Fats","03":"Spices & Condiments","04":"Dairy Products","05":"Bakery Items","06":"Beverages",10:"Personal Care",11:"Cosmetics",20:"Household Cleaning",21:"Paper Products",30:"Electronics",40:"Stationery",99:"Miscellaneous"}[e]||"Unknown Category"),ny=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return!t.some(t=>t.barcode===e&&t.id!==n)},ry=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(r)return r;const o=oy(e);let i=1,a="".concat(o).concat(String(i).padStart(3,"0"));for(;!ny(a,n,t)&&i<999;)i++,a="".concat(o).concat(String(i).padStart(3,"0"));return a},oy=e=>{const t=e.toLowerCase();return t.includes("rice")?"RICE":t.includes("wheat")?"WHEAT":t.includes("flour")?"FLOUR":t.includes("oil")?"OIL":t.includes("ghee")?"GHEE":t.includes("butter")?"BUTTER":t.includes("sugar")?"SUGAR":t.includes("salt")?"SALT":t.includes("milk")?"MILK":t.includes("bread")?"BREAD":t.includes("biscuit")?"BISCUIT":t.includes("tea")?"TEA":t.includes("coffee")?"COFFEE":t.includes("juice")?"JUICE":t.includes("egg")?"EGGS":t.includes("soap")?"SOAP":t.includes("shampoo")?"SHAMPOO":t.includes("toothpaste")?"PASTE":t.includes("detergent")?"DETERGENT":t.includes("cleaner")?"CLEANER":e.substring(0,4).toUpperCase().replace(/[^A-Z]/g,"X")},iy=async(e,t)=>{try{console.log("\ud83c\udfea Creating complete store setup..."),console.log("1\ufe0f\u20e3 Creating store...");const n=await Qg(s(s({},e),{},{storeId:sy(e.name),status:"Active",setupComplete:!1,createdBy:"super_admin",features:{inventory:!0,billing:!0,reports:!0,barcodes:!0,userManagement:!0,lowStockAlerts:!0}})),r="store_".concat(n.slice(-3));console.log("2\ufe0f\u20e3 Creating store admin...");const o=await hm({name:t.name,email:t.email,phone:t.phone,role:im,storeId:r,storeName:e.name,password:t.password,isActive:!0,permissions:["view_dashboard","manage_inventory","view_inventory","view_reports","manage_barcodes","view_activity","export_data","manage_store_users"],createdBy:"super_admin",setupComplete:!0});let i=null;t.createSampleCashier&&(console.log("3\ufe0f\u20e3 Creating sample cashier..."),i=await hm({name:"".concat(e.name," Cashier"),email:"cashier@".concat(e.name.toLowerCase().replace(/\s+/g,""),".com"),phone:t.phone.replace(/\d$/,"1"),role:am,storeId:r,storeName:e.name,password:"cashier123",isActive:!0,permissions:["view_dashboard","manage_billing","view_inventory"],createdBy:"super_admin",setupComplete:!0})),console.log("4\ufe0f\u20e3 Setting up initial inventory...");const a=await ay(r,e.name);return console.log("5\ufe0f\u20e3 Finalizing store setup..."),await Zg(n,{setupComplete:!0,storeId:r,adminUserId:o,cashierUserId:i,inventoryCount:a.count,setupCompletedAt:(new Date).toISOString()}),console.log("\ud83c\udf89 Complete store setup finished!"),{success:!0,storeId:r,storeDocId:n,storeName:e.name,adminUserId:o,cashierUserId:i,inventoryCount:a.count,adminCredentials:{email:t.email,password:t.password},cashierCredentials:i?{email:"cashier@".concat(e.name.toLowerCase().replace(/\s+/g,""),".com"),password:"cashier123"}:null,message:"Store setup completed successfully with all features enabled"}}catch(n){return console.error("\u274c Error creating complete store:",n),{success:!1,error:n.message,message:"Failed to create complete store setup"}}},ay=async(e,t)=>{try{console.log("\ud83d\udce6 Initializing inventory for ".concat(t,"..."));const r=[{name:"Basmati Rice",category:"Grains",price:120,stock:50,unit:"kg"},{name:"Whole Wheat Flour",category:"Grains",price:45,stock:30,unit:"kg"},{name:"Sugar",category:"Pantry",price:42,stock:25,unit:"kg"},{name:"Cooking Oil",category:"Pantry",price:180,stock:20,unit:"liter"},{name:"Salt",category:"Pantry",price:20,stock:40,unit:"kg"},{name:"Fresh Milk",category:"Dairy",price:60,stock:15,unit:"liter"},{name:"Butter",category:"Dairy",price:250,stock:12,unit:"pack"},{name:"Cheese Slices",category:"Dairy",price:180,stock:8,unit:"pack"},{name:"Yogurt",category:"Dairy",price:45,stock:20,unit:"cup"},{name:"Coca Cola",category:"Beverages",price:40,stock:50,unit:"bottle"},{name:"Orange Juice",category:"Beverages",price:80,stock:25,unit:"pack"},{name:"Mineral Water",category:"Beverages",price:20,stock:100,unit:"bottle"},{name:"Potato Chips",category:"Snacks",price:30,stock:40,unit:"pack"},{name:"Biscuits",category:"Snacks",price:25,stock:35,unit:"pack"},{name:"Chocolate Bar",category:"Snacks",price:50,stock:30,unit:"piece"},{name:"Toothpaste",category:"Personal Care",price:85,stock:20,unit:"tube"},{name:"Shampoo",category:"Personal Care",price:180,stock:15,unit:"bottle"},{name:"Soap",category:"Personal Care",price:35,stock:25,unit:"bar"},{name:"Detergent Powder",category:"Household",price:120,stock:18,unit:"kg"},{name:"Toilet Paper",category:"Household",price:45,stock:30,unit:"roll"}],o=[];for(const a of r)try{const n=Om(a.name),r=Qm(a.name,n),i=s(s({},a),{},{code:n,barcode:r,storeId:e,storeName:t,createdBy:"system_setup",setupProduct:!0,lowStockThreshold:10,status:"Active"}),c=await Wg(i);o.push({success:!0,productId:c,name:a.name,code:n,barcode:r})}catch(n){o.push({success:!1,name:a.name,error:n.message})}const i=o.filter(e=>e.success).length;return console.log("\u2705 Initialized ".concat(i," products for ").concat(t)),{success:!0,count:i,total:r.length,results:o,sampleCodes:o.filter(e=>e.success).slice(0,5)}}catch(n){return console.error("\u274c Error initializing store inventory:",n),{success:!1,error:n.message,count:0}}},sy=e=>{const t=e.replace(/[^a-zA-Z0-9]/g,"").substring(0,3).toUpperCase(),n=Date.now().toString().slice(-4);return"".concat(t,"_").concat(n)},cy=async e=>{try{console.log("\ud83e\uddd9\u200d\u2642\ufe0f Starting store creation wizard...");const{storeName:t,storeAddress:n,storePhone:r,storeEmail:o,adminName:i,adminEmail:a,adminPhone:c,adminPassword:l,createSampleCashier:u=!0,initializeInventory:d=!0,setupFeatures:h=!0}=e;if(!t||!n||!i||!a||!l)throw new Error("Missing required fields for store creation");const f={name:t,address:n,phone:r,email:o,manager:i},p={name:i,email:a,phone:c,password:l,createSampleCashier:u},g=await iy(f,p);if(!g.success)throw new Error(g.error);return h&&await(async(e,t)=>{try{console.log("\u2699\ufe0f Setting up admin features for ".concat(t,"..."));const n={storeId:e,storeName:t,features:{inventory:!0,billing:!0,reports:!0,barcodes:!0,userManagement:!0,lowStockAlerts:!0,activityTracking:!0},preferences:{currency:"INR",taxRate:18,lowStockThreshold:10,autoGenerateCodes:!0,autoGenerateBarcodes:!0},notifications:{lowStock:!0,newUsers:!0,systemUpdates:!0}};return console.log("\u2705 Admin features configured:",n),{success:!0,settings:n,message:"Admin features configured successfully"}}catch(n){return console.error("\u274c Error setting up admin features:",n),{success:!1,error:n.message}}})(g.storeId,g.storeName),s(s({},g),{},{wizardComplete:!0,setupSteps:["\u2705 Store created","\u2705 Admin user created",u?"\u2705 Sample cashier created":"\u23ed\ufe0f Sample cashier skipped",d?"\u2705 Inventory initialized":"\u23ed\ufe0f Inventory initialization skipped",h?"\u2705 Features configured":"\u23ed\ufe0f Feature setup skipped"]})}catch(t){return console.error("\u274c Store creation wizard failed:",t),{success:!1,error:t.message,message:"Store creation wizard failed"}}};"undefined"!==typeof window&&(window.createCompleteStore=iy,window.createStoreWithWizard=cy,window.initializeStoreInventory=ay);const ly=()=>{const[t,n]=(0,e.useState)([]),[r,o]=(0,e.useState)(!0),[i,a]=(0,e.useState)(!1),[c,l]=(0,e.useState)(!1),[u,d]=(0,e.useState)(null),[h,f]=(0,e.useState)(1),[p,g]=(0,e.useState)({name:"",address:"",phone:"",email:"",status:"Active",manager:""}),[m,y]=(0,e.useState)({storeName:"",storeAddress:"",storePhone:"",storeEmail:"",adminName:"",adminEmail:"",adminPhone:"",adminPassword:"",createSampleCashier:!0,initializeInventory:!0,setupFeatures:!0});(0,e.useEffect)(()=>{(async()=>{try{console.log("\ud83d\udd27 Checking if stores need initialization..."),0===(await Yg()).length?(console.log("\ud83d\udce6 Initializing default store..."),await Qg({name:"My Store Main Branch",address:"321 Main Street, City",phone:"+91 9876543210",email:"main@mystore.com",status:"Active",manager:"Store Manager"}),console.log("\u2705 Default store initialized")):console.log("\u2705 Stores already exist, skipping initialization")}catch(e){console.error("\u274c Error initializing stores:",e)}})();const e=$g(e=>{n(e),o(!1)},e=>{console.error("Error loading stores:",e),o(!1)});return()=>e()},[]);const v=()=>{g({name:"",address:"",phone:"",email:"",status:"Active",manager:""})},w=()=>{y({storeName:"",storeAddress:"",storePhone:"",storeEmail:"",adminName:"",adminEmail:"",adminPhone:"",adminPassword:"",createSampleCashier:!0,initializeInventory:!0,setupFeatures:!0}),f(1)},b=(e,t)=>{y(n=>s(s({},n),{},{[e]:t}))},_=async e=>{if(window.confirm("Are you sure you want to delete this store? This action cannot be undone."))try{await(async e=>{try{console.log("\ud83d\uddd1\ufe0f Deleting store:",e);const t=Bf(tg,"stores",e);await Kp(t),console.log("\u2705 Store deleted successfully")}catch(t){throw console.error("\u274c Error deleting store:",t),console.error("Error code:",t.code),console.error("Error message:",t.message),"permission-denied"===t.code?new Error("Permission denied. Please check Firestore security rules."):new Error("Failed to delete store: ".concat(t.message))}})(e),alert("Store deleted successfully!")}catch(t){console.error("Error deleting store:",t),alert("Error deleting store. Please try again.")}},C=()=>{a(!1),v(),d(null)},E=(e,t)=>{g(n=>s(s({},n),{},{[e]:t}))};return r?(0,rg.jsx)("div",{className:"stores-view",children:(0,rg.jsxs)("div",{className:"loading-state",children:[(0,rg.jsx)(pg,{size:48}),(0,rg.jsx)("p",{children:"Loading stores..."})]})}):(0,rg.jsxs)("div",{className:"stores-view",children:[(0,rg.jsxs)("div",{className:"view-header",children:[(0,rg.jsx)("h1",{children:"Stores Management"}),(0,rg.jsxs)("div",{className:"header-actions",children:[(0,rg.jsxs)("button",{className:"btn-secondary",onClick:()=>{v(),d(null),a(!0)},children:[(0,rg.jsx)(vm,{size:20}),"Quick Add Store"]}),(0,rg.jsxs)("button",{className:"btn-primary",onClick:()=>{w(),l(!0)},children:[(0,rg.jsx)(Ng,{size:20}),"Create Store with Setup"]})]})]}),(0,rg.jsx)("div",{className:"stores-grid",children:t.map(e=>(0,rg.jsxs)("div",{className:"store-card",children:[(0,rg.jsxs)("div",{className:"store-header",children:[(0,rg.jsx)("div",{className:"store-icon",children:(0,rg.jsx)(pg,{size:24})}),(0,rg.jsxs)("div",{className:"store-actions",children:[(0,rg.jsx)("button",{className:"btn-icon",onClick:()=>(e=>{g({name:e.name,address:e.address,phone:e.phone,email:e.email,status:e.status,manager:e.manager}),d(e.id),a(!0)})(e),title:"Edit Store",children:(0,rg.jsx)(Gm,{size:16})}),(0,rg.jsx)("button",{className:"btn-icon danger",onClick:()=>_(e.id),title:"Delete Store",children:(0,rg.jsx)(Wm,{size:16})})]})]}),(0,rg.jsxs)("div",{className:"store-content",children:[(0,rg.jsx)("h3",{children:e.name}),(0,rg.jsxs)("div",{className:"store-details",children:[(0,rg.jsxs)("div",{className:"detail-item",children:[(0,rg.jsx)(qm,{size:16}),(0,rg.jsx)("span",{children:e.address})]}),(0,rg.jsxs)("div",{className:"detail-item",children:[(0,rg.jsx)(Xm,{size:16}),(0,rg.jsx)("span",{children:e.phone})]}),(0,rg.jsxs)("div",{className:"detail-item",children:[(0,rg.jsx)(Vm,{size:16}),(0,rg.jsx)("span",{children:e.email})]})]}),(0,rg.jsxs)("div",{className:"store-footer",children:[(0,rg.jsx)("span",{className:"status ".concat(e.status.toLowerCase()),children:e.status}),(0,rg.jsxs)("span",{className:"manager",children:["Manager: ",e.manager]})]})]})]},e.id))}),i&&(0,rg.jsx)("div",{className:"modal-overlay",children:(0,rg.jsxs)("div",{className:"modal-content",children:[(0,rg.jsxs)("div",{className:"modal-header",children:[(0,rg.jsx)("h2",{children:u?"Edit Store":"Add New Store"}),(0,rg.jsx)("button",{className:"btn-close",onClick:C,children:(0,rg.jsx)(Km,{size:20})})]}),(0,rg.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!p.name||!p.address||!p.phone||!p.email||!p.manager)return void alert("Please fill in all required fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.email))return void alert("Please enter a valid email address");if(/^\+?[\d\s-()]+$/.test(p.phone))try{u?(await Zg(u,p),alert("Store updated successfully!")):(await Qg(p),alert("Store added successfully!")),a(!1),v(),d(null)}catch(t){console.error("Error saving store:",t);let e="Error saving store. ";t.message.includes("Permission denied")?e+="Please check your Firebase permissions or try logging in again.":t.message.includes("unavailable")?e+="Database is currently unavailable. Please try again later.":e+=t.message||"Please try again.",alert(e)}else alert("Please enter a valid phone number")},className:"store-form",children:[(0,rg.jsxs)("div",{className:"form-grid",children:[(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"name",children:"Store Name *"}),(0,rg.jsx)("input",{type:"text",id:"name",value:p.name,onChange:e=>E("name",e.target.value),placeholder:"Enter store name",required:!0})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"manager",children:"Manager Name *"}),(0,rg.jsx)("input",{type:"text",id:"manager",value:p.manager,onChange:e=>E("manager",e.target.value),placeholder:"Enter manager name",required:!0})]}),(0,rg.jsxs)("div",{className:"form-group full-width",children:[(0,rg.jsx)("label",{htmlFor:"address",children:"Address *"}),(0,rg.jsx)("input",{type:"text",id:"address",value:p.address,onChange:e=>E("address",e.target.value),placeholder:"Enter store address",required:!0})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"phone",children:"Phone Number *"}),(0,rg.jsx)("input",{type:"tel",id:"phone",value:p.phone,onChange:e=>E("phone",e.target.value),placeholder:"+91 9876543210",required:!0})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"email",children:"Email Address *"}),(0,rg.jsx)("input",{type:"email",id:"email",value:p.email,onChange:e=>E("email",e.target.value),placeholder:"store@mystore.com",required:!0})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"status",children:"Status"}),(0,rg.jsxs)("select",{id:"status",value:p.status,onChange:e=>E("status",e.target.value),children:[(0,rg.jsx)("option",{value:"Active",children:"Active"}),(0,rg.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,rg.jsx)("option",{value:"Maintenance",children:"Maintenance"})]})]})]}),(0,rg.jsxs)("div",{className:"form-actions",children:[(0,rg.jsx)("button",{type:"button",className:"btn-secondary",onClick:C,children:"Cancel"}),(0,rg.jsxs)("button",{type:"submit",className:"btn-primary",children:[(0,rg.jsx)(Ym,{size:16}),u?"Update Store":"Add Store"]})]})]})]})}),c&&(0,rg.jsx)("div",{className:"modal-overlay",children:(0,rg.jsxs)("div",{className:"modal-content wizard-modal",children:[(0,rg.jsxs)("div",{className:"modal-header",children:[(0,rg.jsxs)("h2",{children:["Create New Store - Step ",h," of 3"]}),(0,rg.jsx)("button",{className:"btn-close",onClick:()=>l(!1),children:(0,rg.jsx)(Km,{size:20})})]}),(0,rg.jsxs)("div",{className:"wizard-progress",children:[(0,rg.jsxs)("div",{className:"step ".concat(h>=1?"active":""),children:[(0,rg.jsx)(pg,{size:16}),(0,rg.jsx)("span",{children:"Store Info"})]}),(0,rg.jsxs)("div",{className:"step ".concat(h>=2?"active":""),children:[(0,rg.jsx)(gg,{size:16}),(0,rg.jsx)("span",{children:"Admin User"})]}),(0,rg.jsxs)("div",{className:"step ".concat(h>=3?"active":""),children:[(0,rg.jsx)(Ng,{size:16}),(0,rg.jsx)("span",{children:"Setup Options"})]})]}),(0,rg.jsxs)("div",{className:"wizard-content",children:[1===h&&(0,rg.jsxs)("div",{className:"wizard-step",children:[(0,rg.jsx)("h3",{children:"Store Information"}),(0,rg.jsxs)("div",{className:"form-grid",children:[(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"storeName",children:"Store Name *"}),(0,rg.jsx)("input",{type:"text",id:"storeName",value:m.storeName,onChange:e=>b("storeName",e.target.value),placeholder:"Enter store name",required:!0})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"storeAddress",children:"Address *"}),(0,rg.jsx)("textarea",{id:"storeAddress",value:m.storeAddress,onChange:e=>b("storeAddress",e.target.value),placeholder:"Enter store address",rows:"3",required:!0})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"storePhone",children:"Phone Number"}),(0,rg.jsx)("input",{type:"tel",id:"storePhone",value:m.storePhone,onChange:e=>b("storePhone",e.target.value),placeholder:"+91 9876543210"})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"storeEmail",children:"Email Address"}),(0,rg.jsx)("input",{type:"email",id:"storeEmail",value:m.storeEmail,onChange:e=>b("storeEmail",e.target.value),placeholder:"store@example.com"})]})]})]}),2===h&&(0,rg.jsxs)("div",{className:"wizard-step",children:[(0,rg.jsx)("h3",{children:"Store Administrator"}),(0,rg.jsx)("p",{className:"step-description",children:"Create the admin user who will manage this store"}),(0,rg.jsxs)("div",{className:"form-grid",children:[(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"adminName",children:"Admin Name *"}),(0,rg.jsx)("input",{type:"text",id:"adminName",value:m.adminName,onChange:e=>b("adminName",e.target.value),placeholder:"Enter admin full name",required:!0})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"adminEmail",children:"Admin Email *"}),(0,rg.jsx)("input",{type:"email",id:"adminEmail",value:m.adminEmail,onChange:e=>b("adminEmail",e.target.value),placeholder:"admin@store.com",required:!0})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"adminPhone",children:"Admin Phone"}),(0,rg.jsx)("input",{type:"tel",id:"adminPhone",value:m.adminPhone,onChange:e=>b("adminPhone",e.target.value),placeholder:"+91 9876543210"})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"adminPassword",children:"Admin Password *"}),(0,rg.jsx)("input",{type:"password",id:"adminPassword",value:m.adminPassword,onChange:e=>b("adminPassword",e.target.value),placeholder:"Enter secure password",minLength:"6",required:!0}),(0,rg.jsx)("small",{className:"form-hint",children:"Minimum 6 characters"})]})]})]}),3===h&&(0,rg.jsxs)("div",{className:"wizard-step",children:[(0,rg.jsx)("h3",{children:"Setup Options"}),(0,rg.jsx)("p",{className:"step-description",children:"Choose what to set up automatically"}),(0,rg.jsxs)("div",{className:"setup-options",children:[(0,rg.jsxs)("div",{className:"option-card",children:[(0,rg.jsxs)("div",{className:"option-header",children:[(0,rg.jsx)(Eg,{size:20}),(0,rg.jsx)("h4",{children:"Sample Cashier"})]}),(0,rg.jsx)("p",{children:"Create a sample cashier account for testing"}),(0,rg.jsxs)("label",{className:"checkbox-label",children:[(0,rg.jsx)("input",{type:"checkbox",checked:m.createSampleCashier,onChange:e=>b("createSampleCashier",e.target.checked)}),(0,rg.jsx)("span",{children:"Create sample cashier"})]})]}),(0,rg.jsxs)("div",{className:"option-card",children:[(0,rg.jsxs)("div",{className:"option-header",children:[(0,rg.jsx)(Cg,{size:20}),(0,rg.jsx)("h4",{children:"Initial Inventory"})]}),(0,rg.jsx)("p",{children:"Add 20+ sample products with codes and barcodes"}),(0,rg.jsxs)("label",{className:"checkbox-label",children:[(0,rg.jsx)("input",{type:"checkbox",checked:m.initializeInventory,onChange:e=>b("initializeInventory",e.target.checked)}),(0,rg.jsx)("span",{children:"Initialize inventory"})]})]}),(0,rg.jsxs)("div",{className:"option-card",children:[(0,rg.jsxs)("div",{className:"option-header",children:[(0,rg.jsx)(Ng,{size:20}),(0,rg.jsx)("h4",{children:"Feature Setup"})]}),(0,rg.jsx)("p",{children:"Configure all dashboard features and settings"}),(0,rg.jsxs)("label",{className:"checkbox-label",children:[(0,rg.jsx)("input",{type:"checkbox",checked:m.setupFeatures,onChange:e=>b("setupFeatures",e.target.checked)}),(0,rg.jsx)("span",{children:"Setup all features"})]})]})]}),(0,rg.jsxs)("div",{className:"setup-summary",children:[(0,rg.jsx)("h4",{children:"What will be created:"}),(0,rg.jsxs)("ul",{children:[(0,rg.jsxs)("li",{children:["\u2705 New store: ",m.storeName||"Store Name"]}),(0,rg.jsxs)("li",{children:["\u2705 Admin user: ",m.adminEmail||"admin@store.com"]}),m.createSampleCashier&&(0,rg.jsx)("li",{children:"\u2705 Sample cashier account"}),m.initializeInventory&&(0,rg.jsx)("li",{children:"\u2705 20+ sample products with codes & barcodes"}),m.setupFeatures&&(0,rg.jsx)("li",{children:"\u2705 All dashboard features configured"})]})]})]})]}),(0,rg.jsxs)("div",{className:"wizard-actions",children:[h>1&&(0,rg.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>{h>1&&f(h-1)},children:"Previous"}),(0,rg.jsxs)("div",{className:"action-buttons",children:[(0,rg.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>l(!1),children:"Cancel"}),h<3?(0,rg.jsx)("button",{type:"button",className:"btn-primary",onClick:()=>{h<3&&f(h+1)},disabled:1===h&&(!m.storeName||!m.storeAddress)||2===h&&(!m.adminName||!m.adminEmail||!m.adminPassword),children:"Next"}):(0,rg.jsx)("button",{type:"button",className:"btn-primary",onClick:async()=>{try{o(!0);const e=await cy(m);e.success?(alert("Store created successfully!\n\nStore: ".concat(e.storeName,"\nAdmin Email: ").concat(e.adminCredentials.email,"\nAdmin Password: ").concat(e.adminCredentials.password,"\n\n").concat(e.cashierCredentials?"Cashier Email: ".concat(e.cashierCredentials.email,"\nCashier Password: ").concat(e.cashierCredentials.password):"")),l(!1),w()):alert("Error creating store: ".concat(e.error))}catch(e){console.error("Error in wizard:",e),alert("Error creating store: ".concat(e.message))}finally{o(!1)}},disabled:r,children:r?"Creating Store...":"Create Store"})]})]})]})})]})},uy=fg("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),dy=()=>{const[t,n]=(0,e.useState)([]),[r,o]=(0,e.useState)([]),[i,a]=(0,e.useState)(!0),[c,l]=(0,e.useState)(!1),[u,d]=(0,e.useState)(null),[h,f]=(0,e.useState)({name:"",email:"",phone:"",role:am,storeId:"",storeName:"",isActive:!0});(0,e.useEffect)(()=>{p(),g();const e=(e=>Qp(Lf(tg,"authorized_users"),t=>{const n=t.docs.map(e=>s({id:e.id},e.data()));e(n)}))(e=>{n(e)});return()=>e()},[]);const p=async()=>{try{const e=await Yg();o(e)}catch(e){console.error("Error loading stores:",e)}},g=async()=>{try{const e=await pm();n(e)}catch(e){console.error("Error loading users:",e)}finally{a(!1)}},m=()=>{f({name:"",email:"",phone:"",role:am,storeId:"",storeName:"",isActive:!0})},y=()=>{l(!1),m(),d(null)},v=(e,t)=>{f(n=>s(s({},n),{},{[e]:t}))};return i?(0,rg.jsx)("div",{className:"user-management",children:(0,rg.jsxs)("div",{className:"loading-state",children:[(0,rg.jsx)(Eg,{size:48}),(0,rg.jsx)("p",{children:"Loading users..."})]})}):(0,rg.jsxs)("div",{className:"user-management",children:[(0,rg.jsxs)("div",{className:"view-header",children:[(0,rg.jsx)("h1",{children:"User Management"}),(0,rg.jsxs)("button",{className:"btn-primary",onClick:()=>{m(),d(null),l(!0)},children:[(0,rg.jsx)(vm,{size:20}),"Add New User"]})]}),(0,rg.jsx)("div",{className:"users-table",children:(0,rg.jsxs)("table",{children:[(0,rg.jsx)("thead",{children:(0,rg.jsxs)("tr",{children:[(0,rg.jsx)("th",{children:"User Info"}),(0,rg.jsx)("th",{children:"Contact"}),(0,rg.jsx)("th",{children:"Role"}),(0,rg.jsx)("th",{children:"Store"}),(0,rg.jsx)("th",{children:"Status"}),(0,rg.jsx)("th",{children:"Actions"})]})}),(0,rg.jsx)("tbody",{children:t.map(e=>(0,rg.jsxs)("tr",{children:[(0,rg.jsx)("td",{children:(0,rg.jsxs)("div",{className:"user-info",children:[(0,rg.jsx)("div",{className:"user-avatar",children:(e.name||e.email).charAt(0).toUpperCase()}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("div",{className:"user-name",children:e.name||e.email.split("@")[0]}),(0,rg.jsx)("div",{className:"user-email",children:e.email})]})]})}),(0,rg.jsx)("td",{children:(0,rg.jsxs)("div",{className:"contact-info",children:[e.phone&&(0,rg.jsxs)("div",{className:"contact-item",children:[(0,rg.jsx)(Xm,{size:14}),(0,rg.jsx)("span",{children:e.phone})]}),(0,rg.jsxs)("div",{className:"contact-item",children:[(0,rg.jsx)(Vm,{size:14}),(0,rg.jsx)("span",{children:e.email})]})]})}),(0,rg.jsx)("td",{children:(0,rg.jsx)("span",{className:"role-badge ".concat(e.role),children:mm(e.role)})}),(0,rg.jsx)("td",{children:(0,rg.jsx)("div",{className:"store-info",children:e.storeId?(0,rg.jsxs)(rg.Fragment,{children:[(0,rg.jsx)(pg,{size:14}),(0,rg.jsx)("span",{children:e.storeName})]}):(0,rg.jsx)("span",{className:"no-store",children:"All Stores"})})}),(0,rg.jsx)("td",{children:(0,rg.jsx)("button",{className:"status-toggle ".concat(!1!==e.isActive?"active":"inactive"),onClick:()=>(async(e,t)=>{try{await fm(e,{isActive:!t}),alert("User ".concat(t?"deactivated":"activated"," successfully!"))}catch(n){console.error("Error updating user status:",n),alert("Error updating user status. Please try again.")}})(e.id,!1!==e.isActive),children:!1!==e.isActive?(0,rg.jsxs)(rg.Fragment,{children:[(0,rg.jsx)(wm,{size:14}),"Active"]}):(0,rg.jsxs)(rg.Fragment,{children:[(0,rg.jsx)(uy,{size:14}),"Inactive"]})})}),(0,rg.jsx)("td",{children:(0,rg.jsxs)("div",{className:"action-buttons",children:[(0,rg.jsx)("button",{className:"btn-icon",onClick:()=>(e=>{f({name:e.name||"",email:e.email||"",phone:e.phone||"",role:e.role||am,storeId:e.storeId||"",storeName:e.storeName||"",isActive:!1!==e.isActive}),d(e.id),l(!0)})(e),title:"Edit User",children:(0,rg.jsx)(Gm,{size:16})}),(0,rg.jsx)("button",{className:"btn-icon danger",onClick:()=>(async e=>{const n=t.find(t=>t.id===e);if(n)if(n.role!==om){if(window.confirm("Are you sure you want to delete ".concat(n.name||n.email,"? This action cannot be undone.")))try{await tm(e),alert("User deleted successfully!")}catch(r){console.error("Error deleting user:",r),alert("Error deleting user. Please try again.")}}else alert("Cannot delete Super Administrator accounts!");else alert("User not found!")})(e.id),title:"Delete User",children:(0,rg.jsx)(Wm,{size:16})})]})})]},e.id))})]})}),c&&(0,rg.jsx)("div",{className:"modal-overlay",children:(0,rg.jsxs)("div",{className:"modal-content",children:[(0,rg.jsxs)("div",{className:"modal-header",children:[(0,rg.jsx)("h2",{children:u?"Edit User":"Add New User"}),(0,rg.jsx)("button",{className:"btn-close",onClick:y,children:(0,rg.jsx)(Km,{size:20})})]}),(0,rg.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!h.name||!h.email)return void alert("Please fill in all required fields");if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email))if(h.role===om||h.storeId)try{const e=s(s({},h),{},{email:h.email.toLowerCase()});h.role===om&&(e.storeId=null,e.storeName="Company Admin"),u?(await fm(u,e),alert("User updated successfully!")):(await hm(e),alert("User added successfully!")),l(!1),m(),d(null)}catch(t){console.error("Error saving user:",t),alert("Error saving user. Please try again.")}else alert("Please select a store for this user");else alert("Please enter a valid email address")},className:"user-form",children:[(0,rg.jsxs)("div",{className:"form-grid",children:[(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"name",children:"Full Name *"}),(0,rg.jsx)("input",{type:"text",id:"name",value:h.name,onChange:e=>v("name",e.target.value),placeholder:"Enter full name",required:!0})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"email",children:"Email Address *"}),(0,rg.jsx)("input",{type:"email",id:"email",value:h.email,onChange:e=>v("email",e.target.value),placeholder:"user@example.com",required:!0})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"phone",children:"Phone Number"}),(0,rg.jsx)("input",{type:"tel",id:"phone",value:h.phone,onChange:e=>v("phone",e.target.value),placeholder:"+91 9876543210"})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"role",children:"Role *"}),(0,rg.jsxs)("select",{id:"role",value:h.role,onChange:e=>v("role",e.target.value),required:!0,children:[(0,rg.jsx)("option",{value:am,children:"Cashier"}),(0,rg.jsx)("option",{value:im,children:"Administrator"}),(0,rg.jsx)("option",{value:om,children:"Super Administrator"})]})]}),h.role!==om&&(0,rg.jsxs)("div",{className:"form-group full-width",children:[(0,rg.jsx)("label",{htmlFor:"store",children:"Store Assignment *"}),(0,rg.jsxs)("select",{id:"store",value:h.storeId,onChange:e=>(e=>{const t=r.find(t=>t.id===e);f(n=>s(s({},n),{},{storeId:e,storeName:t?t.name:""}))})(e.target.value),required:!0,children:[(0,rg.jsx)("option",{value:"",children:"Select a store"}),r.map(e=>(0,rg.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"status",children:"Status"}),(0,rg.jsxs)("select",{id:"status",value:h.isActive,onChange:e=>v("isActive","true"===e.target.value),children:[(0,rg.jsx)("option",{value:!0,children:"Active"}),(0,rg.jsx)("option",{value:!1,children:"Inactive"})]})]})]}),(0,rg.jsxs)("div",{className:"form-actions",children:[(0,rg.jsx)("button",{type:"button",className:"btn-secondary",onClick:y,children:"Cancel"}),(0,rg.jsxs)("button",{type:"submit",className:"btn-primary",children:[(0,rg.jsx)(Ym,{size:16}),u?"Update User":"Add User"]})]})]})]})})]})},hy=fg("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),fy=fg("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),py=fg("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),gy=fg("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),my=()=>{const{currentUser:t}=ig(),n=Mg(null===t||void 0===t?void 0:t.email),r=Lg(null===t||void 0===t?void 0:t.email),[o,i]=(0,e.useState)([]),[a,c]=(0,e.useState)(!0),[l,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(!1),[f,p]=(0,e.useState)(null),[g,m]=(0,e.useState)(null),[y,v]=(0,e.useState)(!1),[w,b]=(0,e.useState)(!1),[_,C]=(0,e.useState)({name:"",email:"",phone:"",role:"Cashier",status:"Active",password:""}),[E,S]=(0,e.useState)({newPassword:"",confirmPassword:""});(0,e.useEffect)(()=>{const e=nm(e=>{const t=e.filter(e=>e.storeId===n||e.email&&e.email.includes("@mystore.com"));i(t),c(!1)},e=>{console.error("Error loading store users:",e),c(!1)});return()=>e()},[n]);const A=()=>{C({name:"",email:"",phone:"",role:"Cashier",status:"Active",password:""}),v(!1)},I=()=>{S({newPassword:"",confirmPassword:""}),b(!1)},x=()=>{A(),p(null),u(!0)},N=()=>{u(!1),A(),p(null)},T=()=>{h(!1),m(null),I()},k=(e,t)=>{C(n=>s(s({},n),{},{[e]:t}))},O=(e,t)=>{S(n=>s(s({},n),{},{[e]:t}))},R=e=>{switch(e){case"Administrator":return"admin";case"Manager":return"manager";case"Cashier":return"cashier";default:return"user"}},P=e=>{if(!e||"Never"===e||"Unknown"===e)return"Never";try{return new Date(e).toLocaleDateString()}catch(t){return"Invalid Date"}};if(a)return(0,rg.jsx)("div",{className:"users-view",children:(0,rg.jsxs)("div",{className:"loading-state",children:[(0,rg.jsx)(Eg,{size:48}),(0,rg.jsx)("p",{children:"Loading store users..."})]})});const j=o.filter(e=>{const t=e.role?e.role.toLowerCase():"",n=e.email?e.email.toLowerCase():"";return!("cashier"!==t&&!t.includes("cashier"))||(!("user"!==t||!n.includes("cashier"))||(!(t||!n.includes("cashier"))||!("user"!==t&&t||n.includes("admin")||n.includes("manager")||!n.includes("@mystore.com"))))}),D=j.filter(e=>"active"===(e.status?e.status.toLowerCase():"active")),M=j.filter(e=>"inactive"===(e.status?e.status.toLowerCase():"active"));return console.log("\ud83d\udc65 Store Users View - Users:",o),console.log("\ud83d\udcb0 Filtered cashiers:",j),console.log("\ud83d\udcca User statistics:",{total:o.length,cashiers:j.length,active:D.length,inactive:M.length}),(0,rg.jsxs)("div",{className:"users-view",children:[(0,rg.jsxs)("div",{className:"view-header",children:[(0,rg.jsxs)("div",{children:[(0,rg.jsx)("h1",{children:"Store Users Management"}),(0,rg.jsxs)("p",{children:["Managing users for ",r]}),(0,rg.jsxs)("div",{className:"user-stats",children:[(0,rg.jsxs)("span",{className:"stat-item",children:[(0,rg.jsx)(Eg,{size:16}),"Total: ",o.length]}),(0,rg.jsxs)("span",{className:"stat-item",children:[(0,rg.jsx)(Gg,{size:16}),"Cashiers: ",j.length]}),(0,rg.jsxs)("span",{className:"stat-item active",children:["Active: ",D.length]}),(0,rg.jsxs)("span",{className:"stat-item inactive",children:["Inactive: ",M.length]})]})]}),(0,rg.jsxs)("button",{className:"btn-primary",onClick:x,children:[(0,rg.jsx)(vm,{size:20}),"Add New Cashier"]})]}),(0,rg.jsx)("div",{className:"users-table",children:(0,rg.jsxs)("table",{children:[(0,rg.jsx)("thead",{children:(0,rg.jsxs)("tr",{children:[(0,rg.jsx)("th",{children:"User"}),(0,rg.jsx)("th",{children:"Contact"}),(0,rg.jsx)("th",{children:"Role"}),(0,rg.jsx)("th",{children:"Status"}),(0,rg.jsx)("th",{children:"Join Date"}),(0,rg.jsx)("th",{children:"Actions"})]})}),(0,rg.jsx)("tbody",{children:o&&o.length>0?o.map(e=>(0,rg.jsxs)("tr",{children:[(0,rg.jsx)("td",{children:(0,rg.jsxs)("div",{className:"user-info",children:[(0,rg.jsx)("div",{className:"user-avatar",children:e.name?e.name.charAt(0).toUpperCase():"?"}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("div",{className:"user-name",children:e.name||"Unknown User"}),(0,rg.jsx)("div",{className:"user-email",children:e.email||"No email"})]})]})}),(0,rg.jsx)("td",{children:(0,rg.jsxs)("div",{className:"contact-info",children:[(0,rg.jsxs)("div",{className:"contact-item",children:[(0,rg.jsx)(Vm,{size:14}),(0,rg.jsx)("span",{children:e.email||"No email"})]}),(0,rg.jsxs)("div",{className:"contact-item",children:[(0,rg.jsx)(Xm,{size:14}),(0,rg.jsx)("span",{children:e.phone||"No phone"})]})]})}),(0,rg.jsx)("td",{children:(0,rg.jsx)("span",{className:"role-badge ".concat(R(e.role||"user")),children:e.role||"User"})}),(0,rg.jsx)("td",{children:(0,rg.jsxs)("div",{className:"status-controls",children:[(0,rg.jsx)("span",{className:"status-badge ".concat((e.status||"active").toLowerCase()),children:e.status||"Active"}),(0,rg.jsx)("button",{className:"status-toggle",onClick:()=>(async(e,t)=>{const n="Active"===t?"Inactive":"Active";try{await em(e,{status:n}),alert("User ".concat("Active"===n?"enabled":"disabled"," successfully!"))}catch(r){console.error("Error updating user status:",r),alert("Error updating user status. Please try again.")}})(e.id,e.status||"Active"),title:"".concat("Active"===e.status?"Disable":"Enable"," user"),children:"Active"===e.status?(0,rg.jsx)(hy,{size:20,className:"toggle-on"}):(0,rg.jsx)(fy,{size:20,className:"toggle-off"})})]})}),(0,rg.jsx)("td",{children:(0,rg.jsxs)("div",{className:"date-info",children:[(0,rg.jsx)(py,{size:14}),(0,rg.jsx)("span",{children:P(e.joinDate||e.createdAt||"Unknown")})]})}),(0,rg.jsx)("td",{children:(0,rg.jsxs)("div",{className:"action-buttons",children:[(0,rg.jsx)("button",{className:"btn-icon",onClick:()=>(e=>{C({name:e.name||"",email:e.email||"",phone:e.phone||"",role:e.role||"Cashier",status:e.status||"Active",password:""}),p(e.id),u(!0)})(e),title:"Edit User",children:(0,rg.jsx)(Gm,{size:16})}),(0,rg.jsx)("button",{className:"btn-icon password",onClick:()=>(e=>{m(e),I(),h(!0)})(e),title:"Change Password",children:(0,rg.jsx)(gy,{size:16})}),(0,rg.jsx)("button",{className:"btn-icon danger",onClick:()=>(async e=>{const t=o.find(t=>t.id===e);if(t){if(window.confirm("Are you sure you want to delete ".concat(t.name||"this user","? This action cannot be undone.")))try{await tm(e),alert("User deleted successfully!")}catch(n){console.error("Error deleting user:",n),alert("Error deleting user. Please try again.")}}else alert("User not found!")})(e.id),title:"Delete User",children:(0,rg.jsx)(Wm,{size:16})})]})})]},e.id||Math.random())):(0,rg.jsx)("tr",{children:(0,rg.jsx)("td",{colSpan:"6",className:"no-data",children:(0,rg.jsxs)("div",{className:"empty-state",children:[(0,rg.jsx)(Eg,{size:48}),(0,rg.jsxs)("p",{children:["No users found for ",r]}),(0,rg.jsxs)("button",{className:"btn-primary",onClick:x,children:[(0,rg.jsx)(vm,{size:16}),"Add First Cashier"]})]})})})})]})}),l&&(0,rg.jsx)("div",{className:"modal-overlay",children:(0,rg.jsxs)("div",{className:"modal-content",children:[(0,rg.jsxs)("div",{className:"modal-header",children:[(0,rg.jsxs)("h2",{children:[f?"Edit User":"Add New User"," - ",r]}),(0,rg.jsx)("button",{className:"btn-close",onClick:N,children:(0,rg.jsx)(Km,{size:20})})]}),(0,rg.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!_.name||!_.email||!_.phone||!f&&!_.password)return void alert("Please fill in all required fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email))return void alert("Please enter a valid email address");if(!/^\+?[\d\s-()]+$/.test(_.phone))return void alert("Please enter a valid phone number");if(!f&&_.password.length<6)return void alert("Password must be at least 6 characters long");if(o.find(e=>e.email&&e.email.toLowerCase()===_.email.toLowerCase()&&e.id!==f))alert("A user with this email already exists");else try{const e=s(s({},_),{},{storeId:n,storeName:r});f?(_.password||delete e.password,await em(f,e),alert("User updated successfully!")):(await Jg(e),alert("User added successfully!")),u(!1),A(),p(null)}catch(t){console.error("Error saving user:",t),alert("Error saving user. Please try again.")}},className:"user-form",children:[(0,rg.jsxs)("div",{className:"form-grid",children:[(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"name",children:"Full Name *"}),(0,rg.jsx)("input",{type:"text",id:"name",value:_.name,onChange:e=>k("name",e.target.value),placeholder:"Enter full name",required:!0})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"email",children:"Email Address *"}),(0,rg.jsx)("input",{type:"email",id:"email",value:_.email,onChange:e=>k("email",e.target.value),placeholder:"user@mystore.com",required:!0})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"phone",children:"Phone Number *"}),(0,rg.jsx)("input",{type:"tel",id:"phone",value:_.phone,onChange:e=>k("phone",e.target.value),placeholder:"+91 9876543210",required:!0})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"role",children:"Role *"}),(0,rg.jsxs)("select",{id:"role",value:_.role,onChange:e=>k("role",e.target.value),required:!0,children:[(0,rg.jsx)("option",{value:"Cashier",children:"Cashier"}),(0,rg.jsx)("option",{value:"Manager",children:"Manager"})]})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"status",children:"Status"}),(0,rg.jsxs)("select",{id:"status",value:_.status,onChange:e=>k("status",e.target.value),children:[(0,rg.jsx)("option",{value:"Active",children:"Active"}),(0,rg.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsxs)("label",{htmlFor:"password",children:["Password ",!f&&"*"]}),(0,rg.jsxs)("div",{className:"password-input",children:[(0,rg.jsx)("input",{type:y?"text":"password",id:"password",value:_.password,onChange:e=>k("password",e.target.value),placeholder:f?"Leave blank to keep current":"Enter password (min 6 characters)",required:!f,minLength:6}),(0,rg.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>v(!y),children:y?(0,rg.jsx)(yg,{size:16}):(0,rg.jsx)(vg,{size:16})})]}),(0,rg.jsx)("small",{className:"form-hint",children:f?"Leave blank to keep current password":"Minimum 6 characters required"})]})]}),(0,rg.jsxs)("div",{className:"form-actions",children:[(0,rg.jsx)("button",{type:"button",className:"btn-secondary",onClick:N,children:"Cancel"}),(0,rg.jsxs)("button",{type:"submit",className:"btn-primary",children:[(0,rg.jsx)(Ym,{size:16}),f?"Update User":"Add User"]})]})]})]})}),d&&g&&(0,rg.jsx)("div",{className:"modal-overlay",children:(0,rg.jsxs)("div",{className:"modal-content",children:[(0,rg.jsxs)("div",{className:"modal-header",children:[(0,rg.jsxs)("h2",{children:["Change Password - ",g.name]}),(0,rg.jsx)("button",{className:"btn-close",onClick:T,children:(0,rg.jsx)(Km,{size:20})})]}),(0,rg.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),E.newPassword&&E.confirmPassword)if(E.newPassword.length<6)alert("Password must be at least 6 characters long");else if(E.newPassword===E.confirmPassword)try{await em(g.id,{password:E.newPassword,passwordChangedAt:(new Date).toISOString(),passwordChangedBy:t.email}),alert("Password changed successfully for ".concat(g.name)),h(!1),m(null),I()}catch(n){console.error("Error changing password:",n),alert("Error changing password. Please try again.")}else alert("Passwords do not match");else alert("Please fill in both password fields")},className:"password-form",children:[(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"newPassword",children:"New Password *"}),(0,rg.jsxs)("div",{className:"password-input",children:[(0,rg.jsx)("input",{type:w?"text":"password",id:"newPassword",value:E.newPassword,onChange:e=>O("newPassword",e.target.value),placeholder:"Enter new password (min 6 characters)",required:!0,minLength:6}),(0,rg.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>b(!w),children:w?(0,rg.jsx)(yg,{size:16}):(0,rg.jsx)(vg,{size:16})})]})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm New Password *"}),(0,rg.jsx)("div",{className:"password-input",children:(0,rg.jsx)("input",{type:w?"text":"password",id:"confirmPassword",value:E.confirmPassword,onChange:e=>O("confirmPassword",e.target.value),placeholder:"Confirm new password",required:!0,minLength:6})})]}),(0,rg.jsxs)("div",{className:"password-info",children:[(0,rg.jsxs)("div",{className:"info-item",children:[(0,rg.jsx)("strong",{children:"User:"})," ",g.name]}),(0,rg.jsxs)("div",{className:"info-item",children:[(0,rg.jsx)("strong",{children:"Email:"})," ",g.email]}),(0,rg.jsxs)("div",{className:"info-item",children:[(0,rg.jsx)("strong",{children:"Role:"})," ",g.role]})]}),(0,rg.jsxs)("div",{className:"form-actions",children:[(0,rg.jsx)("button",{type:"button",className:"btn-secondary",onClick:T,children:"Cancel"}),(0,rg.jsxs)("button",{type:"submit",className:"btn-primary",children:[(0,rg.jsx)(gy,{size:16}),"Change Password"]})]})]})]})})]})},yy=fg("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),vy=fg("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),wy=fg("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),by=fg("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),_y=fg("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Cy=fg("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ey={taxRate:18,currency:"INR",currencySymbol:"\u20b9",lowStockThreshold:10,autoGenerateCodes:!0,autoGenerateBarcodes:!0,enableDiscounts:!0,maxDiscountPercent:50,businessName:"",businessAddress:"",businessPhone:"",businessEmail:"",gstNumber:"",receiptFooter:"Thank you for shopping with us!",printLogo:!1,enableTaxInvoice:!0,roundingMethod:"round",decimalPlaces:2,preferredScanningMethod:"qrcode",enableQRCodeScanning:!0,enableBarcodeScanning:!0,enableManualEntry:!0},Sy=async e=>{try{if(!e)return console.warn("No store ID provided, returning default settings"),Ey;const t=Bf(tg,"store_settings",e),n=await Hp(t);if(n.exists()){const e=n.data();return s(s({},Ey),e)}return await qp(t,s(s({},Ey),{},{storeId:e,createdAt:Jp(),updatedAt:Jp()})),Ey}catch(t){return console.error("Error getting store settings:",t),Ey}},Ay=async(e,t)=>{try{if(!e)throw new Error("Store ID is required");const n=Bf(tg,"store_settings",e);if(void 0!==t.taxRate){const e=parseFloat(t.taxRate);if(isNaN(e)||e<0||e>100)throw new Error("Tax rate must be a number between 0 and 100");t.taxRate=e}if(void 0!==t.maxDiscountPercent){const e=parseFloat(t.maxDiscountPercent);if(isNaN(e)||e<0||e>100)throw new Error("Max discount must be a number between 0 and 100");t.maxDiscountPercent=e}await Xp(n,s(s({},t),{},{updatedAt:Jp()})),console.log("Store settings updated successfully")}catch(n){throw console.error("Error updating store settings:",n),n}},Iy=(e,t)=>{if(!e)return t(Ey),()=>{};return Qp(Bf(tg,"store_settings",e),e=>{if(e.exists()){const n=s(s({},Ey),e.data());t(n)}else t(Ey)},e=>{console.error("Error subscribing to store settings:",e),t(Ey)})},xy=(e,t)=>e&&t?e*t/100:0,Ny=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e-n,o=xy(r,t),i=r+o;return{subtotal:e,discountAmount:n,taxableAmount:r,taxAmount:o,taxRate:t,total:Math.round(100*i)/100}},Ty=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\u20b9";return"INR"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INR")?"".concat(t).concat(e.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})):"".concat(t).concat(e.toFixed(2))},ky=e=>{if(!e)return!0;return/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/.test(e.toUpperCase())},Oy=function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"INR"){case"INR":return"GST";case"USD":return"Sales Tax";case"EUR":return"VAT";default:return"Tax"}},Ry=()=>{const{currentUser:t}=ig(),n=Mg(null===t||void 0===t?void 0:t.email),r=Lg(null===t||void 0===t?void 0:t.email),[o,i]=(0,e.useState)(Ey),[a,c]=(0,e.useState)(!0),[l,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)({type:"",text:""}),[f,p]=(0,e.useState)("tax");(0,e.useEffect)(()=>{if(!n)return void c(!1);const e=Iy(n,e=>{i(e),c(!1)});return()=>e()},[n]);const g=(e,t)=>{h({type:e,text:t}),setTimeout(()=>h({type:"",text:""}),5e3)},m=(e,t)=>{i(n=>s(s({},n),{},{[e]:t}))},y=[{id:"tax",label:"Tax & Pricing",icon:yy},{id:"business",label:"Business Info",icon:pg},{id:"receipt",label:"Receipt Settings",icon:vy},{id:"scanning",label:"Scanning Method",icon:Ng},{id:"general",label:"General",icon:Ng}];return a?(0,rg.jsx)("div",{className:"store-settings",children:(0,rg.jsxs)("div",{className:"loading-state",children:[(0,rg.jsx)(Ng,{size:48}),(0,rg.jsx)("p",{children:"Loading store settings..."})]})}):(0,rg.jsxs)("div",{className:"store-settings",children:[(0,rg.jsxs)("div",{className:"settings-header",children:[(0,rg.jsxs)("div",{className:"header-info",children:[(0,rg.jsx)("h1",{children:"Store Settings"}),(0,rg.jsxs)("p",{children:["Configure settings for ",r]})]}),(0,rg.jsxs)("div",{className:"header-actions",children:[(0,rg.jsxs)("button",{className:"btn-secondary",onClick:()=>{window.confirm("Are you sure you want to reset all settings to default values?")&&(i(Ey),g("info","Settings reset to defaults. Click Save to apply changes."))},disabled:l,children:[(0,rg.jsx)(wy,{size:16}),"Reset to Defaults"]}),(0,rg.jsx)("button",{className:"btn-primary",onClick:async()=>{if(n){u(!0);try{if(o.gstNumber&&!ky(o.gstNumber))return g("error","Invalid GST number format. Please check and try again."),void u(!1);await Ay(n,o),g("success","Settings saved successfully!")}catch(e){console.error("Error saving settings:",e),g("error",e.message||"Failed to save settings. Please try again.")}finally{u(!1)}}else g("error","Store ID not found. Please contact administrator.")},disabled:l,children:l?(0,rg.jsxs)(rg.Fragment,{children:[(0,rg.jsx)(wy,{size:16,className:"spinning"}),"Saving..."]}):(0,rg.jsxs)(rg.Fragment,{children:[(0,rg.jsx)(Ym,{size:16}),"Save Settings"]})})]})]}),d.text&&(0,rg.jsxs)("div",{className:"message ".concat(d.type),children:["success"===d.type&&(0,rg.jsx)(by,{size:16}),"error"===d.type&&(0,rg.jsx)(_y,{size:16}),"info"===d.type&&(0,rg.jsx)(_y,{size:16}),(0,rg.jsx)("span",{children:d.text})]}),(0,rg.jsxs)("div",{className:"settings-content",children:[(0,rg.jsx)("div",{className:"settings-tabs",children:y.map(e=>{const t=e.icon;return(0,rg.jsxs)("button",{className:"tab-button ".concat(f===e.id?"active":""),onClick:()=>p(e.id),children:[(0,rg.jsx)(t,{size:16}),(0,rg.jsx)("span",{children:e.label})]},e.id)})}),(0,rg.jsxs)("div",{className:"settings-panel",children:["tax"===f&&(0,rg.jsxs)("div",{className:"settings-section",children:[(0,rg.jsx)("h3",{children:"Tax & Pricing Configuration"}),(0,rg.jsxs)("div",{className:"form-grid",children:[(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsxs)("label",{htmlFor:"taxRate",children:[(0,rg.jsx)(yy,{size:16}),Oy(o.currency)," Rate (%)"]}),(0,rg.jsx)("input",{type:"number",id:"taxRate",value:o.taxRate,onChange:e=>m("taxRate",parseFloat(e.target.value)||0),min:"0",max:"100",step:"0.01",placeholder:"18.00"}),(0,rg.jsxs)("small",{className:"form-hint",children:["Current rate: ",o.taxRate,"% - Applied to all sales"]})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsxs)("label",{htmlFor:"currency",children:[(0,rg.jsx)(Cy,{size:16}),"Currency"]}),(0,rg.jsxs)("select",{id:"currency",value:o.currency,onChange:e=>{const t=e.target.value;m("currency",t),m("currencySymbol",{INR:"\u20b9",USD:"$",EUR:"\u20ac",GBP:"\xa3"}[t]||"$")},children:[(0,rg.jsx)("option",{value:"INR",children:"Indian Rupee (\u20b9)"}),(0,rg.jsx)("option",{value:"USD",children:"US Dollar ($)"}),(0,rg.jsx)("option",{value:"EUR",children:"Euro (\u20ac)"}),(0,rg.jsx)("option",{value:"GBP",children:"British Pound (\xa3)"})]})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"enableDiscounts",children:"Enable Discounts"}),(0,rg.jsxs)("div",{className:"checkbox-group",children:[(0,rg.jsx)("input",{type:"checkbox",id:"enableDiscounts",checked:o.enableDiscounts,onChange:e=>m("enableDiscounts",e.target.checked)}),(0,rg.jsx)("span",{children:"Allow discounts on bills"})]})]}),o.enableDiscounts&&(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"maxDiscountPercent",children:"Maximum Discount (%)"}),(0,rg.jsx)("input",{type:"number",id:"maxDiscountPercent",value:o.maxDiscountPercent,onChange:e=>m("maxDiscountPercent",parseFloat(e.target.value)||0),min:"0",max:"100",step:"0.01",placeholder:"50.00"})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"roundingMethod",children:"Bill Rounding Method"}),(0,rg.jsxs)("select",{id:"roundingMethod",value:o.roundingMethod,onChange:e=>m("roundingMethod",e.target.value),children:[(0,rg.jsx)("option",{value:"round",children:"Round to nearest"}),(0,rg.jsx)("option",{value:"floor",children:"Round down"}),(0,rg.jsx)("option",{value:"ceil",children:"Round up"})]})]})]}),(0,rg.jsxs)("div",{className:"tax-preview",children:[(0,rg.jsx)("h4",{children:"Tax Calculation Preview"}),(0,rg.jsxs)("div",{className:"preview-calculation",children:[(0,rg.jsxs)("div",{className:"calc-row",children:[(0,rg.jsx)("span",{children:"Sample Amount:"}),(0,rg.jsxs)("span",{children:[o.currencySymbol,"1,000.00"]})]}),(0,rg.jsxs)("div",{className:"calc-row",children:[(0,rg.jsxs)("span",{children:[Oy(o.currency)," (",o.taxRate,"%):"]}),(0,rg.jsxs)("span",{children:[o.currencySymbol,(1e3*o.taxRate/100).toFixed(2)]})]}),(0,rg.jsxs)("div",{className:"calc-row total",children:[(0,rg.jsx)("span",{children:"Total:"}),(0,rg.jsxs)("span",{children:[o.currencySymbol,(1e3+1e3*o.taxRate/100).toFixed(2)]})]})]})]})]}),"business"===f&&(0,rg.jsxs)("div",{className:"settings-section",children:[(0,rg.jsx)("h3",{children:"Business Information"}),(0,rg.jsxs)("div",{className:"form-grid",children:[(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsxs)("label",{htmlFor:"businessName",children:[(0,rg.jsx)(pg,{size:16}),"Business Name"]}),(0,rg.jsx)("input",{type:"text",id:"businessName",value:o.businessName,onChange:e=>m("businessName",e.target.value),placeholder:"Your Business Name"})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsxs)("label",{htmlFor:"businessAddress",children:[(0,rg.jsx)(qm,{size:16}),"Business Address"]}),(0,rg.jsx)("textarea",{id:"businessAddress",value:o.businessAddress,onChange:e=>m("businessAddress",e.target.value),placeholder:"Complete business address",rows:"3"})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsxs)("label",{htmlFor:"businessPhone",children:[(0,rg.jsx)(Xm,{size:16}),"Phone Number"]}),(0,rg.jsx)("input",{type:"tel",id:"businessPhone",value:o.businessPhone,onChange:e=>m("businessPhone",e.target.value),placeholder:"+91 9876543210"})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsxs)("label",{htmlFor:"businessEmail",children:[(0,rg.jsx)(Vm,{size:16}),"Email Address"]}),(0,rg.jsx)("input",{type:"email",id:"businessEmail",value:o.businessEmail,onChange:e=>m("businessEmail",e.target.value),placeholder:"business@example.com"})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsxs)("label",{htmlFor:"gstNumber",children:[(0,rg.jsx)(vy,{size:16}),"GST Number (Optional)"]}),(0,rg.jsx)("input",{type:"text",id:"gstNumber",value:o.gstNumber,onChange:e=>m("gstNumber",e.target.value.toUpperCase()),placeholder:"22AAAAA0000A1Z5",maxLength:"15"}),(0,rg.jsx)("small",{className:"form-hint",children:"Format: 2 digits + 10 characters + 1 digit + Z + 1 digit"})]})]})]}),"receipt"===f&&(0,rg.jsxs)("div",{className:"settings-section",children:[(0,rg.jsx)("h3",{children:"Receipt & Invoice Settings"}),(0,rg.jsxs)("div",{className:"form-grid",children:[(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"receiptFooter",children:"Receipt Footer Message"}),(0,rg.jsx)("textarea",{id:"receiptFooter",value:o.receiptFooter,onChange:e=>m("receiptFooter",e.target.value),placeholder:"Thank you for shopping with us!",rows:"2"})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"enableTaxInvoice",children:"Tax Invoice Format"}),(0,rg.jsxs)("div",{className:"checkbox-group",children:[(0,rg.jsx)("input",{type:"checkbox",id:"enableTaxInvoice",checked:o.enableTaxInvoice,onChange:e=>m("enableTaxInvoice",e.target.checked)}),(0,rg.jsx)("span",{children:"Generate tax invoices (includes GST details)"})]})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"printLogo",children:"Print Logo"}),(0,rg.jsxs)("div",{className:"checkbox-group",children:[(0,rg.jsx)("input",{type:"checkbox",id:"printLogo",checked:o.printLogo,onChange:e=>m("printLogo",e.target.checked)}),(0,rg.jsx)("span",{children:"Include business logo on receipts"})]})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"decimalPlaces",children:"Decimal Places"}),(0,rg.jsxs)("select",{id:"decimalPlaces",value:o.decimalPlaces,onChange:e=>m("decimalPlaces",parseInt(e.target.value)),children:[(0,rg.jsx)("option",{value:"0",children:"0 (\u20b9100)"}),(0,rg.jsx)("option",{value:"1",children:"1 (\u20b9100.0)"}),(0,rg.jsx)("option",{value:"2",children:"2 (\u20b9100.00)"})]})]})]})]}),"scanning"===f&&(0,rg.jsxs)("div",{className:"settings-section",children:[(0,rg.jsx)("h3",{children:"Scanning Method Settings"}),(0,rg.jsxs)("div",{className:"form-grid",children:[(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"preferredScanningMethod",children:"Preferred Scanning Method for Cashiers"}),(0,rg.jsxs)("select",{id:"preferredScanningMethod",value:o.preferredScanningMethod||"qrcode",onChange:e=>m("preferredScanningMethod",e.target.value),children:[(0,rg.jsx)("option",{value:"qrcode",children:"QR Code (Recommended for Mobile)"}),(0,rg.jsx)("option",{value:"barcode",children:"Barcode (Traditional Scanner)"}),(0,rg.jsx)("option",{value:"both",children:"Both (Allow Either)"})]}),(0,rg.jsx)("small",{className:"form-hint",children:"QR codes work better with mobile phone cameras"})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"enableQRCodeScanning",children:"Enable QR Code Scanning"}),(0,rg.jsxs)("div",{className:"checkbox-group",children:[(0,rg.jsx)("input",{type:"checkbox",id:"enableQRCodeScanning",checked:!1!==o.enableQRCodeScanning,onChange:e=>m("enableQRCodeScanning",e.target.checked)}),(0,rg.jsx)("span",{children:"Allow cashiers to scan QR codes during billing"})]})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"enableBarcodeScanning",children:"Enable Barcode Scanning"}),(0,rg.jsxs)("div",{className:"checkbox-group",children:[(0,rg.jsx)("input",{type:"checkbox",id:"enableBarcodeScanning",checked:!1!==o.enableBarcodeScanning,onChange:e=>m("enableBarcodeScanning",e.target.checked)}),(0,rg.jsx)("span",{children:"Allow cashiers to scan traditional barcodes"})]})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"enableManualEntry",children:"Enable Manual Code Entry"}),(0,rg.jsxs)("div",{className:"checkbox-group",children:[(0,rg.jsx)("input",{type:"checkbox",id:"enableManualEntry",checked:!1!==o.enableManualEntry,onChange:e=>m("enableManualEntry",e.target.checked)}),(0,rg.jsx)("span",{children:"Allow cashiers to manually type product codes"})]})]})]}),(0,rg.jsxs)("div",{className:"scanning-info-box",children:[(0,rg.jsx)("h4",{children:"Why QR Codes?"}),(0,rg.jsxs)("ul",{children:[(0,rg.jsx)("li",{children:"\u2705 Better mobile camera compatibility"}),(0,rg.jsx)("li",{children:"\u2705 Faster scanning with smartphones"}),(0,rg.jsx)("li",{children:"\u2705 Works in various lighting conditions"}),(0,rg.jsx)("li",{children:"\u2705 More reliable detection"}),(0,rg.jsx)("li",{children:"\u2705 Can store more information"})]}),(0,rg.jsxs)("p",{className:"info-note",children:[(0,rg.jsx)("strong",{children:"Note:"})," Both barcodes and QR codes will be displayed in inventory. This setting controls which method is preferred for cashier billing."]})]})]}),"general"===f&&(0,rg.jsxs)("div",{className:"settings-section",children:[(0,rg.jsx)("h3",{children:"General Settings"}),(0,rg.jsxs)("div",{className:"form-grid",children:[(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsxs)("label",{htmlFor:"lowStockThreshold",children:[(0,rg.jsx)(_y,{size:16}),"Low Stock Threshold"]}),(0,rg.jsx)("input",{type:"number",id:"lowStockThreshold",value:o.lowStockThreshold,onChange:e=>m("lowStockThreshold",parseInt(e.target.value)||0),min:"1",placeholder:"10"}),(0,rg.jsx)("small",{className:"form-hint",children:"Alert when product stock falls below this number"})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"autoGenerateCodes",children:"Auto-generate Product Codes"}),(0,rg.jsxs)("div",{className:"checkbox-group",children:[(0,rg.jsx)("input",{type:"checkbox",id:"autoGenerateCodes",checked:o.autoGenerateCodes,onChange:e=>m("autoGenerateCodes",e.target.checked)}),(0,rg.jsx)("span",{children:"Automatically create product codes for new items"})]})]}),(0,rg.jsxs)("div",{className:"form-group",children:[(0,rg.jsx)("label",{htmlFor:"autoGenerateBarcodes",children:"Auto-generate Barcodes"}),(0,rg.jsxs)("div",{className:"checkbox-group",children:[(0,rg.jsx)("input",{type:"checkbox",id:"autoGenerateBarcodes",checked:o.autoGenerateBarcodes,onChange:e=>m("autoGenerateBarcodes",e.target.checked)}),(0,rg.jsx)("span",{children:"Automatically create barcodes for new products"})]})]})]})]})]})]})]})},Py=fg("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),jy=fg("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),Dy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("\ud83d\udcc4 Generating bill HTML"),console.log("Bill data:",e),console.log("Store settings:",t);const{items:n,subtotal:r,taxAmount:o,taxRate:i,discount:a,total:s,paymentMode:c,itemCount:l,timestamp:u,billNumber:d,storeName:h,currency:f="INR",currencySymbol:p="\u20b9"}=e,g=new Date(u||Date.now()),m=d||"BILL-".concat(g.getTime().toString().slice(-8)),y=t.businessName||h||"My Store",v=t.businessAddress||"123 Main Street, City",w=t.businessPhone||"+91 98765 43210",b=t.gstNumber||"GST: 29ABCDE1234F1Z5",_=t.receiptFooter||"Thank you for shopping with us!",C=!0===t.printLogo;console.log("\ud83c\udff7\ufe0f Show logo:",C,"printLogo setting:",t.printLogo);return'\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset="UTF-8">\n      <title>Bill - '.concat(m,'</title>\n      <style>\n        body {\n          font-family: \'Courier New\', monospace;\n          margin: 0;\n          padding: 20px;\n          background: white;\n          color: black;\n        }\n        .bill-container {\n          max-width: 400px;\n          margin: 0 auto;\n          border: 2px solid #000;\n          padding: 20px;\n        }\n        .header {\n          text-align: center;\n          border-bottom: 2px solid #000;\n          padding-bottom: 10px;\n          margin-bottom: 15px;\n        }\n        .logo {\n          width: 120px;\n          height: 60px;\n          margin: 0 auto 15px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n        .logo img {\n          max-width: 100%;\n          max-height: 100%;\n          object-fit: contain;\n        }\n        .store-name {\n          font-size: 24px;\n          font-weight: bold;\n          margin-bottom: 5px;\n        }\n        .store-details {\n          font-size: 12px;\n          line-height: 1.4;\n        }\n        .bill-info {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 15px;\n          font-size: 12px;\n        }\n        .items-table {\n          width: 100%;\n          border-collapse: collapse;\n          margin-bottom: 15px;\n        }\n        .items-table th,\n        .items-table td {\n          text-align: left;\n          padding: 5px 2px;\n          font-size: 12px;\n          border-bottom: 1px dashed #000;\n        }\n        .items-table th {\n          font-weight: bold;\n          border-bottom: 2px solid #000;\n        }\n        .item-name {\n          width: 50%;\n        }\n        .item-qty {\n          width: 15%;\n          text-align: center;\n        }\n        .item-price {\n          width: 20%;\n          text-align: right;\n        }\n        .item-total {\n          width: 15%;\n          text-align: right;\n        }\n        .totals-section {\n          border-top: 2px solid #000;\n          padding-top: 10px;\n          margin-top: 15px;\n        }\n        .total-row {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 5px;\n          font-size: 12px;\n        }\n        .final-total {\n          font-weight: bold;\n          font-size: 16px;\n          border-top: 1px solid #000;\n          padding-top: 5px;\n          margin-top: 10px;\n        }\n        .footer {\n          text-align: center;\n          margin-top: 20px;\n          padding-top: 15px;\n          border-top: 2px solid #000;\n          font-size: 11px;\n        }\n        .thank-you {\n          font-weight: bold;\n          margin-bottom: 10px;\n        }\n        @media print {\n          body { margin: 0; padding: 10px; }\n          .bill-container { border: 1px solid #000; }\n        }\n      </style>\n    </head>\n    <body>\n      <div class="bill-container">\n        <div class="header">\n          ').concat(C?'<div class="logo">'.concat('<svg width="120" height="60" viewBox="0 0 120 60" xmlns="http://www.w3.org/2000/svg">\n    <rect width="120" height="60" fill="#6366f1" rx="8"/>\n    <path d="M20 25 L30 15 L40 25 L40 45 L20 45 Z" fill="white"/>\n    <rect x="25" y="30" width="10" height="8" fill="#6366f1"/>\n    \n  </svg>',"</div>"):"",'\n          <div class="store-name">').concat(y.toUpperCase(),'</div>\n          <div class="store-details">\n            ').concat(v,"<br>\n            Phone: ").concat(w,"<br>\n            ").concat(b,'\n          </div>\n        </div>\n        \n        <div class="bill-info">\n          <div>\n            <strong>Bill No:</strong> ').concat(m,"<br>\n            <strong>Date:</strong> ").concat(g.toLocaleDateString(),"<br>\n            <strong>Time:</strong> ").concat(g.toLocaleTimeString(),"\n          </div>\n          <div>\n            <strong>Payment:</strong> ").concat(c,"<br>\n            <strong>Items:</strong> ").concat(l,'\n          </div>\n        </div>\n        \n        <table class="items-table">\n          <thead>\n            <tr>\n              <th class="item-name">Item</th>\n              <th class="item-qty">Qty</th>\n              <th class="item-price">Price</th>\n              <th class="item-total">Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(n.map(e=>'\n              <tr>\n                <td class="item-name">'.concat(e.name,'</td>\n                <td class="item-qty">').concat(e.qty,'</td>\n                <td class="item-price">').concat(p).concat(e.price.toFixed(2),'</td>\n                <td class="item-total">').concat(p).concat(e.total.toFixed(2),"</td>\n              </tr>\n            ")).join(""),'\n          </tbody>\n        </table>\n        \n        <div class="totals-section">\n          <div class="total-row">\n            <span>Subtotal:</span>\n            <span>').concat(p).concat(r.toFixed(2),'</span>\n          </div>\n          <div class="total-row">\n            <span>').concat((e=>{switch(e){case"INR":return"GST";case"USD":return"Sales Tax";case"EUR":case"GBP":return"VAT";default:return"Tax"}})(f)," (").concat(i,"%):</span>\n            <span>").concat(p).concat(o.toFixed(2),"</span>\n          </div>\n          ").concat(a>0?'\n            <div class="total-row">\n              <span>Discount:</span>\n              <span>-'.concat(p).concat(a.toFixed(2),"</span>\n            </div>\n          "):"",'\n          <div class="total-row final-total">\n            <span>TOTAL:</span>\n            <span>').concat(p).concat(s.toFixed(2),'</span>\n          </div>\n        </div>\n        \n        <div class="footer">\n          <div class="thank-you">').concat(_,'</div>\n          <div>Visit Again Soon</div>\n          <div style="margin-top: 10px; font-size: 10px;">\n            Generated on ').concat((new Date).toLocaleString(),"\n          </div>\n        </div>\n      </div>\n    </body>\n    </html>\n  ")},My=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{console.log("\ud83d\udda8\ufe0f Printing bill with data:",e),console.log("\u2699\ufe0f Store settings:",t);const n=Dy(e,t),r=window.open("","_blank","width=400,height=600");if(!r)return void alert("Please allow popups to print the bill");r.document.write(n),r.document.close(),r.onload=()=>{r.focus(),setTimeout(()=>{r.print()},250),r.onafterprint=()=>{r.close()}}}catch(n){console.error("\u274c Error printing bill:",n),alert("Error printing bill: "+n.message)}},Ly=t=>{let{inventory:n}=t;const[r,o]=(0,e.useState)([]),[i,a]=(0,e.useState)(!0),[s,c]=(0,e.useState)("all"),[l,u]=(0,e.useState)({totalBills:0,totalSales:0,totalPurchases:0,profitLoss:0,totalDiscount:0});(0,e.useEffect)(()=>{d()},[s]);const d=async()=>{a(!0);try{const e=await Kg(100);o(e);const t=e.length,n=e.reduce((e,t)=>e+(t.total||0),0),r=e.reduce((e,t)=>e+(t.discount||0),0),i=.6*n;u({totalBills:t,totalSales:n,totalPurchases:i,profitLoss:n-i,totalDiscount:r})}catch(e){console.error("Error loading reports data:",e),u({totalBills:0,totalSales:0,totalPurchases:0,profitLoss:0,totalDiscount:0})}finally{a(!1)}},h=e=>{if(!e)return(new Date).toLocaleString("en-IN");return(e.seconds?new Date(1e3*e.seconds):new Date(e)).toLocaleString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},f=(e,t)=>{if(e.id)return e.id;const n=e.timestamp?e.timestamp.seconds?e.timestamp.seconds:Math.floor(e.timestamp/1e3):Math.floor(Date.now()/1e3);return"BILL".concat(n.toString().slice(-8))};return(0,rg.jsxs)("div",{className:"reports-view",children:[(0,rg.jsxs)("div",{className:"reports-header",children:[(0,rg.jsxs)("div",{className:"header-left",children:[(0,rg.jsx)(Sg,{size:24,className:"header-icon"}),(0,rg.jsx)("h1",{children:"Sales Reports"})]}),(0,rg.jsxs)("div",{className:"header-right",children:[(0,rg.jsxs)("button",{className:"analytics-btn",children:[(0,rg.jsx)(Cg,{size:16}),"Product Analytics"]}),(0,rg.jsxs)("div",{className:"filter-group",children:[(0,rg.jsx)(Py,{size:16}),(0,rg.jsx)("span",{children:"Filter:"}),(0,rg.jsxs)("select",{value:s,onChange:e=>c(e.target.value),className:"filter-select",children:[(0,rg.jsx)("option",{value:"all",children:"All Time"}),(0,rg.jsx)("option",{value:"today",children:"Today"}),(0,rg.jsx)("option",{value:"7days",children:"Last 7 Days"}),(0,rg.jsx)("option",{value:"30days",children:"Last 30 Days"}),(0,rg.jsx)("option",{value:"90days",children:"Last 90 Days"})]})]})]})]}),i?(0,rg.jsxs)("div",{className:"loading-state",children:[(0,rg.jsx)("div",{className:"loading-spinner"}),(0,rg.jsx)("p",{children:"Loading reports..."})]}):(0,rg.jsxs)(rg.Fragment,{children:[(0,rg.jsxs)("div",{className:"stats-grid",children:[(0,rg.jsxs)("div",{className:"stat-card bills",children:[(0,rg.jsx)("div",{className:"stat-header",children:(0,rg.jsx)("span",{className:"stat-label",children:"Total Bills"})}),(0,rg.jsx)("div",{className:"stat-value",children:l.totalBills})]}),(0,rg.jsxs)("div",{className:"stat-card sales",children:[(0,rg.jsx)("div",{className:"stat-header",children:(0,rg.jsx)("span",{className:"stat-label",children:"Total Sales"})}),(0,rg.jsxs)("div",{className:"stat-value",children:["\u20b9",l.totalSales.toFixed(2)]})]}),(0,rg.jsxs)("div",{className:"stat-card purchases",children:[(0,rg.jsx)("div",{className:"stat-header",children:(0,rg.jsx)("span",{className:"stat-label",children:"Total Purchases"})}),(0,rg.jsxs)("div",{className:"stat-value",children:["\u20b9",l.totalPurchases.toFixed(2)]})]}),(0,rg.jsxs)("div",{className:"stat-card profit",children:[(0,rg.jsx)("div",{className:"stat-header",children:(0,rg.jsx)("span",{className:"stat-label",children:"Profit/Loss"})}),(0,rg.jsxs)("div",{className:"stat-value profit-value",children:["\u20b9",l.profitLoss.toFixed(2)]})]}),(0,rg.jsxs)("div",{className:"stat-card discount",children:[(0,rg.jsx)("div",{className:"stat-header",children:(0,rg.jsx)("span",{className:"stat-label",children:"Total Discount"})}),(0,rg.jsxs)("div",{className:"stat-value",children:["\u20b9",l.totalDiscount.toFixed(2)]})]})]}),(0,rg.jsxs)("div",{className:"sales-table-container",children:[(0,rg.jsxs)("div",{className:"table-header",children:[(0,rg.jsx)("div",{className:"table-title",children:(0,rg.jsx)("h3",{children:"Sales Transactions"})}),(0,rg.jsxs)("button",{className:"export-btn",onClick:()=>{const e=[["Bill Number","Date & Time","Total","Payment","Items"],...r.map((e,t)=>[f(e),h(e.timestamp),"\u20b9".concat((e.total||0).toFixed(2)),e.paymentMode||"Cash",e.itemCount||0])].map(e=>e.join(",")).join("\n"),t=new Blob([e],{type:"text/csv"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download="sales_report_".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n)},children:[(0,rg.jsx)(jy,{size:16}),"Export CSV"]})]}),(0,rg.jsx)("div",{className:"table-wrapper",children:(0,rg.jsxs)("table",{className:"sales-table",children:[(0,rg.jsx)("thead",{children:(0,rg.jsxs)("tr",{children:[(0,rg.jsx)("th",{children:"BILL NUMBER"}),(0,rg.jsx)("th",{children:"DATE & TIME"}),(0,rg.jsx)("th",{children:"TOTAL"}),(0,rg.jsx)("th",{children:"PAYMENT"}),(0,rg.jsx)("th",{children:"ACTION"})]})}),(0,rg.jsx)("tbody",{children:0===r.length?(0,rg.jsx)("tr",{children:(0,rg.jsx)("td",{colSpan:"5",className:"no-data",children:(0,rg.jsxs)("div",{className:"no-data-content",children:[(0,rg.jsx)(vy,{size:48}),(0,rg.jsx)("p",{children:"No sales data available"}),(0,rg.jsx)("small",{children:"Sales will appear here once transactions are made"})]})})}):r.map((e,t)=>(0,rg.jsxs)("tr",{children:[(0,rg.jsx)("td",{className:"bill-number",children:f(e)}),(0,rg.jsx)("td",{className:"date-time",children:h(e.timestamp)}),(0,rg.jsxs)("td",{className:"total-amount",children:["\u20b9",(e.total||0).toFixed(2)]}),(0,rg.jsx)("td",{className:"payment-mode",children:(0,rg.jsx)("span",{className:"payment-badge ".concat((e.paymentMode||"Cash").toLowerCase()),children:e.paymentMode||"Cash"})}),(0,rg.jsx)("td",{className:"action-cell",children:(0,rg.jsx)("button",{className:"view-details-btn",onClick:()=>(e=>{const t={items:e.items||[],subtotal:e.subtotal||0,gst:e.gst||0,discount:e.discount||0,total:e.total||0,paymentMode:e.paymentMode||"Cash",itemCount:e.itemCount||0,timestamp:e.timestamp?e.timestamp.seconds?1e3*e.timestamp.seconds:e.timestamp:Date.now()};My(t)})(e),title:"View Bill Details",children:"View Details"})})]},e.id||t))})]})}),r.length>0&&(0,rg.jsx)("div",{className:"table-footer",children:(0,rg.jsxs)("div",{className:"table-info",children:["Showing ",r.length," transactions"]})})]})]})]})},By=fg("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Fy=fg("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Uy=fg("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Vy=fg("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),zy=t=>{let{isOpen:n,onClose:r,lowStockItems:o,onRestockComplete:i}=t;const[a,c]=(0,e.useState)([]),[l,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(0);(0,e.useEffect)(()=>{if(n&&o.length>0){const e=o.map(e=>s(s({},e),{},{restockQty:Math.max(50,20-e.stock),selected:e.stock<=5,estimatedCost:.7*e.price}));c(e)}},[n,o]),(0,e.useEffect)(()=>{const e=a.filter(e=>e.selected).reduce((e,t)=>e+t.restockQty*t.estimatedCost,0);h(e)},[a]);const f=(e,t)=>{c(n=>n.map(n=>n.id===e?s(s({},n),{},{restockQty:Math.max(1,parseInt(t)||0)}):n))};if(!n)return null;const p=a.filter(e=>e.selected).length,g=a.filter(e=>e.stock<=5).length;return(0,rg.jsx)("div",{className:"bulk-restock-overlay",children:(0,rg.jsxs)("div",{className:"bulk-restock-modal",children:[(0,rg.jsxs)("div",{className:"modal-header",children:[(0,rg.jsxs)("div",{className:"header-left",children:[(0,rg.jsx)(Fy,{size:24}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("h2",{children:"Bulk Restock Management"}),(0,rg.jsxs)("p",{children:[a.length," items need restocking"]})]})]}),(0,rg.jsx)("button",{className:"close-btn",onClick:r,children:(0,rg.jsx)(Km,{size:20})})]}),(0,rg.jsxs)("div",{className:"modal-content",children:[(0,rg.jsxs)("div",{className:"restock-summary",children:[(0,rg.jsxs)("div",{className:"summary-card critical",children:[(0,rg.jsx)(_y,{size:20}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("span",{className:"number",children:g}),(0,rg.jsx)("span",{className:"label",children:"Critical Items"})]})]}),(0,rg.jsxs)("div",{className:"summary-card selected",children:[(0,rg.jsx)(Uy,{size:20}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("span",{className:"number",children:p}),(0,rg.jsx)("span",{className:"label",children:"Selected Items"})]})]}),(0,rg.jsxs)("div",{className:"summary-card cost",children:[(0,rg.jsx)("span",{className:"currency",children:"\u20b9"}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("span",{className:"number",children:d.toFixed(2)}),(0,rg.jsx)("span",{className:"label",children:"Estimated Cost"})]})]})]}),(0,rg.jsxs)("div",{className:"quick-actions",children:[(0,rg.jsxs)("button",{className:"quick-btn",onClick:()=>{c(e=>e.map(e=>s(s({},e),{},{selected:e.stock<=5})))},children:["Select Critical (",g,")"]}),(0,rg.jsx)("button",{className:"quick-btn",onClick:()=>{c(e=>e.map(e=>s(s({},e),{},{selected:!0})))},children:"Select All"}),(0,rg.jsx)("button",{className:"quick-btn secondary",onClick:()=>{c(e=>e.map(e=>s(s({},e),{},{selected:!1})))},children:"Deselect All"})]}),(0,rg.jsxs)("div",{className:"restock-items",children:[(0,rg.jsxs)("div",{className:"items-header",children:[(0,rg.jsx)("span",{children:"Product"}),(0,rg.jsx)("span",{children:"Current Stock"}),(0,rg.jsx)("span",{children:"Restock Qty"}),(0,rg.jsx)("span",{children:"New Stock"}),(0,rg.jsx)("span",{children:"Cost"}),(0,rg.jsx)("span",{children:"Select"})]}),(0,rg.jsx)("div",{className:"items-list",children:a.map(e=>{const t=0===(n=e.stock)?{label:"OUT OF STOCK",color:"danger"}:n<=5?{label:"CRITICAL",color:"danger"}:n<=10?{label:"LOW",color:"warning"}:{label:"NORMAL",color:"success"};var n;const r=e.restockQty*e.estimatedCost;return(0,rg.jsxs)("div",{className:"restock-item ".concat(e.selected?"selected":""),children:[(0,rg.jsxs)("div",{className:"item-product",children:[(0,rg.jsx)("div",{className:"product-name",children:e.name}),(0,rg.jsxs)("div",{className:"product-id",children:["ID: ",e.id]}),(0,rg.jsx)("span",{className:"status-badge ".concat(t.color),children:t.label})]}),(0,rg.jsxs)("div",{className:"item-current-stock",children:[(0,rg.jsx)("span",{className:"stock-number",children:e.stock}),(0,rg.jsx)("span",{className:"stock-unit",children:"units"})]}),(0,rg.jsxs)("div",{className:"item-restock-qty",children:[(0,rg.jsx)("button",{className:"qty-btn",onClick:()=>f(e.id,e.restockQty-10),children:(0,rg.jsx)(Vy,{size:14})}),(0,rg.jsx)("input",{type:"number",value:e.restockQty,onChange:t=>f(e.id,t.target.value),min:"1",className:"qty-input"}),(0,rg.jsx)("button",{className:"qty-btn",onClick:()=>f(e.id,e.restockQty+10),children:(0,rg.jsx)(vm,{size:14})})]}),(0,rg.jsxs)("div",{className:"item-new-stock",children:[(0,rg.jsx)("span",{className:"new-stock-number",children:e.stock+e.restockQty}),(0,rg.jsx)("span",{className:"stock-unit",children:"units"})]}),(0,rg.jsxs)("div",{className:"item-cost",children:["\u20b9",r.toFixed(2)]}),(0,rg.jsx)("div",{className:"item-select",children:(0,rg.jsx)("input",{type:"checkbox",checked:e.selected,onChange:()=>{return t=e.id,void c(e=>e.map(e=>e.id===t?s(s({},e),{},{selected:!e.selected}):e));var t},className:"select-checkbox"})})]},e.id)})})]})]}),(0,rg.jsxs)("div",{className:"modal-footer",children:[(0,rg.jsxs)("div",{className:"footer-summary",children:[(0,rg.jsxs)("span",{children:["Selected: ",p," items"]}),(0,rg.jsxs)("span",{children:["Total Cost: \u20b9",d.toFixed(2)]})]}),(0,rg.jsxs)("div",{className:"footer-actions",children:[(0,rg.jsx)("button",{className:"btn-secondary",onClick:r,children:"Cancel"}),(0,rg.jsx)("button",{className:"btn-primary",onClick:async()=>{const e=a.filter(e=>e.selected);if(0===e.length)return void alert("Please select at least one item to restock");if(window.confirm("Confirm bulk restock for ".concat(e.length," items?\n")+"Total estimated cost: \u20b9".concat(d.toFixed(2),"\n\n")+"This will update inventory levels immediately.")){u(!0);try{const t=e.map(e=>qg(e.id,{stock:e.stock+e.restockQty,lastRestocked:new Date,restockHistory:{date:new Date,quantity:e.restockQty,cost:e.restockQty*e.estimatedCost}}));await Promise.all(t),alert("Successfully restocked ".concat(e.length," items!")),i&&i(e),r()}catch(t){console.error("Error during bulk restock:",t),alert("Error occurred during restock. Please try again.")}finally{u(!1)}}},disabled:0===p||l,children:l?"Processing...":"Restock ".concat(p," Items")})]})]})]})})},Hy=t=>{let{inventory:n}=t;const[r,o]=(0,e.useState)([]),[i,a]=(0,e.useState)(""),[s,c]=(0,e.useState)(10),[l,u]=(0,e.useState)("stock"),[d,h]=(0,e.useState)(!1),f=(0,e.useCallback)(()=>{let e=n.filter(e=>e.stock<=s);i&&(e=e.filter(e=>e.name.toLowerCase().includes(i.toLowerCase()))),e.sort((e,t)=>{switch(l){case"stock":default:return e.stock-t.stock;case"name":return e.name.localeCompare(t.name);case"price":return t.price-e.price}}),o(e)},[n,i,s,l]);(0,e.useEffect)(()=>{f()},[f]);const p=async(e,t)=>{const r=prompt("Enter restock quantity for ".concat(t,":"),"50");if(r&&!isNaN(r)&&parseInt(r)>0)try{const o=n.find(t=>t.id===e);o&&(await qg(e,{stock:o.stock+parseInt(r),lastRestocked:new Date}),alert("Successfully restocked ".concat(t,": +").concat(r," units")),window.location.reload())}catch(o){console.error("Error restocking item:",o),alert("Error occurred while restocking. Please try again.")}},g=r.filter(e=>e.stock<=5),m=r.filter(e=>0===e.stock);return(0,rg.jsxs)("div",{className:"low-stock-view",children:[(0,rg.jsxs)("div",{className:"view-header",children:[(0,rg.jsx)("h1",{children:"Low Stock Management"}),(0,rg.jsxs)("div",{className:"header-actions",children:[(0,rg.jsxs)("button",{className:"btn-secondary",onClick:()=>window.location.reload(),children:[(0,rg.jsx)(wy,{size:20}),"Refresh"]}),(0,rg.jsxs)("button",{className:"btn-primary",onClick:()=>{0!==r.length?h(!0):alert("No items to restock")},children:[(0,rg.jsx)(vm,{size:20}),"Bulk Restock"]})]})]}),(0,rg.jsxs)("div",{className:"alert-summary",children:[(0,rg.jsxs)("div",{className:"alert-card critical",children:[(0,rg.jsx)("div",{className:"alert-icon",children:(0,rg.jsx)(xg,{size:24})}),(0,rg.jsxs)("div",{className:"alert-content",children:[(0,rg.jsx)("div",{className:"alert-number",children:m.length}),(0,rg.jsx)("div",{className:"alert-label",children:"Out of Stock"})]})]}),(0,rg.jsxs)("div",{className:"alert-card warning",children:[(0,rg.jsx)("div",{className:"alert-icon",children:(0,rg.jsx)(Cg,{size:24})}),(0,rg.jsxs)("div",{className:"alert-content",children:[(0,rg.jsx)("div",{className:"alert-number",children:g.length}),(0,rg.jsx)("div",{className:"alert-label",children:"Critical Stock"})]})]}),(0,rg.jsxs)("div",{className:"alert-card info",children:[(0,rg.jsx)("div",{className:"alert-icon",children:(0,rg.jsx)(xg,{size:24})}),(0,rg.jsxs)("div",{className:"alert-content",children:[(0,rg.jsx)("div",{className:"alert-number",children:r.length}),(0,rg.jsx)("div",{className:"alert-label",children:"Total Low Stock"})]})]})]}),(0,rg.jsxs)("div",{className:"filters-section",children:[(0,rg.jsxs)("div",{className:"search-box",children:[(0,rg.jsx)(By,{size:20}),(0,rg.jsx)("input",{type:"text",placeholder:"Search products...",value:i,onChange:e=>a(e.target.value)})]}),(0,rg.jsxs)("div",{className:"filter-controls",children:[(0,rg.jsxs)("div",{className:"filter-group",children:[(0,rg.jsx)("label",{children:"Stock Threshold:"}),(0,rg.jsxs)("select",{value:s,onChange:e=>c(Number(e.target.value)),children:[(0,rg.jsx)("option",{value:5,children:"5 or less"}),(0,rg.jsx)("option",{value:10,children:"10 or less"}),(0,rg.jsx)("option",{value:20,children:"20 or less"}),(0,rg.jsx)("option",{value:50,children:"50 or less"})]})]}),(0,rg.jsxs)("div",{className:"filter-group",children:[(0,rg.jsx)("label",{children:"Sort by:"}),(0,rg.jsxs)("select",{value:l,onChange:e=>u(e.target.value),children:[(0,rg.jsx)("option",{value:"stock",children:"Stock Level"}),(0,rg.jsx)("option",{value:"name",children:"Product Name"}),(0,rg.jsx)("option",{value:"price",children:"Price"})]})]})]})]}),(0,rg.jsx)("div",{className:"low-stock-table",children:(0,rg.jsxs)("table",{children:[(0,rg.jsx)("thead",{children:(0,rg.jsxs)("tr",{children:[(0,rg.jsx)("th",{children:"Product"}),(0,rg.jsx)("th",{children:"Current Stock"}),(0,rg.jsx)("th",{children:"Status"}),(0,rg.jsx)("th",{children:"Price"}),(0,rg.jsx)("th",{children:"Last Updated"}),(0,rg.jsx)("th",{children:"Actions"})]})}),(0,rg.jsx)("tbody",{children:0===r.length?(0,rg.jsx)("tr",{children:(0,rg.jsxs)("td",{colSpan:"6",className:"no-data",children:[(0,rg.jsx)(Cg,{size:48}),(0,rg.jsx)("p",{children:"No low stock items found"}),(0,rg.jsx)("small",{children:"All products are well stocked!"})]})}):r.map(e=>{const t=0===(n=e.stock)?{status:"out-of-stock",label:"Out of Stock",color:"danger"}:n<=5?{status:"critical",label:"Critical",color:"danger"}:n<=10?{status:"low",label:"Low Stock",color:"warning"}:{status:"normal",label:"Normal",color:"success"};var n;return(0,rg.jsxs)("tr",{className:t.status,children:[(0,rg.jsx)("td",{children:(0,rg.jsxs)("div",{className:"product-info",children:[(0,rg.jsx)("div",{className:"product-name",children:e.name}),(0,rg.jsxs)("div",{className:"product-id",children:["ID: ",e.id]})]})}),(0,rg.jsx)("td",{children:(0,rg.jsxs)("div",{className:"stock-info",children:[(0,rg.jsx)("span",{className:"stock-number",children:e.stock}),(0,rg.jsx)("span",{className:"stock-unit",children:"units"})]})}),(0,rg.jsx)("td",{children:(0,rg.jsx)("span",{className:"status-badge \u20b9{stockInfo.color}",children:t.label})}),(0,rg.jsxs)("td",{children:["\u20b9",e.price.toFixed(2)]}),(0,rg.jsx)("td",{children:(0,rg.jsx)("span",{className:"last-updated",children:e.updatedAt?new Date(1e3*e.updatedAt.seconds).toLocaleDateString("en-IN"):(new Date).toLocaleDateString("en-IN")})}),(0,rg.jsx)("td",{children:(0,rg.jsxs)("div",{className:"action-buttons",children:[(0,rg.jsx)("button",{className:"btn-icon",onClick:()=>p(e.id,e.name),title:"Restock Item",children:(0,rg.jsx)(vm,{size:16})}),(0,rg.jsx)("button",{className:"btn-icon",title:"Edit Product",children:(0,rg.jsx)(Gm,{size:16})})]})})]},e.id)})})]})}),r.length>0&&(0,rg.jsxs)("div",{className:"restock-recommendations",children:[(0,rg.jsx)("h3",{children:"Restock Recommendations"}),(0,rg.jsx)("div",{className:"recommendations-grid",children:r.slice(0,6).map(e=>(0,rg.jsxs)("div",{className:"recommendation-card",children:[(0,rg.jsxs)("div",{className:"rec-header",children:[(0,rg.jsx)("span",{className:"product-name",children:e.name}),(0,rg.jsxs)("span",{className:"stock-badge \u20b9{getStockStatus(item.stock).color}",children:[e.stock," left"]})]}),(0,rg.jsxs)("div",{className:"rec-content",children:[(0,rg.jsxs)("div",{className:"rec-suggestion",children:[(0,rg.jsx)("span",{children:"Suggested restock: "}),(0,rg.jsxs)("strong",{children:[Math.max(50,5*e.stock)," units"]})]}),(0,rg.jsxs)("div",{className:"rec-cost",children:[(0,rg.jsx)("span",{children:"Estimated cost: "}),(0,rg.jsxs)("strong",{children:["\u20b9",(e.price*Math.max(50,5*e.stock)).toFixed(2)]})]})]}),(0,rg.jsx)("button",{className:"rec-action",onClick:()=>p(e.id,e.name),children:"Request Restock"})]},e.id))})]}),(0,rg.jsx)(zy,{isOpen:d,onClose:()=>h(!1),lowStockItems:r,onRestockComplete:e=>{window.location.reload()}})]})},Gy=t=>{let{inventory:n}=t;const[r,o]=(0,e.useState)([]),[i,a]=(0,e.useState)(!0),[s,c]=(0,e.useState)("all"),[l,u]=(0,e.useState)("today"),d=(0,e.useCallback)(async()=>{a(!0);try{const e=(await Kg(20)).map((e,t)=>({id:e.id||"activity-".concat(t),type:"sale",description:"Sale completed - ".concat(e.itemCount||0," items"),amount:e.total||0,timestamp:e.timestamp?e.timestamp.seconds?new Date(1e3*e.timestamp.seconds):new Date(e.timestamp):new Date,status:"completed",user:"System"}));o(e)}catch(e){console.error("Error loading activity data:",e),o([])}finally{a(!1)}},[]);(0,e.useEffect)(()=>{d()},[d]);const h=e=>{switch(e){case"sale":return(0,rg.jsx)(Fy,{size:16});case"inventory":return(0,rg.jsx)(Cg,{size:16});case"user":return(0,rg.jsx)(gg,{size:16});case"system":return(0,rg.jsx)(Ng,{size:16});default:return(0,rg.jsx)(Ig,{size:16})}},f=e=>{switch(e){case"completed":case"success":return(0,rg.jsx)(by,{size:16,className:"text-green-500"});case"warning":return(0,rg.jsx)(_y,{size:16,className:"text-yellow-500"});case"error":return(0,rg.jsx)(_y,{size:16,className:"text-red-500"});default:return(0,rg.jsx)(Fm,{size:16,className:"text-blue-500"})}},p=r.filter(e=>"all"===s||e.type===s),g=e=>{const t=new Date-new Date(e),n=Math.floor(t/6e4),r=Math.floor(n/60),o=Math.floor(r/24);return o>0?"".concat(o,"d ago"):r>0?"".concat(r,"h ago"):n>0?"".concat(n,"m ago"):"Just now"};return(0,rg.jsxs)("div",{className:"activity-view",children:[(0,rg.jsxs)("div",{className:"view-header",children:[(0,rg.jsxs)("div",{className:"header-left",children:[(0,rg.jsx)(Ig,{size:24}),(0,rg.jsx)("h1",{children:"Activity Log"})]}),(0,rg.jsxs)("div",{className:"header-actions",children:[(0,rg.jsxs)("div",{className:"filter-group",children:[(0,rg.jsx)(Py,{size:16}),(0,rg.jsxs)("select",{value:s,onChange:e=>c(e.target.value),className:"filter-select",children:[(0,rg.jsx)("option",{value:"all",children:"All Activities"}),(0,rg.jsx)("option",{value:"sale",children:"Sales"}),(0,rg.jsx)("option",{value:"inventory",children:"Inventory"}),(0,rg.jsx)("option",{value:"user",children:"Users"}),(0,rg.jsx)("option",{value:"system",children:"System"})]})]}),(0,rg.jsxs)("div",{className:"filter-group",children:[(0,rg.jsx)(py,{size:16}),(0,rg.jsxs)("select",{value:l,onChange:e=>u(e.target.value),className:"filter-select",children:[(0,rg.jsx)("option",{value:"today",children:"Today"}),(0,rg.jsx)("option",{value:"week",children:"This Week"}),(0,rg.jsx)("option",{value:"month",children:"This Month"}),(0,rg.jsx)("option",{value:"all",children:"All Time"})]})]})]})]}),i?(0,rg.jsxs)("div",{className:"loading-state",children:[(0,rg.jsx)("div",{className:"loading-spinner"}),(0,rg.jsx)("p",{children:"Loading activities..."})]}):(0,rg.jsxs)("div",{className:"activities-container",children:[(0,rg.jsxs)("div",{className:"activities-summary",children:[(0,rg.jsxs)("div",{className:"summary-card",children:[(0,rg.jsx)("span",{className:"summary-number",children:p.length}),(0,rg.jsx)("span",{className:"summary-label",children:"Total Activities"})]}),(0,rg.jsxs)("div",{className:"summary-card",children:[(0,rg.jsx)("span",{className:"summary-number",children:p.filter(e=>"sale"===e.type).length}),(0,rg.jsx)("span",{className:"summary-label",children:"Sales"})]}),(0,rg.jsxs)("div",{className:"summary-card",children:[(0,rg.jsx)("span",{className:"summary-number",children:p.filter(e=>"completed"===e.status).length}),(0,rg.jsx)("span",{className:"summary-label",children:"Completed"})]})]}),(0,rg.jsx)("div",{className:"activities-list",children:0===p.length?(0,rg.jsxs)("div",{className:"no-activities",children:[(0,rg.jsx)(Ig,{size:48}),(0,rg.jsx)("h3",{children:"No Activities Found"}),(0,rg.jsx)("p",{children:"No activities match your current filters."})]}):p.map(e=>(0,rg.jsxs)("div",{className:"activity-item ".concat(e.status),children:[(0,rg.jsx)("div",{className:"activity-icon",children:h(e.type)}),(0,rg.jsxs)("div",{className:"activity-content",children:[(0,rg.jsxs)("div",{className:"activity-header",children:[(0,rg.jsx)("span",{className:"activity-description",children:e.description}),(0,rg.jsx)("span",{className:"activity-time",children:g(e.timestamp)})]}),(0,rg.jsxs)("div",{className:"activity-details",children:[(0,rg.jsxs)("span",{className:"activity-user",children:["by ",e.user]}),e.amount&&(0,rg.jsxs)("span",{className:"activity-amount",children:["\u20b9",e.amount.toFixed(2)]})]})]}),(0,rg.jsx)("div",{className:"activity-status",children:f(e.status)})]},e.id))})]})]})},Wy=fg("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),qy=fg("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),Xy=fg("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),Ky=fg("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function Yy(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}var Qy=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zy=function(e){function t(t,n){var r=this.constructor,o=e.call(this,t,n)||this;return Object.defineProperty(o,"name",{value:r.name,enumerable:!1,configurable:!0}),function(e,t){var n=Object.setPrototypeOf;n?n(e,t):e.__proto__=t}(o,r.prototype),Yy(o),o}return Qy(t,e),t}(Error);var $y=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Jy=function(e){function t(t){void 0===t&&(t=void 0);var n=e.call(this,t)||this;return n.message=t,n}return $y(t,e),t.prototype.getKind=function(){return this.constructor.kind},t.kind="Exception",t}(Zy);var ev=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const tv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ev(t,e),t.kind="ArgumentException",t}(Jy);var nv=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const rv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nv(t,e),t.kind="IllegalArgumentException",t}(Jy);const ov=function(){function e(e){if(this.binarizer=e,null===e)throw new rv("Binarizer must be non-null.")}return e.prototype.getWidth=function(){return this.binarizer.getWidth()},e.prototype.getHeight=function(){return this.binarizer.getHeight()},e.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},e.prototype.getBlackMatrix=function(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},e.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},e.prototype.crop=function(t,n,r,o){var i=this.binarizer.getLuminanceSource().crop(t,n,r,o);return new e(this.binarizer.createBinarizer(i))},e.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},e.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new e(this.binarizer.createBinarizer(t))},e.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new e(this.binarizer.createBinarizer(t))},e.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(e){return""}},e}();var iv=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const av=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iv(t,e),t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(Jy);const sv=function(){function e(e){this.source=e}return e.prototype.getLuminanceSource=function(){return this.source},e.prototype.getWidth=function(){return this.source.getWidth()},e.prototype.getHeight=function(){return this.source.getHeight()},e}();var cv=function(){function e(){}return e.arraycopy=function(e,t,n,r,o){for(;o--;)n[r++]=e[t++]},e.currentTimeMillis=function(){return Date.now()},e}();const lv=cv;var uv=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const dv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uv(t,e),t.kind="IndexOutOfBoundsException",t}(Jy);var hv=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const fv=function(e){function t(t,n){void 0===t&&(t=void 0),void 0===n&&(n=void 0);var r=e.call(this,n)||this;return r.index=t,r.message=n,r}return hv(t,e),t.kind="ArrayIndexOutOfBoundsException",t}(dv);var pv=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},gv=function(){function e(){}return e.fill=function(e,t){for(var n=0,r=e.length;n<r;n++)e[n]=t},e.fillWithin=function(t,n,r,o){e.rangeCheck(t.length,n,r);for(var i=n;i<r;i++)t[i]=o},e.rangeCheck=function(e,t,n){if(t>n)throw new rv("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new fv(t);if(n>e)throw new fv(n)},e.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},e.create=function(e,t,n){return Array.from({length:e}).map(function(e){return Array.from({length:t}).fill(n)})},e.createInt32Array=function(e,t,n){return Array.from({length:e}).map(function(e){return Int32Array.from({length:t}).fill(n)})},e.equals=function(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0},e.hashCode=function(e){var t,n;if(null===e)return 0;var r=1;try{for(var o=pv(e),i=o.next();!i.done;i=o.next()){r=31*r+i.value}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},e.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},e.copyOf=function(e,t){return e.slice(0,t)},e.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},e.copyOfRange=function(e,t,n){var r=n-t,o=new Int32Array(r);return lv.arraycopy(e,t,o,0,r),o},e.binarySearch=function(t,n,r){void 0===r&&(r=e.numberComparator);for(var o=0,i=t.length-1;o<=i;){var a=i+o>>1,s=r(n,t[a]);if(s>0)o=a+1;else{if(!(s<0))return a;i=a-1}}return-o-1},e.numberComparator=function(e,t){return e-t},e}();const mv=gv;var yv=function(){function e(){}return e.numberOfTrailingZeros=function(e){var t;if(0===e)return 32;var n=31;return 0!==(t=e<<16)&&(n-=16,e=t),0!==(t=e<<8)&&(n-=8,e=t),0!==(t=e<<4)&&(n-=4,e=t),0!==(t=e<<2)&&(n-=2,e=t),n-(e<<1>>>31)},e.numberOfLeadingZeros=function(e){if(0===e)return 32;var t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31},e.toHexString=function(e){return e.toString(16)},e.toBinaryString=function(e){return String(parseInt(String(e),2))},e.bitCount=function(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)},e.truncDivision=function(e,t){return Math.trunc(e/t)},e.parseInt=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},e.MIN_VALUE_32_BITS=-2147483648,e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}();const vv=yv;var wv=function(){function e(t,n){void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,this.bits=void 0===n||null===n?e.makeArray(t):n)}return e.prototype.getSize=function(){return this.size},e.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},e.prototype.ensureCapacity=function(t){if(t>32*this.bits.length){var n=e.makeArray(t);lv.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},e.prototype.get=function(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))},e.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(31&e)},e.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(31&e)},e.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,r=Math.floor(e/32),o=n[r];o&=~((1<<(31&e))-1);for(var i=n.length;0===o;){if(++r===i)return t;o=n[r]}var a=32*r+vv.numberOfTrailingZeros(o);return a>t?t:a},e.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,r=Math.floor(e/32),o=~n[r];o&=~((1<<(31&e))-1);for(var i=n.length;0===o;){if(++r===i)return t;o=~n[r]}var a=32*r+vv.numberOfTrailingZeros(o);return a>t?t:a},e.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},e.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new rv;if(t!==e){t--;for(var n=Math.floor(e/32),r=Math.floor(t/32),o=this.bits,i=n;i<=r;i++){var a=(2<<(i<r?31:31&t))-(1<<(i>n?0:31&e));o[i]|=a}}},e.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},e.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new rv;if(t===e)return!0;t--;for(var r=Math.floor(e/32),o=Math.floor(t/32),i=this.bits,a=r;a<=o;a++){var s=(2<<(a<o?31:31&t))-(1<<(a>r?0:31&e))&4294967295;if((i[a]&s)!==(n?s:0))return!1}return!0},e.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},e.prototype.appendBits=function(e,t){if(t<0||t>32)throw new rv("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit(1===(e>>n-1&1))},e.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},e.prototype.xor=function(e){if(this.size!==e.size)throw new rv("Sizes don't match");for(var t=this.bits,n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]},e.prototype.toBytes=function(e,t,n,r){for(var o=0;o<r;o++){for(var i=0,a=0;a<8;a++)this.get(e)&&(i|=1<<7-a),e++;t[n+o]=i}},e.prototype.getBitArray=function(){return this.bits},e.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits,o=0;o<n;o++){var i=r[o];i=(i=(i=(i=(i=i>>1&1431655765|(1431655765&i)<<1)>>2&858993459|(858993459&i)<<2)>>4&252645135|(252645135&i)<<4)>>8&16711935|(16711935&i)<<8)>>16&65535|(65535&i)<<16,e[t-o]=i}if(this.size!==32*n){var a=32*n-this.size,s=e[0]>>>a;for(o=1;o<n;o++){var c=e[o];s|=c<<32-a,e[o-1]=s,s=c>>>a}e[n-1]=s}this.bits=e},e.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.size===n.size&&mv.equals(this.bits,n.bits)},e.prototype.hashCode=function(){return 31*this.size+mv.hashCode(this.bits)},e.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e},e.prototype.clone=function(){return new e(this.size,this.bits.slice())},e.prototype.toArray=function(){for(var e=[],t=0,n=this.size;t<n;t++)e.push(this.get(t));return e},e}();const bv=wv;var _v;!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",e[e.ASSUME_GS1=8]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"}(_v||(_v={}));const Cv=_v;var Ev=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Sv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ev(t,e),t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(Jy);var Av,Iv=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(Av||(Av={}));var xv=function(){function e(t,n,r){for(var o,i,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];this.valueIdentifier=t,this.name=r,this.values="number"===typeof n?Int32Array.from([n]):n,this.otherEncodingNames=a,e.VALUE_IDENTIFIER_TO_ECI.set(t,this),e.NAME_TO_ECI.set(r,this);for(var c=this.values,l=0,u=c.length;l!==u;l++){var d=c[l];e.VALUES_TO_ECI.set(d,this)}try{for(var h=Iv(a),f=h.next();!f.done;f=h.next()){var p=f.value;e.NAME_TO_ECI.set(p,this)}}catch(g){o={error:g}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}}return e.prototype.getValueIdentifier=function(){return this.valueIdentifier},e.prototype.getName=function(){return this.name},e.prototype.getValue=function(){return this.values[0]},e.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new Sv("incorect value");var n=e.VALUES_TO_ECI.get(t);if(void 0===n)throw new Sv("incorect value");return n},e.getCharacterSetECIByName=function(t){var n=e.NAME_TO_ECI.get(t);if(void 0===n)throw new Sv("incorect value");return n},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.getName()===n.getName()},e.VALUE_IDENTIFIER_TO_ECI=new Map,e.VALUES_TO_ECI=new Map,e.NAME_TO_ECI=new Map,e.Cp437=new e(Av.Cp437,Int32Array.from([0,2]),"Cp437"),e.ISO8859_1=new e(Av.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),e.ISO8859_2=new e(Av.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),e.ISO8859_3=new e(Av.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),e.ISO8859_4=new e(Av.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),e.ISO8859_5=new e(Av.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),e.ISO8859_6=new e(Av.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),e.ISO8859_7=new e(Av.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),e.ISO8859_8=new e(Av.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),e.ISO8859_9=new e(Av.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),e.ISO8859_10=new e(Av.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),e.ISO8859_11=new e(Av.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),e.ISO8859_13=new e(Av.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),e.ISO8859_14=new e(Av.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),e.ISO8859_15=new e(Av.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),e.ISO8859_16=new e(Av.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),e.SJIS=new e(Av.SJIS,20,"SJIS","Shift_JIS"),e.Cp1250=new e(Av.Cp1250,21,"Cp1250","windows-1250"),e.Cp1251=new e(Av.Cp1251,22,"Cp1251","windows-1251"),e.Cp1252=new e(Av.Cp1252,23,"Cp1252","windows-1252"),e.Cp1256=new e(Av.Cp1256,24,"Cp1256","windows-1256"),e.UnicodeBigUnmarked=new e(Av.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),e.UTF8=new e(Av.UTF8,26,"UTF8","UTF-8"),e.ASCII=new e(Av.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),e.Big5=new e(Av.Big5,28,"Big5"),e.GB18030=new e(Av.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),e.EUC_KR=new e(Av.EUC_KR,30,"EUC_KR","EUC-KR"),e}();const Nv=xv;var Tv=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const kv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Tv(t,e),t.kind="UnsupportedOperationException",t}(Jy);const Ov=function(){function e(){}return e.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},e.shouldDecodeOnFallback=function(t){return!e.isBrowser()&&"ISO-8859-1"===t},e.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)},e.isBrowser=function(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)},e.encodingName=function(e){return"string"===typeof e?e:e.getName()},e.encodingCharacterSet=function(e){return e instanceof Nv?e:Nv.getCharacterSetECIByName(e)},e.decodeFallback=function(t,n){var r=this.encodingCharacterSet(n);if(e.isDecodeFallbackSupported(r)){for(var o="",i=0,a=t.length;i<a;i++){var s=t[i].toString(16);s.length<2&&(s="0"+s),o+="%"+s}return decodeURIComponent(o)}if(r.equals(Nv.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new kv("Encoding "+this.encodingName(n)+" not supported by fallback.")},e.isDecodeFallbackSupported=function(e){return e.equals(Nv.UTF8)||e.equals(Nv.ISO8859_1)||e.equals(Nv.ASCII)},e.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))).split(""),n=[],r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)},e}();const Rv=function(){function e(){}return e.castAsNonUtf8Char=function(e,t){void 0===t&&(t=null);var n=t?t.getName():this.ISO88591;return Ov.decode(new Uint8Array([e]),n)},e.guessEncoding=function(t,n){if(null!==n&&void 0!==n&&void 0!==n.get(Cv.CHARACTER_SET))return n.get(Cv.CHARACTER_SET).toString();for(var r=t.length,o=!0,i=!0,a=!0,s=0,c=0,l=0,u=0,d=0,h=0,f=0,p=0,g=0,m=0,y=0,v=t.length>3&&239===t[0]&&187===t[1]&&191===t[2],w=0;w<r&&(o||i||a);w++){var b=255&t[w];a&&(s>0?0===(128&b)?a=!1:s--:0!==(128&b)&&(0===(64&b)?a=!1:(s++,0===(32&b)?c++:(s++,0===(16&b)?l++:(s++,0===(8&b)?u++:a=!1))))),o&&(b>127&&b<160?o=!1:b>159&&(b<192||215===b||247===b)&&y++),i&&(d>0?b<64||127===b||b>252?i=!1:d--:128===b||160===b||b>239?i=!1:b>160&&b<224?(h++,p=0,++f>g&&(g=f)):b>127?(d++,f=0,++p>m&&(m=p)):(f=0,p=0))}return a&&s>0&&(a=!1),i&&d>0&&(i=!1),a&&(v||c+l+u>0)?e.UTF8:i&&(e.ASSUME_SHIFT_JIS||g>=3||m>=3)?e.SHIFT_JIS:o&&i?2===g&&2===h||10*y>=r?e.SHIFT_JIS:e.ISO88591:o?e.ISO88591:i?e.SHIFT_JIS:a?e.UTF8:e.PLATFORM_DEFAULT_ENCODING},e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(e,n,o,i,a,s){if("%%"===e)return"%";if(void 0!==t[++r]){e=i?parseInt(i.substr(1)):void 0;var c,l=a?parseInt(a.substr(1)):void 0;switch(s){case"s":c=t[r];break;case"c":c=t[r][0];break;case"f":c=parseFloat(t[r]).toFixed(e);break;case"p":c=parseFloat(t[r]).toPrecision(e);break;case"e":c=parseFloat(t[r]).toExponential(e);break;case"x":c=parseInt(t[r]).toString(l||16);break;case"d":c=parseFloat(parseInt(t[r],l||10).toPrecision(e)).toFixed(0)}c="object"===typeof c?JSON.stringify(c):(+c).toString(l);for(var u=parseInt(o),d=o&&o[0]+""==="0"?"0":" ";c.length<u;)c=void 0!==n?c+d:d+c;return c}})},e.getBytes=function(e,t){return Ov.encode(e,t)},e.getCharCode=function(e,t){return void 0===t&&(t=0),e.charCodeAt(t)},e.getCharAt=function(e){return String.fromCharCode(e)},e.SHIFT_JIS=Nv.SJIS.getName(),e.GB2312="GB2312",e.ISO88591=Nv.ISO8859_1.getName(),e.EUC_JP="EUC_JP",e.UTF8=Nv.UTF8.getName(),e.PLATFORM_DEFAULT_ENCODING=e.UTF8,e.ASSUME_SHIFT_JIS=!1,e}();const Pv=function(){function e(e){void 0===e&&(e=""),this.value=e}return e.prototype.enableDecoding=function(e){return this.encoding=e,this},e.prototype.append=function(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=Rv.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},e.prototype.appendChars=function(e,t,n){for(var r=t;t<t+n;r++)this.append(e[r]);return this},e.prototype.length=function(){return this.value.length},e.prototype.charAt=function(e){return this.value.charAt(e)},e.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},e.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},e.prototype.substring=function(e,t){return this.value.substring(e,t)},e.prototype.setLengthToZero=function(){this.value=""},e.prototype.toString=function(){return this.value},e.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},e}();var jv=function(){function e(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new rv("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((e+31)/32)),this.rowSize=n,void 0!==r&&null!==r||(this.bits=new Int32Array(this.rowSize*this.height))}return e.parseFromBooleanArray=function(t){for(var n=t.length,r=t[0].length,o=new e(r,n),i=0;i<n;i++)for(var a=t[i],s=0;s<r;s++)a[s]&&o.set(s,i);return o},e.parseFromString=function(t,n,r){if(null===t)throw new rv("stringRepresentation cannot be null");for(var o=new Array(t.length),i=0,a=0,s=-1,c=0,l=0;l<t.length;)if("\n"===t.charAt(l)||"\r"===t.charAt(l)){if(i>a){if(-1===s)s=i-a;else if(i-a!==s)throw new rv("row lengths do not match");a=i,c++}l++}else if(t.substring(l,l+n.length)===n)l+=n.length,o[i]=!0,i++;else{if(t.substring(l,l+r.length)!==r)throw new rv("illegal character encountered: "+t.substring(l));l+=r.length,o[i]=!1,i++}if(i>a){if(-1===s)s=i-a;else if(i-a!==s)throw new rv("row lengths do not match");c++}for(var u=new e(s,c),d=0;d<i;d++)o[d]&&u.set(Math.floor(d%s),Math.floor(d/s));return u},e.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[n]>>>(31&e)&1)},e.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295},e.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)},e.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295},e.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new rv("input matrix dimensions do not match");for(var t=new bv(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits,o=0,i=this.height;o<i;o++)for(var a=o*n,s=e.getRow(o,t).getBitArray(),c=0;c<n;c++)r[a+c]^=s[c]},e.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},e.prototype.setRegion=function(e,t,n,r){if(t<0||e<0)throw new rv("Left and top must be nonnegative");if(r<1||n<1)throw new rv("Height and width must be at least 1");var o=e+n,i=t+r;if(i>this.height||o>this.width)throw new rv("The region must fit inside the matrix");for(var a=this.rowSize,s=this.bits,c=t;c<i;c++)for(var l=c*a,u=e;u<o;u++)s[l+Math.floor(u/32)]|=1<<(31&u)&4294967295},e.prototype.getRow=function(e,t){null===t||void 0===t||t.getSize()<this.width?t=new bv(this.width):t.clear();for(var n=this.rowSize,r=this.bits,o=e*n,i=0;i<n;i++)t.setBulk(32*i,r[o+i]);return t},e.prototype.setRow=function(e,t){lv.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},e.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new bv(e),r=new bv(e),o=0,i=Math.floor((t+1)/2);o<i;o++)n=this.getRow(o,n),r=this.getRow(t-1-o,r),n.reverse(),r.reverse(),this.setRow(o,r),this.setRow(t-1-o,n)},e.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,r=this.bits,o=e,i=t,a=-1,s=-1,c=0;c<t;c++)for(var l=0;l<n;l++){var u=r[c*n+l];if(0!==u){if(c<i&&(i=c),c>s&&(s=c),32*l<o){for(var d=0;0===(u<<31-d&4294967295);)d++;32*l+d<o&&(o=32*l+d)}if(32*l+31>a){for(d=31;u>>>d===0;)d--;32*l+d>a&&(a=32*l+d)}}}return a<o||s<i?null:Int32Array.from([o,i,a-o+1,s-i+1])},e.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&0===t[n];)n++;if(n===t.length)return null;for(var r=n/e,o=n%e*32,i=t[n],a=0;0===(i<<31-a&4294967295);)a++;return o+=a,Int32Array.from([o,r])},e.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&0===t[n];)n--;if(n<0)return null;for(var r=Math.floor(n/e),o=32*Math.floor(n%e),i=t[n],a=31;i>>>a===0;)a--;return o+=a,Int32Array.from([o,r])},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getRowSize=function(){return this.rowSize},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&mv.equals(this.bits,n.bits)},e.prototype.hashCode=function(){var e=this.width;return e=31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+mv.hashCode(this.bits)},e.prototype.toString=function(e,t,n){return void 0===e&&(e="X "),void 0===t&&(t="  "),void 0===n&&(n="\n"),this.buildToString(e,t,n)},e.prototype.buildToString=function(e,t,n){for(var r=new Pv,o=0,i=this.height;o<i;o++){for(var a=0,s=this.width;a<s;a++)r.append(this.get(a,o)?e:t);r.append(n)}return r.toString()},e.prototype.clone=function(){return new e(this.width,this.height,this.rowSize,this.bits.slice())},e}();const Dv=jv;var Mv=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Lv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mv(t,e),t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(Jy);var Bv=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fv=function(e){function t(n){var r=e.call(this,n)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return Bv(t,e),t.prototype.getBlackRow=function(e,n){var r=this.getLuminanceSource(),o=r.getWidth();void 0===n||null===n||n.getSize()<o?n=new bv(o):n.clear(),this.initArrays(o);for(var i=r.getRow(e,this.luminances),a=this.buckets,s=0;s<o;s++)a[(255&i[s])>>t.LUMINANCE_SHIFT]++;var c=t.estimateBlackPoint(a);if(o<3)for(s=0;s<o;s++)(255&i[s])<c&&n.set(s);else{var l=255&i[0],u=255&i[1];for(s=1;s<o-1;s++){var d=255&i[s+1];(4*u-l-d)/2<c&&n.set(s),l=u,u=d}}return n},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),n=e.getWidth(),r=e.getHeight(),o=new Dv(n,r);this.initArrays(n);for(var i=this.buckets,a=1;a<5;a++)for(var s=Math.floor(r*a/5),c=e.getRow(s,this.luminances),l=Math.floor(4*n/5),u=Math.floor(n/5);u<l;u++){i[(255&c[u])>>t.LUMINANCE_SHIFT]++}var d=t.estimateBlackPoint(i),h=e.getMatrix();for(a=0;a<r;a++){var f=a*n;for(u=0;u<n;u++){(255&h[f+u])<d&&o.set(u,a)}}return o},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var n=this.buckets,r=0;r<t.LUMINANCE_BUCKETS;r++)n[r]=0},t.estimateBlackPoint=function(e){for(var n=e.length,r=0,o=0,i=0,a=0;a<n;a++)e[a]>i&&(o=a,i=e[a]),e[a]>r&&(r=e[a]);var s=0,c=0;for(a=0;a<n;a++){var l=a-o;(f=e[a]*l*l)>c&&(s=a,c=f)}if(o>s){var u=o;o=s,s=u}if(s-o<=n/16)throw new Lv;var d=s-1,h=-1;for(a=s-1;a>o;a--){var f,p=a-o;(f=p*p*(s-a)*(r-e[a]))>h&&(d=a,h=f)}return d<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(sv);const Uv=Fv;var Vv=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zv=function(e){function t(t){var n=e.call(this,t)||this;return n.matrix=null,n}return Vv(t,e),t.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),o=n.getHeight();if(r>=t.MINIMUM_DIMENSION&&o>=t.MINIMUM_DIMENSION){var i=n.getMatrix(),a=r>>t.BLOCK_SIZE_POWER;0!==(r&t.BLOCK_SIZE_MASK)&&a++;var s=o>>t.BLOCK_SIZE_POWER;0!==(o&t.BLOCK_SIZE_MASK)&&s++;var c=t.calculateBlackPoints(i,a,s,r,o),l=new Dv(r,o);t.calculateThresholdForBlock(i,a,s,r,o,c,l),this.matrix=l}else this.matrix=e.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,n,r,o,i,a,s){for(var c=i-t.BLOCK_SIZE,l=o-t.BLOCK_SIZE,u=0;u<r;u++){var d=u<<t.BLOCK_SIZE_POWER;d>c&&(d=c);for(var h=t.cap(u,2,r-3),f=0;f<n;f++){var p=f<<t.BLOCK_SIZE_POWER;p>l&&(p=l);for(var g=t.cap(f,2,n-3),m=0,y=-2;y<=2;y++){var v=a[h+y];m+=v[g-2]+v[g-1]+v[g]+v[g+1]+v[g+2]}var w=m/25;t.thresholdBlock(e,p,d,w,o,s)}}},t.cap=function(e,t,n){return e<t?t:e>n?n:e},t.thresholdBlock=function(e,n,r,o,i,a){for(var s=0,c=r*i+n;s<t.BLOCK_SIZE;s++,c+=i)for(var l=0;l<t.BLOCK_SIZE;l++)(255&e[c+l])<=o&&a.set(n+l,r+s)},t.calculateBlackPoints=function(e,n,r,o,i){for(var a=i-t.BLOCK_SIZE,s=o-t.BLOCK_SIZE,c=new Array(r),l=0;l<r;l++){c[l]=new Int32Array(n);var u=l<<t.BLOCK_SIZE_POWER;u>a&&(u=a);for(var d=0;d<n;d++){var h=d<<t.BLOCK_SIZE_POWER;h>s&&(h=s);for(var f=0,p=255,g=0,m=0,y=u*o+h;m<t.BLOCK_SIZE;m++,y+=o){for(var v=0;v<t.BLOCK_SIZE;v++){var w=255&e[y+v];f+=w,w<p&&(p=w),w>g&&(g=w)}if(g-p>t.MIN_DYNAMIC_RANGE)for(m++,y+=o;m<t.BLOCK_SIZE;m++,y+=o)for(v=0;v<t.BLOCK_SIZE;v++)f+=255&e[y+v]}var b=f>>2*t.BLOCK_SIZE_POWER;if(g-p<=t.MIN_DYNAMIC_RANGE&&(b=p/2,l>0&&d>0)){var _=(c[l-1][d]+2*c[l][d-1]+c[l-1][d-1])/4;p<_&&(b=_)}c[l][d]=b}}return c},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=5*t.BLOCK_SIZE,t.MIN_DYNAMIC_RANGE=24,t}(Uv);const Hv=zv;var Gv=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.isCropSupported=function(){return!1},e.prototype.crop=function(e,t,n,r){throw new kv("This luminance source does not support cropping.")},e.prototype.isRotateSupported=function(){return!1},e.prototype.rotateCounterClockwise=function(){throw new kv("This luminance source does not support rotation by 90 degrees.")},e.prototype.rotateCounterClockwise45=function(){throw new kv("This luminance source does not support rotation by 45 degrees.")},e.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Pv,n=0;n<this.height;n++){for(var r=this.getRow(n,e),o=0;o<this.width;o++){var i=255&r[o],a=void 0;a=i<64?"#":i<128?"+":i<192?".":" ",t.append(a)}t.append("\n")}return t.toString()},e}();const Wv=Gv;var qv=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Xv=function(e){function t(t){var n=e.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return qv(t,e),t.prototype.getRow=function(e,t){for(var n=this.delegate.getRow(e,t),r=this.getWidth(),o=0;o<r;o++)n[o]=255-(255&n[o]);return n},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t),r=0;r<t;r++)n[r]=255-(255&e[r]);return n},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,n,r,o){return new t(this.delegate.crop(e,n,r,o))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(Wv);var Kv=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yv=function(e){function t(n,r){void 0===r&&(r=!1);var o=e.call(this,n.width,n.height)||this;return o.canvas=n,o.tempCanvasElement=null,o.buffer=t.makeBufferFromCanvasImageData(n,r),o}return Kv(t,e),t.makeBufferFromCanvasImageData=function(e,n){void 0===n&&(n=!1);var r=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(r.data,e.width,e.height,n)},t.toGrayscaleBuffer=function(e,n,r,o){void 0===o&&(o=!1);var i=new Uint8ClampedArray(n*r);if(t.FRAME_INDEX=!t.FRAME_INDEX,t.FRAME_INDEX||!o)for(var a=0,s=0,c=e.length;a<c;a+=4,s++){var l=void 0;if(0===e[a+3])l=255;else l=306*e[a]+601*e[a+1]+117*e[a+2]+512>>10;i[s]=l}else{a=0,s=0;for(var u=e.length;a<u;a+=4,s++){l=void 0;if(0===e[a+3])l=255;else l=306*e[a]+601*e[a+1]+117*e[a+2]+512>>10;i[s]=255-l}}return i},t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new rv("Requested row is outside the image: "+e);var n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(t,n,r,o){return e.prototype.crop.call(this,t,n,r,o),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var n=this.getTempCanvasElement(),r=n.getContext("2d"),o=e*t.DEGREE_TO_RADIANS,i=this.canvas.width,a=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(o))*i+Math.abs(Math.sin(o))*a),c=Math.ceil(Math.abs(Math.sin(o))*i+Math.abs(Math.cos(o))*a);return n.width=s,n.height=c,r.translate(s/2,c/2),r.rotate(o),r.drawImage(this.canvas,i/-2,a/-2),this.buffer=t.makeBufferFromCanvasImageData(n),this},t.prototype.invert=function(){return new Xv(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t.FRAME_INDEX=!0,t}(Wv),Qv=function(){function e(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return e.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},e}(),Zv=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},$v=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Jv=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ew=function(){function e(e,t,n){void 0===t&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(e.prototype,"hasNavigator",{get:function(){return"undefined"!==typeof navigator},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),e.prototype.listVideoInputDevices=function(){return Zv(this,void 0,void 0,function(){var e,t,n,r,o,i,a,s,c,l,u,d;return $v(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=Jv(e),r=n.next();!r.done;r=n.next())o=r.value,"videoinput"===(i="video"===o.kind?"videoinput":o.kind)&&(a=o.deviceId||o.id,s=o.label||"Video device "+(t.length+1),c=o.groupId,l={deviceId:a,label:s,kind:i,groupId:c},t.push(l))}catch(f){u={error:f}}finally{try{r&&!r.done&&(d=n.return)&&d.call(n)}finally{if(u)throw u.error}}return[2,t]}})})},e.prototype.getVideoInputDevices=function(){return Zv(this,void 0,void 0,function(){return $v(this,function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,e.sent().map(function(e){return new Qv(e.deviceId,e.label)})]}})})},e.prototype.findDeviceById=function(e){return Zv(this,void 0,void 0,function(){var t;return $v(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(t=n.sent())?[2,t.find(function(t){return t.deviceId===e})]:[2,null]}})})},e.prototype.decodeFromInputVideoDevice=function(e,t){return Zv(this,void 0,void 0,function(){return $v(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}})})},e.prototype.decodeOnceFromVideoDevice=function(e,t){return Zv(this,void 0,void 0,function(){var n;return $v(this,function(r){switch(r.label){case 0:return this.reset(),n={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(n,t)];case 1:return[2,r.sent()]}})})},e.prototype.decodeOnceFromConstraints=function(e,t){return Zv(this,void 0,void 0,function(){var n;return $v(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=r.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,r.sent()]}})})},e.prototype.decodeOnceFromStream=function(e,t){return Zv(this,void 0,void 0,function(){var n;return $v(this,function(r){switch(r.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=r.sent(),[4,this.decodeOnce(n)];case 2:return[2,r.sent()]}})})},e.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return Zv(this,void 0,void 0,function(){return $v(this,function(r){switch(r.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,r.sent()]}})})},e.prototype.decodeFromVideoDevice=function(e,t,n){return Zv(this,void 0,void 0,function(){var r;return $v(this,function(o){switch(o.label){case 0:return r={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(r,t,n)];case 1:return[2,o.sent()]}})})},e.prototype.decodeFromConstraints=function(e,t,n){return Zv(this,void 0,void 0,function(){var r;return $v(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=o.sent(),[4,this.decodeFromStream(r,t,n)];case 2:return[2,o.sent()]}})})},e.prototype.decodeFromStream=function(e,t,n){return Zv(this,void 0,void 0,function(){var r;return $v(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=o.sent(),[4,this.decodeContinuously(r,n)];case 2:return[2,o.sent()]}})})},e.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},e.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},e.prototype.attachStreamToVideo=function(e,t){return Zv(this,void 0,void 0,function(){var n;return $v(this,function(r){switch(r.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return r.sent(),[2,n]}})})},e.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(n,r){return t.playVideoOnLoad(e,function(){return n()})})},e.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},e.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},e.prototype.tryPlayVideo=function(e){return Zv(this,void 0,void 0,function(){return $v(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},e.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new tv("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new tv("element with id '"+e+"' must be an "+t+" element");return n},e.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new tv("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},e.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new tv("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},e.prototype.decodeFromVideoContinuously=function(e,t,n){if(void 0===e&&void 0===t)throw new tv("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},e.prototype.decodeFromImageElement=function(e){if(!e)throw new tv("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);return this.imageElement=t,this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t)},e.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},e.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},e.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new tv("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},e.prototype.decodeFromImageUrl=function(e){if(!e)throw new tv("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},e.prototype.decodeFromVideoUrl=function(e){if(!e)throw new tv("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},e.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new tv("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r},e.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(n,r){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,r)},e.addEventListener("load",t.imageLoadedListener)})},e.prototype._decodeOnLoadVideo=function(e){return Zv(this,void 0,void 0,function(){return $v(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},e.prototype._decodeOnLoadVideoContinuously=function(e,t){return Zv(this,void 0,void 0,function(){return $v(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}})})},e.prototype.isImageLoaded=function(e){return!!e.complete&&0!==e.naturalWidth},e.prototype.prepareImageElement=function(e){var t;return"undefined"===typeof e&&((t=document.createElement("img")).width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},e.prototype.prepareVideoElement=function(e){var t;return e||"undefined"===typeof document||((t=document.createElement("video")).width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},e.prototype.decodeOnce=function(e,t,n){var r=this;void 0===t&&(t=!0),void 0===n&&(n=!0),this._stopAsyncDecode=!1;var o=function(i,a){if(r._stopAsyncDecode)return a(new Lv("Video stream has ended before any code could be detected.")),void(r._stopAsyncDecode=void 0);try{i(r.decode(e))}catch(s){if(t&&s instanceof Lv||(s instanceof av||s instanceof Sv)&&n)return setTimeout(o,r._timeBetweenDecodingAttempts,i,a);a(s)}};return new Promise(function(e,t){return o(e,t)})},e.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var r=function(){if(n._stopContinuousDecode)n._stopContinuousDecode=void 0;else try{var o=n.decode(e);t(o,null),setTimeout(r,n.timeBetweenScansMillis)}catch(i){t(null,i),(i instanceof av||i instanceof Sv||i instanceof Lv)&&setTimeout(r,n._timeBetweenDecodingAttempts)}};r()},e.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},e.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),r=new Yv(n,t),o=new Hv(r);return new ov(o)},e.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=void 0;try{n=t.getContext("2d",{willReadFrequently:!0})}catch(r){n=t.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},e.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},e.prototype.drawFrameOnCanvas=function(e,t,n){void 0===t&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),void 0===n&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},e.prototype.drawImageOnCanvas=function(e,t,n){void 0===t&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),void 0===n&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},e.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},e.prototype.createCaptureCanvas=function(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;var t,n,r=document.createElement("canvas");return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(t=e.videoWidth,n=e.videoHeight):e instanceof HTMLImageElement&&(t=e.naturalWidth||e.width,n=e.naturalHeight||e.height)),r.style.width=t+"px",r.style.height=n+"px",r.width=t,r.height=n,r},e.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},e.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},e.prototype._destroyVideoElement=function(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},e.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},e.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},e.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}},e.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")},e}();const tw=function(){function e(e,t,n,r,o,i){void 0===n&&(n=null==t?0:8*t.length),void 0===i&&(i=lv.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=o,this.timestamp=i,this.text=e,this.rawBytes=t,this.numBits=void 0===n||null===n?null===t||void 0===t?0:8*t.length:n,this.resultPoints=r,this.format=o,this.resultMetadata=null,this.timestamp=void 0===i||null===i?lv.currentTimeMillis():i}return e.prototype.getText=function(){return this.text},e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.getBarcodeFormat=function(){return this.format},e.prototype.getResultMetadata=function(){return this.resultMetadata},e.prototype.putMetadata=function(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},e.prototype.putAllMetadata=function(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))},e.prototype.addResultPoints=function(e){var t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){var n=new Array(t.length+e.length);lv.arraycopy(t,0,n,0,t.length),lv.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.toString=function(){return this.text},e}();var nw;!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(nw||(nw={}));const rw=nw;var ow;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(ow||(ow={}));const iw=ow;const aw=function(){function e(e,t,n,r,o,i){void 0===o&&(o=-1),void 0===i&&(i=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=i,this.numBits=void 0===e||null===e?0:8*e.length}return e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.setNumBits=function(e){this.numBits=e},e.prototype.getText=function(){return this.text},e.prototype.getByteSegments=function(){return this.byteSegments},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getErrorsCorrected=function(){return this.errorsCorrected},e.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},e.prototype.getErasures=function(){return this.erasures},e.prototype.setErasures=function(e){this.erasures=e},e.prototype.getOther=function(){return this.other},e.prototype.setOther=function(e){this.other=e},e.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},e.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},e.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},e}();const sw=function(){function e(){}return e.prototype.exp=function(e){return this.expTable[e]},e.prototype.log=function(e){if(0===e)throw new rv;return this.logTable[e]},e.addOrSubtract=function(e,t){return e^t},e}();var cw=function(){function e(e,t){if(0===t.length)throw new rv;this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var r=1;r<n&&0===t[r];)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),lv.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.evaluateAt=function(e){if(0===e)return this.getCoefficient(0);var t,n=this.coefficients;if(1===e){t=0;for(var r=0,o=n.length;r!==o;r++){var i=n[r];t=sw.addOrSubtract(t,i)}return t}t=n[0];var a=n.length,s=this.field;for(r=1;r<a;r++)t=sw.addOrSubtract(s.multiply(e,t),n[r]);return t},e.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new rv("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,r=t.coefficients;if(n.length>r.length){var o=n;n=r,r=o}var i=new Int32Array(r.length),a=r.length-n.length;lv.arraycopy(r,0,i,0,a);for(var s=a;s<r.length;s++)i[s]=sw.addOrSubtract(n[s-a],r[s]);return new e(this.field,i)},e.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new rv("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,o=t.coefficients,i=o.length,a=new Int32Array(r+i-1),s=this.field,c=0;c<r;c++)for(var l=n[c],u=0;u<i;u++)a[c+u]=sw.addOrSubtract(a[c+u],s.multiply(l,o[u]));return new e(s,a)},e.prototype.multiplyScalar=function(t){if(0===t)return this.field.getZero();if(1===t)return this;for(var n=this.coefficients.length,r=this.field,o=new Int32Array(n),i=this.coefficients,a=0;a<n;a++)o[a]=r.multiply(i[a],t);return new e(r,o)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new rv;if(0===n)return this.field.getZero();for(var r=this.coefficients,o=r.length,i=new Int32Array(o+t),a=this.field,s=0;s<o;s++)i[s]=a.multiply(r[s],n);return new e(a,i)},e.prototype.divide=function(e){if(!this.field.equals(e.field))throw new rv("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new rv("Divide by 0");for(var t=this.field,n=t.getZero(),r=this,o=e.getCoefficient(e.getDegree()),i=t.inverse(o);r.getDegree()>=e.getDegree()&&!r.isZero();){var a=r.getDegree()-e.getDegree(),s=t.multiply(r.getCoefficient(r.getDegree()),i),c=e.multiplyByMonomial(a,s),l=t.buildMonomial(a,s);n=n.addOrSubtract(l),r=r.addOrSubtract(c)}return[n,r]},e.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){var r=this.field.log(n);0===r?e+="1":1===r?e+="a":(e+="a^",e+=r)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e},e}();const lw=cw;var uw=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const dw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uw(t,e),t.kind="ArithmeticException",t}(Jy);var hw=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fw=function(e){function t(t,n,r){var o=e.call(this)||this;o.primitive=t,o.size=n,o.generatorBase=r;for(var i=new Int32Array(n),a=1,s=0;s<n;s++)i[s]=a,(a*=2)>=n&&(a^=t,a&=n-1);o.expTable=i;var c=new Int32Array(n);for(s=0;s<n-1;s++)c[i[s]]=s;return o.logTable=c,o.zero=new lw(o,Int32Array.from([0])),o.one=new lw(o,Int32Array.from([1])),o}return hw(t,e),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,t){if(e<0)throw new rv;if(0===t)return this.zero;var n=new Int32Array(e+1);return n[0]=t,new lw(this,n)},t.prototype.inverse=function(e){if(0===e)throw new dw;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+vv.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(sw);const pw=fw;var gw=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const mw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gw(t,e),t.kind="ReedSolomonException",t}(Jy);var yw=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const vw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return yw(t,e),t.kind="IllegalStateException",t}(Jy);var ww=function(){function e(e){this.field=e}return e.prototype.decode=function(e,t){for(var n=this.field,r=new lw(n,e),o=new Int32Array(t),i=!0,a=0;a<t;a++){var s=r.evaluateAt(n.exp(a+n.getGeneratorBase()));o[o.length-1-a]=s,0!==s&&(i=!1)}if(!i){var c=new lw(n,o),l=this.runEuclideanAlgorithm(n.buildMonomial(t,1),c,t),u=l[0],d=l[1],h=this.findErrorLocations(u),f=this.findErrorMagnitudes(d,h);for(a=0;a<h.length;a++){var p=e.length-1-n.log(h[a]);if(p<0)throw new mw("Bad error location");e[p]=pw.addOrSubtract(e[p],f[a])}}},e.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var r=e;e=t,t=r}for(var o=this.field,i=e,a=t,s=o.getZero(),c=o.getOne();a.getDegree()>=(n/2|0);){var l=i,u=s;if(s=c,(i=a).isZero())throw new mw("r_{i-1} was zero");a=l;for(var d=o.getZero(),h=i.getCoefficient(i.getDegree()),f=o.inverse(h);a.getDegree()>=i.getDegree()&&!a.isZero();){var p=a.getDegree()-i.getDegree(),g=o.multiply(a.getCoefficient(a.getDegree()),f);d=d.addOrSubtract(o.buildMonomial(p,g)),a=a.addOrSubtract(i.multiplyByMonomial(p,g))}if(c=d.multiply(s).addOrSubtract(u),a.getDegree()>=i.getDegree())throw new vw("Division algorithm failed to reduce polynomial?")}var m=c.getCoefficient(0);if(0===m)throw new mw("sigmaTilde(0) was zero");var y=o.inverse(m);return[c.multiplyScalar(y),a.multiplyScalar(y)]},e.prototype.findErrorLocations=function(e){var t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),r=0,o=this.field,i=1;i<o.getSize()&&r<t;i++)0===e.evaluateAt(i)&&(n[r]=o.inverse(i),r++);if(r!==t)throw new mw("Error locator degree does not match number of roots");return n},e.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,r=new Int32Array(n),o=this.field,i=0;i<n;i++){for(var a=o.inverse(t[i]),s=1,c=0;c<n;c++)if(i!==c){var l=o.multiply(t[c],a),u=0===(1&l)?1|l:-2&l;s=o.multiply(s,u)}r[i]=o.multiply(e.evaluateAt(a),o.inverse(s)),0!==o.getGeneratorBase()&&(r[i]=o.multiply(r[i],a))}return r},e}();const bw=ww;var _w;!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(_w||(_w={}));var Cw=function(){function e(){}return e.prototype.decode=function(t){this.ddata=t;var n=t.getBits(),r=this.extractBits(n),o=this.correctBits(r),i=e.convertBoolArrayToByteArray(o),a=e.getEncodedData(o),s=new aw(i,a,null,null);return s.setNumBits(o.length),s},e.highLevelDecode=function(e){return this.getEncodedData(e)},e.getEncodedData=function(t){for(var n=t.length,r=_w.UPPER,o=_w.UPPER,i="",a=0;a<n;)if(o===_w.BINARY){if(n-a<5)break;var s=e.readCode(t,a,5);if(a+=5,0===s){if(n-a<11)break;s=e.readCode(t,a,11)+31,a+=11}for(var c=0;c<s;c++){if(n-a<8){a=n;break}var l=e.readCode(t,a,8);i+=Rv.castAsNonUtf8Char(l),a+=8}o=r}else{var u=o===_w.DIGIT?4:5;if(n-a<u)break;l=e.readCode(t,a,u);a+=u;var d=e.getCharacter(o,l);d.startsWith("CTRL_")?(r=o,o=e.getTable(d.charAt(5)),"L"===d.charAt(6)&&(r=o)):(i+=d,o=r)}return i},e.getTable=function(e){switch(e){case"L":return _w.LOWER;case"P":return _w.PUNCT;case"M":return _w.MIXED;case"D":return _w.DIGIT;case"B":return _w.BINARY;default:return _w.UPPER}},e.getCharacter=function(t,n){switch(t){case _w.UPPER:return e.UPPER_TABLE[n];case _w.LOWER:return e.LOWER_TABLE[n];case _w.MIXED:return e.MIXED_TABLE[n];case _w.PUNCT:return e.PUNCT_TABLE[n];case _w.DIGIT:return e.DIGIT_TABLE[n];default:throw new vw("Bad table")}},e.prototype.correctBits=function(t){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=pw.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=pw.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=pw.AZTEC_DATA_10):(r=12,n=pw.AZTEC_DATA_12);var o=this.ddata.getNbDatablocks(),i=t.length/r;if(i<o)throw new Sv;for(var a=t.length%r,s=new Int32Array(i),c=0;c<i;c++,a+=r)s[c]=e.readCode(t,a,r);try{new bw(n).decode(s,i-o)}catch(g){throw new Sv(g)}var l=(1<<r)-1,u=0;for(c=0;c<o;c++){if(0===(f=s[c])||f===l)throw new Sv;1!==f&&f!==l-1||u++}var d=new Array(o*r-u),h=0;for(c=0;c<o;c++){var f;if(1===(f=s[c])||f===l-1)d.fill(f>1,h,h+r-1),h+=r-1;else for(var p=r-1;p>=0;--p)d[h++]=0!==(f&1<<p)}return d},e.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,o=new Int32Array(r),i=new Array(this.totalBitsInLayer(n,t));if(t)for(var a=0;a<o.length;a++)o[a]=a;else{var s=r+1+2*vv.truncDivision(vv.truncDivision(r,2)-1,15),c=r/2,l=vv.truncDivision(s,2);for(a=0;a<c;a++){var u=a+vv.truncDivision(a,15);o[c-a-1]=l-u-1,o[c+a]=l+u+1}}a=0;for(var d=0;a<n;a++){for(var h=4*(n-a)+(t?9:12),f=2*a,p=r-1-f,g=0;g<h;g++)for(var m=2*g,y=0;y<2;y++)i[d+m+y]=e.get(o[f+y],o[f+g]),i[d+2*h+m+y]=e.get(o[f+g],o[p-y]),i[d+4*h+m+y]=e.get(o[p-y],o[p-g]),i[d+6*h+m+y]=e.get(o[p-g],o[f+y]);d+=8*h}return i},e.readCode=function(e,t,n){for(var r=0,o=t;o<t+n;o++)r<<=1,e[o]&&(r|=1);return r},e.readByte=function(t,n){var r=t.length-n;return r>=8?e.readCode(t,n,8):e.readCode(t,n,r)<<8-r},e.convertBoolArrayToByteArray=function(t){for(var n=new Uint8Array((t.length+7)/8),r=0;r<n.length;r++)n[r]=e.readByte(t,8*r);return n},e.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},e.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],e.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],e.MIXED_TABLE=["CTRL_PS"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],e.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],e.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],e}();const Ew=Cw;var Sw=function(){function e(){}return e.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},e.distance=function(e,t,n,r){var o=e-n,i=t-r;return Math.sqrt(o*o+i*i)},e.sum=function(e){for(var t=0,n=0,r=e.length;n!==r;n++){t+=e[n]}return t},e}();const Aw=Sw;const Iw=function(){function e(){}return e.floatToIntBits=function(e){return e},e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}();var xw=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.equals=function(t){if(t instanceof e){var n=t;return this.x===n.x&&this.y===n.y}return!1},e.prototype.hashCode=function(){return 31*Iw.floatToIntBits(this.x)+Iw.floatToIntBits(this.y)},e.prototype.toString=function(){return"("+this.x+","+this.y+")"},e.orderBestPatterns=function(e){var t,n,r,o=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]);if(i>=o&&i>=a?(n=e[0],t=e[1],r=e[2]):a>=i&&a>=o?(n=e[1],t=e[0],r=e[2]):(n=e[2],t=e[0],r=e[1]),this.crossProductZ(t,n,r)<0){var s=t;t=r,r=s}e[0]=t,e[1]=n,e[2]=r},e.distance=function(e,t){return Aw.distance(e.x,e.y,t.x,t.y)},e.crossProductZ=function(e,t,n){var r=t.x,o=t.y;return(n.x-r)*(e.y-o)-(n.y-o)*(e.x-r)},e}();const Nw=xw;const Tw=function(){function e(e,t){this.bits=e,this.points=t}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}();var kw=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Ow=function(e){function t(t,n,r,o,i){var a=e.call(this,t,n)||this;return a.compact=r,a.nbDatablocks=o,a.nbLayers=i,a}return kw(t,e),t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(Tw);var Rw=function(){function e(t,n,r,o){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),void 0!==n&&null!==n||(n=e.INIT_SIZE),void 0!==r&&null!==r||(r=t.getWidth()/2|0),void 0!==o&&null!==o||(o=t.getHeight()/2|0);var i=n/2|0;if(this.leftInit=r-i,this.rightInit=r+i,this.upInit=o-i,this.downInit=o+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Lv}return e.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,o=!1,i=!0,a=!1,s=!1,c=!1,l=!1,u=!1,d=this.width,h=this.height;i;){i=!1;for(var f=!0;(f||!s)&&t<d;)(f=this.containsBlackPoint(n,r,t,!1))?(t++,i=!0,s=!0):s||t++;if(t>=d){o=!0;break}for(var p=!0;(p||!c)&&r<h;)(p=this.containsBlackPoint(e,t,r,!0))?(r++,i=!0,c=!0):c||r++;if(r>=h){o=!0;break}for(var g=!0;(g||!l)&&e>=0;)(g=this.containsBlackPoint(n,r,e,!1))?(e--,i=!0,l=!0):l||e--;if(e<0){o=!0;break}for(var m=!0;(m||!u)&&n>=0;)(m=this.containsBlackPoint(e,t,n,!0))?(n--,i=!0,u=!0):u||n--;if(n<0){o=!0;break}i&&(a=!0)}if(!o&&a){for(var y=t-e,v=null,w=1;null===v&&w<y;w++)v=this.getBlackPointOnSegment(e,r-w,e+w,r);if(null==v)throw new Lv;var b=null;for(w=1;null===b&&w<y;w++)b=this.getBlackPointOnSegment(e,n+w,e+w,n);if(null==b)throw new Lv;var _=null;for(w=1;null===_&&w<y;w++)_=this.getBlackPointOnSegment(t,n+w,t-w,n);if(null==_)throw new Lv;var C=null;for(w=1;null===C&&w<y;w++)C=this.getBlackPointOnSegment(t,r-w,t-w,r);if(null==C)throw new Lv;return this.centerEdges(C,v,_,b)}throw new Lv},e.prototype.getBlackPointOnSegment=function(e,t,n,r){for(var o=Aw.round(Aw.distance(e,t,n,r)),i=(n-e)/o,a=(r-t)/o,s=this.image,c=0;c<o;c++){var l=Aw.round(e+c*i),u=Aw.round(t+c*a);if(s.get(l,u))return new Nw(l,u)}return null},e.prototype.centerEdges=function(t,n,r,o){var i=t.getX(),a=t.getY(),s=n.getX(),c=n.getY(),l=r.getX(),u=r.getY(),d=o.getX(),h=o.getY(),f=e.CORR;return i<this.width/2?[new Nw(d-f,h+f),new Nw(s+f,c+f),new Nw(l-f,u-f),new Nw(i+f,a-f)]:[new Nw(d+f,h+f),new Nw(s+f,c-f),new Nw(l-f,u+f),new Nw(i-f,a-f)]},e.prototype.containsBlackPoint=function(e,t,n,r){var o=this.image;if(r){for(var i=e;i<=t;i++)if(o.get(i,n))return!0}else for(var a=e;a<=t;a++)if(o.get(n,a))return!0;return!1},e.INIT_SIZE=10,e.CORR=1,e}();const Pw=Rw;var jw=function(){function e(){}return e.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),r=e.getHeight(),o=!0,i=0;i<t.length&&o;i+=2){var a=Math.floor(t[i]),s=Math.floor(t[i+1]);if(a<-1||a>n||s<-1||s>r)throw new Lv;o=!1,-1===a?(t[i]=0,o=!0):a===n&&(t[i]=n-1,o=!0),-1===s?(t[i+1]=0,o=!0):s===r&&(t[i+1]=r-1,o=!0)}o=!0;for(i=t.length-2;i>=0&&o;i-=2){a=Math.floor(t[i]),s=Math.floor(t[i+1]);if(a<-1||a>n||s<-1||s>r)throw new Lv;o=!1,-1===a?(t[i]=0,o=!0):a===n&&(t[i]=n-1,o=!0),-1===s?(t[i+1]=0,o=!0):s===r&&(t[i+1]=r-1,o=!0)}},e}();const Dw=jw;var Mw=function(){function e(e,t,n,r,o,i,a,s,c){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=o,this.a32=i,this.a13=a,this.a23=s,this.a33=c}return e.quadrilateralToQuadrilateral=function(t,n,r,o,i,a,s,c,l,u,d,h,f,p,g,m){var y=e.quadrilateralToSquare(t,n,r,o,i,a,s,c);return e.squareToQuadrilateral(l,u,d,h,f,p,g,m).times(y)},e.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,r=this.a12,o=this.a13,i=this.a21,a=this.a22,s=this.a23,c=this.a31,l=this.a32,u=this.a33,d=0;d<t;d+=2){var h=e[d],f=e[d+1],p=o*h+s*f+u;e[d]=(n*h+i*f+c)/p,e[d+1]=(r*h+a*f+l)/p}},e.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,r=this.a12,o=this.a13,i=this.a21,a=this.a22,s=this.a23,c=this.a31,l=this.a32,u=this.a33,d=e.length,h=0;h<d;h++){var f=e[h],p=t[h],g=o*f+s*p+u;e[h]=(n*f+i*p+c)/g,t[h]=(r*f+a*p+l)/g}},e.squareToQuadrilateral=function(t,n,r,o,i,a,s,c){var l=t-r+i-s,u=n-o+a-c;if(0===l&&0===u)return new e(r-t,i-r,t,o-n,a-o,n,0,0,1);var d=r-i,h=s-i,f=o-a,p=c-a,g=d*p-h*f,m=(l*p-h*u)/g,y=(d*u-l*f)/g;return new e(r-t+m*r,s-t+y*s,t,o-n+m*o,c-n+y*c,n,m,y,1)},e.quadrilateralToSquare=function(t,n,r,o,i,a,s,c){return e.squareToQuadrilateral(t,n,r,o,i,a,s,c).buildAdjoint()},e.prototype.buildAdjoint=function(){return new e(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},e.prototype.times=function(t){return new e(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},e}();const Lw=Mw;var Bw=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Bw(t,e),t.prototype.sampleGrid=function(e,t,n,r,o,i,a,s,c,l,u,d,h,f,p,g,m,y,v){var w=Lw.quadrilateralToQuadrilateral(r,o,i,a,s,c,l,u,d,h,f,p,g,m,y,v);return this.sampleGridWithTransform(e,t,n,w)},t.prototype.sampleGridWithTransform=function(e,t,n,r){if(t<=0||n<=0)throw new Lv;for(var o=new Dv(t,n),i=new Float32Array(2*t),a=0;a<n;a++){for(var s=i.length,c=a+.5,l=0;l<s;l+=2)i[l]=l/2+.5,i[l+1]=c;r.transformPoints(i),Dw.checkAndNudgePoints(e,i);try{for(l=0;l<s;l+=2)e.get(Math.floor(i[l]),Math.floor(i[l+1]))&&o.set(l/2,a)}catch(u){throw new Lv}}return o},t}(Dw);const Uw=Fw;const Vw=function(){function e(){}return e.setGridSampler=function(t){e.gridSampler=t},e.getInstance=function(){return e.gridSampler},e.gridSampler=new Uw,e}();var zw=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.toResultPoint=function(){return new Nw(this.getX(),this.getY())},e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e}(),Hw=function(){function e(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return e.prototype.detect=function(){return this.detectMirror(!1)},e.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var r=n[0];n[0]=n[2],n[2]=r}this.extractParameters(n);var o=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new Ow(o,i,this.compact,this.nbDataBlocks,this.nbLayers)},e.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Lv;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var r=0,o=0;o<4;o++){var i=n[(this.shift+o)%4];this.compact?(r<<=7,r+=i>>1&127):(r<<=10,r+=(i>>2&992)+(i>>1&31))}var a=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(a>>6),this.nbDataBlocks=1+(63&a)):(this.nbLayers=1+(a>>11),this.nbDataBlocks=1+(2047&a))},e.prototype.getRotation=function(e,t){var n=0;e.forEach(function(e,r,o){n=(n<<3)+((e>>t-2<<1)+(1&e))}),n=((1&n)<<11)+(n>>1);for(var r=0;r<4;r++)if(vv.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new Lv},e.prototype.getCorrectedParameterData=function(e,t){var n,r;t?(n=7,r=2):(n=10,r=4);for(var o=n-r,i=new Int32Array(n),a=n-1;a>=0;--a)i[a]=15&e,e>>=4;try{new bw(pw.AZTEC_PARAM).decode(i,o)}catch(c){throw new Lv}var s=0;for(a=0;a<r;a++)s=(s<<4)+i[a];return s},e.prototype.getBullsEyeCorners=function(e){var t=e,n=e,r=e,o=e,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(t,i,1,-1),s=this.getFirstDifferent(n,i,1,1),c=this.getFirstDifferent(r,i,-1,1),l=this.getFirstDifferent(o,i,-1,-1);if(this.nbCenterLayers>2){var u=this.distancePoint(l,a)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(u<.75||u>1.25||!this.isWhiteOrBlackRectangle(a,s,c,l))break}t=a,n=s,r=c,o=l,i=!i}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new Lv;this.compact=5===this.nbCenterLayers;var d=new Nw(t.getX()+.5,t.getY()-.5),h=new Nw(n.getX()+.5,n.getY()+.5),f=new Nw(r.getX()-.5,r.getY()+.5),p=new Nw(o.getX()-.5,o.getY()-.5);return this.expandSquare([d,h,f,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},e.prototype.getMatrixCenter=function(){var e,t,n,r;try{e=(c=new Pw(this.image).detect())[0],t=c[1],n=c[2],r=c[3]}catch(l){var o=this.image.getWidth()/2,i=this.image.getHeight()/2;e=this.getFirstDifferent(new zw(o+7,i-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new zw(o+7,i+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new zw(o-7,i+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new zw(o-7,i-7),!1,-1,-1).toResultPoint()}var a=Aw.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=Aw.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{var c;e=(c=new Pw(this.image,15,a,s).detect())[0],t=c[1],n=c[2],r=c[3]}catch(l){e=this.getFirstDifferent(new zw(a+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new zw(a+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new zw(a-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new zw(a-7,s-7),!1,-1,-1).toResultPoint()}return a=Aw.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=Aw.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new zw(a,s)},e.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},e.prototype.sampleGrid=function(e,t,n,r,o){var i=Vw.getInstance(),a=this.getDimension(),s=a/2-this.nbCenterLayers,c=a/2+this.nbCenterLayers;return i.sampleGrid(e,a,a,s,s,c,s,c,c,s,c,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),o.getX(),o.getY())},e.prototype.sampleLine=function(e,t,n){for(var r=0,o=this.distanceResultPoint(e,t),i=o/n,a=e.getX(),s=e.getY(),c=i*(t.getX()-e.getX())/o,l=i*(t.getY()-e.getY())/o,u=0;u<n;u++)this.image.get(Aw.round(a+u*c),Aw.round(s+u*l))&&(r|=1<<n-u-1);return r},e.prototype.isWhiteOrBlackRectangle=function(e,t,n,r){e=new zw(e.getX()-3,e.getY()+3),t=new zw(t.getX()-3,t.getY()-3),n=new zw(n.getX()+3,n.getY()-3),r=new zw(r.getX()+3,r.getY()+3);var o=this.getColor(r,e);if(0===o)return!1;var i=this.getColor(e,t);return i===o&&((i=this.getColor(t,n))===o&&(i=this.getColor(n,r))===o)},e.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,o=(t.getY()-e.getY())/n,i=0,a=e.getX(),s=e.getY(),c=this.image.get(e.getX(),e.getY()),l=Math.ceil(n),u=0;u<l;u++)a+=r,s+=o,this.image.get(Aw.round(a),Aw.round(s))!==c&&i++;var d=i/n;return d>.1&&d<.9?0:d<=.1===c?1:-1},e.prototype.getFirstDifferent=function(e,t,n,r){for(var o=e.getX()+n,i=e.getY()+r;this.isValid(o,i)&&this.image.get(o,i)===t;)o+=n,i+=r;for(o-=n,i-=r;this.isValid(o,i)&&this.image.get(o,i)===t;)o+=n;for(o-=n;this.isValid(o,i)&&this.image.get(o,i)===t;)i+=r;return new zw(o,i-=r)},e.prototype.expandSquare=function(e,t,n){var r=n/(2*t),o=e[0].getX()-e[2].getX(),i=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,s=(e[0].getY()+e[2].getY())/2,c=new Nw(a+r*o,s+r*i),l=new Nw(a-r*o,s-r*i);return o=e[1].getX()-e[3].getX(),i=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,s=(e[1].getY()+e[3].getY())/2,[c,new Nw(a+r*o,s+r*i),l,new Nw(a-r*o,s-r*i)]},e.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},e.prototype.isValidPoint=function(e){var t=Aw.round(e.getX()),n=Aw.round(e.getY());return this.isValid(t,n)},e.prototype.distancePoint=function(e,t){return Aw.distance(e.getX(),e.getY(),t.getX(),t.getY())},e.prototype.distanceResultPoint=function(e,t){return Aw.distance(e.getX(),e.getY(),t.getX(),t.getY())},e.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(vv.truncDivision(this.nbLayers-4,8)+1)+15},e}();const Gw=Hw;const Ww=function(){function e(){}return e.prototype.decode=function(e,t){void 0===t&&(t=null);var n=null,r=new Gw(e.getBlackMatrix()),o=null,i=null;try{o=(a=r.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(t,o),i=(new Ew).decode(a)}catch(u){n=u}if(null==i)try{var a;o=(a=r.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(t,o),i=(new Ew).decode(a)}catch(u){if(null!=n)throw n;throw u}var s=new tw(i.getText(),i.getRawBytes(),i.getNumBits(),o,rw.AZTEC,lv.currentTimeMillis()),c=i.getByteSegments();null!=c&&s.putMetadata(iw.BYTE_SEGMENTS,c);var l=i.getECLevel();return null!=l&&s.putMetadata(iw.ERROR_CORRECTION_LEVEL,l),s},e.prototype.reportFoundResultPoints=function(e,t){if(null!=e){var n=e.get(Cv.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach(function(e,t,r){n.foundPossibleResultPoint(e)})}},e.prototype.reset=function(){},e}();var qw=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xw=(function(e){function t(t){return void 0===t&&(t=500),e.call(this,new Ww,t)||this}qw(t,e)}(ew),function(){function e(){}return e.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch(l){if(t&&!0===t.get(Cv.TRY_HARDER)&&e.isRotateSupported()){var n=e.rotateCounterClockwise(),r=this.doDecode(n,t),o=r.getResultMetadata(),i=270;null!==o&&!0===o.get(iw.ORIENTATION)&&(i+=o.get(iw.ORIENTATION)%360),r.putMetadata(iw.ORIENTATION,i);var a=r.getResultPoints();if(null!==a)for(var s=n.getHeight(),c=0;c<a.length;c++)a[c]=new Nw(s-a[c].getY()-1,a[c].getX());return r}throw new Lv}},e.prototype.reset=function(){},e.prototype.doDecode=function(e,t){var n,r=e.getWidth(),o=e.getHeight(),i=new bv(r),a=t&&!0===t.get(Cv.TRY_HARDER),s=Math.max(1,o>>(a?8:5));n=a?o:15;for(var c=Math.trunc(o/2),l=0;l<n;l++){var u=Math.trunc((l+1)/2),d=c+s*(0===(1&l)?u:-u);if(d<0||d>=o)break;try{i=e.getBlackRow(d,i)}catch(m){continue}for(var h=function(e){if(1===e&&(i.reverse(),t&&!0===t.get(Cv.NEED_RESULT_POINT_CALLBACK))){var n=new Map;t.forEach(function(e,t){return n.set(t,e)}),n.delete(Cv.NEED_RESULT_POINT_CALLBACK),t=n}try{var o=f.decodeRow(d,i,t);if(1===e){o.putMetadata(iw.ORIENTATION,180);var a=o.getResultPoints();null!==a&&(a[0]=new Nw(r-a[0].getX()-1,a[0].getY()),a[1]=new Nw(r-a[1].getX()-1,a[1].getY()))}return{value:o}}catch(s){}},f=this,p=0;p<2;p++){var g=h(p);if("object"===typeof g)return g.value}}throw new Lv},e.recordPattern=function(e,t,n){for(var r=n.length,o=0;o<r;o++)n[o]=0;var i=e.getSize();if(t>=i)throw new Lv;for(var a=!e.get(t),s=0,c=t;c<i;){if(e.get(c)!==a)n[s]++;else{if(++s===r)break;n[s]=1,a=!a}c++}if(s!==r&&(s!==r-1||c!==i))throw new Lv},e.recordPatternInReverse=function(t,n,r){for(var o=r.length,i=t.get(n);n>0&&o>=0;)t.get(--n)!==i&&(o--,i=!i);if(o>=0)throw new Lv;e.recordPattern(t,n+1,r)},e.patternMatchVariance=function(e,t,n){for(var r=e.length,o=0,i=0,a=0;a<r;a++)o+=e[a],i+=t[a];if(o<i)return Number.POSITIVE_INFINITY;var s=o/i;n*=s;for(var c=0,l=0;l<r;l++){var u=e[l],d=t[l]*s,h=u>d?u-d:d-u;if(h>n)return Number.POSITIVE_INFINITY;c+=h}return c/o},e}());const Kw=Xw;var Yw=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Qw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yw(t,e),t.findStartPattern=function(e){for(var n=e.getSize(),r=e.getNextSet(0),o=0,i=Int32Array.from([0,0,0,0,0,0]),a=r,s=!1,c=r;c<n;c++)if(e.get(c)!==s)i[o]++;else{if(5===o){for(var l=t.MAX_AVG_VARIANCE,u=-1,d=t.CODE_START_A;d<=t.CODE_START_C;d++){var h=Kw.patternMatchVariance(i,t.CODE_PATTERNS[d],t.MAX_INDIVIDUAL_VARIANCE);h<l&&(l=h,u=d)}if(u>=0&&e.isRange(Math.max(0,a-(c-a)/2),a,!1))return Int32Array.from([a,c,u]);a+=i[0]+i[1],(i=i.slice(2,i.length))[o-1]=0,i[o]=0,o--}else o++;i[o]=1,s=!s}throw new Lv},t.decodeCode=function(e,n,r){Kw.recordPattern(e,r,n);for(var o=t.MAX_AVG_VARIANCE,i=-1,a=0;a<t.CODE_PATTERNS.length;a++){var s=t.CODE_PATTERNS[a],c=this.patternMatchVariance(n,s,t.MAX_INDIVIDUAL_VARIANCE);c<o&&(o=c,i=a)}if(i>=0)return i;throw new Lv},t.prototype.decodeRow=function(e,n,r){var o,i=r&&!0===r.get(Cv.ASSUME_GS1),a=t.findStartPattern(n),s=a[2],c=0,l=new Uint8Array(20);switch(l[c++]=s,s){case t.CODE_START_A:o=t.CODE_CODE_A;break;case t.CODE_START_B:o=t.CODE_CODE_B;break;case t.CODE_START_C:o=t.CODE_CODE_C;break;default:throw new Sv}for(var u=!1,d=!1,h="",f=a[0],p=a[1],g=Int32Array.from([0,0,0,0,0,0]),m=0,y=0,v=s,w=0,b=!0,_=!1,C=!1;!u;){var E=d;switch(d=!1,m=y,y=t.decodeCode(n,g,p),l[c++]=y,y!==t.CODE_STOP&&(b=!0),y!==t.CODE_STOP&&(v+=++w*y),f=p,p+=g.reduce(function(e,t){return e+t},0),y){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new Sv}switch(o){case t.CODE_CODE_A:if(y<64)h+=C===_?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),C=!1;else if(y<96)h+=C===_?String.fromCharCode(y-64):String.fromCharCode(y+64),C=!1;else switch(y!==t.CODE_STOP&&(b=!1),y){case t.CODE_FNC_1:i&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!_&&C?(_=!0,C=!1):_&&C?(_=!1,C=!1):C=!0;break;case t.CODE_SHIFT:d=!0,o=t.CODE_CODE_B;break;case t.CODE_CODE_B:o=t.CODE_CODE_B;break;case t.CODE_CODE_C:o=t.CODE_CODE_C;break;case t.CODE_STOP:u=!0}break;case t.CODE_CODE_B:if(y<96)h+=C===_?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),C=!1;else switch(y!==t.CODE_STOP&&(b=!1),y){case t.CODE_FNC_1:i&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!_&&C?(_=!0,C=!1):_&&C?(_=!1,C=!1):C=!0;break;case t.CODE_SHIFT:d=!0,o=t.CODE_CODE_A;break;case t.CODE_CODE_A:o=t.CODE_CODE_A;break;case t.CODE_CODE_C:o=t.CODE_CODE_C;break;case t.CODE_STOP:u=!0}break;case t.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==t.CODE_STOP&&(b=!1),y){case t.CODE_FNC_1:i&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case t.CODE_CODE_A:o=t.CODE_CODE_A;break;case t.CODE_CODE_B:o=t.CODE_CODE_B;break;case t.CODE_STOP:u=!0}}E&&(o=o===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var S=p-f;if(p=n.getNextUnset(p),!n.isRange(p,Math.min(n.getSize(),p+(p-f)/2),!1))throw new Lv;if((v-=w*m)%103!==m)throw new av;var A=h.length;if(0===A)throw new Lv;A>0&&b&&(h=o===t.CODE_CODE_C?h.substring(0,A-2):h.substring(0,A-1));for(var I=(a[1]+a[0])/2,x=f+S/2,N=l.length,T=new Uint8Array(N),k=0;k<N;k++)T[k]=l[k];var O=[new Nw(I,e),new Nw(x,e)];return new tw(h,T,0,O,rw.CODE_128,(new Date).getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(Kw);var Zw=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$w=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Jw=function(e){function t(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.call(this)||this;return r.usingCheckDigit=t,r.extendedMode=n,r.decodeRowResult="",r.counters=new Int32Array(9),r}return Zw(t,e),t.prototype.decodeRow=function(e,n,r){var o,i,a,s,c=this.counters;c.fill(0),this.decodeRowResult="";var l,u,d=t.findAsteriskPattern(n,c),h=n.getNextSet(d[1]),f=n.getSize();do{t.recordPattern(n,h,c);var p=t.toNarrowWidePattern(c);if(p<0)throw new Lv;l=t.patternToChar(p),this.decodeRowResult+=l,u=h;try{for(var g=(o=void 0,$w(c)),m=g.next();!m.done;m=g.next()){h+=m.value}}catch(I){o={error:I}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}h=n.getNextSet(h)}while("*"!==l);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var y,v=0;try{for(var w=$w(c),b=w.next();!b.done;b=w.next()){v+=b.value}}catch(x){a={error:x}}finally{try{b&&!b.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}if(h!==f&&2*(h-u-v)<v)throw new Lv;if(this.usingCheckDigit){for(var _=this.decodeRowResult.length-1,C=0,E=0;E<_;E++)C+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(E));if(this.decodeRowResult.charAt(_)!==t.ALPHABET_STRING.charAt(C%43))throw new av;this.decodeRowResult=this.decodeRowResult.substring(0,_)}if(0===this.decodeRowResult.length)throw new Lv;y=this.extendedMode?t.decodeExtended(this.decodeRowResult):this.decodeRowResult;var S=(d[1]+d[0])/2,A=u+v/2;return new tw(y,null,0,[new Nw(S,e),new Nw(A,e)],rw.CODE_39,(new Date).getTime())},t.findAsteriskPattern=function(e,n){for(var r=e.getSize(),o=e.getNextSet(0),i=0,a=o,s=!1,c=n.length,l=o;l<r;l++)if(e.get(l)!==s)n[i]++;else{if(i===c-1){if(this.toNarrowWidePattern(n)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,a-Math.floor((l-a)/2)),a,!1))return[a,l];a+=n[0]+n[1],n.copyWithin(0,2,2+i-1),n[i-1]=0,n[i]=0,i--}else i++;n[i]=1,s=!s}throw new Lv},t.toNarrowWidePattern=function(e){var t,n,r,o=e.length,i=0;do{var a=2147483647;try{for(var s=(t=void 0,$w(e)),c=s.next();!c.done;c=s.next()){(h=c.value)<a&&h>i&&(a=h)}}catch(f){t={error:f}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}i=a,r=0;for(var l=0,u=0,d=0;d<o;d++){(h=e[d])>i&&(u|=1<<o-1-d,r++,l+=h)}if(3===r){for(d=0;d<o&&r>0;d++){var h;if((h=e[d])>i&&(r--,2*h>=l))return-1}return u}}while(r>3);return-1},t.patternToChar=function(e){for(var n=0;n<t.CHARACTER_ENCODINGS.length;n++)if(t.CHARACTER_ENCODINGS[n]===e)return t.ALPHABET_STRING.charAt(n);if(e===t.ASTERISK_ENCODING)return"*";throw new Lv},t.decodeExtended=function(e){for(var t=e.length,n="",r=0;r<t;r++){var o=e.charAt(r);if("+"===o||"$"===o||"%"===o||"/"===o){var i=e.charAt(r+1),a="\0";switch(o){case"+":if(!(i>="A"&&i<="Z"))throw new Sv;a=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new Sv;a=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")a=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")a=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")a=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)a="\0";else if("V"===i)a="@";else if("W"===i)a="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new Sv;a="\x7f"}break;case"/":if(i>="A"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new Sv;a=":"}}n+=a,r++}else n+=o}return n},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(Kw);const eb=Jw;var tb=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nb=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rb=function(e){function t(){var t=e.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return tb(t,e),t.prototype.decodeRow=function(e,n,r){var o,i,a,s,c,l,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),h=n.getSize(),f=this.counters;f.fill(0),this.decodeRowResult="";do{t.recordPattern(n,d,f);var p=this.toPattern(f);if(p<0)throw new Lv;c=this.patternToChar(p),this.decodeRowResult+=c,l=d;try{for(var g=(o=void 0,nb(f)),m=g.next();!m.done;m=g.next()){d+=m.value}}catch(E){o={error:E}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}d=n.getNextSet(d)}while("*"!==c);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var y=0;try{for(var v=nb(f),w=v.next();!w.done;w=v.next()){y+=w.value}}catch(S){a={error:S}}finally{try{w&&!w.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}if(d===h||!n.get(d))throw new Lv;if(this.decodeRowResult.length<2)throw new Lv;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var b=this.decodeExtended(this.decodeRowResult),_=(u[1]+u[0])/2,C=l+y/2;return new tw(b,null,0,[new Nw(_,e),new Nw(C,e)],rw.CODE_93,(new Date).getTime())},t.prototype.findAsteriskPattern=function(e){var n=e.getSize(),r=e.getNextSet(0);this.counters.fill(0);for(var o=this.counters,i=r,a=!1,s=o.length,c=0,l=r;l<n;l++)if(e.get(l)!==a)o[c]++;else{if(c===s-1){if(this.toPattern(o)===t.ASTERISK_ENCODING)return new Int32Array([i,l]);i+=o[0]+o[1],o.copyWithin(0,2,2+c-1),o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,a=!a}throw new Lv},t.prototype.toPattern=function(e){var t,n,r=0;try{for(var o=nb(e),i=o.next();!i.done;i=o.next()){r+=i.value}}catch(d){t={error:d}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}for(var a=0,s=e.length,c=0;c<s;c++){var l=Math.round(9*e[c]/r);if(l<1||l>4)return-1;if(0===(1&c))for(var u=0;u<l;u++)a=a<<1|1;else a<<=l}return a},t.prototype.patternToChar=function(e){for(var n=0;n<t.CHARACTER_ENCODINGS.length;n++)if(t.CHARACTER_ENCODINGS[n]===e)return t.ALPHABET_STRING.charAt(n);throw new Lv},t.prototype.decodeExtended=function(e){for(var t=e.length,n="",r=0;r<t;r++){var o=e.charAt(r);if(o>="a"&&o<="d"){if(r>=t-1)throw new Sv;var i=e.charAt(r+1),a="\0";switch(o){case"d":if(!(i>="A"&&i<="Z"))throw new Sv;a=String.fromCharCode(i.charCodeAt(0)+32);break;case"a":if(!(i>="A"&&i<="Z"))throw new Sv;a=String.fromCharCode(i.charCodeAt(0)-64);break;case"b":if(i>="A"&&i<="E")a=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")a=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")a=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)a="\0";else if("V"===i)a="@";else if("W"===i)a="`";else{if(!(i>="X"&&i<="Z"))throw new Sv;a=String.fromCharCode(127)}break;case"c":if(i>="A"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new Sv;a=":"}}n+=a,r++}else n+=o}return n},t.prototype.checkChecksums=function(e){var t=e.length;this.checkOneChecksum(e,t-2,20),this.checkOneChecksum(e,t-1,15)},t.prototype.checkOneChecksum=function(e,n,r){for(var o=1,i=0,a=n-1;a>=0;a--)i+=o*t.ALPHABET_STRING.indexOf(e.charAt(a)),++o>r&&(o=1);if(e.charAt(n)!==t.ALPHABET_STRING[i%47])throw new av},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t}(Kw);const ob=rb;var ib=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ab=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sb=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return ib(t,e),t.prototype.decodeRow=function(e,n,r){var o,i,a=this.decodeStart(n),s=this.decodeEnd(n),c=new Pv;t.decodeMiddle(n,a[1],s[0],c);var l=c.toString(),u=null;null!=r&&(u=r.get(Cv.ALLOWED_LENGTHS)),null==u&&(u=t.DEFAULT_ALLOWED_LENGTHS);var d=l.length,h=!1,f=0;try{for(var p=ab(u),g=p.next();!g.done;g=p.next()){var m=g.value;if(d===m){h=!0;break}m>f&&(f=m)}}catch(v){o={error:v}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}if(!h&&d>f&&(h=!0),!h)throw new Sv;var y=[new Nw(a[1],e),new Nw(s[0],e)];return new tw(l,null,0,y,rw.ITF,(new Date).getTime())},t.decodeMiddle=function(e,n,r,o){var i=new Int32Array(10),a=new Int32Array(5),s=new Int32Array(5);for(i.fill(0),a.fill(0),s.fill(0);n<r;){Kw.recordPattern(e,n,i);for(var c=0;c<5;c++){var l=2*c;a[c]=i[l],s[c]=i[l+1]}var u=t.decodeDigit(a);o.append(u.toString()),u=this.decodeDigit(s),o.append(u.toString()),i.forEach(function(e){n+=e})}},t.prototype.decodeStart=function(e){var n=t.skipWhiteSpace(e),r=t.findGuardPattern(e,n,t.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r},t.prototype.validateQuietZone=function(e,t){var n=10*this.narrowLineWidth;n=n<t?n:t;for(var r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new Lv},t.skipWhiteSpace=function(e){var t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new Lv;return n},t.prototype.decodeEnd=function(e){e.reverse();try{var n=t.skipWhiteSpace(e),r=void 0;try{r=t.findGuardPattern(e,n,t.END_PATTERN_REVERSED[0])}catch(i){i instanceof Lv&&(r=t.findGuardPattern(e,n,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);var o=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-o,r}finally{e.reverse()}},t.findGuardPattern=function(e,n,r){var o=r.length,i=new Int32Array(o),a=e.getSize(),s=!1,c=0,l=n;i.fill(0);for(var u=n;u<a;u++)if(e.get(u)!==s)i[c]++;else{if(c===o-1){if(Kw.patternMatchVariance(i,r,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[l,u];l+=i[0]+i[1],lv.arraycopy(i,2,i,0,c-1),i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,s=!s}throw new Lv},t.decodeDigit=function(e){for(var n=t.MAX_AVG_VARIANCE,r=-1,o=t.PATTERNS.length,i=0;i<o;i++){var a=t.PATTERNS[i],s=Kw.patternMatchVariance(e,a,t.MAX_INDIVIDUAL_VARIANCE);s<n?(n=s,r=i):s===n&&(r=-1)}if(r>=0)return r%10;throw new Lv},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(Kw);const cb=sb;var lb=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ub=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return lb(t,e),t.findStartGuardPattern=function(e){for(var n,r=!1,o=0,i=Int32Array.from([0,0,0]);!r;){i=Int32Array.from([0,0,0]);var a=(n=t.findGuardPattern(e,o,!1,this.START_END_PATTERN,i))[0],s=a-((o=n[1])-a);s>=0&&(r=e.isRange(s,a,!1))}return n},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var n=e.length;if(0===n)return!1;var r=parseInt(e.charAt(n-1),10);return t.getStandardUPCEANChecksum(e.substring(0,n-1))===r},t.getStandardUPCEANChecksum=function(e){for(var t=e.length,n=0,r=t-1;r>=0;r-=2){if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new Sv;n+=o}n*=3;for(r=t-2;r>=0;r-=2){var o;if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new Sv;n+=o}return(1e3-n)%10},t.decodeEnd=function(e,n){return t.findGuardPattern(e,n,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))},t.findGuardPattern=function(e,n,r,o,i){for(var a=e.getSize(),s=0,c=n=r?e.getNextUnset(n):e.getNextSet(n),l=o.length,u=r,d=n;d<a;d++)if(e.get(d)!==u)i[s]++;else{if(s===l-1){if(Kw.patternMatchVariance(i,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([c,d]);c+=i[0]+i[1];for(var h=i.slice(2,i.length),f=0;f<s-1;f++)i[f]=h[f];i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,u=!u}throw new Lv},t.decodeDigit=function(e,n,r,o){this.recordPattern(e,r,n);for(var i=this.MAX_AVG_VARIANCE,a=-1,s=o.length,c=0;c<s;c++){var l=o[c],u=Kw.patternMatchVariance(n,l,t.MAX_INDIVIDUAL_VARIANCE);u<i&&(i=u,a=c)}if(a>=0)return a;throw new Lv},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(Kw);const db=ub;var hb=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},fb=function(){function e(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,n,r){var o=this.decodeRowStringBuffer,i=this.decodeMiddle(n,r,o),a=o.toString(),s=e.parseExtensionString(a),c=[new Nw((r[0]+r[1])/2,t),new Nw(i,t)],l=new tw(a,null,0,c,rw.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l},e.prototype.decodeMiddle=function(t,n,r){var o,i,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=t.getSize(),c=n[1],l=0,u=0;u<5&&c<s;u++){var d=db.decodeDigit(t,a,c,db.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var h=(o=void 0,hb(a)),f=h.next();!f.done;f=h.next()){c+=f.value}}catch(g){o={error:g}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}d>=10&&(l|=1<<4-u),4!==u&&(c=t.getNextSet(c),c=t.getNextUnset(c))}if(5!==r.length)throw new Lv;var p=this.determineCheckDigit(l);if(e.extensionChecksum(r.toString())!==p)throw new Lv;return c},e.extensionChecksum=function(e){for(var t=e.length,n=0,r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return(n*=3)%10},e.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new Lv},e.parseExtensionString=function(t){if(5!==t.length)return null;var n=e.parseExtension5String(t);return null==n?null:new Map([[iw.SUGGESTED_PRICE,n]])},e.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}var n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())},e}();const pb=fb;var gb=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},mb=function(){function e(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,n,r){var o=this.decodeRowStringBuffer,i=this.decodeMiddle(n,r,o),a=o.toString(),s=e.parseExtensionString(a),c=[new Nw((r[0]+r[1])/2,t),new Nw(i,t)],l=new tw(a,null,0,c,rw.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l},e.prototype.decodeMiddle=function(e,t,n){var r,o,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=e.getSize(),s=t[1],c=0,l=0;l<2&&s<a;l++){var u=db.decodeDigit(e,i,s,db.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+u%10);try{for(var d=(r=void 0,gb(i)),h=d.next();!h.done;h=d.next()){s+=h.value}}catch(f){r={error:f}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}u>=10&&(c|=1<<1-l),1!==l&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(2!==n.length)throw new Lv;if(parseInt(n.toString())%4!==c)throw new Lv;return s},e.parseExtensionString=function(e){return 2!==e.length?null:new Map([[iw.ISSUE_NUMBER,parseInt(e)]])},e}();const yb=mb;const vb=function(){function e(){}return e.decodeRow=function(e,t,n){var r=db.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new pb).decodeRow(e,t,r)}catch(o){return(new yb).decodeRow(e,t,r)}},e.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),e}();var wb=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bb=function(e){function t(){var n=e.call(this)||this;n.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(e){return Int32Array.from(e)});for(var r=10;r<20;r++){for(var o=t.L_PATTERNS[r-10],i=new Int32Array(o.length),a=0;a<o.length;a++)i[a]=o[o.length-a-1];t.L_AND_G_PATTERNS[r]=i}return n}return wb(t,e),t.prototype.decodeRow=function(e,n,r){var o=t.findStartGuardPattern(n),i=null==r?null:r.get(Cv.NEED_RESULT_POINT_CALLBACK);if(null!=i){var a=new Nw((o[0]+o[1])/2,e);i.foundPossibleResultPoint(a)}var s=this.decodeMiddle(n,o,this.decodeRowStringBuffer),c=s.rowOffset,l=s.resultString;if(null!=i){var u=new Nw(c,e);i.foundPossibleResultPoint(u)}var d=t.decodeEnd(n,c);if(null!=i){var h=new Nw((d[0]+d[1])/2,e);i.foundPossibleResultPoint(h)}var f=d[1],p=f+(f-d[0]);if(p>=n.getSize()||!n.isRange(f,p,!1))throw new Lv;var g=l.toString();if(g.length<8)throw new Sv;if(!t.checkChecksum(g))throw new av;var m=(o[1]+o[0])/2,y=(d[1]+d[0])/2,v=this.getBarcodeFormat(),w=[new Nw(m,e),new Nw(y,e)],b=new tw(g,null,0,w,v,(new Date).getTime()),_=0;try{var C=vb.decodeRow(e,n,d[1]);b.putMetadata(iw.UPC_EAN_EXTENSION,C.getText()),b.putAllMetadata(C.getResultMetadata()),b.addResultPoints(C.getResultPoints()),_=C.getText().length}catch(I){}var E=null==r?null:r.get(Cv.ALLOWED_EAN_EXTENSIONS);if(null!=E){var S=!1;for(var A in E)if(_.toString()===A){S=!0;break}if(!S)throw new Lv}return v===rw.EAN_13||rw.UPC_A,b},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var n=e.length;if(0===n)return!1;var r=parseInt(e.charAt(n-1),10);return t.getStandardUPCEANChecksum(e.substring(0,n-1))===r},t.getStandardUPCEANChecksum=function(e){for(var t=e.length,n=0,r=t-1;r>=0;r-=2){if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new Sv;n+=o}n*=3;for(r=t-2;r>=0;r-=2){var o;if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new Sv;n+=o}return(1e3-n)%10},t.decodeEnd=function(e,n){return t.findGuardPattern(e,n,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(db);const _b=bb;var Cb=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Eb=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Sb=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return Cb(t,e),t.prototype.decodeMiddle=function(e,n,r){var o,i,a,s,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var l=e.getSize(),u=n[1],d=0,h=0;h<6&&u<l;h++){var f=_b.decodeDigit(e,c,u,_b.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+f%10);try{for(var p=(o=void 0,Eb(c)),g=p.next();!g.done;g=p.next()){u+=g.value}}catch(v){o={error:v}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}f>=10&&(d|=1<<5-h)}r=t.determineFirstDigit(r,d),u=_b.findGuardPattern(e,u,!0,_b.MIDDLE_PATTERN,new Int32Array(_b.MIDDLE_PATTERN.length).fill(0))[1];for(h=0;h<6&&u<l;h++){f=_b.decodeDigit(e,c,u,_b.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+f);try{for(var m=(a=void 0,Eb(c)),y=m.next();!y.done;y=m.next()){u+=y.value}}catch(w){a={error:w}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}}return{rowOffset:u,resultString:r}},t.prototype.getBarcodeFormat=function(){return rw.EAN_13},t.determineFirstDigit=function(e,t){for(var n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e;throw new Lv},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(_b);const Ab=Sb;var Ib=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xb=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Nb=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return Ib(t,e),t.prototype.decodeMiddle=function(e,t,n){var r,o,i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=e.getSize(),l=t[1],u=0;u<4&&l<c;u++){var d=_b.decodeDigit(e,s,l,_b.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+d);try{for(var h=(r=void 0,xb(s)),f=h.next();!f.done;f=h.next()){l+=f.value}}catch(m){r={error:m}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}}l=_b.findGuardPattern(e,l,!0,_b.MIDDLE_PATTERN,new Int32Array(_b.MIDDLE_PATTERN.length).fill(0))[1];for(u=0;u<4&&l<c;u++){d=_b.decodeDigit(e,s,l,_b.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+d);try{for(var p=(i=void 0,xb(s)),g=p.next();!g.done;g=p.next()){l+=g.value}}catch(y){i={error:y}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}return{rowOffset:l,resultString:n}},t.prototype.getBarcodeFormat=function(){return rw.EAN_8},t}(_b);const Tb=Nb;var kb=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Ob=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ean13Reader=new Ab,t}return kb(t,e),t.prototype.getBarcodeFormat=function(){return rw.UPC_A},t.prototype.decode=function(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))},t.prototype.decodeMiddle=function(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)},t.prototype.maybeReturnResult=function(e){var t=e.getText();if("0"===t.charAt(0)){var n=new tw(t.substring(1),null,null,e.getResultPoints(),rw.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new Lv},t.prototype.reset=function(){this.ean13Reader.reset()},t}(_b);var Rb=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pb=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jb=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return Rb(t,e),t.prototype.decodeMiddle=function(e,n,r){var o,i,a=this.decodeMiddleCounters.map(function(e){return e});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),c=n[1],l=0,u=0;u<6&&c<s;u++){var d=t.decodeDigit(e,a,c,t.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var h=(o=void 0,Pb(a)),f=h.next();!f.done;f=h.next()){c+=f.value}}catch(p){o={error:p}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}d>=10&&(l|=1<<5-u)}return t.determineNumSysAndCheckDigit(new Pv(r),l),c},t.prototype.decodeEnd=function(e,n){return t.findGuardPatternWithoutCounters(e,n,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return _b.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,t){for(var n=0;n<=1;n++)for(var r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return e.insert(0,"0"+n),void e.append("0"+r);throw Lv.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return rw.UPC_E},t.convertUPCEtoUPCA=function(e){var t=e.slice(1,7).split("").map(function(e){return e.charCodeAt(0)}),n=new Pv;n.append(e.charAt(0));var r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(_b);const Db=jb;var Mb=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lb=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Bb=function(e){function t(t){var n=e.call(this)||this,r=null==t?null:t.get(Cv.POSSIBLE_FORMATS),o=[];return null!=r&&(r.indexOf(rw.EAN_13)>-1&&o.push(new Ab),r.indexOf(rw.UPC_A)>-1&&o.push(new Ob),r.indexOf(rw.EAN_8)>-1&&o.push(new Tb),r.indexOf(rw.UPC_E)>-1&&o.push(new Db)),0===o.length&&(o.push(new Ab),o.push(new Ob),o.push(new Tb),o.push(new Db)),n.readers=o,n}return Mb(t,e),t.prototype.decodeRow=function(e,t,n){var r,o;try{for(var i=Lb(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{var c=s.decodeRow(e,t,n),l=c.getBarcodeFormat()===rw.EAN_13&&"0"===c.getText().charAt(0),u=null==n?null:n.get(Cv.POSSIBLE_FORMATS),d=null==u||u.includes(rw.UPC_A);if(l&&d){var h=c.getRawBytes(),f=new tw(c.getText().substring(1),h,h?h.length:null,c.getResultPoints(),rw.UPC_A);return f.putAllMetadata(c.getResultMetadata()),f}return c}catch(p){}}}catch(g){r={error:g}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}throw new Lv},t.prototype.reset=function(){var e,t;try{for(var n=Lb(this.readers),r=n.next();!r.done;r=n.next()){r.value.reset()}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t}(Kw);const Fb=Bb;var Ub=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vb=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return Ub(t,e),t.prototype.decodeRow=function(e,t,n){var r=this.getValidRowData(t);if(!r)throw new Lv;var o=this.codaBarDecodeRow(r.row);if(!o)throw new Lv;return new tw(o,null,0,[new Nw(r.left,e),new Nw(r.right,e)],rw.CODABAR,(new Date).getTime())},t.prototype.getValidRowData=function(e){var t=e.toArray(),n=t.indexOf(!0);if(-1===n)return null;var r=t.lastIndexOf(!0);if(r<=n)return null;for(var o=[],i=(t=t.slice(n,r+1))[0],a=1,s=1;s<t.length;s++)t[s]===i?a++:(i=t[s],o.push(a),a=1);return o.push(a),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:n,right:r}},t.prototype.codaBarDecodeRow=function(e){for(var t=[],n=Math.ceil(e.reduce(function(e,t){return(e+t)/2},0));e.length>0;){var r=e.splice(0,8).splice(0,7).map(function(e){return e<n?"n":"w"}).join("");if(void 0===this.CODA_BAR_CHAR_SET[r])return null;t.push(this.CODA_BAR_CHAR_SET[r])}var o=t.join("");return this.validCodaBarString(o)?o:null},t.prototype.validCodaBarString=function(e){return/^[A-D].{1,}[A-D]$/.test(e)},t}(Kw);const zb=Vb;var Hb=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gb=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Wb=function(e){function t(){var t=e.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return Hb(t,e),t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,n){for(var r=0;r<n.length;r++)if(Kw.patternMatchVariance(e,n[r],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return r;throw new Lv},t.count=function(e){return Aw.sum(new Int32Array(e))},t.increment=function(e,t){for(var n=0,r=t[0],o=1;o<e.length;o++)t[o]>r&&(r=t[o],n=o);e[n]++},t.decrement=function(e,t){for(var n=0,r=t[0],o=1;o<e.length;o++)t[o]<r&&(r=t[o],n=o);e[n]--},t.isFinderPattern=function(e){var n,r,o=e[0]+e[1],i=o/(o+e[2]+e[3]);if(i>=t.MIN_FINDER_PATTERN_RATIO&&i<=t.MAX_FINDER_PATTERN_RATIO){var a=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;try{for(var c=Gb(e),l=c.next();!l.done;l=c.next()){var u=l.value;u>s&&(s=u),u<a&&(a=u)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return s<10*a}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(Kw);const qb=Wb;const Xb=function(){function e(e,t){this.value=e,this.checksumPortion=t}return e.prototype.getValue=function(){return this.value},e.prototype.getChecksumPortion=function(){return this.checksumPortion},e.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value&&this.checksumPortion===n.checksumPortion},e.prototype.hashCode=function(){return this.value^this.checksumPortion},e}();const Kb=function(){function e(e,t,n,r,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Nw(n,o)),this.resultPoints.push(new Nw(r,o))}return e.prototype.getValue=function(){return this.value},e.prototype.getStartEnd=function(){return this.startEnd},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.prototype.hashCode=function(){return this.value},e}();var Yb=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Qb=function(){function e(){}return e.getRSSvalue=function(t,n,r){var o,i,a=0;try{for(var s=Yb(t),c=s.next();!c.done;c=s.next()){a+=c.value}}catch(y){o={error:y}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}for(var l=0,u=0,d=t.length,h=0;h<d-1;h++){var f=void 0;for(f=1,u|=1<<h;f<t[h];f++,u&=~(1<<h)){var p=e.combins(a-f-1,d-h-2);if(r&&0===u&&a-f-(d-h-1)>=d-h-1&&(p-=e.combins(a-f-(d-h),d-h-2)),d-h-1>1){for(var g=0,m=a-f-(d-h-2);m>n;m--)g+=e.combins(a-f-m-1,d-h-3);p-=g*(d-1-h)}else a-f>n&&p--;l+=p}a-=f}return l},e.combins=function(e,t){var n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);for(var o=1,i=1,a=e;a>n;a--)o*=a,i<=r&&(o/=i,i++);for(;i<=r;)o/=i,i++;return o},e}();const Zb=Qb;var $b=function(){function e(){}return e.buildBitArray=function(e){var t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);for(var n=new bv(12*t),r=0,o=e[0].getRightChar().getValue(),i=11;i>=0;--i)0!==(o&1<<i)&&n.set(r),r++;for(i=1;i<e.length;++i){for(var a=e[i],s=a.getLeftChar().getValue(),c=11;c>=0;--c)0!==(s&1<<c)&&n.set(r),r++;if(null!==a.getRightChar()){var l=a.getRightChar().getValue();for(c=11;c>=0;--c)0!==(l&1<<c)&&n.set(r),r++}}return n},e}();const Jb=$b;const e_=function(){function e(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return e.prototype.getDecodedInformation=function(){return this.decodedInformation},e.prototype.isFinished=function(){return this.finished},e}();const t_=function(){function e(e){this.newPosition=e}return e.prototype.getNewPosition=function(){return this.newPosition},e}();var n_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const r_=function(e){function t(t,n){var r=e.call(this,t)||this;return r.value=n,r}return n_(t,e),t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(t_);var o_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const i_=function(e){function t(t,n,r){var o=e.call(this,t)||this;return r?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=n,o}return o_(t,e),t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(t_);var a_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const s_=function(e){function t(t,n,r){var o=e.call(this,t)||this;if(n<0||n>10||r<0||r>10)throw new Sv;return o.firstDigit=n,o.secondDigit=r,o}return a_(t,e),t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(t_);var c_=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l_=function(){function e(){}return e.parseFieldsInGeneralPurpose=function(t){var n,r,o,i,a,s,c,l;if(!t)return null;if(t.length<2)throw new Lv;var u=t.substring(0,2);try{for(var d=c_(e.TWO_DIGIT_DATA_LENGTH),h=d.next();!h.done;h=d.next()){if((_=h.value)[0]===u)return _[1]===e.VARIABLE_LENGTH?e.processVariableAI(2,_[2],t):e.processFixedAI(2,_[1],t)}}catch(C){n={error:C}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}if(t.length<3)throw new Lv;var f=t.substring(0,3);try{for(var p=c_(e.THREE_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){if((_=g.value)[0]===f)return _[1]===e.VARIABLE_LENGTH?e.processVariableAI(3,_[2],t):e.processFixedAI(3,_[1],t)}}catch(E){o={error:E}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}try{for(var m=c_(e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=m.next();!y.done;y=m.next()){if((_=y.value)[0]===f)return _[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,_[2],t):e.processFixedAI(4,_[1],t)}}catch(S){a={error:S}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(t.length<4)throw new Lv;var v=t.substring(0,4);try{for(var w=c_(e.FOUR_DIGIT_DATA_LENGTH),b=w.next();!b.done;b=w.next()){var _;if((_=b.value)[0]===v)return _[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,_[2],t):e.processFixedAI(4,_[1],t)}}catch(A){c={error:A}}finally{try{b&&!b.done&&(l=w.return)&&l.call(w)}finally{if(c)throw c.error}}throw new Lv},e.processFixedAI=function(t,n,r){if(r.length<t)throw new Lv;var o=r.substring(0,t);if(r.length<t+n)throw new Lv;var i=r.substring(t,t+n),a=r.substring(t+n),s="("+o+")"+i,c=e.parseFieldsInGeneralPurpose(a);return null==c?s:s+c},e.processVariableAI=function(t,n,r){var o,i=r.substring(0,t);o=r.length<t+n?r.length:t+n;var a=r.substring(t,o),s=r.substring(o),c="("+i+")"+a,l=e.parseFieldsInGeneralPurpose(s);return null==l?c:c+l},e.VARIABLE_LENGTH=[],e.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",e.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",e.VARIABLE_LENGTH,20],["22",e.VARIABLE_LENGTH,29],["30",e.VARIABLE_LENGTH,8],["37",e.VARIABLE_LENGTH,8],["90",e.VARIABLE_LENGTH,30],["91",e.VARIABLE_LENGTH,30],["92",e.VARIABLE_LENGTH,30],["93",e.VARIABLE_LENGTH,30],["94",e.VARIABLE_LENGTH,30],["95",e.VARIABLE_LENGTH,30],["96",e.VARIABLE_LENGTH,30],["97",e.VARIABLE_LENGTH,3],["98",e.VARIABLE_LENGTH,30],["99",e.VARIABLE_LENGTH,30]],e.THREE_DIGIT_DATA_LENGTH=[["240",e.VARIABLE_LENGTH,30],["241",e.VARIABLE_LENGTH,30],["242",e.VARIABLE_LENGTH,6],["250",e.VARIABLE_LENGTH,30],["251",e.VARIABLE_LENGTH,30],["253",e.VARIABLE_LENGTH,17],["254",e.VARIABLE_LENGTH,20],["400",e.VARIABLE_LENGTH,30],["401",e.VARIABLE_LENGTH,30],["402",17],["403",e.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",e.VARIABLE_LENGTH,20],["421",e.VARIABLE_LENGTH,15],["422",3],["423",e.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",e.VARIABLE_LENGTH,15],["391",e.VARIABLE_LENGTH,18],["392",e.VARIABLE_LENGTH,15],["393",e.VARIABLE_LENGTH,18],["703",e.VARIABLE_LENGTH,30]],e.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",e.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",e.VARIABLE_LENGTH,20],["8003",e.VARIABLE_LENGTH,30],["8004",e.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",e.VARIABLE_LENGTH,30],["8008",e.VARIABLE_LENGTH,12],["8018",18],["8020",e.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",e.VARIABLE_LENGTH,70],["8200",e.VARIABLE_LENGTH,70]],e}();const u_=l_;const d_=function(){function e(e){this.buffer=new Pv,this.information=e}return e.prototype.decodeAllCodes=function(e,t){for(var n=t,r=null;;){var o=this.decodeGeneralPurposeField(n,r),i=u_.parseFieldsInGeneralPurpose(o.getNewString());if(null!=i&&e.append(i),r=o.isRemaining()?""+o.getRemainingValue():null,n===o.getNewPosition())break;n=o.getNewPosition()}return e.toString()},e.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},e.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return new s_(this.information.getSize(),0===t?s_.FNC1:t-1,s_.FNC1)}var n=this.extractNumericValueFromBitArray(e,7);return new s_(e+7,(n-8)/11,(n-8)%11)},e.prototype.extractNumericValueFromBitArray=function(t,n){return e.extractNumericValueFromBitArray(this.information,t,n)},e.extractNumericValueFromBitArray=function(e,t,n){for(var r=0,o=0;o<n;++o)e.get(t+o)&&(r|=1<<n-o-1);return r},e.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return null!=n&&n.isRemaining()?new i_(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new i_(this.current.getPosition(),this.buffer.toString())},e.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();if(e=this.current.isAlpha()?(t=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(t=this.parseIsoIec646Block()).isFinished():(t=this.parseNumericBlock()).isFinished(),!(n!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()},e.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return t=e.isSecondDigitFNC1()?new i_(this.current.getPosition(),this.buffer.toString()):new i_(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new e_(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){t=new i_(this.current.getPosition(),this.buffer.toString());return new e_(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new e_(!1)},e.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new i_(this.current.getPosition(),this.buffer.toString());return new e_(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new e_(!1)},e.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new i_(this.current.getPosition(),this.buffer.toString());return new e_(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new e_(!1)},e.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253},e.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new r_(e+5,r_.FNC1);if(t>=5&&t<15)return new r_(e+5,"0"+(t-5));var n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new r_(e+7,""+(r+1));if(r>=90&&r<116)return new r_(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new Sv}return new r_(e+8,n)},e.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},e.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new r_(e+5,r_.FNC1);if(t>=5&&t<15)return new r_(e+5,"0"+(t-5));var n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new r_(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new vw("Decoding invalid alphanumeric value: "+r)}return new r_(e+6,n)},e.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},e.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},e.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},e}();const h_=function(){function e(e){this.information=e,this.generalDecoder=new d_(e)}return e.prototype.getInformation=function(){return this.information},e.prototype.getGeneralDecoder=function(){return this.generalDecoder},e}();var f_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const p_=function(e){function t(t){return e.call(this,t)||this}return f_(t,e),t.prototype.encodeCompressedGtin=function(e,t){e.append("(01)");var n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)},t.prototype.encodeCompressedGtinWithoutAI=function(e,n,r){for(var o=0;o<4;++o){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*o,10);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i)}t.appendCheckDigit(e,r)},t.appendCheckDigit=function(e,t){for(var n=0,r=0;r<13;r++){var o=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&r)?3*o:o}10===(n=10-n%10)&&(n=0),e.append(n)},t.GTIN_SIZE=40,t}(h_);var g_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const m_=function(e){function t(t){return e.call(this,t)||this}return g_(t,e),t.prototype.parseInformation=function(){var e=new Pv;e.append("(01)");var n=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(p_);var y_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const v_=function(e){function t(t){return e.call(this,t)||this}return y_(t,e),t.prototype.parseInformation=function(){var e=new Pv;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(h_);var w_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const b_=function(e){function t(t){return e.call(this,t)||this}return w_(t,e),t.prototype.encodeCompressedWeight=function(e,t,n){var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);for(var o=this.checkWeight(r),i=1e5,a=0;a<5;++a)o/i===0&&e.append("0"),i/=10;e.append(o)},t}(p_);var __=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const C_=function(e){function t(t){return e.call(this,t)||this}return __(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+b_.GTIN_SIZE+t.WEIGHT_SIZE)throw new Lv;var e=new Pv;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+b_.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(b_);var E_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const S_=function(e){function t(t){return e.call(this,t)||this}return E_(t,e),t.prototype.addWeightCode=function(e,t){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t}(C_);var A_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const I_=function(e){function t(t){return e.call(this,t)||this}return A_(t,e),t.prototype.addWeightCode=function(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t}(C_);var x_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const N_=function(e){function t(t){return e.call(this,t)||this}return x_(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+p_.GTIN_SIZE)throw new Lv;var e=new Pv;this.encodeCompressedGtin(e,t.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+p_.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");var r=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+p_.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(p_);var T_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const k_=function(e){function t(t){return e.call(this,t)||this}return T_(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+p_.GTIN_SIZE)throw new Lv;var e=new Pv;this.encodeCompressedGtin(e,t.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+p_.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+p_.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);r/100===0&&e.append("0"),r/10===0&&e.append("0"),e.append(r);var o=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+p_.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(o.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(p_);var O_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const R_=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.dateCode=r,o.firstAIdigits=n,o}return O_(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new Lv;var e=new Pv;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,n){var r=this.getGeneralDecoder().extractNumericValueFromBitArray(n,t.DATE_SIZE);if(38400!==r){e.append("("),e.append(this.dateCode),e.append(")");var o=r%32,i=(r/=32)%12+1,a=r/=12;a/10===0&&e.append("0"),e.append(a),i/10===0&&e.append("0"),e.append(i),o/10===0&&e.append("0"),e.append(o)}},t.prototype.addWeightCode=function(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(b_);const P_=function(){function e(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}return e.prototype.mayBeLast=function(){return this.maybeLast},e.prototype.getLeftChar=function(){return this.leftchar},e.prototype.getRightChar=function(){return this.rightchar},e.prototype.getFinderPattern=function(){return this.finderpattern},e.prototype.mustBeLast=function(){return null==this.rightchar},e.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},e.equals=function(t,n){return t instanceof e&&(e.equalsOrNull(t.leftchar,n.leftchar)&&e.equalsOrNull(t.rightchar,n.rightchar)&&e.equalsOrNull(t.finderpattern,n.finderpattern))},e.equalsOrNull=function(t,n){return null===t?null===n:e.equals(t,n)},e.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},e}();const j_=function(){function e(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return e.prototype.getPairs=function(){return this.pairs},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.isReversed=function(){return this.wasReversed},e.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},e.prototype.toString=function(){return"{ "+this.pairs+" }"},e.prototype.equals=function(t,n){return t instanceof e&&(this.checkEqualitity(t,n)&&t.wasReversed===n.wasReversed)},e.prototype.checkEqualitity=function(e,t){var n;if(e&&t)return e.forEach(function(e,r){t.forEach(function(t){e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)})}),n},e}();var D_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),M_=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},L_=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.pairs=new Array(t.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return D_(t,e),t.prototype.decodeRow=function(e,n,r){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,n))}catch(o){}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,n))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,t){for(var n,r=!1;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof Lv){if(!this.pairs.length)throw new Lv;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){var o=this.checkRowsBoolean(!1);if(null!=o)return o;if(null!=(o=this.checkRowsBoolean(!0)))return o}throw new Lv},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var t=null;try{t=this.checkRows(new Array,0)}catch(n){console.log(n)}return e&&(this.rows=this.rows.reverse()),t},t.prototype.checkRows=function(e,n){for(var r,o,i=n;i<this.rows.length;i++){var a=this.rows[i];this.pairs.length=0;try{for(var s=(r=void 0,M_(e)),c=s.next();!c.done;c=s.next()){var l=c.value;this.pairs.push(l.getPairs())}}catch(d){r={error:d}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}if(this.pairs.push(a.getPairs()),t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var u=new Array(e);u.push(a);try{return this.checkRows(u,i+1)}catch(h){console.log(h)}}}throw new Lv},t.isValidSequence=function(e){var n,r;try{for(var o=M_(t.FINDER_PATTERN_SEQUENCES),i=o.next();!i.done;i=o.next()){var a=i.value;if(!(e.length>a.length)){for(var s=!0,c=0;c<e.length;c++)if(e[c].getFinderPattern().getValue()!==a[c]){s=!1;break}if(s)return!0}}}catch(l){n={error:l}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1},t.prototype.storeRow=function(e,n){for(var r=0,o=!1,i=!1;r<this.rows.length;){var a=this.rows[r];if(a.getRowNumber()>e){i=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),r++}i||o||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new j_(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,t){var n,r,o,i,a,s;try{for(var c=M_(t),l=c.next();!l.done;l=c.next()){var u=l.value;if(u.getPairs().length!==e.length){try{for(var d=(o=void 0,M_(u.getPairs())),h=d.next();!h.done;h=d.next()){var f=h.value,p=!1;try{for(var g=(a=void 0,M_(e)),m=g.next();!m.done;m=g.next()){var y=m.value;if(P_.equals(f,y)){p=!0;break}}}catch(v){a={error:v}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}p||!1}}catch(w){o={error:w}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}}}}catch(b){n={error:b}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}},t.isPartialRow=function(e,t){var n,r,o,i,a,s;try{for(var c=M_(t),l=c.next();!l.done;l=c.next()){var u=l.value,d=!0;try{for(var h=(o=void 0,M_(e)),f=h.next();!f.done;f=h.next()){var p=f.value,g=!1;try{for(var m=(a=void 0,M_(u.getPairs())),y=m.next();!y.done;y=m.next()){var v=y.value;if(p.equals(v)){g=!0;break}}}catch(w){a={error:w}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(!g){d=!1;break}}}catch(b){o={error:b}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}if(d)return!0}}catch(_){n={error:_}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var t=function(e){try{if(e.get(1))return new m_(e);if(!e.get(2))return new v_(e);switch(d_.extractNumericValueFromBitArray(e,1,4)){case 4:return new S_(e);case 5:return new I_(e)}switch(d_.extractNumericValueFromBitArray(e,1,5)){case 12:return new N_(e);case 13:return new k_(e)}switch(d_.extractNumericValueFromBitArray(e,1,7)){case 56:return new R_(e,"310","11");case 57:return new R_(e,"320","11");case 58:return new R_(e,"310","13");case 59:return new R_(e,"320","13");case 60:return new R_(e,"310","15");case 61:return new R_(e,"320","15");case 62:return new R_(e,"310","17");case 63:return new R_(e,"320","17")}}catch(t){throw console.log(t),new vw("unknown decoder: "+e)}}(Jb.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints(),o=[n[0],n[1],r[0],r[1]];return new tw(t,null,null,o,rw.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null===n)return!1;for(var r=n.getChecksumPortion(),o=2,i=1;i<this.pairs.size();++i){var a=this.pairs.get(i);r+=a.getLeftChar().getChecksumPortion(),o++;var s=a.getRightChar();null!=s&&(r+=s.getChecksumPortion(),o++)}return 211*(o-4)+(r%=211)===t.getValue()},t.getNextSecondBar=function(e,t){var n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n},t.prototype.retrieveNextPair=function(e,n,r){var o,i=n.length%2===0;this.startFromEven&&(i=!i);var a=!0,s=-1;do{this.findNextPair(e,n,s),null===(o=this.parseFoundFinderPattern(e,r,i))?s=t.getNextSecondBar(e,this.startEnd[0]):a=!1}while(a);var c,l=this.decodeDataCharacter(e,o,i,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new Lv;try{c=this.decodeDataCharacter(e,o,i,!1)}catch(u){c=null,console.log(u)}return new P_(l,c,o,!0)},t.prototype.isEmptyPair=function(e){return 0===e.length},t.prototype.findNextPair=function(e,n,r){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var i,a=e.getSize();if(r>=0)i=r;else if(this.isEmptyPair(n))i=0;else{i=n[n.length-1].getFinderPattern().getStartEnd()[1]}var s=n.length%2!==0;this.startFromEven&&(s=!s);for(var c=!1;i<a&&(c=!e.get(i));)i++;for(var l=0,u=i,d=i;d<a;d++)if(e.get(d)!==c)o[l]++;else{if(3===l){if(s&&t.reverseCounters(o),t.isFinderPattern(o))return this.startEnd[0]=u,void(this.startEnd[1]=d);s&&t.reverseCounters(o),u+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,l--}else l++;o[l]=1,c=!c}throw new Lv},t.reverseCounters=function(e){for(var t=e.length,n=0;n<t/2;++n){var r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}},t.prototype.parseFoundFinderPattern=function(e,n,r){var o,i,a;if(r){for(var s=this.startEnd[0]-1;s>=0&&!e.get(s);)s--;s++,o=this.startEnd[0]-s,i=s,a=this.startEnd[1]}else i=this.startEnd[0],o=(a=e.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var c,l=this.getDecodeFinderCounters();lv.arraycopy(l,0,l,1,l.length-1),l[0]=o;try{c=this.parseFinderValue(l,t.FINDER_PATTERNS)}catch(u){return null}return new Kb(c,[i,a],i,a,n)},t.prototype.decodeDataCharacter=function(e,n,r,o){for(var i=this.getDataCharacterCounters(),a=0;a<i.length;a++)i[a]=0;if(o)t.recordPatternInReverse(e,n.getStartEnd()[0],i);else{t.recordPattern(e,n.getStartEnd()[1],i);for(var s=0,c=i.length-1;s<c;s++,c--){var l=i[s];i[s]=i[c],i[c]=l}}var u=Aw.sum(new Int32Array(i))/17,d=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(u-d)/d>.3)throw new Lv;var h=this.getOddCounts(),f=this.getEvenCounts(),p=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors();for(s=0;s<i.length;s++){var m=1*i[s]/u,y=m+.5;if(y<1){if(m<.3)throw new Lv;y=1}else if(y>8){if(m>8.7)throw new Lv;y=8}var v=s/2;0===(1&s)?(h[v]=y,p[v]=m-y):(f[v]=y,g[v]=m-y)}this.adjustOddEvenCounts(17);var w=4*n.getValue()+(r?0:2)+(o?0:1)-1,b=0,_=0;for(s=h.length-1;s>=0;s--){if(t.isNotA1left(n,r,o)){var C=t.WEIGHTS[w][2*s];_+=h[s]*C}b+=h[s]}var E=0;for(s=f.length-1;s>=0;s--)if(t.isNotA1left(n,r,o)){C=t.WEIGHTS[w][2*s+1];E+=f[s]*C}var S=_+E;if(0!==(1&b)||b>13||b<4)throw new Lv;var A=(13-b)/2,I=t.SYMBOL_WIDEST[A],x=9-I,N=Zb.getRSSvalue(h,I,!0),T=Zb.getRSSvalue(f,x,!1),k=t.EVEN_TOTAL_SUBSET[A],O=t.GSUM[A];return new Xb(N*k+T+O,S)},t.isNotA1left=function(e,t,n){return!(0===e.getValue()&&t&&n)},t.prototype.adjustOddEvenCounts=function(e){var n=Aw.sum(new Int32Array(this.getOddCounts())),r=Aw.sum(new Int32Array(this.getEvenCounts())),o=!1,i=!1;n>13?i=!0:n<4&&(o=!0);var a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var c=n+r-e,l=1===(1&n),u=0===(1&r);if(1===c)if(l){if(u)throw new Lv;i=!0}else{if(!u)throw new Lv;s=!0}else if(-1===c)if(l){if(u)throw new Lv;o=!0}else{if(!u)throw new Lv;a=!0}else{if(0!==c)throw new Lv;if(l){if(!u)throw new Lv;n<r?(o=!0,s=!0):(i=!0,a=!0)}else if(u)throw new Lv}if(o){if(i)throw new Lv;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new Lv;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(qb);const B_=L_;var F_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const U_=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.count=0,o.finderPattern=r,o}return F_(t,e),t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(Xb);var V_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),z_=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},H_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return V_(t,e),t.prototype.decodeRow=function(e,n,r){var o,i,a,s,c=this.decodePair(n,!1,e,r);t.addOrTally(this.possibleLeftPairs,c),n.reverse();var l=this.decodePair(n,!0,e,r);t.addOrTally(this.possibleRightPairs,l),n.reverse();try{for(var u=z_(this.possibleLeftPairs),d=u.next();!d.done;d=u.next()){var h=d.value;if(h.getCount()>1)try{for(var f=(a=void 0,z_(this.possibleRightPairs)),p=f.next();!p.done;p=f.next()){var g=p.value;if(g.getCount()>1&&t.checkChecksum(h,g))return t.constructResult(h,g)}}catch(m){a={error:m}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}}}catch(y){o={error:y}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}throw new Lv},t.addOrTally=function(e,t){var n,r;if(null!=t){var o=!1;try{for(var i=z_(e),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.getValue()===t.getValue()){s.incrementCount(),o=!0;break}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}o||e.push(t)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,t){for(var n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),o=new Pv,i=13-r.length;i>0;i--)o.append("0");o.append(r);var a=0;for(i=0;i<13;i++){var s=o.charAt(i).charCodeAt(0)-"0".charCodeAt(0);a+=0===(1&i)?3*s:s}10===(a=10-a%10)&&(a=0),o.append(a.toString());var c=e.getFinderPattern().getResultPoints(),l=t.getFinderPattern().getResultPoints();return new tw(o.toString(),null,0,[c[0],c[1],l[0],l[1]],rw.RSS_14,(new Date).getTime())},t.checkChecksum=function(e,t){var n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r},t.prototype.decodePair=function(e,t,n,r){try{var o=this.findFinderPattern(e,t),i=this.parseFoundFinderPattern(e,n,t,o),a=null==r?null:r.get(Cv.NEED_RESULT_POINT_CALLBACK);if(null!=a){var s=(o[0]+o[1])/2;t&&(s=e.getSize()-1-s),a.foundPossibleResultPoint(new Nw(s,n))}var c=this.decodeDataCharacter(e,i,!0),l=this.decodeDataCharacter(e,i,!1);return new U_(1597*c.getValue()+l.getValue(),c.getChecksumPortion()+4*l.getChecksumPortion(),i)}catch(u){return null}},t.prototype.decodeDataCharacter=function(e,n,r){for(var o=this.getDataCharacterCounters(),i=0;i<o.length;i++)o[i]=0;if(r)Kw.recordPatternInReverse(e,n.getStartEnd()[0],o);else{Kw.recordPattern(e,n.getStartEnd()[1]+1,o);for(var a=0,s=o.length-1;a<s;a++,s--){var c=o[a];o[a]=o[s],o[s]=c}}var l=r?16:15,u=Aw.sum(new Int32Array(o))/l,d=this.getOddCounts(),h=this.getEvenCounts(),f=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors();for(a=0;a<o.length;a++){var g=o[a]/u,m=Math.floor(g+.5);m<1?m=1:m>8&&(m=8);var y=Math.floor(a/2);0===(1&a)?(d[y]=m,f[y]=g-m):(h[y]=m,p[y]=g-m)}this.adjustOddEvenCounts(r,l);var v=0,w=0;for(a=d.length-1;a>=0;a--)w*=9,w+=d[a],v+=d[a];var b=0,_=0;for(a=h.length-1;a>=0;a--)b*=9,b+=h[a],_+=h[a];var C=w+3*b;if(r){if(0!==(1&v)||v>12||v<4)throw new Lv;var E=(12-v)/2,S=9-(T=t.OUTSIDE_ODD_WIDEST[E]),A=Zb.getRSSvalue(d,T,!1),I=Zb.getRSSvalue(h,S,!0),x=t.OUTSIDE_EVEN_TOTAL_SUBSET[E],N=t.OUTSIDE_GSUM[E];return new Xb(A*x+I+N,C)}if(0!==(1&_)||_>10||_<4)throw new Lv;E=(10-_)/2,S=9-(T=t.INSIDE_ODD_WIDEST[E]),A=Zb.getRSSvalue(d,T,!0),I=Zb.getRSSvalue(h,S,!1);var T,k=t.INSIDE_ODD_TOTAL_SUBSET[E];N=t.INSIDE_GSUM[E];return new Xb(I*k+A+N,C)},t.prototype.findFinderPattern=function(e,t){var n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;for(var r=e.getSize(),o=!1,i=0;i<r&&t!==(o=!e.get(i));)i++;for(var a=0,s=i,c=i;c<r;c++)if(e.get(c)!==o)n[a]++;else{if(3===a){if(qb.isFinderPattern(n))return[s,c];s+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,a--}else a++;n[a]=1,o=!o}throw new Lv},t.prototype.parseFoundFinderPattern=function(e,n,r,o){for(var i=e.get(o[0]),a=o[0]-1;a>=0&&i!==e.get(a);)a--;a++;var s=o[0]-a,c=this.getDecodeFinderCounters(),l=new Int32Array(c.length);lv.arraycopy(c,0,l,1,c.length-1),l[0]=s;var u=this.parseFinderValue(l,t.FINDER_PATTERNS),d=a,h=o[1];return r&&(d=e.getSize()-1-d,h=e.getSize()-1-h),new Kb(u,[a,o[1]],d,h,n)},t.prototype.adjustOddEvenCounts=function(e,t){var n=Aw.sum(new Int32Array(this.getOddCounts())),r=Aw.sum(new Int32Array(this.getEvenCounts())),o=!1,i=!1,a=!1,s=!1;e?(n>12?i=!0:n<4&&(o=!0),r>12?s=!0:r<4&&(a=!0)):(n>11?i=!0:n<5&&(o=!0),r>10?s=!0:r<4&&(a=!0));var c=n+r-t,l=(1&n)===(e?1:0),u=1===(1&r);if(1===c)if(l){if(u)throw new Lv;i=!0}else{if(!u)throw new Lv;s=!0}else if(-1===c)if(l){if(u)throw new Lv;o=!0}else{if(!u)throw new Lv;a=!0}else{if(0!==c)throw new Lv;if(l){if(!u)throw new Lv;n<r?(o=!0,s=!0):(i=!0,a=!0)}else if(u)throw new Lv}if(o){if(i)throw new Lv;qb.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&qb.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new Lv;qb.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&qb.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(qb);const G_=H_;var W_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const q_=function(e){function t(t){var n=e.call(this)||this;n.readers=[];var r=t?t.get(Cv.POSSIBLE_FORMATS):null,o=t&&void 0!==t.get(Cv.ASSUME_CODE_39_CHECK_DIGIT),i=t&&void 0!==t.get(Cv.ENABLE_CODE_39_EXTENDED_MODE);return r&&((r.includes(rw.EAN_13)||r.includes(rw.UPC_A)||r.includes(rw.EAN_8)||r.includes(rw.UPC_E))&&n.readers.push(new Fb(t)),r.includes(rw.CODE_39)&&n.readers.push(new eb(o,i)),r.includes(rw.CODE_93)&&n.readers.push(new ob),r.includes(rw.CODE_128)&&n.readers.push(new Qw),r.includes(rw.ITF)&&n.readers.push(new cb),r.includes(rw.CODABAR)&&n.readers.push(new zb),r.includes(rw.RSS_14)&&n.readers.push(new G_),r.includes(rw.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new B_))),0===n.readers.length&&(n.readers.push(new Fb(t)),n.readers.push(new eb),n.readers.push(new ob),n.readers.push(new Fb(t)),n.readers.push(new Qw),n.readers.push(new cb),n.readers.push(new G_)),n}return W_(t,e),t.prototype.decodeRow=function(e,t,n){for(var r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch(o){}throw new Lv},t.prototype.reset=function(){this.readers.forEach(function(e){return e.reset()})},t}(Kw);var X_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K_=(function(e){function t(t,n){return void 0===t&&(t=500),e.call(this,new q_(n),t,n)||this}X_(t,e)}(ew),function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}),Y_=function(){function e(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return e.prototype.getECCodewords=function(){return this.ecCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e}(),Q_=function(){function e(e,t){this.count=e,this.dataCodewords=t}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}(),Z_=function(){function e(e,t,n,r,o,i){var a,s;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=o,this.ecBlocks=i;var c=0,l=i.getECCodewords(),u=i.getECBlocks();try{for(var d=K_(u),h=d.next();!h.done;h=d.next()){var f=h.value;c+=f.getCount()*(f.getDataCodewords()+l)}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}this.totalCodewords=c}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},e.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},e.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},e.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e.getVersionForDimensions=function(t,n){var r,o;if(0!==(1&t)||0!==(1&n))throw new Sv;try{for(var i=K_(e.VERSIONS),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.symbolSizeRows===t&&s.symbolSizeColumns===n)return s}}catch(c){r={error:c}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}throw new Sv},e.prototype.toString=function(){return""+this.versionNumber},e.buildVersions=function(){return[new e(1,10,10,8,8,new Y_(5,new Q_(1,3))),new e(2,12,12,10,10,new Y_(7,new Q_(1,5))),new e(3,14,14,12,12,new Y_(10,new Q_(1,8))),new e(4,16,16,14,14,new Y_(12,new Q_(1,12))),new e(5,18,18,16,16,new Y_(14,new Q_(1,18))),new e(6,20,20,18,18,new Y_(18,new Q_(1,22))),new e(7,22,22,20,20,new Y_(20,new Q_(1,30))),new e(8,24,24,22,22,new Y_(24,new Q_(1,36))),new e(9,26,26,24,24,new Y_(28,new Q_(1,44))),new e(10,32,32,14,14,new Y_(36,new Q_(1,62))),new e(11,36,36,16,16,new Y_(42,new Q_(1,86))),new e(12,40,40,18,18,new Y_(48,new Q_(1,114))),new e(13,44,44,20,20,new Y_(56,new Q_(1,144))),new e(14,48,48,22,22,new Y_(68,new Q_(1,174))),new e(15,52,52,24,24,new Y_(42,new Q_(2,102))),new e(16,64,64,14,14,new Y_(56,new Q_(2,140))),new e(17,72,72,16,16,new Y_(36,new Q_(4,92))),new e(18,80,80,18,18,new Y_(48,new Q_(4,114))),new e(19,88,88,20,20,new Y_(56,new Q_(4,144))),new e(20,96,96,22,22,new Y_(68,new Q_(4,174))),new e(21,104,104,24,24,new Y_(56,new Q_(6,136))),new e(22,120,120,18,18,new Y_(68,new Q_(6,175))),new e(23,132,132,20,20,new Y_(62,new Q_(8,163))),new e(24,144,144,22,22,new Y_(62,new Q_(8,156),new Q_(2,155))),new e(25,8,18,6,16,new Y_(7,new Q_(1,5))),new e(26,8,32,6,14,new Y_(11,new Q_(1,10))),new e(27,12,26,10,24,new Y_(14,new Q_(1,16))),new e(28,12,36,10,16,new Y_(18,new Q_(1,22))),new e(29,16,36,14,16,new Y_(24,new Q_(1,32))),new e(30,16,48,14,22,new Y_(28,new Q_(1,49)))]},e.VERSIONS=e.buildVersions(),e}();const $_=Z_;var J_=function(){function e(t){var n=t.getHeight();if(n<8||n>144||0!==(1&n))throw new Sv;this.version=e.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Dv(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return e.prototype.getVersion=function(){return this.version},e.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return $_.getVersionForDimensions(t,n)},e.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,r=0,o=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth(),a=!1,s=!1,c=!1,l=!1;do{if(n!==o||0!==r||a)if(n!==o-2||0!==r||0===(3&i)||s)if(n!==o+4||2!==r||0!==(7&i)||c)if(n!==o-2||0!==r||4!==(7&i)||l){do{n<o&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,o,i)),n-=2,r+=2}while(n>=0&&r<i);n+=1,r+=3;do{n>=0&&r<i&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,o,i)),n+=2,r-=2}while(n<o&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(o,i),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner3(o,i),n-=2,r+=2,c=!0;else e[t++]=255&this.readCorner2(o,i),n-=2,r+=2,s=!0;else e[t++]=255&this.readCorner1(o,i),n-=2,r+=2,a=!0}while(n<o||r<i);if(t!==this.version.getTotalCodewords())throw new Sv;return e},e.prototype.readModule=function(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},e.prototype.readUtah=function(e,t,n,r){var o=0;return this.readModule(e-2,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e-2,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t,n,r)&&(o|=1),o<<=1,this.readModule(e,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e,t,n,r)&&(o|=1),o},e.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},e.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},e.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},e.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},e.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new rv("Dimension of bitMatrix must match the version size");for(var r=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),i=t/r|0,a=n/o|0,s=new Dv(a*o,i*r),c=0;c<i;++c)for(var l=c*r,u=0;u<a;++u)for(var d=u*o,h=0;h<r;++h)for(var f=c*(r+2)+1+h,p=l+h,g=0;g<o;++g){var m=u*(o+2)+1+g;if(e.get(m,f)){var y=d+g;s.set(y,p)}}return s},e}();const eC=J_;var tC=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},nC=function(){function e(e,t){this.numDataCodewords=e,this.codewords=t}return e.getDataBlocks=function(t,n){var r,o,i,a,s=n.getECBlocks(),c=0,l=s.getECBlocks();try{for(var u=tC(l),d=u.next();!d.done;d=u.next()){c+=(m=d.value).getCount()}}catch(T){r={error:T}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}var h=new Array(c),f=0;try{for(var p=tC(l),g=p.next();!g.done;g=p.next())for(var m=g.value,y=0;y<m.getCount();y++){var v=m.getDataCodewords(),w=s.getECCodewords()+v;h[f++]=new e(v,new Uint8Array(w))}}catch(k){i={error:k}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var b=h[0].codewords.length-s.getECCodewords(),_=b-1,C=0;for(y=0;y<_;y++)for(var E=0;E<f;E++)h[E].codewords[y]=t[C++];var S=24===n.getVersionNumber(),A=S?8:f;for(E=0;E<A;E++)h[E].codewords[b-1]=t[C++];var I=h[0].codewords.length;for(y=b;y<I;y++)for(E=0;E<f;E++){var x=S?(E+8)%f:E,N=S&&x>7?y-1:y;h[x].codewords[N]=t[C++]}if(C!==t.length)throw new rv;return h},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}();const rC=nC;const oC=function(){function e(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return e.prototype.getBitOffset=function(){return this.bitOffset},e.prototype.getByteOffset=function(){return this.byteOffset},e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new rv(""+e);var t=0,n=this.bitOffset,r=this.byteOffset,o=this.bytes;if(n>0){var i=8-n,a=e<i?e:i,s=255>>8-a<<(c=i-a);t=(o[r]&s)>>c,e-=a,8===(n+=a)&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&o[r],r++,e-=8;if(e>0){var c;s=255>>(c=8-e)<<c;t=t<<e|(o[r]&s)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=r,t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();var iC;!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(iC||(iC={}));var aC=function(){function e(){}return e.decode=function(e){var t=new oC(e),n=new Pv,r=new Pv,o=new Array,i=iC.ASCII_ENCODE;do{if(i===iC.ASCII_ENCODE)i=this.decodeAsciiSegment(t,n,r);else{switch(i){case iC.C40_ENCODE:this.decodeC40Segment(t,n);break;case iC.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case iC.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case iC.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case iC.BASE256_ENCODE:this.decodeBase256Segment(t,n,o);break;default:throw new Sv}i=iC.ASCII_ENCODE}}while(i!==iC.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new aw(e,n.toString(),0===o.length?null:o,null)},e.decodeAsciiSegment=function(e,t,n){var r=!1;do{var o=e.readBits(8);if(0===o)throw new Sv;if(o<=128)return r&&(o+=128),t.append(String.fromCharCode(o-1)),iC.ASCII_ENCODE;if(129===o)return iC.PAD_ENCODE;if(o<=229){var i=o-130;i<10&&t.append("0"),t.append(""+i)}else switch(o){case 230:return iC.C40_ENCODE;case 231:return iC.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return iC.ANSIX12_ENCODE;case 239:return iC.TEXT_ENCODE;case 240:return iC.EDIFACT_ENCODE;default:if(254!==o||0!==e.available())throw new Sv}}while(e.available()>0);return iC.ASCII_ENCODE},e.decodeC40Segment=function(e,t){var n=!1,r=[],o=0;do{if(8===e.available())return;var i=e.readBits(8);if(254===i)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(o){case 0:if(s<3)o=s+1;else{if(!(s<this.C40_BASIC_SET_CHARS.length))throw new Sv;var c=this.C40_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),o=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length){c=this.C40_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new Sv}o=0;break;case 3:n?(t.append(String.fromCharCode(s+224)),n=!1):t.append(String.fromCharCode(s+96)),o=0;break;default:throw new Sv}}}while(e.available()>0)},e.decodeTextSegment=function(e,t){var n=!1,r=[],o=0;do{if(8===e.available())return;var i=e.readBits(8);if(254===i)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(o){case 0:if(s<3)o=s+1;else{if(!(s<this.TEXT_BASIC_SET_CHARS.length))throw new Sv;var c=this.TEXT_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),o=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length){c=this.TEXT_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new Sv}o=0;break;case 3:if(!(s<this.TEXT_SHIFT3_SET_CHARS.length))throw new Sv;c=this.TEXT_SHIFT3_SET_CHARS[s];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c),o=0;break;default:throw new Sv}}}while(e.available()>0)},e.decodeAnsiX12Segment=function(e,t){var n=[];do{if(8===e.available())return;var r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(var o=0;o<3;o++){var i=n[o];switch(i){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(i<14)t.append(String.fromCharCode(i+44));else{if(!(i<40))throw new Sv;t.append(String.fromCharCode(i+51))}}}}while(e.available()>0)},e.parseTwoBytes=function(e,t,n){var r=(e<<8)+t-1,o=Math.floor(r/1600);n[0]=o,r-=1600*o,o=Math.floor(r/40),n[1]=o,n[2]=r-40*o},e.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var r=e.readBits(6);if(31===r){var o=8-e.getBitOffset();return void(8!==o&&e.readBits(o))}0===(32&r)&&(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)},e.decodeBase256Segment=function(e,t,n){var r,o=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),o++);if((r=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),o++))<0)throw new Sv;for(var a=new Uint8Array(r),s=0;s<r;s++){if(e.available()<8)throw new Sv;a[s]=this.unrandomize255State(e.readBits(8),o++)}n.push(a);try{t.append(Ov.decode(a,Rv.ISO88591))}catch(c){throw new vw("Platform does not support required encoding: "+c.message)}},e.unrandomize255State=function(e,t){var n=e-(149*t%255+1);return n>=0?n:n+256},e.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],e.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e.TEXT_SHIFT2_SET_CHARS=e.C40_SHIFT2_SET_CHARS,e.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],e}();const sC=aC;var cC=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},lC=function(){function e(){this.rsDecoder=new bw(pw.DATA_MATRIX_FIELD_256)}return e.prototype.decode=function(e){var t,n,r=new eC(e),o=r.getVersion(),i=r.readCodewords(),a=rC.getDataBlocks(i,o),s=0;try{for(var c=cC(a),l=c.next();!l.done;l=c.next()){s+=l.value.getNumDataCodewords()}}catch(y){t={error:y}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}for(var u=new Uint8Array(s),d=a.length,h=0;h<d;h++){var f=a[h],p=f.getCodewords(),g=f.getNumDataCodewords();this.correctErrors(p,g);for(var m=0;m<g;m++)u[m*d+h]=p[m]}return sC.decode(u)},e.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(o){throw new av}for(var r=0;r<t;r++)e[r]=n[r]},e}();const uC=lC;var dC=function(){function e(e){this.image=e,this.rectangleDetector=new Pw(this.image)}return e.prototype.detect=function(){var t=this.rectangleDetector.detect(),n=this.detectSolid1(t);if((n=this.detectSolid2(n))[3]=this.correctTopRight(n),!n[3])throw new Lv;var r=(n=this.shiftToModuleCenter(n))[0],o=n[1],i=n[2],a=n[3],s=this.transitionsBetween(r,a)+1,c=this.transitionsBetween(i,a)+1;1===(1&s)&&(s+=1),1===(1&c)&&(c+=1),4*s<7*c&&4*c<7*s&&(s=c=Math.max(s,c));var l=e.sampleGrid(this.image,r,o,i,a,s,c);return new Tw(l,[r,o,i,a])},e.shiftPoint=function(e,t,n){var r=(t.getX()-e.getX())/(n+1),o=(t.getY()-e.getY())/(n+1);return new Nw(e.getX()+r,e.getY()+o)},e.moveAway=function(e,t,n){var r=e.getX(),o=e.getY();return r<t?r-=1:r+=1,o<n?o-=1:o+=1,new Nw(r,o)},e.prototype.detectSolid1=function(e){var t=e[0],n=e[1],r=e[3],o=e[2],i=this.transitionsBetween(t,n),a=this.transitionsBetween(n,r),s=this.transitionsBetween(r,o),c=this.transitionsBetween(o,t),l=i,u=[o,t,n,r];return l>a&&(l=a,u[0]=t,u[1]=n,u[2]=r,u[3]=o),l>s&&(l=s,u[0]=n,u[1]=r,u[2]=o,u[3]=t),l>c&&(u[0]=r,u[1]=o,u[2]=t,u[3]=n),u},e.prototype.detectSolid2=function(t){var n=t[0],r=t[1],o=t[2],i=t[3],a=this.transitionsBetween(n,i),s=e.shiftPoint(r,o,4*(a+1)),c=e.shiftPoint(o,r,4*(a+1));return this.transitionsBetween(s,n)<this.transitionsBetween(c,i)?(t[0]=n,t[1]=r,t[2]=o,t[3]=i):(t[0]=r,t[1]=o,t[2]=i,t[3]=n),t},e.prototype.correctTopRight=function(t){var n=t[0],r=t[1],o=t[2],i=t[3],a=this.transitionsBetween(n,i),s=this.transitionsBetween(r,i),c=e.shiftPoint(n,r,4*(s+1)),l=e.shiftPoint(o,r,4*(a+1));a=this.transitionsBetween(c,i),s=this.transitionsBetween(l,i);var u=new Nw(i.getX()+(o.getX()-r.getX())/(a+1),i.getY()+(o.getY()-r.getY())/(a+1)),d=new Nw(i.getX()+(n.getX()-r.getX())/(s+1),i.getY()+(n.getY()-r.getY())/(s+1));return this.isValid(u)?this.isValid(d)?this.transitionsBetween(c,u)+this.transitionsBetween(l,u)>this.transitionsBetween(c,d)+this.transitionsBetween(l,d)?u:d:u:this.isValid(d)?d:null},e.prototype.shiftToModuleCenter=function(t){var n=t[0],r=t[1],o=t[2],i=t[3],a=this.transitionsBetween(n,i)+1,s=this.transitionsBetween(o,i)+1,c=e.shiftPoint(n,r,4*s),l=e.shiftPoint(o,r,4*a);1===(1&(a=this.transitionsBetween(c,i)+1))&&(a+=1),1===(1&(s=this.transitionsBetween(l,i)+1))&&(s+=1);var u,d,h=(n.getX()+r.getX()+o.getX()+i.getX())/4,f=(n.getY()+r.getY()+o.getY()+i.getY())/4;return n=e.moveAway(n,h,f),r=e.moveAway(r,h,f),o=e.moveAway(o,h,f),i=e.moveAway(i,h,f),c=e.shiftPoint(n,r,4*s),c=e.shiftPoint(c,i,4*a),u=e.shiftPoint(r,n,4*s),u=e.shiftPoint(u,o,4*a),l=e.shiftPoint(o,i,4*s),l=e.shiftPoint(l,r,4*a),d=e.shiftPoint(i,o,4*s),[c,u,l,d=e.shiftPoint(d,n,4*a)]},e.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},e.sampleGrid=function(e,t,n,r,o,i,a){return Vw.getInstance().sampleGrid(e,i,a,.5,.5,i-.5,.5,i-.5,a-.5,.5,a-.5,t.getX(),t.getY(),o.getX(),o.getY(),r.getX(),r.getY(),n.getX(),n.getY())},e.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),o=Math.trunc(t.getX()),i=Math.trunc(t.getY()),a=Math.abs(i-r)>Math.abs(o-n);if(a){var s=n;n=r,r=s,s=o,o=i,i=s}for(var c=Math.abs(o-n),l=Math.abs(i-r),u=-c/2,d=r<i?1:-1,h=n<o?1:-1,f=0,p=this.image.get(a?r:n,a?n:r),g=n,m=r;g!==o;g+=h){var y=this.image.get(a?m:g,a?g:m);if(y!==p&&(f++,p=y),(u+=l)>0){if(m===i)break;m+=d,u-=c}}return f},e}();const hC=dC;var fC=function(){function e(){this.decoder=new uC}return e.prototype.decode=function(t,n){var r,o;if(void 0===n&&(n=null),null!=n&&n.has(Cv.PURE_BARCODE)){var i=e.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(i),o=e.NO_POINTS}else{var a=new hC(t.getBlackMatrix()).detect();r=this.decoder.decode(a.getBits()),o=a.getPoints()}var s=r.getRawBytes(),c=new tw(r.getText(),s,8*s.length,o,rw.DATA_MATRIX,lv.currentTimeMillis()),l=r.getByteSegments();null!=l&&c.putMetadata(iw.BYTE_SEGMENTS,l);var u=r.getECLevel();return null!=u&&c.putMetadata(iw.ERROR_CORRECTION_LEVEL,u),c},e.prototype.reset=function(){},e.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new Lv;var r=this.moduleSize(t,e),o=t[1],i=n[1],a=t[0],s=(n[0]-a+1)/r,c=(i-o+1)/r;if(s<=0||c<=0)throw new Lv;var l=r/2;o+=l,a+=l;for(var u=new Dv(s,c),d=0;d<c;d++)for(var h=o+d*r,f=0;f<s;f++)e.get(a+f*r,h)&&u.set(f,d);return u},e.moduleSize=function(e,t){for(var n=t.getWidth(),r=e[0],o=e[1];r<n&&t.get(r,o);)r++;if(r===n)throw new Lv;var i=r-e[0];if(0===i)throw new Lv;return i},e.NO_POINTS=[],e}();const pC=fC;var gC,mC=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t){return void 0===t&&(t=500),e.call(this,new pC,t)||this}mC(t,e)}(ew);!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(gC||(gC={}));const yC=function(){function e(t,n,r){this.value=t,this.stringValue=n,this.bits=r,e.FOR_BITS.set(r,this),e.FOR_VALUE.set(t,this)}return e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.fromString=function(t){switch(t){case"L":return e.L;case"M":return e.M;case"Q":return e.Q;case"H":return e.H;default:throw new tv(t+"not available")}},e.prototype.toString=function(){return this.stringValue},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.forBits=function(t){if(t<0||t>=e.FOR_BITS.size)throw new rv;return e.FOR_BITS.get(t)},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.L=new e(gC.L,"L",1),e.M=new e(gC.M,"M",0),e.Q=new e(gC.Q,"Q",3),e.H=new e(gC.H,"H",2),e}();var vC=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wC=function(){function e(e){this.errorCorrectionLevel=yC.forBits(e>>3&3),this.dataMask=7&e}return e.numBitsDiffering=function(e,t){return vv.bitCount(e^t)},e.decodeFormatInformation=function(t,n){var r=e.doDecodeFormatInformation(t,n);return null!==r?r:e.doDecodeFormatInformation(t^e.FORMAT_INFO_MASK_QR,n^e.FORMAT_INFO_MASK_QR)},e.doDecodeFormatInformation=function(t,n){var r,o,i=Number.MAX_SAFE_INTEGER,a=0;try{for(var s=vC(e.FORMAT_INFO_DECODE_LOOKUP),c=s.next();!c.done;c=s.next()){var l=c.value,u=l[0];if(u===t||u===n)return new e(l[1]);var d=e.numBitsDiffering(t,u);d<i&&(a=l[1],i=d),t!==n&&(d=e.numBitsDiffering(n,u))<i&&(a=l[1],i=d)}}catch(h){r={error:h}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return i<=3?new e(a):null},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getDataMask=function(){return this.dataMask},e.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},e.FORMAT_INFO_MASK_QR=21522,e.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],e}();const bC=wC;var _C=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},CC=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return e.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},e.prototype.getNumBlocks=function(){var e,t,n=0,r=this.ecBlocks;try{for(var o=_C(r),i=o.next();!i.done;i=o.next()){n+=i.value.getCount()}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},e.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},e.prototype.getECBlocks=function(){return this.ecBlocks},e}();const EC=CC;var SC=function(){function e(e,t){this.count=e,this.dataCodewords=t}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}();const AC=SC;var IC=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xC=function(){function e(e,t){for(var n,r,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var a=0,s=o[0].getECCodewordsPerBlock(),c=o[0].getECBlocks();try{for(var l=IC(c),u=l.next();!u.done;u=l.next()){var d=u.value;a+=d.getCount()*(d.getDataCodewords()+s)}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}this.totalCodewords=a}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},e.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},e.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Sv;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new Sv}},e.getVersionForNumber=function(t){if(t<1||t>40)throw new rv;return e.VERSIONS[t-1]},e.decodeVersionInformation=function(t){for(var n=Number.MAX_SAFE_INTEGER,r=0,o=0;o<e.VERSION_DECODE_INFO.length;o++){var i=e.VERSION_DECODE_INFO[o];if(i===t)return e.getVersionForNumber(o+7);var a=bC.numBitsDiffering(t,i);a<n&&(r=o+7,n=a)}return n<=3?e.getVersionForNumber(r):null},e.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Dv(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,r=0;r<n;r++)for(var o=this.alignmentPatternCenters[r]-2,i=0;i<n;i++)0===r&&(0===i||i===n-1)||r===n-1&&0===i||t.setRegion(this.alignmentPatternCenters[i]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},e.prototype.toString=function(){return""+this.versionNumber},e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),e.VERSIONS=[new e(1,new Int32Array(0),new EC(7,new AC(1,19)),new EC(10,new AC(1,16)),new EC(13,new AC(1,13)),new EC(17,new AC(1,9))),new e(2,Int32Array.from([6,18]),new EC(10,new AC(1,34)),new EC(16,new AC(1,28)),new EC(22,new AC(1,22)),new EC(28,new AC(1,16))),new e(3,Int32Array.from([6,22]),new EC(15,new AC(1,55)),new EC(26,new AC(1,44)),new EC(18,new AC(2,17)),new EC(22,new AC(2,13))),new e(4,Int32Array.from([6,26]),new EC(20,new AC(1,80)),new EC(18,new AC(2,32)),new EC(26,new AC(2,24)),new EC(16,new AC(4,9))),new e(5,Int32Array.from([6,30]),new EC(26,new AC(1,108)),new EC(24,new AC(2,43)),new EC(18,new AC(2,15),new AC(2,16)),new EC(22,new AC(2,11),new AC(2,12))),new e(6,Int32Array.from([6,34]),new EC(18,new AC(2,68)),new EC(16,new AC(4,27)),new EC(24,new AC(4,19)),new EC(28,new AC(4,15))),new e(7,Int32Array.from([6,22,38]),new EC(20,new AC(2,78)),new EC(18,new AC(4,31)),new EC(18,new AC(2,14),new AC(4,15)),new EC(26,new AC(4,13),new AC(1,14))),new e(8,Int32Array.from([6,24,42]),new EC(24,new AC(2,97)),new EC(22,new AC(2,38),new AC(2,39)),new EC(22,new AC(4,18),new AC(2,19)),new EC(26,new AC(4,14),new AC(2,15))),new e(9,Int32Array.from([6,26,46]),new EC(30,new AC(2,116)),new EC(22,new AC(3,36),new AC(2,37)),new EC(20,new AC(4,16),new AC(4,17)),new EC(24,new AC(4,12),new AC(4,13))),new e(10,Int32Array.from([6,28,50]),new EC(18,new AC(2,68),new AC(2,69)),new EC(26,new AC(4,43),new AC(1,44)),new EC(24,new AC(6,19),new AC(2,20)),new EC(28,new AC(6,15),new AC(2,16))),new e(11,Int32Array.from([6,30,54]),new EC(20,new AC(4,81)),new EC(30,new AC(1,50),new AC(4,51)),new EC(28,new AC(4,22),new AC(4,23)),new EC(24,new AC(3,12),new AC(8,13))),new e(12,Int32Array.from([6,32,58]),new EC(24,new AC(2,92),new AC(2,93)),new EC(22,new AC(6,36),new AC(2,37)),new EC(26,new AC(4,20),new AC(6,21)),new EC(28,new AC(7,14),new AC(4,15))),new e(13,Int32Array.from([6,34,62]),new EC(26,new AC(4,107)),new EC(22,new AC(8,37),new AC(1,38)),new EC(24,new AC(8,20),new AC(4,21)),new EC(22,new AC(12,11),new AC(4,12))),new e(14,Int32Array.from([6,26,46,66]),new EC(30,new AC(3,115),new AC(1,116)),new EC(24,new AC(4,40),new AC(5,41)),new EC(20,new AC(11,16),new AC(5,17)),new EC(24,new AC(11,12),new AC(5,13))),new e(15,Int32Array.from([6,26,48,70]),new EC(22,new AC(5,87),new AC(1,88)),new EC(24,new AC(5,41),new AC(5,42)),new EC(30,new AC(5,24),new AC(7,25)),new EC(24,new AC(11,12),new AC(7,13))),new e(16,Int32Array.from([6,26,50,74]),new EC(24,new AC(5,98),new AC(1,99)),new EC(28,new AC(7,45),new AC(3,46)),new EC(24,new AC(15,19),new AC(2,20)),new EC(30,new AC(3,15),new AC(13,16))),new e(17,Int32Array.from([6,30,54,78]),new EC(28,new AC(1,107),new AC(5,108)),new EC(28,new AC(10,46),new AC(1,47)),new EC(28,new AC(1,22),new AC(15,23)),new EC(28,new AC(2,14),new AC(17,15))),new e(18,Int32Array.from([6,30,56,82]),new EC(30,new AC(5,120),new AC(1,121)),new EC(26,new AC(9,43),new AC(4,44)),new EC(28,new AC(17,22),new AC(1,23)),new EC(28,new AC(2,14),new AC(19,15))),new e(19,Int32Array.from([6,30,58,86]),new EC(28,new AC(3,113),new AC(4,114)),new EC(26,new AC(3,44),new AC(11,45)),new EC(26,new AC(17,21),new AC(4,22)),new EC(26,new AC(9,13),new AC(16,14))),new e(20,Int32Array.from([6,34,62,90]),new EC(28,new AC(3,107),new AC(5,108)),new EC(26,new AC(3,41),new AC(13,42)),new EC(30,new AC(15,24),new AC(5,25)),new EC(28,new AC(15,15),new AC(10,16))),new e(21,Int32Array.from([6,28,50,72,94]),new EC(28,new AC(4,116),new AC(4,117)),new EC(26,new AC(17,42)),new EC(28,new AC(17,22),new AC(6,23)),new EC(30,new AC(19,16),new AC(6,17))),new e(22,Int32Array.from([6,26,50,74,98]),new EC(28,new AC(2,111),new AC(7,112)),new EC(28,new AC(17,46)),new EC(30,new AC(7,24),new AC(16,25)),new EC(24,new AC(34,13))),new e(23,Int32Array.from([6,30,54,78,102]),new EC(30,new AC(4,121),new AC(5,122)),new EC(28,new AC(4,47),new AC(14,48)),new EC(30,new AC(11,24),new AC(14,25)),new EC(30,new AC(16,15),new AC(14,16))),new e(24,Int32Array.from([6,28,54,80,106]),new EC(30,new AC(6,117),new AC(4,118)),new EC(28,new AC(6,45),new AC(14,46)),new EC(30,new AC(11,24),new AC(16,25)),new EC(30,new AC(30,16),new AC(2,17))),new e(25,Int32Array.from([6,32,58,84,110]),new EC(26,new AC(8,106),new AC(4,107)),new EC(28,new AC(8,47),new AC(13,48)),new EC(30,new AC(7,24),new AC(22,25)),new EC(30,new AC(22,15),new AC(13,16))),new e(26,Int32Array.from([6,30,58,86,114]),new EC(28,new AC(10,114),new AC(2,115)),new EC(28,new AC(19,46),new AC(4,47)),new EC(28,new AC(28,22),new AC(6,23)),new EC(30,new AC(33,16),new AC(4,17))),new e(27,Int32Array.from([6,34,62,90,118]),new EC(30,new AC(8,122),new AC(4,123)),new EC(28,new AC(22,45),new AC(3,46)),new EC(30,new AC(8,23),new AC(26,24)),new EC(30,new AC(12,15),new AC(28,16))),new e(28,Int32Array.from([6,26,50,74,98,122]),new EC(30,new AC(3,117),new AC(10,118)),new EC(28,new AC(3,45),new AC(23,46)),new EC(30,new AC(4,24),new AC(31,25)),new EC(30,new AC(11,15),new AC(31,16))),new e(29,Int32Array.from([6,30,54,78,102,126]),new EC(30,new AC(7,116),new AC(7,117)),new EC(28,new AC(21,45),new AC(7,46)),new EC(30,new AC(1,23),new AC(37,24)),new EC(30,new AC(19,15),new AC(26,16))),new e(30,Int32Array.from([6,26,52,78,104,130]),new EC(30,new AC(5,115),new AC(10,116)),new EC(28,new AC(19,47),new AC(10,48)),new EC(30,new AC(15,24),new AC(25,25)),new EC(30,new AC(23,15),new AC(25,16))),new e(31,Int32Array.from([6,30,56,82,108,134]),new EC(30,new AC(13,115),new AC(3,116)),new EC(28,new AC(2,46),new AC(29,47)),new EC(30,new AC(42,24),new AC(1,25)),new EC(30,new AC(23,15),new AC(28,16))),new e(32,Int32Array.from([6,34,60,86,112,138]),new EC(30,new AC(17,115)),new EC(28,new AC(10,46),new AC(23,47)),new EC(30,new AC(10,24),new AC(35,25)),new EC(30,new AC(19,15),new AC(35,16))),new e(33,Int32Array.from([6,30,58,86,114,142]),new EC(30,new AC(17,115),new AC(1,116)),new EC(28,new AC(14,46),new AC(21,47)),new EC(30,new AC(29,24),new AC(19,25)),new EC(30,new AC(11,15),new AC(46,16))),new e(34,Int32Array.from([6,34,62,90,118,146]),new EC(30,new AC(13,115),new AC(6,116)),new EC(28,new AC(14,46),new AC(23,47)),new EC(30,new AC(44,24),new AC(7,25)),new EC(30,new AC(59,16),new AC(1,17))),new e(35,Int32Array.from([6,30,54,78,102,126,150]),new EC(30,new AC(12,121),new AC(7,122)),new EC(28,new AC(12,47),new AC(26,48)),new EC(30,new AC(39,24),new AC(14,25)),new EC(30,new AC(22,15),new AC(41,16))),new e(36,Int32Array.from([6,24,50,76,102,128,154]),new EC(30,new AC(6,121),new AC(14,122)),new EC(28,new AC(6,47),new AC(34,48)),new EC(30,new AC(46,24),new AC(10,25)),new EC(30,new AC(2,15),new AC(64,16))),new e(37,Int32Array.from([6,28,54,80,106,132,158]),new EC(30,new AC(17,122),new AC(4,123)),new EC(28,new AC(29,46),new AC(14,47)),new EC(30,new AC(49,24),new AC(10,25)),new EC(30,new AC(24,15),new AC(46,16))),new e(38,Int32Array.from([6,32,58,84,110,136,162]),new EC(30,new AC(4,122),new AC(18,123)),new EC(28,new AC(13,46),new AC(32,47)),new EC(30,new AC(48,24),new AC(14,25)),new EC(30,new AC(42,15),new AC(32,16))),new e(39,Int32Array.from([6,26,54,82,110,138,166]),new EC(30,new AC(20,117),new AC(4,118)),new EC(28,new AC(40,47),new AC(7,48)),new EC(30,new AC(43,24),new AC(22,25)),new EC(30,new AC(10,15),new AC(67,16))),new e(40,Int32Array.from([6,30,58,86,114,142,170]),new EC(30,new AC(19,118),new AC(6,119)),new EC(28,new AC(18,47),new AC(31,48)),new EC(30,new AC(34,24),new AC(34,25)),new EC(30,new AC(20,15),new AC(61,16)))],e}();const NC=xC;var TC;!function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(TC||(TC={}));var kC=function(){function e(e,t){this.value=e,this.isMasked=t}return e.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},e.values=new Map([[TC.DATA_MASK_000,new e(TC.DATA_MASK_000,function(e,t){return 0===(e+t&1)})],[TC.DATA_MASK_001,new e(TC.DATA_MASK_001,function(e,t){return 0===(1&e)})],[TC.DATA_MASK_010,new e(TC.DATA_MASK_010,function(e,t){return t%3===0})],[TC.DATA_MASK_011,new e(TC.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[TC.DATA_MASK_100,new e(TC.DATA_MASK_100,function(e,t){return 0===(Math.floor(e/2)+Math.floor(t/3)&1)})],[TC.DATA_MASK_101,new e(TC.DATA_MASK_101,function(e,t){return e*t%6===0})],[TC.DATA_MASK_110,new e(TC.DATA_MASK_110,function(e,t){return e*t%6<3})],[TC.DATA_MASK_111,new e(TC.DATA_MASK_111,function(e,t){return 0===(e+t+e*t%3&1)})]]),e}();const OC=kC;var RC=function(){function e(e){var t=e.getHeight();if(t<21||1!==(3&t))throw new Sv;this.bitMatrix=e}return e.prototype.readFormatInformation=function(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);var r=this.bitMatrix.getHeight(),o=0,i=r-7;for(n=r-1;n>=i;n--)o=this.copyBit(8,n,o);for(t=r-8;t<r;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=bC.decodeFormatInformation(e,o),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new Sv},e.prototype.readVersion=function(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return NC.getVersionForNumber(t);for(var n=0,r=e-11,o=5;o>=0;o--)for(var i=e-9;i>=r;i--)n=this.copyBit(i,o,n);var a=NC.decodeVersionInformation(n);if(null!==a&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;n=0;for(i=5;i>=0;i--)for(o=e-9;o>=r;o--)n=this.copyBit(i,o,n);if(null!==(a=NC.decodeVersionInformation(n))&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new Sv},e.prototype.copyBit=function(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1},e.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=OC.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);for(var o=t.buildFunctionPattern(),i=!0,a=new Uint8Array(t.getTotalCodewords()),s=0,c=0,l=0,u=r-1;u>0;u-=2){6===u&&u--;for(var d=0;d<r;d++)for(var h=i?r-1-d:d,f=0;f<2;f++)o.get(u-f,h)||(l++,c<<=1,this.bitMatrix.get(u-f,h)&&(c|=1),8===l&&(a[s++]=c,l=0,c=0));i=!i}if(s!==t.getTotalCodewords())throw new Sv;return a},e.prototype.remask=function(){if(null!==this.parsedFormatInfo){var e=OC.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},e.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},e.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var r=t+1,o=e.getHeight();r<o;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))},e}();const PC=RC;var jC=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},DC=function(){function e(e,t){this.numDataCodewords=e,this.codewords=t}return e.getDataBlocks=function(t,n,r){var o,i,a,s;if(t.length!==n.getTotalCodewords())throw new rv;var c=n.getECBlocksForLevel(r),l=0,u=c.getECBlocks();try{for(var d=jC(u),h=d.next();!h.done;h=d.next()){l+=(y=h.value).getCount()}}catch(N){o={error:N}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}var f=new Array(l),p=0;try{for(var g=jC(u),m=g.next();!m.done;m=g.next())for(var y=m.value,v=0;v<y.getCount();v++){var w=y.getDataCodewords(),b=c.getECCodewordsPerBlock()+w;f[p++]=new e(w,new Uint8Array(b))}}catch(T){a={error:T}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}for(var _=f[0].codewords.length,C=f.length-1;C>=0;){if(f[C].codewords.length===_)break;C--}C++;var E=_-c.getECCodewordsPerBlock(),S=0;for(v=0;v<E;v++)for(var A=0;A<p;A++)f[A].codewords[v]=t[S++];for(A=C;A<p;A++)f[A].codewords[E]=t[S++];var I=f[0].codewords.length;for(v=E;v<I;v++)for(A=0;A<p;A++){var x=A<C?v:v+1;f[A].codewords[x]=t[S++]}return f},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}();const MC=DC;var LC;!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(LC||(LC={}));var BC=function(){function e(t,n,r,o){this.value=t,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=o,e.FOR_BITS.set(o,this),e.FOR_VALUE.set(t,this)}return e.forBits=function(t){var n=e.FOR_BITS.get(t);if(void 0===n)throw new rv;return n},e.prototype.getCharacterCountBits=function(e){var t,n=e.getVersionNumber();return t=n<=9?0:n<=26?1:2,this.characterCountBitsForVersions[t]},e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.prototype.toString=function(){return this.stringValue},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.TERMINATOR=new e(LC.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),e.NUMERIC=new e(LC.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),e.ALPHANUMERIC=new e(LC.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),e.STRUCTURED_APPEND=new e(LC.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),e.BYTE=new e(LC.BYTE,"BYTE",Int32Array.from([8,16,16]),4),e.ECI=new e(LC.ECI,"ECI",Int32Array.from([0,0,0]),7),e.KANJI=new e(LC.KANJI,"KANJI",Int32Array.from([8,10,12]),8),e.FNC1_FIRST_POSITION=new e(LC.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),e.FNC1_SECOND_POSITION=new e(LC.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),e.HANZI=new e(LC.HANZI,"HANZI",Int32Array.from([8,10,12]),13),e}();const FC=BC;var UC=function(){function e(){}return e.decode=function(t,n,r,o){var i=new oC(t),a=new Pv,s=new Array,c=-1,l=-1;try{var u=null,d=!1,h=void 0;do{if(i.available()<4)h=FC.TERMINATOR;else{var f=i.readBits(4);h=FC.forBits(f)}switch(h){case FC.TERMINATOR:break;case FC.FNC1_FIRST_POSITION:case FC.FNC1_SECOND_POSITION:d=!0;break;case FC.STRUCTURED_APPEND:if(i.available()<16)throw new Sv;c=i.readBits(8),l=i.readBits(8);break;case FC.ECI:var p=e.parseECIValue(i);if(null===(u=Nv.getCharacterSetECIByValue(p)))throw new Sv;break;case FC.HANZI:var g=i.readBits(4),m=i.readBits(h.getCharacterCountBits(n));g===e.GB2312_SUBSET&&e.decodeHanziSegment(i,a,m);break;default:var y=i.readBits(h.getCharacterCountBits(n));switch(h){case FC.NUMERIC:e.decodeNumericSegment(i,a,y);break;case FC.ALPHANUMERIC:e.decodeAlphanumericSegment(i,a,y,d);break;case FC.BYTE:e.decodeByteSegment(i,a,y,u,s,o);break;case FC.KANJI:e.decodeKanjiSegment(i,a,y);break;default:throw new Sv}}}while(h!==FC.TERMINATOR)}catch(v){throw new Sv}return new aw(t,a.toString(),0===s.length?null:s,null===r?null:r.toString(),c,l)},e.decodeHanziSegment=function(e,t,n){if(13*n>e.available())throw new Sv;for(var r=new Uint8Array(2*n),o=0;n>0;){var i=e.readBits(13),a=i/96<<8&4294967295|i%96;a+=a<959?41377:42657,r[o]=a>>8&255,r[o+1]=255&a,o+=2,n--}try{t.append(Ov.decode(r,Rv.GB2312))}catch(s){throw new Sv(s)}},e.decodeKanjiSegment=function(e,t,n){if(13*n>e.available())throw new Sv;for(var r=new Uint8Array(2*n),o=0;n>0;){var i=e.readBits(13),a=i/192<<8&4294967295|i%192;a+=a<7936?33088:49472,r[o]=a>>8,r[o+1]=a,o+=2,n--}try{t.append(Ov.decode(r,Rv.SHIFT_JIS))}catch(s){throw new Sv(s)}},e.decodeByteSegment=function(e,t,n,r,o,i){if(8*n>e.available())throw new Sv;for(var a,s=new Uint8Array(n),c=0;c<n;c++)s[c]=e.readBits(8);a=null===r?Rv.guessEncoding(s,i):r.getName();try{t.append(Ov.decode(s,a))}catch(l){throw new Sv(l)}o.push(s)},e.toAlphaNumericChar=function(t){if(t>=e.ALPHANUMERIC_CHARS.length)throw new Sv;return e.ALPHANUMERIC_CHARS[t]},e.decodeAlphanumericSegment=function(t,n,r,o){for(var i=n.length();r>1;){if(t.available()<11)throw new Sv;var a=t.readBits(11);n.append(e.toAlphaNumericChar(Math.floor(a/45))),n.append(e.toAlphaNumericChar(a%45)),r-=2}if(1===r){if(t.available()<6)throw new Sv;n.append(e.toAlphaNumericChar(t.readBits(6)))}if(o)for(var s=i;s<n.length();s++)"%"===n.charAt(s)&&(s<n.length()-1&&"%"===n.charAt(s+1)?n.deleteCharAt(s+1):n.setCharAt(s,String.fromCharCode(29)))},e.decodeNumericSegment=function(t,n,r){for(;r>=3;){if(t.available()<10)throw new Sv;var o=t.readBits(10);if(o>=1e3)throw new Sv;n.append(e.toAlphaNumericChar(Math.floor(o/100))),n.append(e.toAlphaNumericChar(Math.floor(o/10)%10)),n.append(e.toAlphaNumericChar(o%10)),r-=3}if(2===r){if(t.available()<7)throw new Sv;var i=t.readBits(7);if(i>=100)throw new Sv;n.append(e.toAlphaNumericChar(Math.floor(i/10))),n.append(e.toAlphaNumericChar(i%10))}else if(1===r){if(t.available()<4)throw new Sv;var a=t.readBits(4);if(a>=10)throw new Sv;n.append(e.toAlphaNumericChar(a))}},e.parseECIValue=function(e){var t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new Sv},e.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.GB2312_SUBSET=1,e}();const VC=UC;const zC=function(){function e(e){this.mirrored=e}return e.prototype.isMirrored=function(){return this.mirrored},e.prototype.applyMirroredCorrection=function(e){if(this.mirrored&&null!==e&&!(e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},e}();var HC=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},GC=function(){function e(){this.rsDecoder=new bw(pw.QR_CODE_FIELD_256)}return e.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Dv.parseFromBooleanArray(e),t)},e.prototype.decodeBitMatrix=function(e,t){var n=new PC(e),r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var o=this.decodeBitMatrixParser(n,t);return o.setOther(new zC(!0)),o}catch(i){if(null!==r)throw r;throw i}},e.prototype.decodeBitMatrixParser=function(e,t){var n,r,o,i,a=e.readVersion(),s=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),l=MC.getDataBlocks(c,a,s),u=0;try{for(var d=HC(l),h=d.next();!h.done;h=d.next()){u+=(y=h.value).getNumDataCodewords()}}catch(_){n={error:_}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}var f=new Uint8Array(u),p=0;try{for(var g=HC(l),m=g.next();!m.done;m=g.next()){var y,v=(y=m.value).getCodewords(),w=y.getNumDataCodewords();this.correctErrors(v,w);for(var b=0;b<w;b++)f[p++]=v[b]}}catch(C){o={error:C}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}return VC.decode(f,a,s,t)},e.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(o){throw new av}for(var r=0;r<t;r++)e[r]=n[r]},e}();const WC=GC;var qC=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),XC=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.estimatedModuleSize=r,o}return qC(t,e),t.prototype.aboutEquals=function(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,n,r){return new t((this.getX()+n)/2,(this.getY()+e)/2,(this.estimatedModuleSize+r)/2)},t}(Nw);const KC=XC;var YC=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},QC=function(){function e(e,t,n,r,o,i,a){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=o,this.moduleSize=i,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return e.prototype.find=function(){for(var e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,o=new Int32Array(3),i=this.image,a=0;a<t;a++){var s=r+(0===(1&a)?Math.floor((a+1)/2):-Math.floor((a+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var c=e;c<n&&!i.get(c,s);)c++;for(var l=0;c<n;){if(i.get(c,s))if(1===l)o[1]++;else if(2===l){var u;if(this.foundPatternCross(o))if(null!==(u=this.handlePossibleCenter(o,s,c)))return u;o[0]=o[2],o[1]=1,o[2]=0,l=1}else o[++l]++;else 1===l&&l++,o[l]++;c++}if(this.foundPatternCross(o))if(null!==(u=this.handlePossibleCenter(o,s,n)))return u}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new Lv},e.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},e.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0},e.prototype.crossCheckVertical=function(t,n,r,o){var i=this.image,a=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var c=t;c>=0&&i.get(n,c)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&!i.get(n,c)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=t+1;c<a&&i.get(n,c)&&s[1]<=r;)s[1]++,c++;if(c===a||s[1]>r)return NaN;for(;c<a&&!i.get(n,c)&&s[2]<=r;)s[2]++,c++;if(s[2]>r)return NaN;var l=s[0]+s[1]+s[2];return 5*Math.abs(l-o)>=2*o?NaN:this.foundPatternCross(s)?e.centerFromEnd(s,c):NaN},e.prototype.handlePossibleCenter=function(t,n,r){var o,i,a=t[0]+t[1]+t[2],s=e.centerFromEnd(t,r),c=this.crossCheckVertical(n,s,2*t[1],a);if(!isNaN(c)){var l=(t[0]+t[1]+t[2])/3;try{for(var u=YC(this.possibleCenters),d=u.next();!d.done;d=u.next()){var h=d.value;if(h.aboutEquals(l,c,s))return h.combineEstimate(c,s,l)}}catch(p){o={error:p}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}var f=new KC(s,c,l);this.possibleCenters.push(f),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(f)}return null},e}();const ZC=QC;var $C=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),JC=function(e){function t(t,n,r,o){var i=e.call(this,t,n)||this;return i.estimatedModuleSize=r,i.count=o,void 0===o&&(i.count=1),i}return $C(t,e),t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,n,r){var o=this.count+1;return new t((this.count*this.getX()+n)/o,(this.count*this.getY()+e)/o,(this.count*this.estimatedModuleSize+r)/o,o)},t}(Nw);const eE=JC;const tE=function(){function e(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e}();var nE=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rE=function(){function e(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return e.prototype.getImage=function(){return this.image},e.prototype.getPossibleCenters=function(){return this.possibleCenters},e.prototype.find=function(t){var n=null!==t&&void 0!==t&&void 0!==t.get(Cv.TRY_HARDER),r=null!==t&&void 0!==t&&void 0!==t.get(Cv.PURE_BARCODE),o=this.image,i=o.getHeight(),a=o.getWidth(),s=Math.floor(3*i/(4*e.MAX_MODULES));(s<e.MIN_SKIP||n)&&(s=e.MIN_SKIP);for(var c=!1,l=new Int32Array(5),u=s-1;u<i&&!c;u+=s){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;for(var d=0,h=0;h<a;h++)if(o.get(h,u))1===(1&d)&&d++,l[d]++;else if(0===(1&d))if(4===d)if(e.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,u,h,r)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,d=3;continue}if(s=2,!0===this.hasSkipped)c=this.haveMultiplyConfirmedCenters();else{var f=this.findRowSkip();f>l[2]&&(u+=f-l[2]-s,h=a-1)}d=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,d=3;else l[++d]++;else l[d]++;if(e.foundPatternCross(l))!0===this.handlePossibleCenter(l,u,a,r)&&(s=l[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}var p=this.selectBestPatterns();return Nw.orderBestPatterns(p),new tE(p)},e.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},e.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var r=e[n];if(0===r)return!1;t+=r}if(t<7)return!1;var o=t/7,i=o/2;return Math.abs(o-e[0])<i&&Math.abs(o-e[1])<i&&Math.abs(3*o-e[2])<3*i&&Math.abs(o-e[3])<i&&Math.abs(o-e[4])<i},e.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},e.prototype.crossCheckDiagonal=function(t,n,r,o){for(var i=this.getCrossCheckStateCount(),a=0,s=this.image;t>=a&&n>=a&&s.get(n-a,t-a);)i[2]++,a++;if(t<a||n<a)return!1;for(;t>=a&&n>=a&&!s.get(n-a,t-a)&&i[1]<=r;)i[1]++,a++;if(t<a||n<a||i[1]>r)return!1;for(;t>=a&&n>=a&&s.get(n-a,t-a)&&i[0]<=r;)i[0]++,a++;if(i[0]>r)return!1;var c=s.getHeight(),l=s.getWidth();for(a=1;t+a<c&&n+a<l&&s.get(n+a,t+a);)i[2]++,a++;if(t+a>=c||n+a>=l)return!1;for(;t+a<c&&n+a<l&&!s.get(n+a,t+a)&&i[3]<r;)i[3]++,a++;if(t+a>=c||n+a>=l||i[3]>=r)return!1;for(;t+a<c&&n+a<l&&s.get(n+a,t+a)&&i[4]<r;)i[4]++,a++;if(i[4]>=r)return!1;var u=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(u-o)<2*o&&e.foundPatternCross(i)},e.prototype.crossCheckVertical=function(t,n,r,o){for(var i=this.image,a=i.getHeight(),s=this.getCrossCheckStateCount(),c=t;c>=0&&i.get(n,c);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!i.get(n,c)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&i.get(n,c)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=t+1;c<a&&i.get(n,c);)s[2]++,c++;if(c===a)return NaN;for(;c<a&&!i.get(n,c)&&s[3]<r;)s[3]++,c++;if(c===a||s[3]>=r)return NaN;for(;c<a&&i.get(n,c)&&s[4]<r;)s[4]++,c++;if(s[4]>=r)return NaN;var l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-o)>=2*o?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,c):NaN},e.prototype.crossCheckHorizontal=function(t,n,r,o){for(var i=this.image,a=i.getWidth(),s=this.getCrossCheckStateCount(),c=t;c>=0&&i.get(c,n);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!i.get(c,n)&&s[1]<=r;)s[1]++,c--;if(c<0||s[1]>r)return NaN;for(;c>=0&&i.get(c,n)&&s[0]<=r;)s[0]++,c--;if(s[0]>r)return NaN;for(c=t+1;c<a&&i.get(c,n);)s[2]++,c++;if(c===a)return NaN;for(;c<a&&!i.get(c,n)&&s[3]<r;)s[3]++,c++;if(c===a||s[3]>=r)return NaN;for(;c<a&&i.get(c,n)&&s[4]<r;)s[4]++,c++;if(s[4]>=r)return NaN;var l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-o)>=o?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,c):NaN},e.prototype.handlePossibleCenter=function(t,n,r,o){var i=t[0]+t[1]+t[2]+t[3]+t[4],a=e.centerFromEnd(t,r),s=this.crossCheckVertical(n,Math.floor(a),t[2],i);if(!isNaN(s)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(s),t[2],i),!isNaN(a)&&(!o||this.crossCheckDiagonal(Math.floor(s),Math.floor(a),t[2],i)))){for(var c=i/7,l=!1,u=this.possibleCenters,d=0,h=u.length;d<h;d++){var f=u[d];if(f.aboutEquals(c,s,a)){u[d]=f.combineEstimate(s,a,c),l=!0;break}}if(!l){var p=new eE(a,s,c);u.push(p),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1},e.prototype.findRowSkip=function(){var t,n;if(this.possibleCenters.length<=1)return 0;var r=null;try{for(var o=nE(this.possibleCenters),i=o.next();!i.done;i=o.next()){var a=i.value;if(a.getCount()>=e.CENTER_QUORUM){if(null!=r)return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-a.getX())-Math.abs(r.getY()-a.getY()))/2);r=a}}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return 0},e.prototype.haveMultiplyConfirmedCenters=function(){var t,n,r,o,i=0,a=0,s=this.possibleCenters.length;try{for(var c=nE(this.possibleCenters),l=c.next();!l.done;l=c.next()){(p=l.value).getCount()>=e.CENTER_QUORUM&&(i++,a+=p.getEstimatedModuleSize())}}catch(g){t={error:g}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}if(i<3)return!1;var u=a/s,d=0;try{for(var h=nE(this.possibleCenters),f=h.next();!f.done;f=h.next()){var p=f.value;d+=Math.abs(p.getEstimatedModuleSize()-u)}}catch(m){r={error:m}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}return d<=.05*a},e.prototype.selectBestPatterns=function(){var e,t,n,r,o=this.possibleCenters.length;if(o<3)throw new Lv;var i,a=this.possibleCenters;if(o>3){var s=0,c=0;try{for(var l=nE(this.possibleCenters),u=l.next();!u.done;u=l.next()){var d=u.value.getEstimatedModuleSize();s+=d,c+=d*d}}catch(v){e={error:v}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}i=s/o;var h=Math.sqrt(c/o-i*i);a.sort(function(e,t){var n=Math.abs(t.getEstimatedModuleSize()-i),r=Math.abs(e.getEstimatedModuleSize()-i);return n<r?-1:n>r?1:0});for(var f=Math.max(.2*i,h),p=0;p<a.length&&a.length>3;p++){var g=a[p];Math.abs(g.getEstimatedModuleSize()-i)>f&&(a.splice(p,1),p--)}}if(a.length>3){s=0;try{for(var m=nE(a),y=m.next();!y.done;y=m.next()){s+=y.value.getEstimatedModuleSize()}}catch(w){n={error:w}}finally{try{y&&!y.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}i=s/a.length,a.sort(function(e,t){if(t.getCount()===e.getCount()){var n=Math.abs(t.getEstimatedModuleSize()-i),r=Math.abs(e.getEstimatedModuleSize()-i);return n<r?1:n>r?-1:0}return t.getCount()-e.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},e.CENTER_QUORUM=2,e.MIN_SKIP=3,e.MAX_MODULES=57,e}();const oE=rE;var iE=function(){function e(e){this.image=e}return e.prototype.getImage=function(){return this.image},e.prototype.getResultPointCallback=function(){return this.resultPointCallback},e.prototype.detect=function(e){this.resultPointCallback=null===e||void 0===e?null:e.get(Cv.NEED_RESULT_POINT_CALLBACK);var t=new oE(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)},e.prototype.processFinderPatternInfo=function(t){var n=t.getTopLeft(),r=t.getTopRight(),o=t.getBottomLeft(),i=this.calculateModuleSize(n,r,o);if(i<1)throw new Lv("No pattern found in proccess finder.");var a=e.computeDimension(n,r,o,i),s=NC.getProvisionalVersionForDimension(a),c=s.getDimensionForVersion()-7,l=null;if(s.getAlignmentPatternCenters().length>0)for(var u=r.getX()-n.getX()+o.getX(),d=r.getY()-n.getY()+o.getY(),h=1-3/c,f=Math.floor(n.getX()+h*(u-n.getX())),p=Math.floor(n.getY()+h*(d-n.getY())),g=4;g<=16;g<<=1)try{l=this.findAlignmentInRegion(i,f,p,g);break}catch(v){if(!(v instanceof Lv))throw v}var m=e.createTransform(n,r,o,l,a),y=e.sampleGrid(this.image,m,a);return new Tw(y,null===l?[o,n,r]:[o,n,r,l])},e.createTransform=function(e,t,n,r,o){var i,a,s,c,l=o-3.5;return null!==r?(i=r.getX(),a=r.getY(),c=s=l-3):(i=t.getX()-e.getX()+n.getX(),a=t.getY()-e.getY()+n.getY(),s=l,c=l),Lw.quadrilateralToQuadrilateral(3.5,3.5,l,3.5,s,c,3.5,l,e.getX(),e.getY(),t.getX(),t.getY(),i,a,n.getX(),n.getY())},e.sampleGrid=function(e,t,n){return Vw.getInstance().sampleGridWithTransform(e,n,n,t)},e.computeDimension=function(e,t,n,r){var o=Aw.round(Nw.distance(e,t)/r),i=Aw.round(Nw.distance(e,n)/r),a=Math.floor((o+i)/2)+7;switch(3&a){case 0:a++;break;case 2:a--;break;case 3:throw new Lv("Dimensions could be not found.")}return a},e.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},e.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14},e.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,r){var o=this.sizeOfBlackWhiteBlackRun(e,t,n,r),i=1,a=e-(n-e);a<0?(i=e/(e-a),a=0):a>=this.image.getWidth()&&(i=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var s=Math.floor(t-(r-t)*i);return i=1,s<0?(i=t/(t-s),s=0):s>=this.image.getHeight()&&(i=(this.image.getHeight()-1-t)/(s-t),s=this.image.getHeight()-1),a=Math.floor(e+(a-e)*i),(o+=this.sizeOfBlackWhiteBlackRun(e,t,a,s))-1},e.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,r){var o=Math.abs(r-t)>Math.abs(n-e);if(o){var i=e;e=t,t=i,i=n,n=r,r=i}for(var a=Math.abs(n-e),s=Math.abs(r-t),c=-a/2,l=e<n?1:-1,u=t<r?1:-1,d=0,h=n+l,f=e,p=t;f!==h;f+=l){var g=o?p:f,m=o?f:p;if(1===d===this.image.get(g,m)){if(2===d)return Aw.distance(f,p,e,t);d++}if((c+=s)>0){if(p===r)break;p+=u,c-=a}}return 2===d?Aw.distance(n+l,r,e,t):NaN},e.prototype.findAlignmentInRegion=function(e,t,n,r){var o=Math.floor(r*e),i=Math.max(0,t-o),a=Math.min(this.image.getWidth()-1,t+o);if(a-i<3*e)throw new Lv("Alignment top exceeds estimated module size.");var s=Math.max(0,n-o),c=Math.min(this.image.getHeight()-1,n+o);if(c-s<3*e)throw new Lv("Alignment bottom exceeds estimated module size.");return new ZC(this.image,i,s,a-i,c-s,e,this.resultPointCallback).find()},e}();const aE=iE;var sE=function(){function e(){this.decoder=new WC}return e.prototype.getDecoder=function(){return this.decoder},e.prototype.decode=function(t,n){var r,o;if(void 0!==n&&null!==n&&void 0!==n.get(Cv.PURE_BARCODE)){var i=e.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(i,n),o=e.NO_POINTS}else{var a=new aE(t.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(a.getBits(),n),o=a.getPoints()}r.getOther()instanceof zC&&r.getOther().applyMirroredCorrection(o);var s=new tw(r.getText(),r.getRawBytes(),void 0,o,rw.QR_CODE,void 0),c=r.getByteSegments();null!==c&&s.putMetadata(iw.BYTE_SEGMENTS,c);var l=r.getECLevel();return null!==l&&s.putMetadata(iw.ERROR_CORRECTION_LEVEL,l),r.hasStructuredAppend()&&(s.putMetadata(iw.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(iw.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s},e.prototype.reset=function(){},e.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new Lv;var r=this.moduleSize(t,e),o=t[1],i=n[1],a=t[0],s=n[0];if(a>=s||o>=i)throw new Lv;if(i-o!==s-a&&(s=a+(i-o))>=e.getWidth())throw new Lv;var c=Math.round((s-a+1)/r),l=Math.round((i-o+1)/r);if(c<=0||l<=0)throw new Lv;if(l!==c)throw new Lv;var u=Math.floor(r/2);o+=u;var d=(a+=u)+Math.floor((c-1)*r)-s;if(d>0){if(d>u)throw new Lv;a-=d}var h=o+Math.floor((l-1)*r)-i;if(h>0){if(h>u)throw new Lv;o-=h}for(var f=new Dv(c,l),p=0;p<l;p++)for(var g=o+Math.floor(p*r),m=0;m<c;m++)e.get(a+Math.floor(m*r),g)&&f.set(m,p);return f},e.moduleSize=function(e,t){for(var n=t.getHeight(),r=t.getWidth(),o=e[0],i=e[1],a=!0,s=0;o<r&&i<n;){if(a!==t.get(o,i)){if(5===++s)break;a=!a}o++,i++}if(o===r||i===n)throw new Lv;return(o-e[0])/7},e.NO_POINTS=new Array,e}();const cE=sE;var lE=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},uE=function(){function e(){}return e.prototype.PDF417Common=function(){},e.getBitCountSum=function(e){return Aw.sum(e)},e.toIntArray=function(t){var n,r;if(null==t||!t.length)return e.EMPTY_INT_ARRAY;var o=new Int32Array(t.length),i=0;try{for(var a=lE(t),s=a.next();!s.done;s=a.next()){var c=s.value;o[i++]=c}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o},e.getCodeword=function(t){var n=mv.binarySearch(e.SYMBOL_TABLE,262143&t);return n<0?-1:(e.CODEWORD_TABLE[n]-1)%e.NUMBER_OF_CODEWORDS},e.NUMBER_OF_CODEWORDS=929,e.MAX_CODEWORDS_IN_BARCODE=e.NUMBER_OF_CODEWORDS-1,e.MIN_ROWS_IN_BARCODE=3,e.MAX_ROWS_IN_BARCODE=90,e.MODULES_IN_CODEWORD=17,e.MODULES_IN_STOP_PATTERN=18,e.BARS_IN_MODULE=8,e.EMPTY_INT_ARRAY=new Int32Array([]),e.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),e.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),e}();const dE=uE;const hE=function(){function e(e,t){this.bits=e,this.points=t}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}();var fE=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pE=function(){function e(){}return e.detectMultiple=function(t,n,r){var o=t.getBlackMatrix(),i=e.detect(r,o);return i.length||((o=o.clone()).rotate180(),i=e.detect(r,o)),new hE(o,i)},e.detect=function(t,n){for(var r,o,i=new Array,a=0,s=0,c=!1;a<n.getHeight();){var l=e.findVertices(n,a,s);if(null!=l[0]||null!=l[3]){if(c=!0,i.push(l),!t)break;null!=l[2]?(s=Math.trunc(l[2].getX()),a=Math.trunc(l[2].getY())):(s=Math.trunc(l[4].getX()),a=Math.trunc(l[4].getY()))}else{if(!c)break;c=!1,s=0;try{for(var u=(r=void 0,fE(i)),d=u.next();!d.done;d=u.next()){var h=d.value;null!=h[1]&&(a=Math.trunc(Math.max(a,h[1].getY()))),null!=h[3]&&(a=Math.max(a,Math.trunc(h[3].getY())))}}catch(f){r={error:f}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}a+=e.ROW_STEP}}return i},e.findVertices=function(t,n,r){var o=t.getHeight(),i=t.getWidth(),a=new Array(8);return e.copyToResult(a,e.findRowsWithPattern(t,o,i,n,r,e.START_PATTERN),e.INDEXES_START_PATTERN),null!=a[4]&&(r=Math.trunc(a[4].getX()),n=Math.trunc(a[4].getY())),e.copyToResult(a,e.findRowsWithPattern(t,o,i,n,r,e.STOP_PATTERN),e.INDEXES_STOP_PATTERN),a},e.copyToResult=function(e,t,n){for(var r=0;r<n.length;r++)e[n[r]]=t[r]},e.findRowsWithPattern=function(t,n,r,o,i,a){for(var s=new Array(4),c=!1,l=new Int32Array(a.length);o<n;o+=e.ROW_STEP){if(null!=(f=e.findGuardPattern(t,i,o,r,!1,a,l))){for(;o>0;){if(null==(h=e.findGuardPattern(t,i,--o,r,!1,a,l))){o++;break}f=h}s[0]=new Nw(f[0],o),s[1]=new Nw(f[1],o),c=!0;break}}var u=o+1;if(c){for(var d=0,h=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);u<n;u++){var f;if(null!=(f=e.findGuardPattern(t,h[0],u,r,!1,a,l))&&Math.abs(h[0]-f[0])<e.MAX_PATTERN_DRIFT&&Math.abs(h[1]-f[1])<e.MAX_PATTERN_DRIFT)h=f,d=0;else{if(d>e.SKIPPED_ROW_COUNT_MAX)break;d++}}u-=d+1,s[2]=new Nw(h[0],u),s[3]=new Nw(h[1],u)}return u-o<e.BARCODE_MIN_HEIGHT&&mv.fill(s,null),s},e.findGuardPattern=function(t,n,r,o,i,a,s){mv.fillWithin(s,0,s.length,0);for(var c=n,l=0;t.get(c,r)&&c>0&&l++<e.MAX_PIXEL_DRIFT;)c--;for(var u=c,d=0,h=a.length,f=i;u<o;u++){if(t.get(u,r)!==f)s[d]++;else{if(d===h-1){if(e.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return new Int32Array([c,u]);c+=s[0]+s[1],lv.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,f=!f}}return d===h-1&&e.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE?new Int32Array([c,u-1]):null},e.patternMatchVariance=function(e,t,n){for(var r=e.length,o=0,i=0,a=0;a<r;a++)o+=e[a],i+=t[a];if(o<i)return 1/0;var s=o/i;n*=s;for(var c=0,l=0;l<r;l++){var u=e[l],d=t[l]*s,h=u>d?u-d:d-u;if(h>n)return 1/0;c+=h}return c/o},e.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),e.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),e.MAX_AVG_VARIANCE=.42,e.MAX_INDIVIDUAL_VARIANCE=.8,e.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),e.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),e.MAX_PIXEL_DRIFT=3,e.MAX_PATTERN_DRIFT=5,e.SKIPPED_ROW_COUNT_MAX=25,e.ROW_STEP=5,e.BARCODE_MIN_HEIGHT=10,e}();const gE=pE;var mE=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},yE=function(){function e(e,t){if(0===t.length)throw new rv;this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var r=1;r<n&&0===t[r];)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),lv.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.evaluateAt=function(e){var t,n;if(0===e)return this.getCoefficient(0);if(1===e){var r=0;try{for(var o=mE(this.coefficients),i=o.next();!i.done;i=o.next()){var a=i.value;r=this.field.add(r,a)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}for(var s=this.coefficients[0],c=this.coefficients.length,l=1;l<c;l++)s=this.field.add(this.field.multiply(e,s),this.coefficients[l]);return s},e.prototype.add=function(t){if(!this.field.equals(t.field))throw new rv("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,r=t.coefficients;if(n.length>r.length){var o=n;n=r,r=o}var i=new Int32Array(r.length),a=r.length-n.length;lv.arraycopy(r,0,i,0,a);for(var s=a;s<r.length;s++)i[s]=this.field.add(n[s-a],r[s]);return new e(this.field,i)},e.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new rv("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},e.prototype.multiply=function(t){return t instanceof e?this.multiplyOther(t):this.multiplyScalar(t)},e.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new rv("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new e(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,o=t.coefficients,i=o.length,a=new Int32Array(r+i-1),s=0;s<r;s++)for(var c=n[s],l=0;l<i;l++)a[s+l]=this.field.add(a[s+l],this.field.multiply(c,o[l]));return new e(this.field,a)},e.prototype.negative=function(){for(var t=this.coefficients.length,n=new Int32Array(t),r=0;r<t;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new e(this.field,n)},e.prototype.multiplyScalar=function(t){if(0===t)return new e(this.field,new Int32Array([0]));if(1===t)return this;for(var n=this.coefficients.length,r=new Int32Array(n),o=0;o<n;o++)r[o]=this.field.multiply(this.coefficients[o],t);return new e(this.field,r)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new rv;if(0===n)return new e(this.field,new Int32Array([0]));for(var r=this.coefficients.length,o=new Int32Array(r+t),i=0;i<r;i++)o[i]=this.field.multiply(this.coefficients[i],n);return new e(this.field,o)},e.prototype.toString=function(){for(var e=new Pv,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},e}();const vE=yE;const wE=function(){function e(){}return e.prototype.add=function(e,t){return(e+t)%this.modulus},e.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},e.prototype.exp=function(e){return this.expTable[e]},e.prototype.log=function(e){if(0===e)throw new rv;return this.logTable[e]},e.prototype.inverse=function(e){if(0===e)throw new dw;return this.expTable[this.modulus-this.logTable[e]-1]},e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},e.prototype.getSize=function(){return this.modulus},e.prototype.equals=function(e){return e===this},e}();var bE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_E=function(e){function t(t,n){var r=e.call(this)||this;r.modulus=t,r.expTable=new Int32Array(t),r.logTable=new Int32Array(t);for(var o=1,i=0;i<t;i++)r.expTable[i]=o,o=o*n%t;for(i=0;i<t-1;i++)r.logTable[r.expTable[i]]=i;return r.zero=new vE(r,new Int32Array([0])),r.one=new vE(r,new Int32Array([1])),r}return bE(t,e),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,t){if(e<0)throw new rv;if(0===t)return this.zero;var n=new Int32Array(e+1);return n[0]=t,new vE(this,n)},t.PDF417_GF=new t(dE.NUMBER_OF_CODEWORDS,3),t}(wE);const CE=_E;var EE=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},SE=function(){function e(){this.field=CE.PDF417_GF}return e.prototype.decode=function(e,t,n){for(var r,o,i=new vE(this.field,e),a=new Int32Array(t),s=!1,c=t;c>0;c--){var l=i.evaluateAt(this.field.exp(c));a[t-c]=l,0!==l&&(s=!0)}if(!s)return 0;var u=this.field.getOne();if(null!=n)try{for(var d=EE(n),h=d.next();!h.done;h=d.next()){var f=h.value,p=this.field.exp(e.length-1-f),g=new vE(this.field,new Int32Array([this.field.subtract(0,p),1]));u=u.multiply(g)}}catch(E){r={error:E}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}var m=new vE(this.field,a),y=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),m,t),v=y[0],w=y[1],b=this.findErrorLocations(v),_=this.findErrorMagnitudes(w,v,b);for(c=0;c<b.length;c++){var C=e.length-1-this.field.log(b[c]);if(C<0)throw av.getChecksumInstance();e[C]=this.field.subtract(e[C],_[c])}return b.length},e.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var r=e;e=t,t=r}for(var o=e,i=t,a=this.field.getZero(),s=this.field.getOne();i.getDegree()>=Math.round(n/2);){var c=o,l=a;if(a=s,(o=i).isZero())throw av.getChecksumInstance();i=c;for(var u=this.field.getZero(),d=o.getCoefficient(o.getDegree()),h=this.field.inverse(d);i.getDegree()>=o.getDegree()&&!i.isZero();){var f=i.getDegree()-o.getDegree(),p=this.field.multiply(i.getCoefficient(i.getDegree()),h);u=u.add(this.field.buildMonomial(f,p)),i=i.subtract(o.multiplyByMonomial(f,p))}s=u.multiply(a).subtract(l).negative()}var g=s.getCoefficient(0);if(0===g)throw av.getChecksumInstance();var m=this.field.inverse(g);return[s.multiply(m),i.multiply(m)]},e.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),r=0,o=1;o<this.field.getSize()&&r<t;o++)0===e.evaluateAt(o)&&(n[r]=this.field.inverse(o),r++);if(r!==t)throw av.getChecksumInstance();return n},e.prototype.findErrorMagnitudes=function(e,t,n){for(var r=t.getDegree(),o=new Int32Array(r),i=1;i<=r;i++)o[r-i]=this.field.multiply(i,t.getCoefficient(i));var a=new vE(this.field,o),s=n.length,c=new Int32Array(s);for(i=0;i<s;i++){var l=this.field.inverse(n[i]),u=this.field.subtract(0,e.evaluateAt(l)),d=this.field.inverse(a.evaluateAt(l));c[i]=this.field.multiply(u,d)}return c},e}();const AE=SE;const IE=function(){function e(t,n,r,o,i){t instanceof e?this.constructor_2(t):this.constructor_1(t,n,r,o,i)}return e.prototype.constructor_1=function(e,t,n,r,o){var i=null==t||null==n,a=null==r||null==o;if(i&&a)throw new Lv;i?(t=new Nw(0,r.getY()),n=new Nw(0,o.getY())):a&&(r=new Nw(e.getWidth()-1,t.getY()),o=new Nw(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),o.getY()))},e.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},e.merge=function(t,n){return null==t?n:null==n?t:new e(t.image,t.topLeft,t.bottomLeft,n.topRight,n.bottomRight)},e.prototype.addMissingRows=function(t,n,r){var o=this.topLeft,i=this.bottomLeft,a=this.topRight,s=this.bottomRight;if(t>0){var c=r?this.topLeft:this.topRight,l=Math.trunc(c.getY()-t);l<0&&(l=0);var u=new Nw(c.getX(),l);r?o=u:a=u}if(n>0){var d=r?this.bottomLeft:this.bottomRight,h=Math.trunc(d.getY()+n);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var f=new Nw(d.getX(),h);r?i=f:s=f}return new e(this.image,o,i,a,s)},e.prototype.getMinX=function(){return this.minX},e.prototype.getMaxX=function(){return this.maxX},e.prototype.getMinY=function(){return this.minY},e.prototype.getMaxY=function(){return this.maxY},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getBottomRight=function(){return this.bottomRight},e}();const xE=function(){function e(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return e.prototype.getColumnCount=function(){return this.columnCount},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getRowCount=function(){return this.rowCount},e.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},e.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},e}();const NE=function(){function e(){this.buffer=""}return e.form=function(e,t){var n=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(e,r,o,i,a,s){if("%%"===e)return"%";if(void 0!==t[++n]){e=i?parseInt(i.substr(1)):void 0;var c,l=a?parseInt(a.substr(1)):void 0;switch(s){case"s":c=t[n];break;case"c":c=t[n][0];break;case"f":c=parseFloat(t[n]).toFixed(e);break;case"p":c=parseFloat(t[n]).toPrecision(e);break;case"e":c=parseFloat(t[n]).toExponential(e);break;case"x":c=parseInt(t[n]).toString(l||16);break;case"d":c=parseFloat(parseInt(t[n],l||10).toPrecision(e)).toFixed(0)}c="object"===typeof c?JSON.stringify(c):(+c).toString(l);for(var u=parseInt(o),d=o&&o[0]+""==="0"?"0":" ";c.length<u;)c=void 0!==r?c+d:d+c;return c}})},e.prototype.format=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=e.form(t,n)},e.prototype.toString=function(){return this.buffer},e}();var TE=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},kE=function(){function e(e){this.boundingBox=new IE(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return e.prototype.getCodewordNearby=function(t){var n=this.getCodeword(t);if(null!=n)return n;for(var r=1;r<e.MAX_NEARBY_DISTANCE;r++){var o=this.imageRowToCodewordIndex(t)-r;if(o>=0&&null!=(n=this.codewords[o]))return n;if((o=this.imageRowToCodewordIndex(t)+r)<this.codewords.length&&null!=(n=this.codewords[o]))return n}return null},e.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},e.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},e.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.getCodewords=function(){return this.codewords},e.prototype.toString=function(){var e,t,n=new NE,r=0;try{for(var o=TE(this.codewords),i=o.next();!i.done;i=o.next()){var a=i.value;null!=a?n.format("%3d: %3d|%3d%n",r++,a.getRowNumber(),a.getValue()):n.format("%3d:    |   %n",r++)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n.toString()},e.MAX_NEARBY_DISTANCE=5,e}();const OE=kE;var RE=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},PE=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},jE=function(){function e(){this.values=new Map}return e.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)},e.prototype.getValue=function(){var e,t,n=-1,r=new Array,o=function(e,t){var o=function(){return e},i=function(){return t};i()>n?(n=i(),(r=[]).push(o())):i()===n&&r.push(o())};try{for(var i=RE(this.values.entries()),a=i.next();!a.done;a=i.next()){var s=PE(a.value,2);o(s[0],s[1])}}catch(c){e={error:c}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return dE.toIntArray(r)},e.prototype.getConfidence=function(e){return this.values.get(e)},e}();const DE=jE;var ME=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),LE=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},BE=function(e){function t(t,n){var r=e.call(this,t)||this;return r._isLeft=n,r}return ME(t,e),t.prototype.setRowNumbers=function(){var e,t;try{for(var n=LE(this.getCodewords()),r=n.next();!r.done;r=n.next()){var o=r.value;null!=o&&o.setRowNumberAsRowIndicatorColumn()}}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);for(var n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),s=-1,c=1,l=0,u=i;u<a;u++)if(null!=t[u]){var d=t[u],h=d.getRowNumber()-s;if(0===h)l++;else if(1===h)c=Math.max(c,l),l=1,s=d.getRowNumber();else if(h<0||d.getRowNumber()>=e.getRowCount()||h>u)t[u]=null;else{for(var f=void 0,p=(f=c>2?(c-2)*h:h)>=u,g=1;g<=f&&!p;g++)p=null!=t[u-g];p?t[u]=null:(s=d.getRowNumber(),l=1)}}},t.prototype.getRowHeights=function(){var e,t,n=this.getBarcodeMetadata();if(null==n)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);var r=new Int32Array(n.getRowCount());try{for(var o=LE(this.getCodewords()),i=o.next();!i.done;i=o.next()){var a=i.value;if(null!=a){var s=a.getRowNumber();if(s>=r.length)continue;r[s]++}}}catch(c){e={error:c}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(n.getY())),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.getCodewords(),s=-1,c=1,l=0,u=o;u<i;u++)if(null!=a[u]){var d=a[u];d.setRowNumberAsRowIndicatorColumn();var h=d.getRowNumber()-s;0===h?l++:1===h?(c=Math.max(c,l),l=1,s=d.getRowNumber()):d.getRowNumber()>=e.getRowCount()?a[u]=null:(s=d.getRowNumber(),l=1)}},t.prototype.getBarcodeMetadata=function(){var e,t,n=this.getCodewords(),r=new DE,o=new DE,i=new DE,a=new DE;try{for(var s=LE(n),c=s.next();!c.done;c=s.next()){var l=c.value;if(null!=l){l.setRowNumberAsRowIndicatorColumn();var u=l.getValue()%30,d=l.getRowNumber();switch(this._isLeft||(d+=2),d%3){case 0:o.setValue(3*u+1);break;case 1:a.setValue(u/3),i.setValue(u%3);break;case 2:r.setValue(u+1)}}}}catch(f){e={error:f}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}if(0===r.getValue().length||0===o.getValue().length||0===i.getValue().length||0===a.getValue().length||r.getValue()[0]<1||o.getValue()[0]+i.getValue()[0]<dE.MIN_ROWS_IN_BARCODE||o.getValue()[0]+i.getValue()[0]>dE.MAX_ROWS_IN_BARCODE)return null;var h=new xE(r.getValue()[0],o.getValue()[0],i.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(n,h),h},t.prototype.removeIncorrectCodewords=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(null!=e[n]){var o=r.getValue()%30,i=r.getRowNumber();if(i>t.getRowCount())e[n]=null;else switch(this._isLeft||(i+=2),i%3){case 0:3*o+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(o/3)===t.getErrorCorrectionLevel()&&o%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:o+1!==t.getColumnCount()&&(e[n]=null)}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+e.prototype.toString.call(this)},t}(OE);const FE=BE;var UE=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},VE=function(){function e(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return e.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e,t=dE.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns},e.prototype.adjustIndicatorColumnRowNumbers=function(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},e.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(0===e)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),r=0;r<n.length;r++)null!=n[r]&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n));return e},e.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},e.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(var r=1;r<=this.barcodeColumnCount;r++){var o=this.detectionResultColumns[r].getCodewords()[n];null!=o&&(o.setRowNumber(e[n].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}},e.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var t=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(null!=n[r])for(var o=n[r].getRowNumber(),i=0,a=this.barcodeColumnCount+1;a>0&&i<this.ADJUST_ROW_NUMBER_SKIP;a--){var s=this.detectionResultColumns[a].getCodewords()[r];null!=s&&(i=e.adjustRowNumberIfValid(o,i,s),s.hasValidRowNumber()||t++)}return t},e.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var t=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(null!=n[r])for(var o=n[r].getRowNumber(),i=0,a=1;a<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;a++){var s=this.detectionResultColumns[a].getCodewords()[r];null!=s&&(i=e.adjustRowNumberIfValid(o,i,s),s.hasValidRowNumber()||t++)}return t},e.adjustRowNumberIfValid=function(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},e.prototype.adjustRowNumbers=function(t,n,r){var o,i;if(null!=this.detectionResultColumns[t-1]){var a=r[n],s=this.detectionResultColumns[t-1].getCodewords(),c=s;null!=this.detectionResultColumns[t+1]&&(c=this.detectionResultColumns[t+1].getCodewords());var l=new Array(14);l[2]=s[n],l[3]=c[n],n>0&&(l[0]=r[n-1],l[4]=s[n-1],l[5]=c[n-1]),n>1&&(l[8]=r[n-2],l[10]=s[n-2],l[11]=c[n-2]),n<r.length-1&&(l[1]=r[n+1],l[6]=s[n+1],l[7]=c[n+1]),n<r.length-2&&(l[9]=r[n+2],l[12]=s[n+2],l[13]=c[n+2]);try{for(var u=UE(l),d=u.next();!d.done;d=u.next()){var h=d.value;if(e.adjustRowNumber(a,h))return}}catch(f){o={error:f}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}}},e.adjustRowNumber=function(e,t){return null!=t&&(!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0))},e.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},e.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},e.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},e.prototype.setBoundingBox=function(e){this.boundingBox=e},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},e.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},e.prototype.toString=function(){var e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new NE,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var r=0;r<this.barcodeColumnCount+2;r++)if(null!=this.detectionResultColumns[r]){var o=this.detectionResultColumns[r].getCodewords()[n];null!=o?t.format(" %3d|%3d",o.getRowNumber(),o.getValue()):t.format("    |   ")}else t.format("    |   ");t.format("%n")}return t.toString()},e}();const zE=VE;const HE=function(){function e(t,n,r,o){this.rowNumber=e.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(o)}return e.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},e.prototype.isValidRowNumber=function(t){return t!==e.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},e.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},e.prototype.getWidth=function(){return this.endX-this.startX},e.prototype.getStartX=function(){return this.startX},e.prototype.getEndX=function(){return this.endX},e.prototype.getBucket=function(){return this.bucket},e.prototype.getValue=function(){return this.value},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.setRowNumber=function(e){this.rowNumber=e},e.prototype.toString=function(){return this.rowNumber+"|"+this.value},e.BARCODE_ROW_UNKNOWN=-1,e}();var GE=function(){function e(){}return e.initialize=function(){for(var t=0;t<dE.SYMBOL_TABLE.length;t++)for(var n=dE.SYMBOL_TABLE[t],r=1&n,o=0;o<dE.BARS_IN_MODULE;o++){for(var i=0;(1&n)===r;)i+=1,n>>=1;r=1&n,e.RATIOS_TABLE[t]||(e.RATIOS_TABLE[t]=new Array(dE.BARS_IN_MODULE)),e.RATIOS_TABLE[t][dE.BARS_IN_MODULE-o-1]=Math.fround(i/dE.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},e.getDecodedValue=function(t){var n=e.getDecodedCodewordValue(e.sampleBitCounts(t));return-1!==n?n:e.getClosestDecodedValue(t)},e.sampleBitCounts=function(e){for(var t=Aw.sum(e),n=new Int32Array(dE.BARS_IN_MODULE),r=0,o=0,i=0;i<dE.MODULES_IN_CODEWORD;i++){var a=t/(2*dE.MODULES_IN_CODEWORD)+i*t/dE.MODULES_IN_CODEWORD;o+e[r]<=a&&(o+=e[r],r++),n[r]++}return n},e.getDecodedCodewordValue=function(t){var n=e.getBitValue(t);return-1===dE.getCodeword(n)?-1:n},e.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)},e.getClosestDecodedValue=function(t){var n=Aw.sum(t),r=new Array(dE.BARS_IN_MODULE);if(n>1)for(var o=0;o<r.length;o++)r[o]=Math.fround(t[o]/n);var i=Iw.MAX_VALUE,a=-1;this.bSymbolTableReady||e.initialize();for(var s=0;s<e.RATIOS_TABLE.length;s++){for(var c=0,l=e.RATIOS_TABLE[s],u=0;u<dE.BARS_IN_MODULE;u++){var d=Math.fround(l[u]-r[u]);if((c+=Math.fround(d*d))>=i)break}c<i&&(i=c,a=dE.SYMBOL_TABLE[s])}return a},e.bSymbolTableReady=!1,e.RATIOS_TABLE=new Array(dE.SYMBOL_TABLE.length).map(function(e){return new Array(dE.BARS_IN_MODULE)}),e}();const WE=GE;const qE=function(){function e(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return e.prototype.getSegmentIndex=function(){return this.segmentIndex},e.prototype.setSegmentIndex=function(e){this.segmentIndex=e},e.prototype.getFileId=function(){return this.fileId},e.prototype.setFileId=function(e){this.fileId=e},e.prototype.getOptionalData=function(){return this.optionalData},e.prototype.setOptionalData=function(e){this.optionalData=e},e.prototype.isLastSegment=function(){return this.lastSegment},e.prototype.setLastSegment=function(e){this.lastSegment=e},e.prototype.getSegmentCount=function(){return this.segmentCount},e.prototype.setSegmentCount=function(e){this.segmentCount=e},e.prototype.getSender=function(){return this.sender||null},e.prototype.setSender=function(e){this.sender=e},e.prototype.getAddressee=function(){return this.addressee||null},e.prototype.setAddressee=function(e){this.addressee=e},e.prototype.getFileName=function(){return this.fileName},e.prototype.setFileName=function(e){this.fileName=e},e.prototype.getFileSize=function(){return this.fileSize},e.prototype.setFileSize=function(e){this.fileSize=e},e.prototype.getChecksum=function(){return this.checksum},e.prototype.setChecksum=function(e){this.checksum=e},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.setTimestamp=function(e){this.timestamp=e},e}();const XE=function(){function e(){}return e.parseLong=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},e}();var KE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const YE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KE(t,e),t.kind="NullPointerException",t}(Jy);const QE=function(){function e(){}return e.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},e.prototype.writeBytesOffset=function(e,t,n){if(null==e)throw new YE;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new dv;if(0!==n)for(var r=0;r<n;r++)this.write(e[t+r])},e.prototype.flush=function(){},e.prototype.close=function(){},e}();var ZE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const $E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ZE(t,e),t}(Jy);var JE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const eS=function(e){function t(t){void 0===t&&(t=32);var n=e.call(this)||this;if(n.count=0,t<0)throw new rv("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return JE(t,e),t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new $E;t=vv.MAX_VALUE}this.buf=mv.copyOfUint8Array(this.buf,t)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new dv;this.ensureCapacity(this.count+n),lv.arraycopy(e,t,this.buf,this.count,n),this.count+=n},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return mv.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t}(QE);var tS,nS;function rS(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof n.g)return n.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function oS(e){if("undefined"===typeof nS&&(nS=rS()),null===nS)throw new Error("BigInt is not supported!");return nS(e)}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(tS||(tS={}));var iS=function(){function e(){}return e.decode=function(t,n){var r=new Pv(""),o=Nv.ISO8859_1;r.enableDecoding(o);for(var i=1,a=t[i++],s=new qE;i<t[0];){switch(a){case e.TEXT_COMPACTION_MODE_LATCH:i=e.textCompaction(t,i,r);break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:i=e.byteCompaction(a,t,o,i,r);break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[i++]);break;case e.NUMERIC_COMPACTION_MODE_LATCH:i=e.numericCompaction(t,i,r);break;case e.ECI_CHARSET:Nv.getCharacterSetECIByValue(t[i++]);break;case e.ECI_GENERAL_PURPOSE:i+=2;break;case e.ECI_USER_DEFINED:i++;break;case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=e.decodeMacroBlock(t,i,s);break;case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:throw new Sv;default:i--,i=e.textCompaction(t,i,r)}if(!(i<t.length))throw Sv.getFormatInstance();a=t[i++]}if(0===r.length())throw Sv.getFormatInstance();var c=new aw(null,r.toString(),null,n);return c.setOther(s),c},e.decodeMacroBlock=function(t,n,r){if(n+e.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw Sv.getFormatInstance();for(var o=new Int32Array(e.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<e.NUMBER_OF_SEQUENCE_CODEWORDS;i++,n++)o[i]=t[n];r.setSegmentIndex(vv.parseInt(e.decodeBase900toBase10(o,e.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new Pv;n=e.textCompaction(t,n,a),r.setFileId(a.toString());var s=-1;for(t[n]===e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=n+1);n<t[0];)switch(t[n]){case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t[++n]){case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Pv;n=e.textCompaction(t,n+1,c),r.setFileName(c.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var l=new Pv;n=e.textCompaction(t,n+1,l),r.setSender(l.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var u=new Pv;n=e.textCompaction(t,n+1,u),r.setAddressee(u.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var d=new Pv;n=e.numericCompaction(t,n+1,d),r.setSegmentCount(vv.parseInt(d.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new Pv;n=e.numericCompaction(t,n+1,h),r.setTimestamp(XE.parseLong(h.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var f=new Pv;n=e.numericCompaction(t,n+1,f),r.setChecksum(vv.parseInt(f.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var p=new Pv;n=e.numericCompaction(t,n+1,p),r.setFileSize(XE.parseLong(p.toString()));break;default:throw Sv.getFormatInstance()}break;case e.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw Sv.getFormatInstance()}if(-1!==s){var g=n-s;r.isLastSegment()&&g--,r.setOptionalData(mv.copyOfRange(t,s,s+g))}return n},e.textCompaction=function(t,n,r){for(var o=new Int32Array(2*(t[0]-n)),i=new Int32Array(2*(t[0]-n)),a=0,s=!1;n<t[0]&&!s;){var c=t[n++];if(c<e.TEXT_COMPACTION_MODE_LATCH)o[a]=c/30,o[a+1]=c%30,a+=2;else switch(c){case e.TEXT_COMPACTION_MODE_LATCH:o[a++]=e.TEXT_COMPACTION_MODE_LATCH;break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:n--,s=!0;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[a]=e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=t[n++],i[a]=c,a++}}return e.decodeTextCompaction(o,i,a,r),n},e.decodeTextCompaction=function(t,n,r,o){for(var i=tS.ALPHA,a=tS.ALPHA,s=0;s<r;){var c=t[s],l="";switch(i){case tS.ALPHA:if(c<26)l=String.fromCharCode(65+c);else switch(c){case 26:l=" ";break;case e.LL:i=tS.LOWER;break;case e.ML:i=tS.MIXED;break;case e.PS:a=i,i=tS.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=tS.ALPHA}break;case tS.LOWER:if(c<26)l=String.fromCharCode(97+c);else switch(c){case 26:l=" ";break;case e.AS:a=i,i=tS.ALPHA_SHIFT;break;case e.ML:i=tS.MIXED;break;case e.PS:a=i,i=tS.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=tS.ALPHA}break;case tS.MIXED:if(c<e.PL)l=e.MIXED_CHARS[c];else switch(c){case e.PL:i=tS.PUNCT;break;case 26:l=" ";break;case e.LL:i=tS.LOWER;break;case e.AL:i=tS.ALPHA;break;case e.PS:a=i,i=tS.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=tS.ALPHA}break;case tS.PUNCT:if(c<e.PAL)l=e.PUNCT_CHARS[c];else switch(c){case e.PAL:i=tS.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=tS.ALPHA}break;case tS.ALPHA_SHIFT:if(i=a,c<26)l=String.fromCharCode(65+c);else switch(c){case 26:l=" ";break;case e.TEXT_COMPACTION_MODE_LATCH:i=tS.ALPHA}break;case tS.PUNCT_SHIFT:if(i=a,c<e.PAL)l=e.PUNCT_CHARS[c];else switch(c){case e.PAL:i=tS.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=tS.ALPHA}}""!==l&&o.append(l),s++}},e.byteCompaction=function(t,n,r,o,i){var a=new eS,s=0,c=0,l=!1;switch(t){case e.BYTE_COMPACTION_MODE_LATCH:for(var u=new Int32Array(6),d=n[o++];o<n[0]&&!l;)switch(u[s++]=d,c=900*c+d,d=n[o++]){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:o--,l=!0;break;default:if(s%5===0&&s>0){for(var h=0;h<6;++h)a.write(Number(oS(c)>>oS(8*(5-h))));c=0,s=0}}o===n[0]&&d<e.TEXT_COMPACTION_MODE_LATCH&&(u[s++]=d);for(var f=0;f<s;f++)a.write(u[f]);break;case e.BYTE_COMPACTION_MODE_LATCH_6:for(;o<n[0]&&!l;){var p=n[o++];if(p<e.TEXT_COMPACTION_MODE_LATCH)s++,c=900*c+p;else switch(p){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:o--,l=!0}if(s%5===0&&s>0){for(h=0;h<6;++h)a.write(Number(oS(c)>>oS(8*(5-h))));c=0,s=0}}}return i.append(Ov.decode(a.toByteArray(),r)),o},e.numericCompaction=function(t,n,r){for(var o=0,i=!1,a=new Int32Array(e.MAX_NUMERIC_CODEWORDS);n<t[0]&&!i;){var s=t[n++];if(n===t[0]&&(i=!0),s<e.TEXT_COMPACTION_MODE_LATCH)a[o]=s,o++;else switch(s){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:n--,i=!0}(o%e.MAX_NUMERIC_CODEWORDS===0||s===e.NUMERIC_COMPACTION_MODE_LATCH||i)&&o>0&&(r.append(e.decodeBase900toBase10(a,o)),o=0)}return n},e.decodeBase900toBase10=function(t,n){for(var r=oS(0),o=0;o<n;o++)r+=e.EXP900[n-o-1]*oS(t[o]);var i=r.toString();if("1"!==i.charAt(0))throw new Sv;return i.substring(1)},e.TEXT_COMPACTION_MODE_LATCH=900,e.BYTE_COMPACTION_MODE_LATCH=901,e.NUMERIC_COMPACTION_MODE_LATCH=902,e.BYTE_COMPACTION_MODE_LATCH_6=924,e.ECI_USER_DEFINED=925,e.ECI_GENERAL_PURPOSE=926,e.ECI_CHARSET=927,e.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,e.MACRO_PDF417_TERMINATOR=922,e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,e.MAX_NUMERIC_CODEWORDS=15,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,e.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,e.PL=25,e.LL=27,e.AS=27,e.ML=28,e.AL=28,e.PS=29,e.PAL=29,e.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",e.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",e.EXP900=rS()?function(){var e=[];e[0]=oS(1);var t=oS(900);e[1]=t;for(var n=2;n<16;n++)e[n]=e[n-1]*t;return e}():[],e.NUMBER_OF_SEQUENCE_CODEWORDS=2,e}();const aS=iS;var sS=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cS=function(){function e(){}return e.decode=function(t,n,r,o,i,a,s){for(var c,l=new IE(t,n,r,o,i),u=null,d=null,h=!0;;h=!1){if(null!=n&&(u=e.getRowIndicatorColumn(t,l,n,!0,a,s)),null!=o&&(d=e.getRowIndicatorColumn(t,l,o,!1,a,s)),null==(c=e.merge(u,d)))throw Lv.getNotFoundInstance();var f=c.getBoundingBox();if(!h||null==f||!(f.getMinY()<l.getMinY()||f.getMaxY()>l.getMaxY()))break;l=f}c.setBoundingBox(l);var p=c.getBarcodeColumnCount()+1;c.setDetectionResultColumn(0,u),c.setDetectionResultColumn(p,d);for(var g=null!=u,m=1;m<=p;m++){var y=g?m:p-m;if(void 0===c.getDetectionResultColumn(y)){var v=void 0;v=0===y||y===p?new FE(l,0===y):new OE(l),c.setDetectionResultColumn(y,v);for(var w=-1,b=w,_=l.getMinY();_<=l.getMaxY();_++){if((w=e.getStartColumn(c,y,_,g))<0||w>l.getMaxX()){if(-1===b)continue;w=b}var C=e.detectCodeword(t,l.getMinX(),l.getMaxX(),g,w,_,a,s);null!=C&&(v.setCodeword(_,C),b=w,a=Math.min(a,C.getWidth()),s=Math.max(s,C.getWidth()))}}}return e.createDecoderResult(c)},e.merge=function(t,n){if(null==t&&null==n)return null;var r=e.getBarcodeMetadata(t,n);if(null==r)return null;var o=IE.merge(e.adjustBoundingBox(t),e.adjustBoundingBox(n));return new zE(r,o)},e.adjustBoundingBox=function(t){var n,r;if(null==t)return null;var o=t.getRowHeights();if(null==o)return null;var i=e.getMax(o),a=0;try{for(var s=sS(o),c=s.next();!c.done;c=s.next()){var l=c.value;if(a+=i-l,l>0)break}}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}for(var u=t.getCodewords(),d=0;a>0&&null==u[d];d++)a--;var h=0;for(d=o.length-1;d>=0&&(h+=i-o[d],!(o[d]>0));d--);for(d=u.length-1;h>0&&null==u[d];d--)h--;return t.getBoundingBox().addMissingRows(a,h,t.isLeft())},e.getMax=function(e){var t,n,r=-1;try{for(var o=sS(e),i=o.next();!i.done;i=o.next()){var a=i.value;r=Math.max(r,a)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},e.getBarcodeMetadata=function(e,t){var n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n},e.getRowIndicatorColumn=function(t,n,r,o,i,a){for(var s=new FE(n,o),c=0;c<2;c++)for(var l=0===c?1:-1,u=Math.trunc(Math.trunc(r.getX())),d=Math.trunc(Math.trunc(r.getY()));d<=n.getMaxY()&&d>=n.getMinY();d+=l){var h=e.detectCodeword(t,0,t.getWidth(),o,u,d,i,a);null!=h&&(s.setCodeword(d,h),u=o?h.getStartX():h.getEndX())}return s},e.adjustCodewordCount=function(t,n){var r=n[0][1],o=r.getValue(),i=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-e.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===o.length){if(i<1||i>dE.MAX_CODEWORDS_IN_BARCODE)throw Lv.getNotFoundInstance();r.setValue(i)}else o[0]!==i&&r.setValue(i)},e.createDecoderResult=function(t){var n=e.createBarcodeMatrix(t);e.adjustCodewordCount(t,n);for(var r=new Array,o=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),i=[],a=new Array,s=0;s<t.getBarcodeRowCount();s++)for(var c=0;c<t.getBarcodeColumnCount();c++){var l=n[s][c+1].getValue(),u=s*t.getBarcodeColumnCount()+c;0===l.length?r.push(u):1===l.length?o[u]=l[0]:(a.push(u),i.push(l))}for(var d=new Array(i.length),h=0;h<d.length;h++)d[h]=i[h];return e.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),o,dE.toIntArray(r),dE.toIntArray(a),d)},e.createDecoderResultFromAmbiguousValues=function(t,n,r,o,i){for(var a=new Int32Array(o.length),s=100;s-- >0;){for(var c=0;c<a.length;c++)n[o[c]]=i[c][a[c]];try{return e.decodeCodewords(n,t,r)}catch(l){if(!(l instanceof av))throw l}if(0===a.length)throw av.getChecksumInstance();for(c=0;c<a.length;c++){if(a[c]<i[c].length-1){a[c]++;break}if(a[c]=0,c===a.length-1)throw av.getChecksumInstance()}}throw av.getChecksumInstance()},e.createBarcodeMatrix=function(e){for(var t,n,r,o,i=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<i.length;a++)for(var s=0;s<i[a].length;s++)i[a][s]=new DE;var c=0;try{for(var l=sS(e.getDetectionResultColumns()),u=l.next();!u.done;u=l.next()){var d=u.value;if(null!=d)try{for(var h=(r=void 0,sS(d.getCodewords())),f=h.next();!f.done;f=h.next()){var p=f.value;if(null!=p){var g=p.getRowNumber();if(g>=0){if(g>=i.length)continue;i[g][c].setValue(p.getValue())}}}}catch(m){r={error:m}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}c++}}catch(y){t={error:y}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return i},e.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},e.getStartColumn=function(t,n,r,o){var i,a,s=o?1:-1,c=null;if(e.isValidBarcodeColumn(t,n-s)&&(c=t.getDetectionResultColumn(n-s).getCodeword(r)),null!=c)return o?c.getEndX():c.getStartX();if(null!=(c=t.getDetectionResultColumn(n).getCodewordNearby(r)))return o?c.getStartX():c.getEndX();if(e.isValidBarcodeColumn(t,n-s)&&(c=t.getDetectionResultColumn(n-s).getCodewordNearby(r)),null!=c)return o?c.getEndX():c.getStartX();for(var l=0;e.isValidBarcodeColumn(t,n-s);){n-=s;try{for(var u=(i=void 0,sS(t.getDetectionResultColumn(n).getCodewords())),d=u.next();!d.done;d=u.next()){var h=d.value;if(null!=h)return(o?h.getEndX():h.getStartX())+s*l*(h.getEndX()-h.getStartX())}}catch(f){i={error:f}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}l++}return o?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},e.detectCodeword=function(t,n,r,o,i,a,s,c){i=e.adjustCodewordStartColumn(t,n,r,o,i,a);var l,u=e.getModuleBitCount(t,n,r,o,i,a);if(null==u)return null;var d=Aw.sum(u);if(o)l=i+d;else{for(var h=0;h<u.length/2;h++){var f=u[h];u[h]=u[u.length-1-h],u[u.length-1-h]=f}i=(l=i)-d}if(!e.checkCodewordSkew(d,s,c))return null;var p=WE.getDecodedValue(u),g=dE.getCodeword(p);return-1===g?null:new HE(i,l,e.getCodewordBucketNumber(p),g)},e.getModuleBitCount=function(e,t,n,r,o,i){for(var a=o,s=new Int32Array(8),c=0,l=r?1:-1,u=r;(r?a<n:a>=t)&&c<s.length;)e.get(a,i)===u?(s[c]++,a+=l):(c++,u=!u);return c===s.length||a===(r?n:t)&&c===s.length-1?s:null},e.getNumberOfECCodeWords=function(e){return 2<<e},e.adjustCodewordStartColumn=function(t,n,r,o,i,a){for(var s=i,c=o?-1:1,l=0;l<2;l++){for(;(o?s>=n:s<r)&&o===t.get(s,a);){if(Math.abs(i-s)>e.CODEWORD_SKEW_SIZE)return i;s+=c}c=-c,o=!o}return s},e.checkCodewordSkew=function(t,n,r){return n-e.CODEWORD_SKEW_SIZE<=t&&t<=r+e.CODEWORD_SKEW_SIZE},e.decodeCodewords=function(t,n,r){if(0===t.length)throw Sv.getFormatInstance();var o=1<<n+1,i=e.correctErrors(t,r,o);e.verifyCodewordCount(t,o);var a=aS.decode(t,""+n);return a.setErrorsCorrected(i),a.setErasures(r.length),a},e.correctErrors=function(t,n,r){if(null!=n&&n.length>r/2+e.MAX_ERRORS||r<0||r>e.MAX_EC_CODEWORDS)throw av.getChecksumInstance();return e.errorCorrection.decode(t,r,n)},e.verifyCodewordCount=function(e,t){if(e.length<4)throw Sv.getFormatInstance();var n=e[0];if(n>e.length)throw Sv.getFormatInstance();if(0===n){if(!(t<e.length))throw Sv.getFormatInstance();e[0]=e.length-t}},e.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,r=t.length-1;!((1&e)!==n&&(n=1&e,--r<0));)t[r]++,e>>=1;return t},e.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},e.getCodewordBucketNumber_number=function(t){return e.getCodewordBucketNumber(e.getBitCountForCodeword(t))},e.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},e.toString=function(e){for(var t=new NE,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var r=0;r<e[n].length;r++){var o=e[n][r];0===o.getValue().length?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},e.CODEWORD_SKEW_SIZE=2,e.MAX_ERRORS=3,e.MAX_EC_CODEWORDS=512,e.errorCorrection=new AE,e}();const lS=cS;var uS=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},dS=function(){function e(){}return e.prototype.decode=function(t,n){void 0===n&&(n=null);var r=e.decode(t,n,!1);if(null==r||0===r.length||null==r[0])throw Lv.getNotFoundInstance();return r[0]},e.prototype.decodeMultiple=function(t,n){void 0===n&&(n=null);try{return e.decode(t,n,!0)}catch(r){if(r instanceof Sv||r instanceof av)throw Lv.getNotFoundInstance();throw r}},e.decode=function(t,n,r){var o,i,a=new Array,s=gE.detectMultiple(t,n,r);try{for(var c=uS(s.getPoints()),l=c.next();!l.done;l=c.next()){var u=l.value,d=lS.decode(s.getBits(),u[4],u[5],u[6],u[7],e.getMinCodewordWidth(u),e.getMaxCodewordWidth(u)),h=new tw(d.getText(),d.getRawBytes(),void 0,u,rw.PDF_417);h.putMetadata(iw.ERROR_CORRECTION_LEVEL,d.getECLevel());var f=d.getOther();null!=f&&h.putMetadata(iw.PDF417_EXTRA_METADATA,f),a.push(h)}}catch(p){o={error:p}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}return a.map(function(e){return e})},e.getMaxWidth=function(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))},e.getMinWidth=function(e,t){return null==e||null==t?vv.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},e.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(e.getMaxWidth(t[0],t[4]),e.getMaxWidth(t[6],t[2])*dE.MODULES_IN_CODEWORD/dE.MODULES_IN_STOP_PATTERN),Math.max(e.getMaxWidth(t[1],t[5]),e.getMaxWidth(t[7],t[3])*dE.MODULES_IN_CODEWORD/dE.MODULES_IN_STOP_PATTERN)))},e.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(e.getMinWidth(t[0],t[4]),e.getMinWidth(t[6],t[2])*dE.MODULES_IN_CODEWORD/dE.MODULES_IN_STOP_PATTERN),Math.min(e.getMinWidth(t[1],t[5]),e.getMinWidth(t[7],t[3])*dE.MODULES_IN_CODEWORD/dE.MODULES_IN_STOP_PATTERN)))},e.prototype.reset=function(){},e}();const hS=dS;var fS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const pS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fS(t,e),t.kind="ReaderException",t}(Jy);var gS=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},mS=function(){function e(){}return e.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},e.prototype.decodeWithState=function(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)},e.prototype.setHints=function(e){this.hints=e;var t=null!==e&&void 0!==e&&void 0!==e.get(Cv.TRY_HARDER),n=null===e||void 0===e?null:e.get(Cv.POSSIBLE_FORMATS),r=new Array;if(null!==n&&void 0!==n){var o=n.some(function(e){return e===rw.UPC_A||e===rw.UPC_E||e===rw.EAN_13||e===rw.EAN_8||e===rw.CODABAR||e===rw.CODE_39||e===rw.CODE_93||e===rw.CODE_128||e===rw.ITF||e===rw.RSS_14||e===rw.RSS_EXPANDED});o&&!t&&r.push(new q_(e)),n.includes(rw.QR_CODE)&&r.push(new cE),n.includes(rw.DATA_MATRIX)&&r.push(new pC),n.includes(rw.AZTEC)&&r.push(new Ww),n.includes(rw.PDF_417)&&r.push(new hS),o&&t&&r.push(new q_(e))}0===r.length&&(t||r.push(new q_(e)),r.push(new cE),r.push(new pC),r.push(new Ww),r.push(new hS),t&&r.push(new q_(e))),this.readers=r},e.prototype.reset=function(){var e,t;if(null!==this.readers)try{for(var n=gS(this.readers),r=n.next();!r.done;r=n.next()){r.value.reset()}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.decodeInternal=function(e){var t,n;if(null===this.readers)throw new pS("No readers where selected, nothing can be read.");try{for(var r=gS(this.readers),o=r.next();!o.done;o=r.next()){var i=o.value;try{return i.decode(e,this.hints)}catch(a){if(a instanceof pS)continue}}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}throw new Lv("No MultiFormat Readers were able to detect the code.")},e}();const yS=mS;var vS,wS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bS=(function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=500);var r=new yS;return r.setHints(t),e.call(this,r,n)||this}wS(t,e),t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)}}(ew),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),_S=(function(e){function t(t){return void 0===t&&(t=500),e.call(this,new hS,t)||this}bS(t,e)}(ew),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}());!function(e){function t(t){return void 0===t&&(t=500),e.call(this,new cE,t)||this}_S(t,e)}(ew);!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",e[e.MIN_SIZE=4]="MIN_SIZE",e[e.MAX_SIZE=5]="MAX_SIZE",e[e.MARGIN=6]="MARGIN",e[e.PDF417_COMPACT=7]="PDF417_COMPACT",e[e.PDF417_COMPACTION=8]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=10]="AZTEC_LAYERS",e[e.QR_VERSION=11]="QR_VERSION",e[e.GS1_FORMAT=12]="GS1_FORMAT",e[e.FORCE_C40=13]="FORCE_C40"}(vS||(vS={}));const CS=vS;const ES=function(){function e(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new lw(e,Int32Array.from([1])))}return e.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],r=this.field,o=t.length;o<=e;o++){var i=n.multiply(new lw(r,Int32Array.from([1,r.exp(o-1+r.getGeneratorBase())])));t.push(i),n=i}return t[e]},e.prototype.encode=function(e,t){if(0===t)throw new rv("No error correction bytes");var n=e.length-t;if(n<=0)throw new rv("No data bytes provided");var r=this.buildGenerator(t),o=new Int32Array(n);lv.arraycopy(e,0,o,0,n);for(var i=new lw(this.field,o),a=(i=i.multiplyByMonomial(t,1)).divide(r)[1].getCoefficients(),s=t-a.length,c=0;c<s;c++)e[n+c]=0;lv.arraycopy(a,0,e,n+s,a.length)},e}();var SS=function(){function e(){}return e.applyMaskPenaltyRule1=function(t){return e.applyMaskPenaltyRule1Internal(t,!0)+e.applyMaskPenaltyRule1Internal(t,!1)},e.applyMaskPenaltyRule2=function(t){for(var n=0,r=t.getArray(),o=t.getWidth(),i=t.getHeight(),a=0;a<i-1;a++)for(var s=r[a],c=0;c<o-1;c++){var l=s[c];l===s[c+1]&&l===r[a+1][c]&&l===r[a+1][c+1]&&n++}return e.N2*n},e.applyMaskPenaltyRule3=function(t){for(var n=0,r=t.getArray(),o=t.getWidth(),i=t.getHeight(),a=0;a<i;a++)for(var s=0;s<o;s++){var c=r[a];s+6<o&&1===c[s]&&0===c[s+1]&&1===c[s+2]&&1===c[s+3]&&1===c[s+4]&&0===c[s+5]&&1===c[s+6]&&(e.isWhiteHorizontal(c,s-4,s)||e.isWhiteHorizontal(c,s+7,s+11))&&n++,a+6<i&&1===r[a][s]&&0===r[a+1][s]&&1===r[a+2][s]&&1===r[a+3][s]&&1===r[a+4][s]&&0===r[a+5][s]&&1===r[a+6][s]&&(e.isWhiteVertical(r,s,a-4,a)||e.isWhiteVertical(r,s,a+7,a+11))&&n++}return n*e.N3},e.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var r=t;r<n;r++)if(1===e[r])return!1;return!0},e.isWhiteVertical=function(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var o=n;o<r;o++)if(1===e[o][t])return!1;return!0},e.applyMaskPenaltyRule4=function(t){for(var n=0,r=t.getArray(),o=t.getWidth(),i=t.getHeight(),a=0;a<i;a++)for(var s=r[a],c=0;c<o;c++)1===s[c]&&n++;var l=t.getHeight()*t.getWidth();return Math.floor(10*Math.abs(2*n-l)/l)*e.N4},e.getDataMaskBit=function(e,t,n){var r,o;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:r=(1&(o=n*t))+o%3;break;case 6:r=(1&(o=n*t))+o%3&1;break;case 7:r=(o=n*t)%3+(n+t&1)&1;break;default:throw new rv("Invalid mask pattern: "+e)}return 0===r},e.applyMaskPenaltyRule1Internal=function(t,n){for(var r=0,o=n?t.getHeight():t.getWidth(),i=n?t.getWidth():t.getHeight(),a=t.getArray(),s=0;s<o;s++){for(var c=0,l=-1,u=0;u<i;u++){var d=n?a[s][u]:a[u][s];d===l?c++:(c>=5&&(r+=e.N1+(c-5)),c=1,l=d)}c>=5&&(r+=e.N1+(c-5))}return r},e.N1=3,e.N2=3,e.N3=40,e.N4=10,e}();const AS=SS;var IS=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xS=function(){function e(e,t){this.width=e,this.height=t;for(var n=new Array(t),r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}return e.prototype.getHeight=function(){return this.height},e.prototype.getWidth=function(){return this.width},e.prototype.get=function(e,t){return this.bytes[t][e]},e.prototype.getArray=function(){return this.bytes},e.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},e.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},e.prototype.clear=function(e){var t,n;try{for(var r=IS(this.bytes),o=r.next();!o.done;o=r.next()){var i=o.value;mv.fill(i,e)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.width!==n.width)return!1;if(this.height!==n.height)return!1;for(var r=0,o=this.height;r<o;++r)for(var i=this.bytes[r],a=n.bytes[r],s=0,c=this.width;s<c;++s)if(i[s]!==a[s])return!1;return!0},e.prototype.toString=function(){for(var e=new Pv,t=0,n=this.height;t<n;++t){for(var r=this.bytes[t],o=0,i=this.width;o<i;++o)switch(r[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()},e}();const NS=xS;var TS=function(){function e(){this.maskPattern=-1}return e.prototype.getMode=function(){return this.mode},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getVersion=function(){return this.version},e.prototype.getMaskPattern=function(){return this.maskPattern},e.prototype.getMatrix=function(){return this.matrix},e.prototype.toString=function(){var e=new Pv;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()},e.prototype.setMode=function(e){this.mode=e},e.prototype.setECLevel=function(e){this.ecLevel=e},e.prototype.setVersion=function(e){this.version=e},e.prototype.setMaskPattern=function(e){this.maskPattern=e},e.prototype.setMatrix=function(e){this.matrix=e},e.isValidMaskPattern=function(t){return t>=0&&t<e.NUM_MASK_PATTERNS},e.NUM_MASK_PATTERNS=8,e}();const kS=TS;var OS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const RS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return OS(t,e),t.kind="WriterException",t}(Jy);var PS=function(){function e(){}return e.clearMatrix=function(e){e.clear(255)},e.buildMatrix=function(t,n,r,o,i){e.clearMatrix(i),e.embedBasicPatterns(r,i),e.embedTypeInfo(n,o,i),e.maybeEmbedVersionInfo(r,i),e.embedDataBits(t,o,i)},e.embedBasicPatterns=function(t,n){e.embedPositionDetectionPatternsAndSeparators(n),e.embedDarkDotAtLeftBottomCorner(n),e.maybeEmbedPositionAdjustmentPatterns(t,n),e.embedTimingPatterns(n)},e.embedTypeInfo=function(t,n,r){var o=new bv;e.makeTypeInfoBits(t,n,o);for(var i=0,a=o.getSize();i<a;++i){var s=o.get(o.getSize()-1-i),c=e.TYPE_INFO_COORDINATES[i],l=c[0],u=c[1];if(r.setBoolean(l,u,s),i<8){var d=r.getWidth()-i-1,h=8;r.setBoolean(d,h,s)}else{d=8,h=r.getHeight()-7+(i-8);r.setBoolean(d,h,s)}}},e.maybeEmbedVersionInfo=function(t,n){if(!(t.getVersionNumber()<7)){var r=new bv;e.makeVersionInfoBits(t,r);for(var o=17,i=0;i<6;++i)for(var a=0;a<3;++a){var s=r.get(o);o--,n.setBoolean(i,n.getHeight()-11+a,s),n.setBoolean(n.getHeight()-11+a,i,s)}}},e.embedDataBits=function(t,n,r){for(var o=0,i=-1,a=r.getWidth()-1,s=r.getHeight()-1;a>0;){for(6===a&&(a-=1);s>=0&&s<r.getHeight();){for(var c=0;c<2;++c){var l=a-c;if(e.isEmpty(r.get(l,s))){var u=void 0;o<t.getSize()?(u=t.get(o),++o):u=!1,255!==n&&AS.getDataMaskBit(n,l,s)&&(u=!u),r.setBoolean(l,s,u)}}s+=i}s+=i=-i,a-=2}if(o!==t.getSize())throw new RS("Not all bits consumed: "+o+"/"+t.getSize())},e.findMSBSet=function(e){return 32-vv.numberOfLeadingZeros(e)},e.calculateBCHCode=function(t,n){if(0===n)throw new rv("0 polynomial");var r=e.findMSBSet(n);for(t<<=r-1;e.findMSBSet(t)>=r;)t^=n<<e.findMSBSet(t)-r;return t},e.makeTypeInfoBits=function(t,n,r){if(!kS.isValidMaskPattern(n))throw new RS("Invalid mask pattern");var o=t.getBits()<<3|n;r.appendBits(o,5);var i=e.calculateBCHCode(o,e.TYPE_INFO_POLY);r.appendBits(i,10);var a=new bv;if(a.appendBits(e.TYPE_INFO_MASK_PATTERN,15),r.xor(a),15!==r.getSize())throw new RS("should not happen but we got: "+r.getSize())},e.makeVersionInfoBits=function(t,n){n.appendBits(t.getVersionNumber(),6);var r=e.calculateBCHCode(t.getVersionNumber(),e.VERSION_INFO_POLY);if(n.appendBits(r,12),18!==n.getSize())throw new RS("should not happen but we got: "+n.getSize())},e.isEmpty=function(e){return 255===e},e.embedTimingPatterns=function(t){for(var n=8;n<t.getWidth()-8;++n){var r=(n+1)%2;e.isEmpty(t.get(n,6))&&t.setNumber(n,6,r),e.isEmpty(t.get(6,n))&&t.setNumber(6,n,r)}},e.embedDarkDotAtLeftBottomCorner=function(e){if(0===e.get(8,e.getHeight()-8))throw new RS;e.setNumber(8,e.getHeight()-8,1)},e.embedHorizontalSeparationPattern=function(t,n,r){for(var o=0;o<8;++o){if(!e.isEmpty(r.get(t+o,n)))throw new RS;r.setNumber(t+o,n,0)}},e.embedVerticalSeparationPattern=function(t,n,r){for(var o=0;o<7;++o){if(!e.isEmpty(r.get(t,n+o)))throw new RS;r.setNumber(t,n+o,0)}},e.embedPositionAdjustmentPattern=function(t,n,r){for(var o=0;o<5;++o)for(var i=e.POSITION_ADJUSTMENT_PATTERN[o],a=0;a<5;++a)r.setNumber(t+a,n+o,i[a])},e.embedPositionDetectionPattern=function(t,n,r){for(var o=0;o<7;++o)for(var i=e.POSITION_DETECTION_PATTERN[o],a=0;a<7;++a)r.setNumber(t+a,n+o,i[a])},e.embedPositionDetectionPatternsAndSeparators=function(t){var n=e.POSITION_DETECTION_PATTERN[0].length;e.embedPositionDetectionPattern(0,0,t),e.embedPositionDetectionPattern(t.getWidth()-n,0,t),e.embedPositionDetectionPattern(0,t.getWidth()-n,t);e.embedHorizontalSeparationPattern(0,7,t),e.embedHorizontalSeparationPattern(t.getWidth()-8,7,t),e.embedHorizontalSeparationPattern(0,t.getWidth()-8,t);e.embedVerticalSeparationPattern(7,0,t),e.embedVerticalSeparationPattern(t.getHeight()-7-1,0,t),e.embedVerticalSeparationPattern(7,t.getHeight()-7,t)},e.maybeEmbedPositionAdjustmentPatterns=function(t,n){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,o=e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],i=0,a=o.length;i!==a;i++){var s=o[i];if(s>=0)for(var c=0;c!==a;c++){var l=o[c];l>=0&&e.isEmpty(n.get(l,s))&&e.embedPositionAdjustmentPattern(l-2,s-2,n)}}},e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),e.VERSION_INFO_POLY=7973,e.TYPE_INFO_POLY=1335,e.TYPE_INFO_MASK_PATTERN=21522,e}();const jS=PS;const DS=function(){function e(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return e.prototype.getDataBytes=function(){return this.dataBytes},e.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},e}();var MS=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},LS=function(){function e(){}return e.calculateMaskPenalty=function(e){return AS.applyMaskPenaltyRule1(e)+AS.applyMaskPenaltyRule2(e)+AS.applyMaskPenaltyRule3(e)+AS.applyMaskPenaltyRule4(e)},e.encode=function(t,n,r){void 0===r&&(r=null);var o=e.DEFAULT_BYTE_MODE_ENCODING,i=null!==r&&void 0!==r.get(CS.CHARACTER_SET);i&&(o=r.get(CS.CHARACTER_SET).toString());var a=this.chooseMode(t,o),s=new bv;if(a===FC.BYTE&&(i||e.DEFAULT_BYTE_MODE_ENCODING!==o)){var c=Nv.getCharacterSetECIByName(o);void 0!==c&&this.appendECI(c,s)}this.appendModeInfo(a,s);var l,u=new bv;if(this.appendBytes(t,a,u,o),null!==r&&void 0!==r.get(CS.QR_VERSION)){var d=Number.parseInt(r.get(CS.QR_VERSION).toString(),10);l=NC.getVersionForNumber(d);var h=this.calculateBitsNeeded(a,s,u,l);if(!this.willFit(h,l,n))throw new RS("Data too big for requested version")}else l=this.recommendVersion(n,a,s,u);var f=new bv;f.appendBitArray(s);var p=a===FC.BYTE?u.getSizeInBytes():t.length;this.appendLengthInfo(p,l,a,f),f.appendBitArray(u);var g=l.getECBlocksForLevel(n),m=l.getTotalCodewords()-g.getTotalECCodewords();this.terminateBits(m,f);var y=this.interleaveWithECBytes(f,l.getTotalCodewords(),m,g.getNumBlocks()),v=new kS;v.setECLevel(n),v.setMode(a),v.setVersion(l);var w=l.getDimensionForVersion(),b=new NS(w,w),_=this.chooseMaskPattern(y,n,l,b);return v.setMaskPattern(_),jS.buildMatrix(y,n,l,_,b),v.setMatrix(b),v},e.recommendVersion=function(e,t,n,r){var o=this.calculateBitsNeeded(t,n,r,NC.getVersionForNumber(1)),i=this.chooseVersion(o,e),a=this.calculateBitsNeeded(t,n,r,i);return this.chooseVersion(a,e)},e.calculateBitsNeeded=function(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()},e.getAlphanumericCode=function(t){return t<e.ALPHANUMERIC_TABLE.length?e.ALPHANUMERIC_TABLE[t]:-1},e.chooseMode=function(t,n){if(void 0===n&&(n=null),Nv.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(t))return FC.KANJI;for(var r=!1,o=!1,i=0,a=t.length;i<a;++i){var s=t.charAt(i);if(e.isDigit(s))r=!0;else{if(-1===this.getAlphanumericCode(s.charCodeAt(0)))return FC.BYTE;o=!0}}return o?FC.ALPHANUMERIC:r?FC.NUMERIC:FC.BYTE},e.isOnlyDoubleByteKanji=function(e){var t;try{t=Ov.encode(e,Nv.SJIS)}catch(i){return!1}var n=t.length;if(n%2!==0)return!1;for(var r=0;r<n;r+=2){var o=255&t[r];if((o<129||o>159)&&(o<224||o>235))return!1}return!0},e.chooseMaskPattern=function(e,t,n,r){for(var o=Number.MAX_SAFE_INTEGER,i=-1,a=0;a<kS.NUM_MASK_PATTERNS;a++){jS.buildMatrix(e,t,n,a,r);var s=this.calculateMaskPenalty(r);s<o&&(o=s,i=a)}return i},e.chooseVersion=function(t,n){for(var r=1;r<=40;r++){var o=NC.getVersionForNumber(r);if(e.willFit(t,o,n))return o}throw new RS("Data too big")},e.willFit=function(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8},e.terminateBits=function(e,t){var n=8*e;if(t.getSize()>n)throw new RS("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var r=0;r<4&&t.getSize()<n;++r)t.appendBit(!1);var o=7&t.getSize();if(o>0)for(r=o;r<8;r++)t.appendBit(!1);var i=e-t.getSizeInBytes();for(r=0;r<i;++r)t.appendBits(0===(1&r)?236:17,8);if(t.getSize()!==n)throw new RS("Bits size does not equal capacity")},e.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,r,o,i){if(r>=n)throw new RS("Block ID too large");var a=e%n,s=n-a,c=Math.floor(e/n),l=c+1,u=Math.floor(t/n),d=u+1,h=c-u,f=l-d;if(h!==f)throw new RS("EC bytes mismatch");if(n!==s+a)throw new RS("RS blocks mismatch");if(e!==(u+h)*s+(d+f)*a)throw new RS("Total bytes mismatch");r<s?(o[0]=u,i[0]=h):(o[0]=d,i[0]=f)},e.interleaveWithECBytes=function(t,n,r,o){var i,a,s,c;if(t.getSizeInBytes()!==r)throw new RS("Number of bits and data bytes does not match");for(var l=0,u=0,d=0,h=new Array,f=0;f<o;++f){var p=new Int32Array(1),g=new Int32Array(1);e.getNumDataBytesAndNumECBytesForBlockID(n,r,o,f,p,g);var m=p[0],y=new Uint8Array(m);t.toBytes(8*l,y,0,m);var v=e.generateECBytes(y,g[0]);h.push(new DS(y,v)),u=Math.max(u,m),d=Math.max(d,v.length),l+=p[0]}if(r!==l)throw new RS("Data bytes does not match offset");var w=new bv;for(f=0;f<u;++f)try{for(var b=(i=void 0,MS(h)),_=b.next();!_.done;_=b.next()){f<(y=_.value.getDataBytes()).length&&w.appendBits(y[f],8)}}catch(S){i={error:S}}finally{try{_&&!_.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}for(f=0;f<d;++f)try{for(var C=(s=void 0,MS(h)),E=C.next();!E.done;E=C.next()){f<(v=E.value.getErrorCorrectionBytes()).length&&w.appendBits(v[f],8)}}catch(A){s={error:A}}finally{try{E&&!E.done&&(c=C.return)&&c.call(C)}finally{if(s)throw s.error}}if(n!==w.getSizeInBytes())throw new RS("Interleaving error: "+n+" and "+w.getSizeInBytes()+" differ.");return w},e.generateECBytes=function(e,t){for(var n=e.length,r=new Int32Array(n+t),o=0;o<n;o++)r[o]=255&e[o];new ES(pw.QR_CODE_FIELD_256).encode(r,t);var i=new Uint8Array(t);for(o=0;o<t;o++)i[o]=r[n+o];return i},e.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},e.appendLengthInfo=function(e,t,n,r){var o=n.getCharacterCountBits(t);if(e>=1<<o)throw new RS(e+" is bigger than "+((1<<o)-1));r.appendBits(e,o)},e.appendBytes=function(t,n,r,o){switch(n){case FC.NUMERIC:e.appendNumericBytes(t,r);break;case FC.ALPHANUMERIC:e.appendAlphanumericBytes(t,r);break;case FC.BYTE:e.append8BitBytes(t,r,o);break;case FC.KANJI:e.appendKanjiBytes(t,r);break;default:throw new RS("Invalid mode: "+n)}},e.getDigit=function(e){return e.charCodeAt(0)-48},e.isDigit=function(t){var n=e.getDigit(t);return n>=0&&n<=9},e.appendNumericBytes=function(t,n){for(var r=t.length,o=0;o<r;){var i=e.getDigit(t.charAt(o));if(o+2<r){var a=e.getDigit(t.charAt(o+1)),s=e.getDigit(t.charAt(o+2));n.appendBits(100*i+10*a+s,10),o+=3}else if(o+1<r){a=e.getDigit(t.charAt(o+1));n.appendBits(10*i+a,7),o+=2}else n.appendBits(i,4),o++}},e.appendAlphanumericBytes=function(t,n){for(var r=t.length,o=0;o<r;){var i=e.getAlphanumericCode(t.charCodeAt(o));if(-1===i)throw new RS;if(o+1<r){var a=e.getAlphanumericCode(t.charCodeAt(o+1));if(-1===a)throw new RS;n.appendBits(45*i+a,11),o+=2}else n.appendBits(i,6),o++}},e.append8BitBytes=function(e,t,n){var r;try{r=Ov.encode(e,n)}catch(s){throw new RS(s)}for(var o=0,i=r.length;o!==i;o++){var a=r[o];t.appendBits(a,8)}},e.appendKanjiBytes=function(e,t){var n;try{n=Ov.encode(e,Nv.SJIS)}catch(c){throw new RS(c)}for(var r=n.length,o=0;o<r;o+=2){var i=(255&n[o])<<8&4294967295|255&n[o+1],a=-1;if(i>=33088&&i<=40956?a=i-33088:i>=57408&&i<=60351&&(a=i-49472),-1===a)throw new RS("Invalid byte sequence");var s=192*(a>>8)+(255&a);t.appendBits(s,13)}},e.appendECI=function(e,t){t.appendBits(FC.ECI.getBits(),4),t.appendBits(e.getValue(),8)},e.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),e.DEFAULT_BYTE_MODE_ENCODING=Nv.UTF8.getName(),e}();const BS=LS;!function(){function e(){}e.prototype.write=function(t,n,r,o){if(void 0===o&&(o=null),0===t.length)throw new rv("Found empty contents");if(n<0||r<0)throw new rv("Requested dimensions are too small: "+n+"x"+r);var i=yC.L,a=e.QUIET_ZONE_SIZE;null!==o&&(void 0!==o.get(CS.ERROR_CORRECTION)&&(i=yC.fromString(o.get(CS.ERROR_CORRECTION).toString())),void 0!==o.get(CS.MARGIN)&&(a=Number.parseInt(o.get(CS.MARGIN).toString(),10)));var s=BS.encode(t,i,o);return this.renderResult(s,n,r,a)},e.prototype.writeToDom=function(e,t,n,r,o){void 0===o&&(o=null),"string"===typeof e&&(e=document.querySelector(e));var i=this.write(t,n,r,o);e&&e.appendChild(i)},e.prototype.renderResult=function(e,t,n,r){var o=e.getMatrix();if(null===o)throw new vw;for(var i=o.getWidth(),a=o.getHeight(),s=i+2*r,c=a+2*r,l=Math.max(t,s),u=Math.max(n,c),d=Math.min(Math.floor(l/s),Math.floor(u/c)),h=Math.floor((l-i*d)/2),f=Math.floor((u-a*d)/2),p=this.createSVGElement(l,u),g=0,m=f;g<a;g++,m+=d)for(var y=0,v=h;y<i;y++,v+=d)if(1===o.get(y,g)){var w=this.createSvgRectElement(v,m,d,d);p.appendChild(w)}return p},e.prototype.createSVGElement=function(t,n){var r=document.createElementNS(e.SVG_NS,"svg");return r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"width",n.toString()),r},e.prototype.createSvgRectElement=function(t,n,r,o){var i=document.createElementNS(e.SVG_NS,"rect");return i.setAttributeNS(null,"x",t.toString()),i.setAttributeNS(null,"y",n.toString()),i.setAttributeNS(null,"height",r.toString()),i.setAttributeNS(null,"width",o.toString()),i.setAttributeNS(null,"fill","#000000"),i},e.QUIET_ZONE_SIZE=4,e.SVG_NS="http://www.w3.org/2000/svg"}();const FS=function(){function e(){}return e.prototype.encode=function(t,n,r,o,i){if(0===t.length)throw new rv("Found empty contents");if(n!==rw.QR_CODE)throw new rv("Can only encode QR_CODE, but got "+n);if(r<0||o<0)throw new rv("Requested dimensions are too small: "+r+"x"+o);var a=yC.L,s=e.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(CS.ERROR_CORRECTION)&&(a=yC.fromString(i.get(CS.ERROR_CORRECTION).toString())),void 0!==i.get(CS.MARGIN)&&(s=Number.parseInt(i.get(CS.MARGIN).toString(),10)));var c=BS.encode(t,a,i);return e.renderResult(c,r,o,s)},e.renderResult=function(e,t,n,r){var o=e.getMatrix();if(null===o)throw new vw;for(var i=o.getWidth(),a=o.getHeight(),s=i+2*r,c=a+2*r,l=Math.max(t,s),u=Math.max(n,c),d=Math.min(Math.floor(l/s),Math.floor(u/c)),h=Math.floor((l-i*d)/2),f=Math.floor((u-a*d)/2),p=new Dv(l,u),g=0,m=f;g<a;g++,m+=d)for(var y=0,v=h;y<i;y++,v+=d)1===o.get(y,g)&&p.setRegion(v,m,d,d);return p},e.QUIET_ZONE_SIZE=4,e}();!function(){function e(){}e.prototype.encode=function(e,t,n,r,o){if(t!==rw.QR_CODE)throw new rv("No encoder available for format "+t);return(new FS).encode(e,t,n,r,o)}}();var US=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n,r,o,i,a,s,c){var l=e.call(this,a,s)||this;if(l.yuvData=t,l.dataWidth=n,l.dataHeight=r,l.left=o,l.top=i,o+a>n||i+s>r)throw new rv("Crop rectangle does not fit within image data.");return c&&l.reverseHorizontal(a,s),l}US(t,e),t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new rv("Requested row is outside the image: "+e);var n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));var r=(e+this.top)*this.dataWidth+this.left;return lv.arraycopy(this.yuvData,r,t,0,n),t},t.prototype.getMatrix=function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;var n=e*t,r=new Uint8ClampedArray(n),o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return lv.arraycopy(this.yuvData,o,r,0,n),r;for(var i=0;i<t;i++){var a=i*e;lv.arraycopy(this.yuvData,o,r,a,e),o+=this.dataWidth}return r},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,n,r,o){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,r,o,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*n),o=this.yuvData,i=this.top*this.dataWidth+this.left,a=0;a<n;a++){for(var s=a*e,c=0;c<e;c++){var l=255&o[i+c*t.THUMBNAIL_SCALE_FACTOR];r[s+c]=4278190080|65793*l}i+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return r},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,t){for(var n=this.yuvData,r=0,o=this.top*this.dataWidth+this.left;r<t;r++,o+=this.dataWidth)for(var i=o+e/2,a=o,s=o+e-1;a<i;a++,s--){var c=n[a];n[a]=n[s],n[s]=c}},t.prototype.invert=function(){return new Xv(this)},t.THUMBNAIL_SCALE_FACTOR=2}(Wv);var VS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n,r,o,i,a,s){var c=e.call(this,n,r)||this;if(c.dataWidth=o,c.dataHeight=i,c.left=a,c.top=s,4===t.BYTES_PER_ELEMENT){for(var l=n*r,u=new Uint8ClampedArray(l),d=0;d<l;d++){var h=t[d],f=h>>16&255,p=h>>7&510,g=255&h;u[d]=(f+p+g)/4&255}c.luminances=u}else c.luminances=t;if(void 0===o&&(c.dataWidth=n),void 0===i&&(c.dataHeight=r),void 0===a&&(c.left=0),void 0===s&&(c.top=0),c.left+n>c.dataWidth||c.top+r>c.dataHeight)throw new rv("Crop rectangle does not fit within image data.");return c}VS(t,e),t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new rv("Requested row is outside the image: "+e);var n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));var r=(e+this.top)*this.dataWidth+this.left;return lv.arraycopy(this.luminances,r,t,0,n),t},t.prototype.getMatrix=function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;var n=e*t,r=new Uint8ClampedArray(n),o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return lv.arraycopy(this.luminances,o,r,0,n),r;for(var i=0;i<t;i++){var a=i*e;lv.arraycopy(this.luminances,o,r,a,e),o+=this.dataWidth}return r},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,n,r,o){return new t(this.luminances,r,o,this.dataWidth,this.dataHeight,this.left+e,this.top+n)},t.prototype.invert=function(){return new Xv(this)}}(Wv);var zS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const HS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zS(t,e),t.forName=function(e){return this.getCharacterSetECIByName(e)},t}(Nv);const GS=function(){function e(){}return e.ISO_8859_1=Nv.ISO8859_1,e}();const WS=function(){function e(e,t,n){this.codewords=e,this.numcols=t,this.numrows=n,this.bits=new Uint8Array(t*n),mv.fill(this.bits,2)}return e.prototype.getNumrows=function(){return this.numrows},e.prototype.getNumcols=function(){return this.numcols},e.prototype.getBits=function(){return this.bits},e.prototype.getBit=function(e,t){return 1===this.bits[t*this.numcols+e]},e.prototype.setBit=function(e,t,n){this.bits[t*this.numcols+e]=n?1:0},e.prototype.noBit=function(e,t){return 2===this.bits[t*this.numcols+e]},e.prototype.place=function(){var e=0,t=4,n=0;do{t===this.numrows&&0===n&&this.corner1(e++),t===this.numrows-2&&0===n&&this.numcols%4!==0&&this.corner2(e++),t===this.numrows-2&&0===n&&this.numcols%8===4&&this.corner3(e++),t===this.numrows+4&&2===n&&this.numcols%8===0&&this.corner4(e++);do{t<this.numrows&&n>=0&&this.noBit(n,t)&&this.utah(t,n,e++),t-=2,n+=2}while(t>=0&&n<this.numcols);t++,n+=3;do{t>=0&&n<this.numcols&&this.noBit(n,t)&&this.utah(t,n,e++),t+=2,n-=2}while(t<this.numrows&&n>=0);t+=3,n++}while(t<this.numrows||n<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},e.prototype.module=function(e,t,n,r){e<0&&(e+=this.numrows,t+=4-(this.numrows+4)%8),t<0&&(t+=this.numcols,e+=4-(this.numcols+4)%8);var o=this.codewords.charCodeAt(n);o&=1<<8-r,this.setBit(t,e,0!==o)},e.prototype.utah=function(e,t,n){this.module(e-2,t-2,n,1),this.module(e-2,t-1,n,2),this.module(e-1,t-2,n,3),this.module(e-1,t-1,n,4),this.module(e-1,t,n,5),this.module(e,t-2,n,6),this.module(e,t-1,n,7),this.module(e,t,n,8)},e.prototype.corner1=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,1,e,2),this.module(this.numrows-1,2,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},e.prototype.corner2=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-4,e,4),this.module(0,this.numcols-3,e,5),this.module(0,this.numcols-2,e,6),this.module(0,this.numcols-1,e,7),this.module(1,this.numcols-1,e,8)},e.prototype.corner3=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},e.prototype.corner4=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,this.numcols-1,e,2),this.module(0,this.numcols-3,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-3,e,6),this.module(1,this.numcols-2,e,7),this.module(1,this.numcols-1,e,8)},e}();var qS,XS,KS=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],YS=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],QS=(qS=function(e,t){for(var n=1,r=0;r<255;r++)t[r]=n,e[n]=r,(n*=2)>=256&&(n^=301);return{LOG:e,ALOG:t}}([],[]),qS.LOG),ZS=qS.ALOG;!function(e){e[e.FORCE_NONE=0]="FORCE_NONE",e[e.FORCE_SQUARE=1]="FORCE_SQUARE",e[e.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"}(XS||(XS={}));var $S="[)>\x1e05\x1d",JS="[)>\x1e06\x1d",eA="\x1e\x04",tA=function(){function e(){}return e.encodeECC200=function(e,t){if(e.length!==t.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var n=new Pv;n.append(e);var r=t.getInterleavedBlockCount();if(1===r){var o=this.createECCBlock(e,t.getErrorCodewords());n.append(o)}else{for(var i=[],a=[],s=0;s<r;s++)i[s]=t.getDataLengthForInterleavedBlock(s+1),a[s]=t.getErrorLengthForInterleavedBlock(s+1);for(var c=0;c<r;c++){for(var l=new Pv,u=c;u<t.getDataCapacity();u+=r)l.append(e.charAt(u));o=this.createECCBlock(l.toString(),a[c]);for(var d=0,h=c;h<a[c]*r;h+=r)n.setCharAt(t.getDataCapacity()+h,o.charAt(d++))}}return n.toString()},e.createECCBlock=function(e,t){for(var n=-1,r=0;r<KS.length;r++)if(KS[r]===t){n=r;break}if(n<0)throw new Error("Illegal number of error correction codewords specified: "+t);var o=YS[n],i=[];for(r=0;r<t;r++)i[r]=0;for(r=0;r<e.length;r++){for(var a=i[t-1]^e.charAt(r).charCodeAt(0),s=t-1;s>0;s--)0!==a&&0!==o[s]?i[s]=i[s-1]^ZS[(QS[a]+QS[o[s]])%255]:i[s]=i[s-1];0!==a&&0!==o[0]?i[0]=ZS[(QS[a]+QS[o[0]])%255]:i[0]=0}var c=[];for(r=0;r<t;r++)c[r]=i[t-r-1];return c.map(function(e){return String.fromCharCode(e)}).join("")},e}();const nA=tA;var rA=function(){function e(){}return e.prototype.getEncodingMode=function(){return 0},e.prototype.encode=function(e){if(wA.determineConsecutiveDigitCount(e.getMessage(),e.pos)>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var t=e.getCurrentChar(),n=wA.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(n!==this.getEncodingMode())switch(n){case 5:return e.writeCodeword(231),void e.signalEncoderChange(5);case 1:return e.writeCodeword(230),void e.signalEncoderChange(1);case 3:e.writeCodeword(238),e.signalEncoderChange(3);break;case 2:e.writeCodeword(239),e.signalEncoderChange(2);break;case 4:e.writeCodeword(240),e.signalEncoderChange(4);break;default:throw new Error("Illegal mode: "+n)}else wA.isExtendedASCII(t)?(e.writeCodeword(235),e.writeCodeword(t-128+1),e.pos++):(e.writeCodeword(t+1),e.pos++)}},e.prototype.encodeASCIIDigits=function(e,t){if(wA.isDigit(e)&&wA.isDigit(t))return 10*(e-48)+(t-48)+130;throw new Error("not digits: "+e+t)},e}(),oA=function(){function e(){}return e.prototype.getEncodingMode=function(){return 5},e.prototype.encode=function(e){var t=new Pv;for(t.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();if(t.append(n),e.pos++,wA.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}var r=t.length()-1,o=e.getCodewordCount()+r+1;e.updateSymbolInfo(o);var i=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||i)if(r<=249)t.setCharAt(0,Rv.getCharAt(r));else{if(!(r<=1555))throw new Error("Message length not in valid ranges: "+r);t.setCharAt(0,Rv.getCharAt(Math.floor(r/250)+249)),t.insert(1,Rv.getCharAt(r%250))}var a=0;for(n=t.length();a<n;a++)e.writeCodeword(this.randomize255State(t.charAt(a).charCodeAt(0),e.getCodewordCount()+1))},e.prototype.randomize255State=function(e,t){var n=e+(149*t%255+1);return n<=255?n:n-256},e}(),iA=function(){function e(){}return e.prototype.getEncodingMode=function(){return 1},e.prototype.encodeMaximal=function(e){for(var t=new Pv,n=0,r=e.pos,o=0;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,n=this.encodeChar(i,t),t.length()%3===0&&(r=e.pos,o=t.length())}if(o!==t.length()){var a=Math.floor(t.length()/3*2),s=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(s);var c=e.getSymbolInfo().getDataCapacity()-s,l=Math.floor(t.length()%3);(2===l&&2!==c||1===l&&(n>3||1!==c))&&(e.pos=r)}t.length()>0&&e.writeCodeword(230),this.handleEOD(e,t)},e.prototype.encode=function(e){for(var t=new Pv;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var r=this.encodeChar(n,t),o=2*Math.floor(t.length()/3),i=e.getCodewordCount()+o;e.updateSymbolInfo(i);var a=e.getSymbolInfo().getDataCapacity()-i;if(!e.hasMoreCharacters()){var s=new Pv;for(t.length()%3===2&&2!==a&&(r=this.backtrackOneCharacter(e,t,s,r));t.length()%3===1&&(r>3||1!==a);)r=this.backtrackOneCharacter(e,t,s,r);break}if(t.length()%3===0)if(wA.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}this.handleEOD(e,t)},e.prototype.backtrackOneCharacter=function(e,t,n,r){var o=t.length(),i=t.toString().substring(0,o-r);t.setLengthToZero(),t.append(i),e.pos--;var a=e.getCurrentChar();return r=this.encodeChar(a,n),e.resetSymbolInfo(),r},e.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(3);t.setLengthToZero(),t.append(n)},e.prototype.handleEOD=function(e,t){var n=Math.floor(t.length()/3*2),r=t.length()%3,o=e.getCodewordCount()+n;e.updateSymbolInfo(o);var i=e.getSymbolInfo().getDataCapacity()-o;if(2===r){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(254)}else if(1===i&&1===r){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(254),e.pos--}else{if(0!==r)throw new Error("Unexpected case. Please report!");for(;t.length()>=3;)this.writeNextTriplet(e,t);(i>0||e.hasMoreCharacters())&&e.writeCodeword(254)}e.signalEncoderChange(0)},e.prototype.encodeChar=function(e,t){if(e===" ".charCodeAt(0))return t.append(3),1;if(e>="0".charCodeAt(0)&&e<="9".charCodeAt(0))return t.append(e-48+4),1;if(e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0))return t.append(e-65+14),1;if(e<" ".charCodeAt(0))return t.append(0),t.append(e),2;if(e<="/".charCodeAt(0))return t.append(1),t.append(e-33),2;if(e<="@".charCodeAt(0))return t.append(1),t.append(e-58+15),2;if(e<="_".charCodeAt(0))return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1\x1e");var n=2;return n+=this.encodeChar(e-128,t)},e.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=t/256,r=t%256,o=new Pv;return o.append(n),o.append(r),o.toString()},e}(),aA=function(){function e(){}return e.prototype.getEncodingMode=function(){return 4},e.prototype.encode=function(e){for(var t=new Pv;e.hasMoreCharacters();){var n=e.getCurrentChar();if(this.encodeChar(n,t),e.pos++,t.length()>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(4);if(t.setLengthToZero(),t.append(r),wA.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}}t.append(Rv.getCharAt(31)),this.handleEOD(e,t)},e.prototype.handleEOD=function(e,t){try{var n=t.length();if(0===n)return;if(1===n){e.updateSymbolInfo();var r=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>r&&(e.updateSymbolInfo(e.getCodewordCount()+1),r=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=r&&r<=2)return}if(n>4)throw new Error("Count must not exceed 4");var i=n-1,a=this.encodeToCodewords(t.toString()),s=!e.hasMoreCharacters()&&i<=2;if(i<=2)e.updateSymbolInfo(e.getCodewordCount()+i),(r=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount())>=3&&(s=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length));s?(e.resetSymbolInfo(),e.pos-=i):e.writeCodewords(a)}finally{e.signalEncoderChange(0)}},e.prototype.encodeChar=function(e,t){e>=" ".charCodeAt(0)&&e<="?".charCodeAt(0)?t.append(e):e>="@".charCodeAt(0)&&e<="^".charCodeAt(0)?t.append(Rv.getCharAt(e-64)):wA.illegalCharacter(Rv.getCharAt(e))},e.prototype.encodeToCodewords=function(e){var t=e.length;if(0===t)throw new Error("StringBuilder must not be empty");var n=(e.charAt(0).charCodeAt(0)<<18)+((t>=2?e.charAt(1).charCodeAt(0):0)<<12)+((t>=3?e.charAt(2).charCodeAt(0):0)<<6)+(t>=4?e.charAt(3).charCodeAt(0):0),r=n>>16&255,o=n>>8&255,i=255&n,a=new Pv;return a.append(r),t>=2&&a.append(o),t>=3&&a.append(i),a.toString()},e}(),sA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cA=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},lA=function(){function e(e,t,n,r,o,i,a,s){void 0===a&&(a=0),void 0===s&&(s=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=n,this.matrixWidth=r,this.matrixHeight=o,this.dataRegions=i,this.rsBlockData=a,this.rsBlockError=s}return e.lookup=function(e,t,n,r,o){var i,a;void 0===t&&(t=0),void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=!0);try{for(var s=cA(hA),c=s.next();!c.done;c=s.next()){var l=c.value;if((1!==t||!l.rectangular)&&((2!==t||l.rectangular)&&(null==n||!(l.getSymbolWidth()<n.getWidth()||l.getSymbolHeight()<n.getHeight()))&&(null==r||!(l.getSymbolWidth()>r.getWidth()||l.getSymbolHeight()>r.getHeight()))&&e<=l.dataCapacity))return l}}catch(u){i={error:u}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},e.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},e.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},e.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},e.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},e.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+2*this.getHorizontalDataRegions()},e.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+2*this.getVerticalDataRegions()},e.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},e.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},e.prototype.getDataCapacity=function(){return this.dataCapacity},e.prototype.getErrorCodewords=function(){return this.errorCodewords},e.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},e.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},e}();const uA=lA;var dA=function(e){function t(){return e.call(this,!1,1558,620,22,22,36,-1,62)||this}return sA(t,e),t.prototype.getInterleavedBlockCount=function(){return 10},t.prototype.getDataLengthForInterleavedBlock=function(e){return e<=8?156:155},t}(lA),hA=[new lA(!1,3,5,8,8,1),new lA(!1,5,7,10,10,1),new lA(!0,5,7,16,6,1),new lA(!1,8,10,12,12,1),new lA(!0,10,11,14,6,2),new lA(!1,12,12,14,14,1),new lA(!0,16,14,24,10,1),new lA(!1,18,14,16,16,1),new lA(!1,22,18,18,18,1),new lA(!0,22,18,16,10,2),new lA(!1,30,20,20,20,1),new lA(!0,32,24,16,14,2),new lA(!1,36,24,22,22,1),new lA(!1,44,28,24,24,1),new lA(!0,49,28,22,14,2),new lA(!1,62,36,14,14,4),new lA(!1,86,42,16,16,4),new lA(!1,114,48,18,18,4),new lA(!1,144,56,20,20,4),new lA(!1,174,68,22,22,4),new lA(!1,204,84,24,24,4,102,42),new lA(!1,280,112,14,14,16,140,56),new lA(!1,368,144,16,16,16,92,36),new lA(!1,456,192,18,18,16,114,48),new lA(!1,576,224,20,20,16,144,56),new lA(!1,696,272,22,22,16,174,68),new lA(!1,816,336,24,24,16,136,56),new lA(!1,1050,408,18,18,36,175,68),new lA(!1,1304,496,20,20,36,163,62),new dA],fA=function(){function e(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(e){return e.charCodeAt(0)}),n=new Pv,r=0,o=t.length;r<o;r++){var i=String.fromCharCode(255&t[r]);if("?"===i&&"?"!==e.charAt(r))throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(i)}this.msg=n.toString(),this.shape=0,this.codewords=new Pv,this.newEncoding=-1}return e.prototype.setSymbolShape=function(e){this.shape=e},e.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},e.prototype.getMessage=function(){return this.msg},e.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},e.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},e.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},e.prototype.getCodewords=function(){return this.codewords},e.prototype.writeCodewords=function(e){this.codewords.append(e)},e.prototype.writeCodeword=function(e){this.codewords.append(e)},e.prototype.getCodewordCount=function(){return this.codewords.length()},e.prototype.getNewEncoding=function(){return this.newEncoding},e.prototype.signalEncoderChange=function(e){this.newEncoding=e},e.prototype.resetEncoderSignal=function(){this.newEncoding=-1},e.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},e.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},e.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},e.prototype.getSymbolInfo=function(){return this.symbolInfo},e.prototype.updateSymbolInfo=function(e){void 0===e&&(e=this.getCodewordCount()),(null==this.symbolInfo||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=uA.lookup(e,this.shape,this.minSize,this.maxSize,!0))},e.prototype.resetSymbolInfo=function(){this.symbolInfo=null},e}(),pA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pA(t,e),t.prototype.getEncodingMode=function(){return 3},t.prototype.encode=function(e){for(var t=new Pv;e.hasMoreCharacters();){var n=e.getCurrentChar();if(e.pos++,this.encodeChar(n,t),t.length()%3===0)if(this.writeNextTriplet(e,t),wA.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}this.handleEOD(e,t)},t.prototype.encodeChar=function(e,t){switch(e){case 13:t.append(0);break;case"*".charCodeAt(0):t.append(1);break;case">".charCodeAt(0):t.append(2);break;case" ".charCodeAt(0):t.append(3);break;default:e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)?t.append(e-48+4):e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)?t.append(e-65+14):wA.illegalCharacter(Rv.getCharAt(e))}return 1},t.prototype.handleEOD=function(e,t){e.updateSymbolInfo();var n=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),r=t.length();e.pos-=r,(e.getRemainingCharacters()>1||n>1||e.getRemainingCharacters()!==n)&&e.writeCodeword(254),e.getNewEncoding()<0&&e.signalEncoderChange(0)},t}(iA),mA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mA(t,e),t.prototype.getEncodingMode=function(){return 2},t.prototype.encodeChar=function(e,t){if(e===" ".charCodeAt(0))return t.append(3),1;if(e>="0".charCodeAt(0)&&e<="9".charCodeAt(0))return t.append(e-48+4),1;if(e>="a".charCodeAt(0)&&e<="z".charCodeAt(0))return t.append(e-97+14),1;if(e<" ".charCodeAt(0))return t.append(0),t.append(e),2;if(e<="/".charCodeAt(0))return t.append(1),t.append(e-33),2;if(e<="@".charCodeAt(0))return t.append(1),t.append(e-58+15),2;if(e>="[".charCodeAt(0)&&e<="_".charCodeAt(0))return t.append(1),t.append(e-91+22),2;if(e==="`".charCodeAt(0))return t.append(2),t.append(0),2;if(e<="Z".charCodeAt(0))return t.append(2),t.append(e-65+1),2;if(e<=127)return t.append(2),t.append(e-123+27),2;t.append("1\x1e");var n=2;return n+=this.encodeChar(e-128,t)},t}(iA),vA=function(){function e(){}return e.randomize253State=function(e){var t=129+(149*e%253+1);return t<=254?t:t-254},e.encodeHighLevel=function(e,t,n,r,o){void 0===t&&(t=0),void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=!1);var i=new iA,a=[new rA,i,new yA,new gA,new aA,new oA],s=new fA(e);s.setSymbolShape(t),s.setSizeConstraints(n,r),e.startsWith($S)&&e.endsWith(eA)?(s.writeCodeword(236),s.setSkipAtEnd(2),s.pos+=7):e.startsWith(JS)&&e.endsWith(eA)&&(s.writeCodeword(237),s.setSkipAtEnd(2),s.pos+=7);var c=0;for(o&&(i.encodeMaximal(s),c=s.getNewEncoding(),s.resetEncoderSignal());s.hasMoreCharacters();)a[c].encode(s),s.getNewEncoding()>=0&&(c=s.getNewEncoding(),s.resetEncoderSignal());var l=s.getCodewordCount();s.updateSymbolInfo();var u=s.getSymbolInfo().getDataCapacity();l<u&&0!==c&&5!==c&&4!==c&&s.writeCodeword("\xfe");var d=s.getCodewords();for(d.length()<u&&d.append(129);d.length()<u;)d.append(this.randomize253State(d.length()+1));return s.getCodewords().toString()},e.lookAheadTest=function(e,t,n){var r=this.lookAheadTestIntern(e,t,n);if(3===n&&3===r){for(var o=Math.min(t+3,e.length),i=t;i<o;i++)if(!this.isNativeX12(e.charCodeAt(i)))return 0}else if(4===n&&4===r)for(o=Math.min(t+4,e.length),i=t;i<o;i++)if(!this.isNativeEDIFACT(e.charCodeAt(i)))return 0;return r},e.lookAheadTestIntern=function(e,t,n){if(t>=e.length)return n;var r;0===n?r=[0,1,1,1,1,1.25]:(r=[1,2,2,2,2,2.25])[n]=0;for(var o=0,i=new Uint8Array(6),a=[];;){if(t+o===e.length){mv.fill(i,0),mv.fill(a,0);var s=this.findMinimums(r,a,vv.MAX_VALUE,i),c=this.getMinimumCount(i);if(a[0]===s)return 0;if(1===c){if(i[5]>0)return 5;if(i[4]>0)return 4;if(i[2]>0)return 2;if(i[3]>0)return 3}return 1}var l=e.charCodeAt(t+o);if(o++,this.isDigit(l)?r[0]+=.5:this.isExtendedASCII(l)?(r[0]=Math.ceil(r[0]),r[0]+=2):(r[0]=Math.ceil(r[0]),r[0]++),this.isNativeC40(l)?r[1]+=2/3:this.isExtendedASCII(l)?r[1]+=8/3:r[1]+=4/3,this.isNativeText(l)?r[2]+=2/3:this.isExtendedASCII(l)?r[2]+=8/3:r[2]+=4/3,this.isNativeX12(l)?r[3]+=2/3:this.isExtendedASCII(l)?r[3]+=13/3:r[3]+=10/3,this.isNativeEDIFACT(l)?r[4]+=3/4:this.isExtendedASCII(l)?r[4]+=4.25:r[4]+=3.25,this.isSpecialB256(l)?r[5]+=4:r[5]++,o>=4){if(mv.fill(i,0),mv.fill(a,0),this.findMinimums(r,a,vv.MAX_VALUE,i),a[0]<this.min(a[5],a[1],a[2],a[3],a[4]))return 0;if(a[5]<a[0]||a[5]+1<this.min(a[1],a[2],a[3],a[4]))return 5;if(a[4]+1<this.min(a[5],a[1],a[2],a[3],a[0]))return 4;if(a[2]+1<this.min(a[5],a[1],a[4],a[3],a[0]))return 2;if(a[3]+1<this.min(a[5],a[1],a[4],a[2],a[0]))return 3;if(a[1]+1<this.min(a[0],a[5],a[4],a[2])){if(a[1]<a[3])return 1;if(a[1]===a[3]){for(var u=t+o+1;u<e.length;){var d=e.charCodeAt(u);if(this.isX12TermSep(d))return 3;if(!this.isNativeX12(d))break;u++}return 1}}}}},e.min=function(e,t,n,r,o){var i=Math.min(e,Math.min(t,Math.min(n,r)));return void 0===o?i:Math.min(i,o)},e.findMinimums=function(e,t,n,r){for(var o=0;o<6;o++){var i=t[o]=Math.ceil(e[o]);n>i&&(n=i,mv.fill(r,0)),n===i&&(r[o]=r[o]+1)}return n},e.getMinimumCount=function(e){for(var t=0,n=0;n<6;n++)t+=e[n];return t||0},e.isDigit=function(e){return e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)},e.isExtendedASCII=function(e){return e>=128&&e<=255},e.isNativeC40=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},e.isNativeText=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="a".charCodeAt(0)&&e<="z".charCodeAt(0)},e.isNativeX12=function(e){return this.isX12TermSep(e)||e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},e.isX12TermSep=function(e){return 13===e||e==="*".charCodeAt(0)||e===">".charCodeAt(0)},e.isNativeEDIFACT=function(e){return e>=" ".charCodeAt(0)&&e<="^".charCodeAt(0)},e.isSpecialB256=function(e){return!1},e.determineConsecutiveDigitCount=function(e,t){void 0===t&&(t=0);for(var n=e.length,r=t;r<n&&this.isDigit(e.charCodeAt(r));)r++;return r-t},e.illegalCharacter=function(e){var t=vv.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},e}();const wA=vA;var bA,_A=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},CA=function(){function e(e){this.charset=e,this.name=e.name}return e.prototype.canEncode=function(e){try{return null!=Ov.encode(e,this.charset)}catch(t){return!1}},e}(),EA=function(){function e(e,t,n){var r,o,i,a,s,c;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(e){return new CA(HS.forName(e))}),this.encoders=[];var l=[];l.push(new CA(GS.ISO_8859_1));for(var u=null!=t&&t.name.startsWith("UTF"),d=0;d<e.length;d++){var h=!1;try{for(var f=(r=void 0,_A(l)),p=f.next();!p.done;p=f.next()){var g=p.value,m=e.charAt(d);if(m.charCodeAt(0)===n||g.canEncode(m)){h=!0;break}}}catch(E){r={error:E}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}if(!h)try{for(var y=(i=void 0,_A(this.ENCODERS)),v=y.next();!v.done;v=y.next()){if((g=v.value).canEncode(e.charAt(d))){l.push(g),h=!0;break}}}catch(S){i={error:S}}finally{try{v&&!v.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}h||(u=!0)}if(1!==l.length||u){this.encoders=[];var w=0;try{for(var b=_A(l),_=b.next();!_.done;_=b.next()){g=_.value;this.encoders[w++]=g}}catch(A){s={error:A}}finally{try{_&&!_.done&&(c=b.return)&&c.call(b)}finally{if(s)throw s.error}}}else this.encoders=[l[0]];var C=-1;if(null!=t)for(d=0;d<this.encoders.length;d++)if(null!=this.encoders[d]&&t.name===this.encoders[d].name){C=d;break}this.priorityEncoderIndex=C}return e.prototype.length=function(){return this.encoders.length},e.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},e.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},e.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},e.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},e.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},e.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Ov.encode(Rv.getCharAt(e),this.encoders[t].name)},e}(),SA=function(){function e(e,t,n){this.fnc1=n;var r=new EA(e,t,n);if(1===r.length())for(var o=0;o<this.bytes.length;o++){var i=e.charAt(o).charCodeAt(0);this.bytes[o]=i===n?1e3:i}else this.bytes=this.encodeMinimally(e,r,n)}return e.prototype.getFNC1Character=function(){return this.fnc1},e.prototype.length=function(){return this.bytes.length},e.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var n=0;n<t;n++)if(this.isECI(e+n))return!1;return!0},e.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},e.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var n=new Pv,r=e;r<t;r++){if(this.isECI(r))throw new Error("value at "+r+" is not a character but an ECI");n.append(this.charAt(r))}return n.toString()},e.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},e.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return 1e3===this.bytes[e]},e.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},e.prototype.addEdge=function(e,t,n){(null==e[t][n.encoderIndex]||e[t][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[t][n.encoderIndex]=n)},e.prototype.addEdges=function(e,t,n,r,o,i){var a=e.charAt(r).charCodeAt(0),s=0,c=t.length();t.getPriorityEncoderIndex()>=0&&(a===i||t.canEncode(a,t.getPriorityEncoderIndex()))&&(c=(s=t.getPriorityEncoderIndex())+1);for(var l=s;l<c;l++)(a===i||t.canEncode(a,l))&&this.addEdge(n,r+1,new AA(a,t,l,o,i))},e.prototype.encodeMinimally=function(e,t,n){var r=e.length,o=new(AA[r+1][t.length()]);this.addEdges(e,t,o,0,null,n);for(var i=1;i<=r;i++){for(var a=0;a<t.length();a++)null!=o[i][a]&&i<r&&this.addEdges(e,t,o,i,o[i][a],n);for(a=0;a<t.length();a++)o[i-1][a]=null}var s=-1,c=vv.MAX_VALUE;for(a=0;a<t.length();a++)if(null!=o[r][a]){var l=o[r][a];l.cachedTotalSize<c&&(c=l.cachedTotalSize,s=a)}if(s<0)throw new Error('Failed to encode "'+e+'"');for(var u=[],d=o[r][s];null!=d;){if(d.isFNC1())u.unshift(1e3);else{var h=t.encode(d.c,d.encoderIndex);for(i=h.length-1;i>=0;i--)u.unshift(255&h[i])}(null===d.previous?0:d.previous.encoderIndex)!==d.encoderIndex&&u.unshift(256+t.getECIValue(d.encoderIndex)),d=d.previous}var f=[];for(i=0;i<f.length;i++)f[i]=u[i];return f},e}(),AA=function(){function e(e,t,n,r,o){this.c=e,this.encoderSet=t,this.encoderIndex=n,this.previous=r,this.fnc1=o,this.c=e===o?1e3:e;var i=this.isFNC1()?1:t.encode(e,n).length;(null===r?0:r.encoderIndex)!==n&&(i+=3),null!=r&&(i+=r.cachedTotalSize),this.cachedTotalSize=i}return e.prototype.isFNC1=function(){return 1e3===this.c},e}(),IA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xA=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},NA=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},TA=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(NA(arguments[t]));return e};!function(e){e[e.ASCII=0]="ASCII",e[e.C40=1]="C40",e[e.TEXT=2]="TEXT",e[e.X12=3]="X12",e[e.EDF=4]="EDF",e[e.B256=5]="B256"}(bA||(bA={}));var kA=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],OA=function(){function e(){}return e.isExtendedASCII=function(e,t){return e!==t&&e>=128&&e<=255},e.isInC40Shift1Set=function(e){return e<=31},e.isInC40Shift2Set=function(e,t){var n,r;try{for(var o=xA(kA),i=o.next();!i.done;i=o.next()){if(i.value.charCodeAt(0)===e)return!0}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return e===t},e.isInTextShift1Set=function(e){return this.isInC40Shift1Set(e)},e.isInTextShift2Set=function(e,t){return this.isInC40Shift2Set(e,t)},e.encodeHighLevel=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=-1),void 0===r&&(r=0);var o=0;return e.startsWith($S)&&e.endsWith(eA)?(o=5,e=e.substring(7,e.length-2)):e.startsWith(JS)&&e.endsWith(eA)&&(o=6,e=e.substring(7,e.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,TA(this.encode(e,t,n,r,o)))))},e.encode=function(e,t,n,r,o){return this.encodeMinimally(new jA(e,t,n,r,o)).getBytes()},e.addEdge=function(e,t){var n=t.fromPosition+t.characterLength;(null===e[n][t.getEndMode()]||e[n][t.getEndMode()].cachedTotalSize>t.cachedTotalSize)&&(e[n][t.getEndMode()]=t)},e.getNumberOfC40Words=function(t,n,r,o){for(var i=0,a=n;a<t.length();a++){if(t.isECI(a))return o[0]=0,0;var s=t.charAt(a);if(r&&wA.isNativeC40(s)||!r&&wA.isNativeText(s))i++;else if(e.isExtendedASCII(s,t.getFNC1Character())){var c=255&s;c>=128&&(r&&wA.isNativeC40(c-128)||!r&&wA.isNativeText(c-128))?i+=3:i+=4}else i+=2;if(i%3===0||(i-2)%3===0&&a+1===t.length())return o[0]=a-n+1,Math.ceil(i/3)}return o[0]=0,0},e.addEdges=function(t,n,r,o){var i,a;if(t.isECI(r))this.addEdge(n,new PA(t,bA.ASCII,r,1,o));else{var s,c=t.charAt(r);if(null===o||o.getEndMode()!==bA.EDF){wA.isDigit(c)&&t.haveNCharacters(r,2)&&wA.isDigit(t.charAt(r+1))?this.addEdge(n,new PA(t,bA.ASCII,r,2,o)):this.addEdge(n,new PA(t,bA.ASCII,r,1,o));var l=[bA.C40,bA.TEXT];try{for(var u=xA(l),d=u.next();!d.done;d=u.next()){var h=d.value,f=[];e.getNumberOfC40Words(t,r,h===bA.C40,f)>0&&this.addEdge(n,new PA(t,h,r,f[0],o))}}catch(g){i={error:g}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}t.haveNCharacters(r,3)&&wA.isNativeX12(t.charAt(r))&&wA.isNativeX12(t.charAt(r+1))&&wA.isNativeX12(t.charAt(r+2))&&this.addEdge(n,new PA(t,bA.X12,r,3,o)),this.addEdge(n,new PA(t,bA.B256,r,1,o))}for(s=0;s<3;s++){var p=r+s;if(!t.haveNCharacters(p,1)||!wA.isNativeEDIFACT(t.charAt(p)))break;this.addEdge(n,new PA(t,bA.EDF,r,s+1,o))}3===s&&t.haveNCharacters(r,4)&&wA.isNativeEDIFACT(t.charAt(r+3))&&this.addEdge(n,new PA(t,bA.EDF,r,4,o))}},e.encodeMinimally=function(e){var t=e.length(),n=Array(t+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(e,n,0,null);for(var r=1;r<=t;r++){for(var o=0;o<6;o++)null!==n[r][o]&&r<t&&this.addEdges(e,n,r,n[r][o]);for(o=0;o<6;o++)n[r-1][o]=null}var i=-1,a=vv.MAX_VALUE;for(o=0;o<6;o++)if(null!==n[t][o]){var s=n[t][o],c=o>=1&&o<=3?s.cachedTotalSize+1:s.cachedTotalSize;c<a&&(a=c,i=o)}if(i<0)throw new Error('Failed to encode "'+e+'"');return new RA(n[t][i])},e}(),RA=function(){function e(e){var t=e.input,n=0,r=[],o=[],i=[];e.mode!==bA.C40&&e.mode!==bA.TEXT&&e.mode!==bA.X12||e.getEndMode()===bA.ASCII||(n+=this.prepend(PA.getBytes(254),r));for(var a=e;null!==a;)n+=this.prepend(a.getDataBytes(),r),null!==a.previous&&a.getPreviousStartMode()===a.getMode()||(a.getMode()===bA.B256&&(n<=249?(r.unshift(n),n++):(r.unshift(n%250),r.unshift(n/250+249),n+=2),o.push(r.length),i.push(n)),this.prepend(a.getLatchBytes(),r),n=0),a=a.previous;5===t.getMacroId()?n+=this.prepend(PA.getBytes(236),r):6===t.getMacroId()&&(n+=this.prepend(PA.getBytes(237),r)),t.getFNC1Character()>0&&(n+=this.prepend(PA.getBytes(232),r));for(var s=0;s<o.length;s++)this.applyRandomPattern(r,r.length-o[s],i[s]);var c=e.getMinSymbolSize(r.length);for(r.length<c&&r.push(129);r.length<c;)r.push(this.randomize253State(r.length+1));this.bytes=new Uint8Array(r.length);for(s=0;s<this.bytes.length;s++)this.bytes[s]=r[s]}return e.prototype.prepend=function(e,t){for(var n=e.length-1;n>=0;n--)t.unshift(e[n]);return e.length},e.prototype.randomize253State=function(e){var t=129+(149*e%253+1);return t<=254?t:t-254},e.prototype.applyRandomPattern=function(e,t,n){for(var r=0;r<n;r++){var o=t+r,i=(255&e[o])+(149*(o+1)%255+1);e[o]=i<=255?i:i-256}},e.prototype.getBytes=function(){return this.bytes},e}(),PA=function(){function e(e,t,n,r,o){if(this.input=e,this.mode=t,this.fromPosition=n,this.characterLength=r,this.previous=o,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(n+r<=e.length()))throw new Error("Invalid edge");var i=null!==o?o.cachedTotalSize:0,a=this.getPreviousMode();switch(t){case bA.ASCII:i++,(e.isECI(n)||OA.isExtendedASCII(e.charAt(n),e.getFNC1Character()))&&i++,a!==bA.C40&&a!==bA.TEXT&&a!==bA.X12||i++;break;case bA.B256:i++,(a!==bA.B256||250===this.getB256Size())&&i++,a===bA.ASCII?i++:a!==bA.C40&&a!==bA.TEXT&&a!==bA.X12||(i+=2);break;case bA.C40:case bA.TEXT:case bA.X12:if(t===bA.X12)i+=2;else{i+=2*OA.getNumberOfC40Words(e,n,t===bA.C40,[])}a===bA.ASCII||a===bA.B256?i++:a===t||a!==bA.C40&&a!==bA.TEXT&&a!==bA.X12||(i+=2);break;case bA.EDF:i+=3,a===bA.ASCII||a===bA.B256?i++:a!==bA.C40&&a!==bA.TEXT&&a!==bA.X12||(i+=2)}this.cachedTotalSize=i}return e.prototype.getB256Size=function(){for(var e=0,t=this;null!==t&&t.mode===bA.B256&&e<=250;)e++,t=t.previous;return e},e.prototype.getPreviousStartMode=function(){return null===this.previous?bA.ASCII:this.previous.mode},e.prototype.getPreviousMode=function(){return null===this.previous?bA.ASCII:this.previous.getEndMode()},e.prototype.getEndMode=function(){if(this.mode===bA.EDF){if(this.characterLength<4)return bA.ASCII;if((e=this.getLastASCII())>0&&this.getCodewordsRemaining(this.cachedTotalSize+e)<=2-e)return bA.ASCII}if(this.mode===bA.C40||this.mode===bA.TEXT||this.mode===bA.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&0===this.getCodewordsRemaining(this.cachedTotalSize))return bA.ASCII;var e;if(1===(e=this.getLastASCII())&&0===this.getCodewordsRemaining(this.cachedTotalSize+1))return bA.ASCII}return this.mode},e.prototype.getMode=function(){return this.mode},e.prototype.getLastASCII=function(){var e=this.input.length(),t=this.fromPosition+this.characterLength;return e-t>4||t>=e?0:e-t===1?OA.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?0:1:e-t===2?OA.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())||OA.isExtendedASCII(this.input.charAt(t+1),this.input.getFNC1Character())?0:wA.isDigit(this.input.charAt(t))&&wA.isDigit(this.input.charAt(t+1))?1:2:e-t===3?wA.isDigit(this.input.charAt(t))&&wA.isDigit(this.input.charAt(t+1))&&!OA.isExtendedASCII(this.input.charAt(t+2),this.input.getFNC1Character())||wA.isDigit(this.input.charAt(t+1))&&wA.isDigit(this.input.charAt(t+2))&&!OA.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?2:0:wA.isDigit(this.input.charAt(t))&&wA.isDigit(this.input.charAt(t+1))&&wA.isDigit(this.input.charAt(t+2))&&wA.isDigit(this.input.charAt(t+3))?2:0},e.prototype.getMinSymbolSize=function(e){var t,n,r,o,i,a;switch(this.input.getShapeHint()){case 1:try{for(var s=xA(this.squareCodewordCapacities),c=s.next();!c.done;c=s.next()){if((f=c.value)>=e)return f}}catch(p){t={error:p}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}break;case 2:try{for(var l=xA(this.rectangularCodewordCapacities),u=l.next();!u.done;u=l.next()){if((f=u.value)>=e)return f}}catch(g){r={error:g}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}try{for(var d=xA(this.allCodewordCapacities),h=d.next();!h.done;h=d.next()){var f;if((f=h.value)>=e)return f}}catch(m){i={error:m}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},e.prototype.getCodewordsRemaining=function(e){return this.getMinSymbolSize(e)-e},e.getBytes=function(e,t){var n=new Uint8Array(t?2:1);return n[0]=e,t&&(n[1]=t),n},e.prototype.setC40Word=function(e,t,n,r,o){var i=1600*(255&n)+40*(255&r)+(255&o)+1;e[t]=i/256,e[t+1]=i%256},e.prototype.getX12Value=function(e){return 13===e?0:42===e?1:62===e?2:32===e?3:e>=48&&e<=57?e-44:e>=65&&e<=90?e-51:e},e.prototype.getX12Words=function(){if(this.characterLength%3!==0)throw new Error("X12 words must be a multiple of 3");for(var e=new Uint8Array(this.characterLength/3*2),t=0;t<e.length;t+=2)this.setC40Word(e,t,this.getX12Value(this.input.charAt(this.fromPosition+t/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+2)));return e},e.prototype.getShiftValue=function(e,t,n){return t&&OA.isInC40Shift1Set(e)||!t&&OA.isInTextShift1Set(e)?0:t&&OA.isInC40Shift2Set(e,n)||!t&&OA.isInTextShift2Set(e,n)?1:2},e.prototype.getC40Value=function(e,t,n,r){if(n===r){if(2!==t)throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return e?n<=31?n:32===n?3:n<=47?n-33:n<=57?n-44:n<=64?n-43:n<=90?n-51:n<=95?n-69:n<=127?n-96:n:0===n?0:0===t&&n<=3?n-1:1===t&&n<=31?n:32===n?3:n>=33&&n<=47?n-33:n>=48&&n<=57?n-44:n>=58&&n<=64?n-43:n>=65&&n<=90?n-64:n>=91&&n<=95?n-69:96===n?0:n>=97&&n<=122?n-83:n>=123&&n<=127?n-96:n},e.prototype.getC40Words=function(e,t){for(var n=[],r=0;r<this.characterLength;r++){var o=this.input.charAt(this.fromPosition+r);if(e&&wA.isNativeC40(o)||!e&&wA.isNativeText(o))n.push(this.getC40Value(e,0,o,t));else if(OA.isExtendedASCII(o,t)){var i=(255&o)-128;if(e&&wA.isNativeC40(i)||!e&&wA.isNativeText(i))n.push(1),n.push(30),n.push(this.getC40Value(e,0,i,t));else{n.push(1),n.push(30);a=this.getShiftValue(i,e,t);n.push(a),n.push(this.getC40Value(e,a,i,t))}}else{var a=this.getShiftValue(o,e,t);n.push(a),n.push(this.getC40Value(e,a,o,t))}}if(n.length%3!==0){if((n.length-2)%3!==0||this.fromPosition+this.characterLength!==this.input.length())throw new Error("C40 words must be a multiple of 3");n.push(0)}var s=new Uint8Array(n.length/3*2),c=0;for(r=0;r<n.length;r+=3)this.setC40Word(s,c,255&n[r],255&n[r+1],255&n[r+2]),c+=2;return s},e.prototype.getEDFBytes=function(){for(var e=Math.ceil(this.characterLength/4),t=new Uint8Array(3*e),n=this.fromPosition,r=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),o=0;o<e;o+=3){for(var i=[],a=0;a<4;a++)i[a]=n<=r?63&this.input.charAt(n++):n===r+1?31:0;var s=i[0]<<18;s|=i[1]<<12,s|=i[2]<<6,s|=i[3],t[o]=s>>16&255,t[o+1]=s>>8&255,t[o+2]=255&s}return t},e.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case bA.ASCII:case bA.B256:switch(this.mode){case bA.B256:return e.getBytes(231);case bA.C40:return e.getBytes(230);case bA.TEXT:return e.getBytes(239);case bA.X12:return e.getBytes(238);case bA.EDF:return e.getBytes(240)}break;case bA.C40:case bA.TEXT:case bA.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case bA.ASCII:return e.getBytes(254);case bA.B256:return e.getBytes(254,231);case bA.C40:return e.getBytes(254,230);case bA.TEXT:return e.getBytes(254,239);case bA.X12:return e.getBytes(254,238);case bA.EDF:return e.getBytes(254,240)}break;case bA.EDF:if(this.mode!==bA.EDF)throw new Error("Cannot switch from EDF to "+this.mode)}return new Uint8Array(0)},e.prototype.getDataBytes=function(){switch(this.mode){case bA.ASCII:return this.input.isECI(this.fromPosition)?e.getBytes(241,this.input.getECIValue(this.fromPosition)+1):OA.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?e.getBytes(235,this.input.charAt(this.fromPosition)-127):2===this.characterLength?e.getBytes(10*this.input.charAt(this.fromPosition)+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?e.getBytes(232):e.getBytes(this.input.charAt(this.fromPosition)+1);case bA.B256:return e.getBytes(this.input.charAt(this.fromPosition));case bA.C40:return this.getC40Words(!0,this.input.getFNC1Character());case bA.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case bA.X12:return this.getX12Words();case bA.EDF:return this.getEDFBytes()}},e}(),jA=function(e){function t(t,n,r,o,i){var a=e.call(this,t,n,r)||this;return a.shape=o,a.macroId=i,a}return IA(t,e),t.prototype.getMacroId=function(){return this.macroId},t.prototype.getShapeHint=function(){return this.shape},t}(SA);!function(){function e(){}e.prototype.encode=function(e,t,n,r,o){if(void 0===o&&(o=null),""===e.trim())throw new Error("Found empty contents");if(t!==rw.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+t);if(n<0||r<0)throw new Error("Requested dimensions can't be negative: "+n+"x"+r);var i,a=0,s=null,c=null;if(null!=o){var l=o.get(CS.DATA_MATRIX_SHAPE);null!=l&&(a=l);var u=o.get(CS.MIN_SIZE);null!=u&&(s=u);var d=o.get(CS.MAX_SIZE);null!=d&&(c=d)}if(null!=o&&o.has(CS.DATA_MATRIX_COMPACT)&&Boolean(o.get(CS.DATA_MATRIX_COMPACT).toString())){var h=o.has(CS.GS1_FORMAT)&&Boolean(o.get(CS.GS1_FORMAT).toString()),f=null;o.has(CS.CHARACTER_SET)&&(f=HS.forName(o.get(CS.CHARACTER_SET).toString())),i=OA.encodeHighLevel(e,f,h?29:-1,a)}else{var p=null!=o&&o.has(CS.FORCE_C40)&&Boolean(o.get(CS.FORCE_C40).toString());i=wA.encodeHighLevel(e,a,s,c,p)}var g=uA.lookup(i.length,a,s,c,!0),m=nA.encodeECC200(i,g),y=new WS(m,g.getSymbolDataWidth(),g.getSymbolDataHeight());return y.place(),this.encodeLowLevel(y,g,n,r)},e.prototype.encodeLowLevel=function(e,t,n,r){for(var o=t.getSymbolDataWidth(),i=t.getSymbolDataHeight(),a=new NS(t.getSymbolWidth(),t.getSymbolHeight()),s=0,c=0;c<i;c++){var l=void 0;if(c%t.matrixHeight===0){l=0;for(var u=0;u<t.getSymbolWidth();u++)a.setBoolean(l,s,u%2===0),l++;s++}l=0;for(u=0;u<o;u++)u%t.matrixWidth===0&&(a.setBoolean(l,s,!0),l++),a.setBoolean(l,s,e.getBit(u,c)),l++,u%t.matrixWidth===t.matrixWidth-1&&(a.setBoolean(l,s,c%2===0),l++);if(s++,c%t.matrixHeight===t.matrixHeight-1){l=0;for(u=0;u<t.getSymbolWidth();u++)a.setBoolean(l,s,!0),l++;s++}}return this.convertByteMatrixToBitMatrix(a,n,r)},e.prototype.convertByteMatrixToBitMatrix=function(e,t,n){var r,o=e.getWidth(),i=e.getHeight(),a=Math.max(t,o),s=Math.max(n,i),c=Math.min(a/o,s/i),l=(a-o*c)/2,u=(s-i*c)/2;n<i||t<o?(l=0,u=0,r=new Dv(o,i)):r=new Dv(t,n),r.clear();for(var d=0,h=u;d<i;d++,h+=c)for(var f=0,p=l;f<o;f++,p+=c)1===e.get(f,d)&&r.setRegion(p,h,c,c);return r}}();const DA=function(){function e(){}return e.prototype.isCompact=function(){return this.compact},e.prototype.setCompact=function(e){this.compact=e},e.prototype.getSize=function(){return this.size},e.prototype.setSize=function(e){this.size=e},e.prototype.getLayers=function(){return this.layers},e.prototype.setLayers=function(e){this.layers=e},e.prototype.getCodeWords=function(){return this.codeWords},e.prototype.setCodeWords=function(e){this.codeWords=e},e.prototype.getMatrix=function(){return this.matrix},e.prototype.setMatrix=function(e){this.matrix=e},e}();const MA=function(){function e(){}return e.singletonList=function(e){return[e]},e.min=function(e,t){return e.sort(t)[0]},e}();const LA=function(){function e(e){this.previous=e}return e.prototype.getPrevious=function(){return this.previous},e}();var BA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const FA=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.value=n,o.bitCount=r,o}return BA(t,e),t.prototype.appendTo=function(e,t){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,n){return new t(this,e,n)},t.prototype.addBinaryShift=function(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,n)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+vv.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t}(LA);var UA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const VA=function(e){function t(t,n,r){var o=e.call(this,t,0,0)||this;return o.binaryShiftStart=n,o.binaryShiftByteCount=r,o}return UA(t,e),t.prototype.appendTo=function(e,t){for(var n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)},t.prototype.addBinaryShift=function(e,n){return new t(this,e,n)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t}(FA);function zA(e,t,n){return new FA(e,t,n)}var HA=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],GA=new FA(null,0,0),WA=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],qA=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var XA=function(e){var t,n;try{for(var r=qA(e),o=r.next();!o.done;o=r.next()){var i=o.value;mv.fill(i,-1)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e[0][4]=0,e[1][4]=0,e[1][0]=28,e[3][4]=0,e[2][4]=0,e[2][0]=15,e}(mv.createInt32Array(6,6)),KA=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},YA=function(){function e(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}return e.prototype.getMode=function(){return this.mode},e.prototype.getToken=function(){return this.token},e.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},e.prototype.getBitCount=function(){return this.bitCount},e.prototype.latchAndAppend=function(t,n){var r=this.bitCount,o=this.token;if(t!==this.mode){var i=WA[this.mode][t];o=zA(o,65535&i,i>>16),r+=i>>16}var a=2===t?4:5;return new e(o=zA(o,n,a),t,0,r+a)},e.prototype.shiftAndAppend=function(t,n){var r=this.token,o=2===this.mode?4:5;return r=zA(r,XA[this.mode][t],o),new e(r=zA(r,n,5),this.mode,0,this.bitCount+o+5)},e.prototype.addBinaryShiftChar=function(t){var n=this.token,r=this.mode,o=this.bitCount;if(4===this.mode||2===this.mode){var i=WA[r][0];n=zA(n,65535&i,i>>16),o+=i>>16,r=0}var a=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,s=new e(n,r,this.binaryShiftByteCount+1,o+a);return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(t+1)),s},e.prototype.endBinaryShift=function(t){if(0===this.binaryShiftByteCount)return this;var n=this.token;return new e(n=function(e,t,n){return new VA(e,t,n)}(n,t-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)},e.prototype.isBetterThanOrEqualTo=function(t){var n=this.bitCount+(WA[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?n+=e.calculateBinaryShiftCost(t)-e.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(n+=10),n<=t.bitCount},e.prototype.toBitArray=function(e){for(var t,n,r=[],o=this.endBinaryShift(e.length).token;null!==o;o=o.getPrevious())r.unshift(o);var i=new bv;try{for(var a=KA(r),s=a.next();!s.done;s=a.next()){s.value.appendTo(i,e)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},e.prototype.toString=function(){return Rv.format("%s bits=%d bytes=%d",HA[this.mode],this.bitCount,this.binaryShiftByteCount)},e.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},e.INITIAL_STATE=new e(GA,0,0,0),e}();const QA=YA;var ZA=function(e){var t=Rv.getCharCode(" "),n=Rv.getCharCode("."),r=Rv.getCharCode(",");e[0][t]=1;for(var o=Rv.getCharCode("Z"),i=Rv.getCharCode("A"),a=i;a<=o;a++)e[0][a]=a-i+2;e[1][t]=1;var s=Rv.getCharCode("z"),c=Rv.getCharCode("a");for(a=c;a<=s;a++)e[1][a]=a-c+2;e[2][t]=1;var l=Rv.getCharCode("9"),u=Rv.getCharCode("0");for(a=u;a<=l;a++)e[2][a]=a-u+2;e[2][r]=12,e[2][n]=13;for(var d=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],h=0;h<d.length;h++)e[3][Rv.getCharCode(d[h])]=h;var f=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(h=0;h<f.length;h++)Rv.getCharCode(f[h])>0&&(e[4][Rv.getCharCode(f[h])]=h);return e}(mv.createInt32Array(5,256)),$A=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JA=function(){function e(e){this.text=e}return e.prototype.encode=function(){for(var t=Rv.getCharCode(" "),n=Rv.getCharCode("\n"),r=MA.singletonList(QA.INITIAL_STATE),o=0;o<this.text.length;o++){var i=void 0,a=o+1<this.text.length?this.text[o+1]:0;switch(this.text[o]){case Rv.getCharCode("\r"):i=a===n?2:0;break;case Rv.getCharCode("."):i=a===t?3:0;break;case Rv.getCharCode(","):i=a===t?4:0;break;case Rv.getCharCode(":"):i=a===t?5:0;break;default:i=0}i>0?(r=e.updateStateListForPair(r,o,i),o++):r=this.updateStateListForChar(r,o)}return MA.min(r,function(e,t){return e.getBitCount()-t.getBitCount()}).toBitArray(this.text)},e.prototype.updateStateListForChar=function(t,n){var r,o,i=[];try{for(var a=$A(t),s=a.next();!s.done;s=a.next()){var c=s.value;this.updateStateForChar(c,n,i)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return e.simplifyStates(i)},e.prototype.updateStateForChar=function(e,t,n){for(var r=255&this.text[t],o=ZA[e.getMode()][r]>0,i=null,a=0;a<=4;a++){var s=ZA[a][r];if(s>0){if(null==i&&(i=e.endBinaryShift(t)),!o||a===e.getMode()||2===a){var c=i.latchAndAppend(a,s);n.push(c)}if(!o&&XA[e.getMode()][a]>=0){var l=i.shiftAndAppend(a,s);n.push(l)}}}if(e.getBinaryShiftByteCount()>0||0===ZA[e.getMode()][r]){var u=e.addBinaryShiftChar(t);n.push(u)}},e.updateStateListForPair=function(e,t,n){var r,o,i=[];try{for(var a=$A(e),s=a.next();!s.done;s=a.next()){var c=s.value;this.updateStateForPair(c,t,n,i)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return this.simplifyStates(i)},e.updateStateForPair=function(e,t,n,r){var o=e.endBinaryShift(t);if(r.push(o.latchAndAppend(4,n)),4!==e.getMode()&&r.push(o.shiftAndAppend(4,n)),3===n||4===n){var i=o.latchAndAppend(2,16-n).latchAndAppend(2,1);r.push(i)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(a)}},e.simplifyStates=function(e){var t,n,r,o,i=[];try{for(var a=$A(e),s=a.next();!s.done;s=a.next()){var c=s.value,l=!0,u=function(e){if(e.isBetterThanOrEqualTo(c))return l=!1,"break";c.isBetterThanOrEqualTo(e)&&(i=i.filter(function(t){return t!==e}))};try{for(var d=(r=void 0,$A(i)),h=d.next();!h.done;h=d.next()){if("break"===u(h.value))break}}catch(f){r={error:f}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}l&&i.push(c)}}catch(p){t={error:p}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},e}();const eI=JA;var tI=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},nI=function(){function e(){}return e.encodeBytes=function(t){return e.encode(t,e.DEFAULT_EC_PERCENT,e.DEFAULT_AZTEC_LAYERS)},e.encode=function(t,n,r){var o,i,a,s,c,l=new eI(t).encode(),u=vv.truncDivision(l.getSize()*n,100)+11,d=l.getSize()+u;if(r!==e.DEFAULT_AZTEC_LAYERS){if(o=r<0,(i=Math.abs(r))>(o?e.MAX_NB_BITS_COMPACT:e.MAX_NB_BITS))throw new rv(Rv.format("Illegal value %s for layers",r));var h=(a=e.totalBitsInLayer(i,o))-a%(s=e.WORD_SIZE[i]);if((c=e.stuffBits(l,s)).getSize()+u>h)throw new rv("Data to large for user specified layer");if(o&&c.getSize()>64*s)throw new rv("Data to large for user specified layer")}else{s=0,c=null;for(var f=0;;f++){if(f>e.MAX_NB_BITS)throw new rv("Data too large for an Aztec code");if(i=(o=f<=3)?f+1:f,!(d>(a=e.totalBitsInLayer(i,o)))){null!=c&&s===e.WORD_SIZE[i]||(s=e.WORD_SIZE[i],c=e.stuffBits(l,s));h=a-a%s;if(!(o&&c.getSize()>64*s)&&c.getSize()+u<=h)break}}}var p,g=e.generateCheckWords(c,a,s),m=c.getSize()/s,y=e.generateModeMessage(o,i,m),v=(o?11:14)+4*i,w=new Int32Array(v);if(o){p=v;for(f=0;f<w.length;f++)w[f]=f}else{p=v+1+2*vv.truncDivision(vv.truncDivision(v,2)-1,15);var b=vv.truncDivision(v,2),_=vv.truncDivision(p,2);for(f=0;f<b;f++){var C=f+vv.truncDivision(f,15);w[b-f-1]=_-C-1,w[b+f]=_+C+1}}for(var E=new Dv(p),S=(f=0,0);f<i;f++){for(var A=4*(i-f)+(o?9:12),I=0;I<A;I++)for(var x=2*I,N=0;N<2;N++)g.get(S+x+N)&&E.set(w[2*f+N],w[2*f+I]),g.get(S+2*A+x+N)&&E.set(w[2*f+I],w[v-1-2*f-N]),g.get(S+4*A+x+N)&&E.set(w[v-1-2*f-N],w[v-1-2*f-I]),g.get(S+6*A+x+N)&&E.set(w[v-1-2*f-I],w[2*f+N]);S+=8*A}if(e.drawModeMessage(E,o,p,y),o)e.drawBullsEye(E,vv.truncDivision(p,2),5);else{e.drawBullsEye(E,vv.truncDivision(p,2),7);for(f=0,I=0;f<vv.truncDivision(v,2)-1;f+=15,I+=16)for(N=1&vv.truncDivision(p,2);N<p;N+=2)E.set(vv.truncDivision(p,2)-I,N),E.set(vv.truncDivision(p,2)+I,N),E.set(N,vv.truncDivision(p,2)-I),E.set(N,vv.truncDivision(p,2)+I)}var T=new DA;return T.setCompact(o),T.setSize(p),T.setLayers(i),T.setCodeWords(m),T.setMatrix(E),T},e.drawBullsEye=function(e,t,n){for(var r=0;r<n;r+=2)for(var o=t-r;o<=t+r;o++)e.set(o,t-r),e.set(o,t+r),e.set(t-r,o),e.set(t+r,o);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)},e.generateModeMessage=function(t,n,r){var o=new bv;return t?(o.appendBits(n-1,2),o.appendBits(r-1,6),o=e.generateCheckWords(o,28,4)):(o.appendBits(n-1,5),o.appendBits(r-1,11),o=e.generateCheckWords(o,40,4)),o},e.drawModeMessage=function(e,t,n,r){var o=vv.truncDivision(n,2);if(t)for(var i=0;i<7;i++){var a=o-3+i;r.get(i)&&e.set(a,o-5),r.get(i+7)&&e.set(o+5,a),r.get(20-i)&&e.set(a,o+5),r.get(27-i)&&e.set(o-5,a)}else for(i=0;i<10;i++){a=o-5+i+vv.truncDivision(i,5);r.get(i)&&e.set(a,o-7),r.get(i+10)&&e.set(o+7,a),r.get(29-i)&&e.set(a,o+7),r.get(39-i)&&e.set(o-7,a)}},e.generateCheckWords=function(t,n,r){var o,i,a=t.getSize()/r,s=new ES(e.getGF(r)),c=vv.truncDivision(n,r),l=e.bitsToWords(t,r,c);s.encode(l,c-a);var u=n%r,d=new bv;d.appendBits(0,u);try{for(var h=tI(Array.from(l)),f=h.next();!f.done;f=h.next()){var p=f.value;d.appendBits(p,r)}}catch(g){o={error:g}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}return d},e.bitsToWords=function(e,t,n){var r,o,i=new Int32Array(n);for(r=0,o=e.getSize()/t;r<o;r++){for(var a=0,s=0;s<t;s++)a|=e.get(r*t+s)?1<<t-s-1:0;i[r]=a}return i},e.getGF=function(e){switch(e){case 4:return pw.AZTEC_PARAM;case 6:return pw.AZTEC_DATA_6;case 8:return pw.AZTEC_DATA_8;case 10:return pw.AZTEC_DATA_10;case 12:return pw.AZTEC_DATA_12;default:throw new rv("Unsupported word size "+e)}},e.stuffBits=function(e,t){for(var n=new bv,r=e.getSize(),o=(1<<t)-2,i=0;i<r;i+=t){for(var a=0,s=0;s<t;s++)(i+s>=r||e.get(i+s))&&(a|=1<<t-1-s);(a&o)===o?(n.appendBits(a&o,t),i--):0===(a&o)?(n.appendBits(1|a,t),i--):n.appendBits(a,t)}return n},e.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},e.DEFAULT_EC_PERCENT=33,e.DEFAULT_AZTEC_LAYERS=0,e.MAX_NB_BITS=32,e.MAX_NB_BITS_COMPACT=4,e.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),e}();const rI=nI;!function(){function e(){}e.prototype.encode=function(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)},e.prototype.encodeWithHints=function(t,n,r,o,i){var a=GS.ISO_8859_1,s=rI.DEFAULT_EC_PERCENT,c=rI.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(CS.CHARACTER_SET)&&(a=HS.forName(i.get(CS.CHARACTER_SET).toString())),i.has(CS.ERROR_CORRECTION)&&(s=vv.parseInt(i.get(CS.ERROR_CORRECTION).toString())),i.has(CS.AZTEC_LAYERS)&&(c=vv.parseInt(i.get(CS.AZTEC_LAYERS).toString()))),e.encodeLayers(t,n,r,o,a,s,c)},e.encodeLayers=function(t,n,r,o,i,a,s){if(n!==rw.AZTEC)throw new rv("Can only encode AZTEC, but got "+n);var c=rI.encode(Rv.getBytes(t,i),a,s);return e.renderResult(c,r,o)},e.renderResult=function(e,t,n){var r=e.getMatrix();if(null==r)throw new vw;for(var o=r.getWidth(),i=r.getHeight(),a=Math.max(t,o),s=Math.max(n,i),c=Math.min(a/o,s/i),l=(a-o*c)/2,u=(s-i*c)/2,d=new Dv(a,s),h=0,f=u;h<i;h++,f+=c)for(var p=0,g=l;p<o;p++,g+=c)r.get(p,h)&&d.setRegion(g,f,c,c);return d}}();var oI=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),iI=function(e){function t(n){var r=e.call(this,n.width,n.height)||this;return r.canvas=n,r.tempCanvasElement=null,r.buffer=t.makeBufferFromCanvasImageData(n),r}return oI(t,e),t.makeBufferFromCanvasImageData=function(e){var n;try{n=e.getContext("2d",{willReadFrequently:!0})}catch(o){n=e.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var r=n.getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(r.data,e.width,e.height)},t.toGrayscaleBuffer=function(e,t,n){for(var r=new Uint8ClampedArray(t*n),o=0,i=0,a=e.length;o<a;o+=4,i++){var s=void 0;if(0===e[o+3])s=255;else s=306*e[o]+601*e[o+1]+117*e[o+2]+512>>10;r[i]=s}return r},t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new rv("Requested row is outside the image: "+e);var n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(t,n,r,o){return e.prototype.crop.call(this,t,n,r,o),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.invert=function(){return new Xv(this)},t.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var r=e*t.DEGREE_TO_RADIANS,o=this.canvas.width,i=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(r))*o+Math.abs(Math.sin(r))*i),s=Math.ceil(Math.abs(Math.sin(r))*o+Math.abs(Math.cos(r))*i);n.width=a,n.height=s;var c=n.getContext("2d");if(!c)throw new Error("Could not create a Canvas Context element.");return c.translate(a/2,s/2),c.rotate(r),c.drawImage(this.canvas,o/-2,i/-2),this.buffer=t.makeBufferFromCanvasImageData(n),this},t.DEGREE_TO_RADIANS=Math.PI/180,t}(Wv);function aI(){return"undefined"!==typeof navigator}function sI(){return!!(aI()&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)}var cI=function(){return cI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},cI.apply(this,arguments)},lI=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},uI=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},dI=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hI={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},fI=function(){function e(e,t,n){void 0===t&&(t=new Map),void 0===n&&(n={}),this.reader=e,this.hints=t,this.options=cI(cI({},hI),n)}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(e){this.hints.set(Cv.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),e.addVideoSource=function(e,t){try{e.srcObject=t}catch(n){console.error("got interrupted by new loading request")}},e.mediaStreamSetTorch=function(e,t){return lI(this,void 0,void 0,function(){return uI(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return n.sent(),[2]}})})},e.mediaStreamIsTorchCompatible=function(t){var n,r,o=t.getVideoTracks();try{for(var i=dI(o),a=i.next();!a.done;a=i.next()){var s=a.value;if(e.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1},e.mediaStreamIsTorchCompatibleTrack=function(e){try{return"torch"in e.getCapabilities()}catch(t){return console.error(t),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},e.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},e.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new tv("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new tv("element with id '".concat(e,"' must be an ").concat(t," element"));return n},e.createVideoElement=function(t){if(t instanceof HTMLVideoElement)return t;if("string"===typeof t)return e.getMediaElement(t,"video");if(!t&&"undefined"!==typeof document){var n=document.createElement("video");return n.width=200,n.height=200,n}throw new Error("Couldn't get videoElement from videoSource!")},e.prepareImageElement=function(t){if(t instanceof HTMLImageElement)return t;if("string"===typeof t)return e.getMediaElement(t,"img");if("undefined"===typeof t){var n=document.createElement("img");return n.width=200,n.height=200,n}throw new Error("Couldn't get imageElement from imageSource!")},e.prepareVideoElement=function(t){var n=e.createVideoElement(t);return n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},e.isImageLoaded=function(e){return!!e.complete&&0!==e.naturalWidth},e.createBinaryBitmapFromCanvas=function(e){var t=new iI(e),n=new Hv(t);return new ov(n)},e.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},e.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},e.createCaptureCanvas=function(t){if(!t)throw new tv("Cannot create a capture canvas without a media element.");if("undefined"===typeof document)throw new Error('The page "Document" is undefined, make sure you\'re running in a browser.');var n=document.createElement("canvas"),r=e.getMediaElementDimensions(t),o=r.width,i=r.height;return n.style.width=o+"px",n.style.height=i+"px",n.width=o,n.height=i,n},e.tryPlayVideo=function(t){return lI(this,void 0,void 0,function(){var n;return uI(this,function(r){switch(r.label){case 0:if(null===t||void 0===t?void 0:t.ended)return console.error("Trying to play video that has ended."),[2,!1];if(e.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.play()];case 2:return r.sent(),[2,!0];case 3:return n=r.sent(),console.warn("It was not possible to play the video.",n),[2,!1];case 4:return[2]}})})},e.createCanvasFromMediaElement=function(t){var n=e.createCaptureCanvas(t),r=n.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return e.drawImageOnCanvas(r,t),n},e.createBinaryBitmapFromMediaElem=function(t){var n=e.createCanvasFromMediaElement(t);return e.createBinaryBitmapFromCanvas(n)},e.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},e.listVideoInputDevices=function(){return lI(this,void 0,void 0,function(){var e,t,n,r,o,i,a,s,c,l,u,d;return uI(this,function(h){switch(h.label){case 0:if(!aI())throw new Error("Can't enumerate devices, navigator is not present.");if(!sI())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=dI(e),r=n.next();!r.done;r=n.next())o=r.value,"videoinput"===(i="video"===o.kind?"videoinput":o.kind)&&(a=o.deviceId||o.id,s=o.label||"Video device ".concat(t.length+1),c=o.groupId,l={deviceId:a,label:s,kind:i,groupId:c},t.push(l))}catch(f){u={error:f}}finally{try{r&&!r.done&&(d=n.return)&&d.call(n)}finally{if(u)throw u.error}}return[2,t]}})})},e.findDeviceById=function(t){return lI(this,void 0,void 0,function(){var n;return uI(this,function(r){switch(r.label){case 0:return[4,e.listVideoInputDevices()];case 1:return(n=r.sent())?[2,n.find(function(e){return e.deviceId===t})]:[2]}})})},e.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch(t){e.src=""}e&&e.removeAttribute("src")}},e.releaseAllStreams=function(){0!==e.streamTracker.length&&e.streamTracker.forEach(function(e){e.getTracks().forEach(function(e){return e.stop()})}),e.streamTracker=[]},e.playVideoOnLoadAsync=function(t,n){return lI(this,void 0,void 0,function(){return uI(this,function(r){switch(r.label){case 0:return[4,e.tryPlayVideo(t)];case 1:return r.sent()?[2,!0]:[2,new Promise(function(r,o){var i=setTimeout(function(){e.isVideoPlaying(t)||(o(!1),t.removeEventListener("canplay",a))},n),a=function(){e.tryPlayVideo(t).then(function(e){clearTimeout(i),t.removeEventListener("canplay",a),r(e)})};t.addEventListener("canplay",a)})]}})})},e.attachStreamToVideo=function(t,n,r){return void 0===r&&(r=5e3),lI(this,void 0,void 0,function(){var o;return uI(this,function(i){switch(i.label){case 0:return o=e.prepareVideoElement(n),e.addVideoSource(o,t),[4,e.playVideoOnLoadAsync(o,r)];case 1:return i.sent(),[2,o]}})})},e._waitImageLoad=function(t){return new Promise(function(n,r){var o=setTimeout(function(){e.isImageLoaded(t)||(t.removeEventListener("load",i),r())},1e4),i=function(){clearTimeout(o),t.removeEventListener("load",i),n()};t.addEventListener("load",i)})},e.checkCallbackFnOrThrow=function(e){if(!e)throw new tv("`callbackFn` is a required parameter, you cannot capture results without it.")},e.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(e){return e.stop()}),e=void 0},e.prototype.decode=function(t){var n=e.createCanvasFromMediaElement(t);return this.decodeFromCanvas(n)},e.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},e.prototype.decodeFromCanvas=function(t){var n=e.createBinaryBitmapFromCanvas(t);return this.decodeBitmap(n)},e.prototype.decodeFromImageElement=function(t){return lI(this,void 0,void 0,function(){var n;return uI(this,function(r){switch(r.label){case 0:if(!t)throw new tv("An image element must be provided.");return n=e.prepareImageElement(t),[4,this._decodeOnLoadImage(n)];case 1:return[2,r.sent()]}})})},e.prototype.decodeFromImageUrl=function(t){return lI(this,void 0,void 0,function(){var n;return uI(this,function(r){switch(r.label){case 0:if(!t)throw new tv("An URL must be provided.");(n=e.prepareImageElement()).src=t,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(n)];case 2:return[2,r.sent()];case 3:return e.destroyImageElement(n),[7];case 4:return[2]}})})},e.prototype.decodeFromConstraints=function(t,n,r){return lI(this,void 0,void 0,function(){var o,i;return uI(this,function(a){switch(a.label){case 0:return e.checkCallbackFnOrThrow(r),[4,this.getUserMedia(t)];case 1:o=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.decodeFromStream(o,n,r)];case 3:return[2,a.sent()];case 4:throw i=a.sent(),e.disposeMediaStream(o),i;case 5:return[2]}})})},e.prototype.decodeFromStream=function(t,n,r){return lI(this,void 0,void 0,function(){var o,i,a,s,c,l,u,d,h=this;return uI(this,function(f){switch(f.label){case 0:return e.checkCallbackFnOrThrow(r),o=this.options.tryPlayVideoTimeout,[4,e.attachStreamToVideo(t,n,o)];case 1:return i=f.sent(),a=function(){e.disposeMediaStream(t),e.cleanVideoSource(i)},s=this.scan(i,r,a),c=t.getVideoTracks(),l=cI(cI({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(e,t){return lI(this,void 0,void 0,function(){var n,r,o,i,a,s;return uI(this,function(l){switch(l.label){case 0:n=t?c.filter(t):c,l.label=1;case 1:l.trys.push([1,6,7,8]),r=dI(n),o=r.next(),l.label=2;case 2:return o.done?[3,5]:[4,o.value.applyConstraints(e)];case 3:l.sent(),l.label=4;case 4:return o=r.next(),[3,2];case 5:return[3,8];case 6:return i=l.sent(),a={error:i},[3,8];case 7:try{o&&!o.done&&(s=r.return)&&s.call(r)}finally{if(a)throw a.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(e){return c.find(e).getConstraints()},streamVideoSettingsGet:function(e){return c.find(e).getSettings()},streamVideoCapabilitiesGet:function(e){return c.find(e).getCapabilities()}}),e.mediaStreamIsTorchCompatible(t)&&(u=null===c||void 0===c?void 0:c.find(function(t){return e.mediaStreamIsTorchCompatibleTrack(t)}),d=function(t){return lI(h,void 0,void 0,function(){return uI(this,function(n){switch(n.label){case 0:return[4,e.mediaStreamSetTorch(u,t)];case 1:return n.sent(),[2]}})})},l.switchTorch=d,l.stop=function(){return lI(h,void 0,void 0,function(){return uI(this,function(e){switch(e.label){case 0:return s.stop(),[4,d(!1)];case 1:return e.sent(),[2]}})})}),[2,l]}})})},e.prototype.decodeFromVideoDevice=function(t,n,r){return lI(this,void 0,void 0,function(){var o;return uI(this,function(i){switch(i.label){case 0:return e.checkCallbackFnOrThrow(r),o={video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(o,n,r)];case 1:return[2,i.sent()]}})})},e.prototype.decodeFromVideoElement=function(t,n){return lI(this,void 0,void 0,function(){var r,o;return uI(this,function(i){switch(i.label){case 0:if(e.checkCallbackFnOrThrow(n),!t)throw new tv("A video element must be provided.");return r=e.prepareVideoElement(t),o=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(r,o)];case 1:return i.sent(),[2,this.scan(r,n)]}})})},e.prototype.decodeFromVideoUrl=function(t,n){return lI(this,void 0,void 0,function(){var r,o,i;return uI(this,function(a){switch(a.label){case 0:if(e.checkCallbackFnOrThrow(n),!t)throw new tv("An URL must be provided.");return(r=e.prepareVideoElement()).src=t,o=function(){e.cleanVideoSource(r)},i=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(r,i)];case 1:return a.sent(),[2,this.scan(r,n,o)]}})})},e.prototype.decodeOnceFromConstraints=function(e,t){return lI(this,void 0,void 0,function(){var n;return uI(this,function(r){switch(r.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=r.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,r.sent()]}})})},e.prototype.decodeOnceFromStream=function(t,n){return lI(this,void 0,void 0,function(){var r,o;return uI(this,function(i){switch(i.label){case 0:return r=Boolean(n),[4,e.attachStreamToVideo(t,n)];case 1:o=i.sent(),i.label=2;case 2:return i.trys.push([2,,4,5]),[4,this.scanOneResult(o)];case 3:return[2,i.sent()];case 4:return r||e.cleanVideoSource(o),[7];case 5:return[2]}})})},e.prototype.decodeOnceFromVideoDevice=function(e,t){return lI(this,void 0,void 0,function(){var n;return uI(this,function(r){switch(r.label){case 0:return n={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(n,t)];case 1:return[2,r.sent()]}})})},e.prototype.decodeOnceFromVideoElement=function(t){return lI(this,void 0,void 0,function(){var n,r;return uI(this,function(o){switch(o.label){case 0:if(!t)throw new tv("A video element must be provided.");return n=e.prepareVideoElement(t),r=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(n,r)];case 1:return o.sent(),[4,this.scanOneResult(n)];case 2:return[2,o.sent()]}})})},e.prototype.decodeOnceFromVideoUrl=function(t){return lI(this,void 0,void 0,function(){var n,r;return uI(this,function(o){switch(o.label){case 0:if(!t)throw new tv("An URL must be provided.");(n=e.prepareVideoElement()).src=t,r=this.decodeOnceFromVideoElement(n),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,r];case 2:return[2,o.sent()];case 3:return e.cleanVideoSource(n),[7];case 4:return[2]}})})},e.prototype.scanOneResult=function(e,t,n,r){var o=this;return void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=!0),new Promise(function(i,a){o.scan(e,function(e,o,s){if(e)return i(e),void s.stop();if(o){if(o instanceof Lv&&t)return;if(o instanceof av&&n)return;if(o instanceof Sv&&r)return;s.stop(),a(o)}})})},e.prototype.scan=function(t,n,r){var o=this;e.checkCallbackFnOrThrow(n);var i,a=e.createCaptureCanvas(t);try{i=a.getContext("2d",{willReadFrequently:!0})}catch(h){i=a.getContext("2d")}if(!i)throw new Error("Couldn't create canvas for visual element scan.");var s,c=function(){i=void 0,a=void 0},l=!1,u={stop:function(){l=!0,clearTimeout(s),c(),r&&r()}},d=function(){if(!l)try{e.drawImageOnCanvas(i,t);var h=o.decodeFromCanvas(a);n(h,void 0,u),s=setTimeout(d,o.options.delayBetweenScanSuccess)}catch(f){if(n(void 0,f,u),f instanceof av||f instanceof Sv||f instanceof Lv)return void(s=setTimeout(d,o.options.delayBetweenScanAttempts));c(),r&&r(f)}};return d(),u},e.prototype._decodeOnLoadImage=function(t){return lI(this,void 0,void 0,function(){return uI(this,function(n){switch(n.label){case 0:return e.isImageLoaded(t)?[3,2]:[4,e._waitImageLoad(t)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(t)]}})})},e.prototype.getUserMedia=function(t){return lI(this,void 0,void 0,function(){var n;return uI(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=r.sent(),e.streamTracker.push(n),[2,n]}})})},e.streamTracker=[],e}(),pI=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gI=(function(e){function t(t,n){return e.call(this,new Ww,t,n)||this}pI(t,e)}(fI),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),mI=(function(e){function t(t,n){return e.call(this,new q_(t),t,n)||this}gI(t,e)}(fI),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),yI=(function(e){function t(t,n){return e.call(this,new pC,t,n)||this}mI(t,e)}(fI),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),vI=function(e){function t(t,n){var r=this,o=new yS;return o.setHints(t),(r=e.call(this,o,t,n)||this).reader=o,r}return yI(t,e),Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(Cv.POSSIBLE_FORMATS,e),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t.prototype.setHints=function(e){this.hints=e,this.reader.setHints(this.hints)},t}(fI),wI=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bI=(function(e){function t(t,n){return e.call(this,new hS,t,n)||this}wI(t,e)}(fI),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),_I=(function(e){function t(t,n){return e.call(this,new cE,t,n)||this}bI(t,e)}(fI),"http://www.w3.org/2000/svg"),CI=(function(){function e(e){if("string"===typeof e){var t=document.getElementById(e);if(!t)throw new Error("Could not find a Container element with '".concat(e,"'."));this.containerElement=t}else this.containerElement=e}e.prototype.write=function(t,n,r,o){if(0===t.length)throw new rv("Found empty contents");if(n<0||r<0)throw new rv("Requested dimensions are too small: "+n+"x"+r);var i=o&&void 0!==o.get(CS.MARGIN)?Number.parseInt(o.get(CS.MARGIN).toString(),10):e.QUIET_ZONE_SIZE,a=this.encode(o,t);return this.renderResult(a,n,r,i)},e.prototype.createSVGElement=function(t,n){var r=document.createElementNS(e.SVG_NS,"svg");return r.setAttributeNS(_I,"width",n.toString()),r.setAttributeNS(_I,"height",t.toString()),r},e.prototype.createSvgPathPlaceholderElement=function(t,n){var r=document.createElementNS(e.SVG_NS,"path");return r.setAttributeNS(_I,"d","M0 0h".concat(t,"v").concat(n,"H0z")),r.setAttributeNS(_I,"fill","none"),r},e.prototype.createSvgRectElement=function(t,n,r,o){var i=document.createElementNS(e.SVG_NS,"rect");return i.setAttributeNS(_I,"x",t.toString()),i.setAttributeNS(_I,"y",n.toString()),i.setAttributeNS(_I,"height",r.toString()),i.setAttributeNS(_I,"width",o.toString()),i.setAttributeNS(_I,"fill","#000000"),i},e.prototype.encode=function(e,t){var n=yC.L;if(e&&void 0!==e.get(CS.ERROR_CORRECTION)){var r=e.get(CS.ERROR_CORRECTION).toString();n=yC.fromString(r)}return BS.encode(t,n,e)},e.prototype.renderResult=function(e,t,n,r){var o=e.getMatrix();if(null===o)throw new vw;var i=o.getWidth(),a=o.getHeight(),s=i+2*r,c=a+2*r,l=Math.max(t,s),u=Math.max(n,c),d=Math.min(Math.floor(l/s),Math.floor(u/c)),h=Math.floor((l-i*d)/2),f=Math.floor((u-a*d)/2),p=this.createSVGElement(l,u),g=this.createSvgPathPlaceholderElement(t,n);p.appendChild(g),this.containerElement.appendChild(p);for(var m=0,y=f;m<a;m++,y+=d)for(var v=0,w=h;v<i;v++,w+=d)if(1===o.get(v,m)){var b=this.createSvgRectElement(w,y,d,d);p.appendChild(b)}return p},e.QUIET_ZONE_SIZE=4,e.SVG_NS="http://www.w3.org/2000/svg"}(),"http://www.w3.org/2000/svg");!function(){function e(){}e.prototype.write=function(t,n,r,o){if(0===t.length)throw new rv("Found empty contents");if(n<0||r<0)throw new rv("Requested dimensions are too small: "+n+"x"+r);var i=yC.L,a=e.QUIET_ZONE_SIZE;if(o){if(void 0!==o.get(CS.ERROR_CORRECTION)){var s=o.get(CS.ERROR_CORRECTION).toString();i=yC.fromString(s)}void 0!==o.get(CS.MARGIN)&&(a=Number.parseInt(o.get(CS.MARGIN).toString(),10))}var c=BS.encode(t,i,o);return this.renderResult(c,n,r,a)},e.prototype.writeToDom=function(e,t,n,r,o){if("string"===typeof e){var i=document.querySelector(e);if(!i)throw new Error("Could no find the target HTML element.");e=i}var a=this.write(t,n,r,o);e instanceof HTMLElement&&e.appendChild(a)},e.prototype.renderResult=function(e,t,n,r){var o=e.getMatrix();if(null===o)throw new vw;for(var i=o.getWidth(),a=o.getHeight(),s=i+2*r,c=a+2*r,l=Math.max(t,s),u=Math.max(n,c),d=Math.min(Math.floor(l/s),Math.floor(u/c)),h=Math.floor((l-i*d)/2),f=Math.floor((u-a*d)/2),p=this.createSVGElement(l,u),g=0,m=f;g<a;g++,m+=d)for(var y=0,v=h;y<i;y++,v+=d)if(1===o.get(y,g)){var w=this.createSvgRectElement(v,m,d,d);p.appendChild(w)}return p},e.prototype.createSVGElement=function(e,t){var n=document.createElementNS(CI,"svg"),r=e.toString(),o=t.toString();return n.setAttribute("height",o),n.setAttribute("width",r),n.setAttribute("viewBox","0 0 "+r+" "+o),n},e.prototype.createSvgRectElement=function(e,t,n,r){var o=document.createElementNS(CI,"rect");return o.setAttribute("x",e.toString()),o.setAttribute("y",t.toString()),o.setAttribute("height",n.toString()),o.setAttribute("width",r.toString()),o.setAttribute("fill","#000000"),o},e.QUIET_ZONE_SIZE=4}();const EI=t=>{let{onScan:n,onClose:r,isActive:o,storeSettings:i={}}=t;const[a,s]=(0,e.useState)(""),[c,l]=(0,e.useState)(!1),[u,d]=(0,e.useState)([]),[h,f]=(0,e.useState)(!1),[p,g]=(0,e.useState)(null),[m,y]=(0,e.useState)(!1),[v,w]=(0,e.useState)(""),b=(0,e.useRef)(null),_=(0,e.useRef)(null),C=(0,e.useRef)(null),E=!i.hasOwnProperty("enableQRCodeScanning")||!0===i.enableQRCodeScanning,S=!i.hasOwnProperty("enableBarcodeScanning")||!0===i.enableBarcodeScanning,A=!i.hasOwnProperty("enableManualEntry")||!0===i.enableManualEntry,I=i.preferredScanningMethod||"qrcode",x=E||S;(0,e.useEffect)(()=>{console.log("\ud83d\udccb Store Settings:",i),console.log("\u2705 Can Scan QR Code:",E),console.log("\u2705 Can Scan Barcode:",S),console.log("\u2705 Can Manual Entry:",A),console.log("\ud83d\udcf1 Preferred Method:",I),console.log("\ud83d\udcf7 Camera Available:",x)},[i,E,S,A,I,x]),(0,e.useEffect)(()=>(o&&b.current&&setTimeout(()=>{var e;null===(e=b.current)||void 0===e||e.focus()},100),()=>{T()}),[o]);const N=async()=>{try{g(null),f(!0),C.current||(C.current=new vI);const e=await vI.listVideoInputDevices();if(0===e.length)throw new Error("No camera found on this device");const t=e.find(e=>e.label.toLowerCase().includes("back")||e.label.toLowerCase().includes("rear")),n=t?t.deviceId:e[0].deviceId;console.log("\ud83d\udcf7 Starting camera:",n),console.log("\ud83d\udcf7 Available cameras:",e.map(e=>e.label)),await C.current.decodeFromVideoDevice(n,_.current,(e,t)=>{if(e){const t=e.getText();console.log("\u2705 Code detected:",t),t!==v&&(w(t),k(t))}t&&"NotFoundException"!==t.name&&console.warn("Scanner error:",t)}),console.log("\u2705 Camera started successfully")}catch(e){console.error("\u274c Camera error:",e),g(e.message||"Failed to access camera"),f(!1)}},T=()=>{if(C.current){try{C.current.reset(),console.log("\ud83d\udcf7 Camera stopped")}catch(e){console.error("Error stopping camera:",e)}C.current=null}if(_.current&&_.current.srcObject){_.current.srcObject.getTracks().forEach(e=>{e.stop(),console.log("\ud83d\uded1 Stopped video track:",e.label)}),_.current.srcObject=null}f(!1),w("")},k=async e=>{y(!0),d(t=>[e,...t.filter(t=>t!==e)].slice(0,5)),setTimeout(()=>{y(!1)},1e3),O(e)},O=async e=>{l(!0);try{console.log("\ud83d\udce4 Submitting code:",e),await n(e),s("")}catch(t){console.error("Error processing code:",t)}finally{l(!1)}},R=()=>{const e=a.trim();e&&O(e)};return o?(0,rg.jsx)("div",{className:"qrcode-scanner-overlay",children:(0,rg.jsxs)("div",{className:"qrcode-scanner-modal",children:[(0,rg.jsxs)("div",{className:"scanner-header",children:[(0,rg.jsxs)("div",{className:"header-content",children:[(0,rg.jsx)(Ag,{size:24}),(0,rg.jsx)("h3",{children:"QR Code Scanner"}),m&&(0,rg.jsxs)("div",{className:"scan-success-badge",children:[(0,rg.jsx)(by,{size:16}),(0,rg.jsx)("span",{children:"Scanned!"})]})]}),(0,rg.jsx)("button",{className:"close-btn",onClick:r,children:(0,rg.jsx)(Km,{size:20})})]}),(0,rg.jsxs)("div",{className:"scanner-content",children:[(0,rg.jsxs)("div",{className:"camera-scanner-section",children:[(0,rg.jsxs)("div",{className:"section-header",children:[(0,rg.jsx)(Wy,{size:20}),(0,rg.jsx)("h4",{children:"Camera Scanner"})]}),!x&&(0,rg.jsxs)("div",{className:"camera-disabled",children:[(0,rg.jsx)(_y,{size:32}),(0,rg.jsx)("h4",{children:"Camera Scanning Disabled"}),(0,rg.jsx)("p",{children:"The store administrator has disabled camera scanning."}),(0,rg.jsxs)("div",{className:"disabled-info",children:[(0,rg.jsx)("p",{children:(0,rg.jsx)("strong",{children:"Current Settings:"})}),(0,rg.jsxs)("ul",{children:[(0,rg.jsxs)("li",{children:["QR Code Scanning: ",E?"\u2705 Enabled":"\u274c Disabled"]}),(0,rg.jsxs)("li",{children:["Barcode Scanning: ",S?"\u2705 Enabled":"\u274c Disabled"]}),(0,rg.jsxs)("li",{children:["Manual Entry: ",A?"\u2705 Enabled":"\u274c Disabled"]})]}),(0,rg.jsx)("p",{className:"info-note",children:"Please use manual entry below or contact your administrator."})]})]}),x&&!h&&!p&&(0,rg.jsx)("div",{className:"camera-start",children:(0,rg.jsxs)("div",{className:"start-content",children:[(0,rg.jsx)(Ag,{size:48}),(0,rg.jsxs)("p",{children:["Scan ",E&&S?"QR codes or barcodes":E?"QR codes":"barcodes"," with your camera"]}),"barcode"===I&&(0,rg.jsx)("p",{className:"preference-note",children:"\ud83d\udcca Barcode scanning is preferred for this store"}),"qrcode"===I&&(0,rg.jsx)("p",{className:"preference-note",children:"\ud83d\udcf1 QR code scanning is preferred for this store"}),(0,rg.jsxs)("button",{onClick:N,className:"start-camera-btn",children:[(0,rg.jsx)(Wy,{size:16}),"Start Camera"]})]})}),p&&(0,rg.jsxs)("div",{className:"camera-error",children:[(0,rg.jsx)(_y,{size:32}),(0,rg.jsx)("h4",{children:"Camera Access Failed"}),(0,rg.jsx)("p",{children:p}),(0,rg.jsxs)("div",{className:"error-tips",children:[(0,rg.jsx)("p",{children:"Try these solutions:"}),(0,rg.jsxs)("ul",{children:[(0,rg.jsx)("li",{children:"\u2705 Grant camera permissions in browser settings"}),(0,rg.jsx)("li",{children:"\u2705 Use HTTPS connection (required for camera)"}),(0,rg.jsx)("li",{children:"\u2705 Close other apps using camera"}),(0,rg.jsx)("li",{children:"\u2705 Try a different browser (Chrome/Safari recommended)"}),(0,rg.jsx)("li",{children:"\u2705 Use manual entry below as alternative"})]})]}),(0,rg.jsx)("button",{onClick:N,className:"retry-btn",children:"Try Again"})]}),h&&(0,rg.jsxs)("div",{className:"camera-active",children:[(0,rg.jsxs)("div",{className:"video-container",children:[(0,rg.jsx)("video",{ref:_,className:"scanner-video",playsInline:!0,muted:!0}),(0,rg.jsxs)("div",{className:"scan-overlay",children:[(0,rg.jsx)("div",{className:"scan-frame"}),m&&(0,rg.jsxs)("div",{className:"scan-success-overlay",children:[(0,rg.jsx)(by,{size:48,color:"#10b981"}),(0,rg.jsx)("p",{children:"Product Added!"})]})]})]}),(0,rg.jsx)("div",{className:"camera-controls",children:(0,rg.jsxs)("button",{onClick:T,className:"stop-camera-btn",children:[(0,rg.jsx)(Km,{size:16}),"Stop Camera"]})}),(0,rg.jsx)("div",{className:"scanning-tips",children:(0,rg.jsx)("p",{children:"\ud83d\udcf1 Hold steady \u2022 \ud83d\udca1 Good lighting \u2022 \ud83c\udfaf Center code in frame \u2022 \u2705 Scan multiple products"})})]})]}),(0,rg.jsxs)("div",{className:"manual-entry-section",children:[(0,rg.jsxs)("div",{className:"section-header",children:[(0,rg.jsx)(Xy,{size:20}),(0,rg.jsx)("h4",{children:"Manual Entry"})]}),!A&&(0,rg.jsxs)("div",{className:"manual-disabled",children:[(0,rg.jsx)(_y,{size:24}),(0,rg.jsx)("p",{children:"Manual code entry has been disabled by your administrator."}),(0,rg.jsx)("p",{children:"Please use the camera scanner above."})]}),A&&(0,rg.jsxs)(rg.Fragment,{children:[(0,rg.jsxs)("div",{className:"input-group",children:[(0,rg.jsx)("input",{ref:b,type:"text",value:a,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"!==e.key||c||R()},placeholder:"Type ".concat(E&&S?"QR code, barcode, or product code":E?"QR code or product code":"barcode or product code","..."),className:"main-input",disabled:c}),(0,rg.jsx)("button",{onClick:R,className:"submit-btn",disabled:!a.trim()||c,children:c?(0,rg.jsxs)(rg.Fragment,{children:[(0,rg.jsx)("div",{className:"spinner"}),"Adding..."]}):(0,rg.jsxs)(rg.Fragment,{children:[(0,rg.jsx)(by,{size:16}),"Add Product"]})})]}),(0,rg.jsxs)("div",{className:"input-tips",children:[E&&(0,rg.jsxs)("div",{className:"tip-row",children:[(0,rg.jsx)("span",{className:"tip-icon",children:"\ud83d\udd22"}),(0,rg.jsx)("span",{children:"QR code data (e.g., RICE001, MILK001)"})]}),S&&(0,rg.jsxs)("div",{className:"tip-row",children:[(0,rg.jsx)("span",{className:"tip-icon",children:"\ud83d\udcca"}),(0,rg.jsx)("span",{children:"Barcode (e.g., RICE001, MILK001)"})]}),(0,rg.jsxs)("div",{className:"tip-row",children:[(0,rg.jsx)("span",{className:"tip-icon",children:"\ud83c\udff7\ufe0f"}),(0,rg.jsx)("span",{children:"Product codes (e.g., RICE001, MILK001)"})]}),(0,rg.jsxs)("div",{className:"tip-row",children:[(0,rg.jsx)("span",{className:"tip-icon",children:"\ud83d\udd0d"}),(0,rg.jsx)("span",{children:'Product names (e.g., "rice", "milk")'})]})]})]})]}),u.length>0&&(0,rg.jsxs)("div",{className:"recent-scans-section",children:[(0,rg.jsx)("h4",{children:"Recent Scans"}),(0,rg.jsx)("div",{className:"recent-scans-list",children:u.map((e,t)=>(0,rg.jsxs)("button",{className:"recent-scan-btn",onClick:()=>(e=>{var t;s(e),null===(t=b.current)||void 0===t||t.focus()})(e),disabled:c,children:[(0,rg.jsx)(Ky,{size:14}),(0,rg.jsx)("span",{children:e})]},"".concat(e,"-").concat(t)))})]}),(0,rg.jsxs)("div",{className:"help-section",children:[(0,rg.jsx)("h4",{children:"Troubleshooting"}),(0,rg.jsxs)("div",{className:"help-grid",children:[(0,rg.jsxs)("div",{className:"help-item",children:[(0,rg.jsx)(by,{size:16}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("strong",{children:"Product not found?"}),(0,rg.jsx)("p",{children:"Make sure QR codes are generated for your products. Go to Admin Dashboard \u2192 Manage Barcodes \u2192 Generate QR Codes."})]})]}),(0,rg.jsxs)("div",{className:"help-item",children:[(0,rg.jsx)(by,{size:16}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("strong",{children:"Camera not working?"}),(0,rg.jsx)("p",{children:"Ensure you're using HTTPS and have granted camera permissions. Use manual entry as a reliable alternative."})]})]}),(0,rg.jsxs)("div",{className:"help-item",children:[(0,rg.jsx)(by,{size:16}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("strong",{children:"Why ZXing Scanner?"}),(0,rg.jsx)("p",{children:"More reliable QR code detection, works with various code formats, and better mobile compatibility."})]})]})]})]})]})]})}):null},SI=t=>{let{cart:n,inventory:r,updateQty:o,removeItem:i,clearCart:a,addToCart:c}=t;const{currentUser:l}=ig(),u=Mg(null===l||void 0===l?void 0:l.email),d=Lg(null===l||void 0===l?void 0:l.email),[h,f]=(0,e.useState)(!1),[p,g]=(0,e.useState)(""),[m,y]=(0,e.useState)(0),[v,w]=(0,e.useState)("Cash"),[b,_]=(0,e.useState)(!1),[C,E]=(0,e.useState)(!1),[S,A]=(0,e.useState)(null),[I,x]=(0,e.useState)({taxRate:18,currency:"INR",currencySymbol:"\u20b9"});(0,e.useEffect)(()=>{(async()=>{if(u)try{const e=await Sy(u);x(e)}catch(e){console.error("Error loading store settings:",e)}})()},[u]);const N=n.reduce((e,t)=>e+t.price*t.qty,0),T=N*m/100,k=Ny(N,I.taxRate,T),{taxAmount:O,total:R}=k,P=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||p;if(!e.trim())return void alert("Please enter a product code");console.log("\ud83d\udd0d Searching for code:",e),console.log("\ud83d\udce6 Total inventory items:",r.length),r.length>0&&console.log("\ud83d\udccb Sample product structure:",{name:r[0].name,qrcode:r[0].qrcode,barcode:r[0].barcode,code:r[0].code,id:r[0].id});const t=r.find(t=>t.qrcode===e.trim()||t.barcode===e.trim()||t.code===e.trim().toUpperCase()||t.id.toLowerCase()===e.toLowerCase()||t.name.toLowerCase().includes(e.toLowerCase()));t?t.stock>0?(c(t),g(""),console.log("\u2705 Product added to cart:",t.name)):alert("Product is out of stock!"):(console.log("\u274c Product not found for code:",e),console.log("\ud83d\udca1 Tip: Make sure to generate QR codes for your products first!"),alert("Product not found! Please check the QR code, barcode, or product code.\n\nSearched for: ".concat(e,"\n\nTip: Generate QR codes from Admin Dashboard \u2192 Manage Barcodes")))},j=()=>{E(!1),A(null)};return(0,rg.jsxs)("div",{className:"billing-container",children:[(0,rg.jsx)("div",{className:"scanner-section",children:(0,rg.jsxs)("div",{className:"scanner-card",children:[(0,rg.jsxs)("div",{className:"scanner-header",children:[(0,rg.jsx)(Wy,{size:20}),(0,rg.jsx)("h2",{children:"Product Scanner (Demo)"})]}),(0,rg.jsxs)("div",{className:"scanner-info",children:[(0,rg.jsx)(_y,{size:16}),(0,rg.jsx)("p",{children:"Camera scanner shows video feed but may have detection issues. Use manual entry below for reliable barcode input, or try scanning with better lighting and positioning."})]}),(0,rg.jsxs)("div",{className:"camera-section",children:[(0,rg.jsx)("h3",{children:"Camera Scanner"}),(0,rg.jsx)("div",{className:"camera-preview",children:(0,rg.jsxs)("div",{className:"camera-placeholder",children:[(0,rg.jsx)(Wy,{size:48}),(0,rg.jsx)("p",{children:"Camera will appear here"})]})}),(0,rg.jsx)("button",{className:"scanner-btn ".concat(b?"active":"inactive"),onClick:()=>{_(!b)},disabled:h,children:b?"Close Scanner":"Open Scanner"})]}),(0,rg.jsxs)("div",{className:"manual-entry",children:[(0,rg.jsx)("h3",{children:"\ud83d\udd0d Barcode / Product Search"}),(0,rg.jsx)("p",{children:"Enter barcode number, product code, product ID, or product name:"}),(0,rg.jsx)("div",{className:"input-container",children:(0,rg.jsx)("input",{type:"text",placeholder:"Enter: 78011234567 (barcode) or RICE001 (code) or Rice (name)",value:p,onChange:e=>g(e.target.value),onKeyDown:e=>"Enter"===e.key&&P(),disabled:h,className:"product-code-input"})}),(0,rg.jsx)("button",{className:"fetch-btn",onClick:P,disabled:h,style:{padding:"12px 20px",fontSize:"16px"},children:"\ud83d\udd0d Find & Add Product"}),(0,rg.jsx)("div",{className:"search-help",children:(0,rg.jsxs)("small",{children:["\ud83d\udca1 ",(0,rg.jsx)("strong",{children:"Tip:"})," You can search by barcode (78011234567), product code (RICE001), product ID, or product name (Rice)"]})})]}),(0,rg.jsxs)("div",{className:"product-list-section",children:[(0,rg.jsxs)("div",{className:"list-header",children:[(0,rg.jsx)(Cg,{size:20}),(0,rg.jsx)("h3",{children:"Or Select from List"})]}),(0,rg.jsx)("div",{className:"product-selector",children:(0,rg.jsxs)("select",{onChange:e=>{const t=r.find(t=>t.id===e.target.value);t&&t.stock>0&&c(t)},disabled:h,className:"product-select",children:[(0,rg.jsx)("option",{value:"",children:"Select Product"}),r.map(e=>(0,rg.jsxs)("option",{value:e.id,disabled:0===e.stock,children:[e.name," - \u20b9",e.price," ",0===e.stock?"(Out of Stock)":"(".concat(e.stock," available)")]},e.id))]})})]})]})}),(0,rg.jsxs)("div",{className:"bill-summary-section",children:[(0,rg.jsxs)("div",{className:"bill-summary-card",children:[(0,rg.jsxs)("div",{className:"bill-header",children:[(0,rg.jsx)(_g,{size:20}),(0,rg.jsx)("h2",{children:"Bill Summary"})]}),(0,rg.jsxs)("div",{className:"bill-details",children:[(0,rg.jsxs)("div",{className:"bill-row",children:[(0,rg.jsx)("span",{children:"Subtotal:"}),(0,rg.jsx)("span",{children:Ty(N,I.currency,I.currencySymbol)})]}),(0,rg.jsxs)("div",{className:"bill-row",children:[(0,rg.jsxs)("span",{children:[Oy(I.currency)," (",I.taxRate,"%):"]}),(0,rg.jsx)("span",{children:Ty(O,I.currency,I.currencySymbol)})]}),(0,rg.jsxs)("div",{className:"discount-section",children:[(0,rg.jsx)("label",{children:"Discount (%)"}),(0,rg.jsx)("input",{type:"number",min:"0",max:"100",value:m,onChange:e=>y(Math.max(0,Math.min(100,parseFloat(e.target.value)||0))),disabled:h,className:"discount-input"})]}),(0,rg.jsxs)("div",{className:"bill-row total-row",children:[(0,rg.jsx)("span",{children:"Total:"}),(0,rg.jsx)("span",{children:Ty(R,I.currency,I.currencySymbol)})]}),(0,rg.jsxs)("div",{className:"payment-section",children:[(0,rg.jsx)("label",{children:"Payment Mode"}),(0,rg.jsxs)("select",{value:v,onChange:e=>w(e.target.value),disabled:h,className:"payment-select",children:[(0,rg.jsx)("option",{value:"Cash",children:"Cash"}),(0,rg.jsx)("option",{value:"Card",children:"Card"}),(0,rg.jsx)("option",{value:"UPI",children:"UPI"}),(0,rg.jsx)("option",{value:"Net Banking",children:"Net Banking"})]})]}),(0,rg.jsx)("button",{className:"complete-checkout-btn",onClick:async()=>{if(0!==n.length){f(!0);try{const e={items:n.map(e=>({id:e.id,name:e.name,price:e.price,qty:e.qty,total:e.price*e.qty})),subtotal:N,taxRate:I.taxRate,taxAmount:O,discount:T,total:R,paymentMode:v,itemCount:n.reduce((e,t)=>e+t.qty,0),timestamp:Date.now(),storeId:u,storeName:d,cashierEmail:null===l||void 0===l?void 0:l.email,currency:I.currency,currencySymbol:I.currencySymbol},t=await Xg(e),o=n.map(e=>{const t=r.find(t=>t.id===e.id);return{id:e.id,newStock:t.stock-e.qty}});await(async e=>{try{const t=e.map(async e=>{const t=Bf(tg,"inventory",e.id);await Xp(t,{stock:e.newStock,updatedAt:Jp()})});await Promise.all(t)}catch(t){throw console.error("Error updating stock:",t),t}})(o),A(s(s({},e),{},{billNumber:t})),a(),y(0),E(!0)}catch(e){console.error("Error processing sale:",e),alert("Error processing sale. Please try again.")}finally{f(!1)}}else alert("Cart is empty!")},disabled:0===n.length||h,children:h?"Processing...":"Complete Checkout"})]})]}),n.length>0&&(0,rg.jsxs)("div",{className:"cart-items",children:[(0,rg.jsxs)("h3",{children:["Cart Items (",n.reduce((e,t)=>e+t.qty,0),")"]}),(0,rg.jsx)("div",{className:"cart-list",children:n.map(e=>{const t=r.find(t=>t.id===e.id),n=(e=>{const t=r.find(t=>t.id===e.id);return t?t.stock<e.qty?"Insufficient stock!":t.stock-e.qty<5?"Low stock after sale":null:null})(e);return(0,rg.jsxs)("div",{className:"cart-item ".concat(n?"stock-warning":""),children:[(0,rg.jsxs)("div",{className:"item-info",children:[(0,rg.jsx)("span",{className:"item-name",children:e.name}),(0,rg.jsxs)("span",{className:"item-price",children:["\u20b9",e.price.toFixed(2)," x ",e.qty]}),n&&(0,rg.jsxs)("div",{className:"warning-text",children:[(0,rg.jsx)(_y,{size:12}),n]})]}),(0,rg.jsxs)("div",{className:"item-controls",children:[(0,rg.jsx)("input",{type:"number",className:"qty-input",value:e.qty,min:"1",max:(null===t||void 0===t?void 0:t.stock)||999,onChange:t=>o(e.id,t.target.value),disabled:h}),(0,rg.jsxs)("span",{className:"item-total",children:["\u20b9",(e.price*e.qty).toFixed(2)]}),(0,rg.jsx)("button",{className:"remove-btn",onClick:()=>i(e.id),disabled:h,children:(0,rg.jsx)(Wm,{size:14})})]})]},e.id)})}),(0,rg.jsx)("button",{className:"clear-cart-btn",onClick:a,disabled:h,children:"Clear All Items"})]})]}),C&&S&&(0,rg.jsx)("div",{className:"bill-actions-overlay",children:(0,rg.jsxs)("div",{className:"bill-actions-modal",children:[(0,rg.jsxs)("div",{className:"bill-actions-header",children:[(0,rg.jsx)(_g,{size:24}),(0,rg.jsx)("h3",{children:"Bill Processed Successfully!"}),(0,rg.jsx)("button",{className:"close-btn",onClick:j,children:(0,rg.jsx)(Km,{size:20})})]}),(0,rg.jsx)("div",{className:"bill-summary",children:(0,rg.jsxs)("div",{className:"success-message",children:[(0,rg.jsx)("div",{className:"success-icon",children:"\u2713"}),(0,rg.jsxs)("div",{className:"success-details",children:[(0,rg.jsx)("p",{children:(0,rg.jsxs)("strong",{children:["Bill Number: ",S.billNumber]})}),(0,rg.jsx)("p",{children:(0,rg.jsxs)("strong",{children:["Total Amount: \u20b9",S.total.toFixed(2)]})}),(0,rg.jsxs)("p",{children:["Payment Mode: ",S.paymentMode]}),(0,rg.jsxs)("p",{children:["Items: ",S.itemCount]})]})]})}),(0,rg.jsxs)("div",{className:"bill-actions",children:[(0,rg.jsx)("h4",{children:"Choose an action:"}),(0,rg.jsxs)("div",{className:"action-buttons",children:[(0,rg.jsxs)("button",{className:"action-btn print-btn",onClick:()=>{S&&My(S,I)},children:[(0,rg.jsx)(qy,{size:20}),"Print Bill"]}),(0,rg.jsxs)("button",{className:"action-btn download-btn",onClick:()=>{S&&function(e){const t=Dy(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n=new Date(e.timestamp||Date.now()),r=e.billNumber||"BILL-".concat(n.getTime().toString().slice(-8)),o=new Blob([t],{type:"text/html"}),i=URL.createObjectURL(o),a=document.createElement("a");a.href=i,a.download="".concat(r,"_").concat(n.toISOString().split("T")[0],".html"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}(S,I)},children:[(0,rg.jsx)(jy,{size:20}),"Download HTML"]}),(0,rg.jsxs)("button",{className:"action-btn pdf-btn",onClick:()=>{S&&async function(e){const t=Dy(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n=window.open("","_blank","width=400,height=600");n?(n.document.write(t),n.document.close(),n.onload=()=>{n.focus(),alert('Use Ctrl+P or Cmd+P and select "Save as PDF" to download as PDF'),n.print()}):alert("Please allow popups to save as PDF")}(S,I)},children:[(0,rg.jsx)(vy,{size:20}),"Save as PDF"]})]}),(0,rg.jsxs)("div",{className:"action-info",children:[(0,rg.jsxs)("p",{children:[(0,rg.jsx)("strong",{children:"Print Bill:"})," Opens print dialog for immediate printing"]}),(0,rg.jsxs)("p",{children:[(0,rg.jsx)("strong",{children:"Download HTML:"})," Downloads bill as HTML file"]}),(0,rg.jsxs)("p",{children:[(0,rg.jsx)("strong",{children:"Save as PDF:"}),' Opens print dialog - select "Save as PDF"']})]}),(0,rg.jsx)("button",{className:"continue-btn",onClick:j,children:"Continue Shopping"})]})]})}),(0,rg.jsx)(EI,{isActive:b,storeSettings:I,onScan:e=>{console.log("QR Code scanned in BillingTable:",e),P(e)},onClose:()=>_(!1)})]})},AI=t=>{let{inventory:n,addToCart:r,readOnly:o=!1}=t;const[i,a]=(0,e.useState)(""),s=n.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.code&&e.code.toLowerCase().includes(i.toLowerCase())),c=e=>0===e?"out-of-stock":e<10?"low-stock":"in-stock";return(0,rg.jsxs)("aside",{className:"inventory-sidebar ".concat(o?"read-only":""),children:[(0,rg.jsxs)("div",{className:"sidebar-header",children:[(0,rg.jsxs)("h3",{children:["Inventory (",n.length," items)"]}),(0,rg.jsxs)("div",{className:"stock-summary",children:[(0,rg.jsxs)("span",{className:"stock-stat",children:[(0,rg.jsx)("div",{className:"stat-dot out"}),"Out: ",n.filter(e=>0===e.stock).length]}),(0,rg.jsxs)("span",{className:"stock-stat",children:[(0,rg.jsx)("div",{className:"stat-dot low"}),"Low: ",n.filter(e=>e.stock>0&&e.stock<10).length]})]})]}),(0,rg.jsxs)("div",{className:"search-container",children:[(0,rg.jsx)(By,{className:"search-icon",size:18}),(0,rg.jsx)("input",{type:"text",placeholder:o?"Search products or codes...":"Search products...",value:i,onChange:e=>a(e.target.value)})]}),(0,rg.jsx)("div",{className:"product-list",children:0===s.length?(0,rg.jsxs)("div",{className:"no-products",children:[(0,rg.jsx)(Cg,{size:48}),(0,rg.jsx)("p",{children:"No products found"})]}):s.map(e=>{return(0,rg.jsxs)("div",{className:"product-item ".concat(c(e.stock)," ").concat(o?"read-only":""),onClick:o?void 0:()=>r(e),style:o?{cursor:"default"}:{},children:[(0,rg.jsxs)("div",{className:"product-info",children:[(0,rg.jsxs)("div",{className:"product-header",children:[(0,rg.jsx)("strong",{children:e.name}),(t=e.stock,0===t?(0,rg.jsx)(xg,{size:16,className:"stock-icon out"}):t<10?(0,rg.jsx)(xg,{size:16,className:"stock-icon low"}):(0,rg.jsx)(Cg,{size:16,className:"stock-icon good"}))]}),(0,rg.jsxs)("div",{className:"product-details",children:[e.code&&(0,rg.jsxs)("span",{className:"product-code",children:["Code: ",e.code]}),(0,rg.jsxs)("span",{className:"price",children:["\u20b9",e.price.toFixed(2)]}),(0,rg.jsxs)("span",{className:"stock ".concat(c(e.stock)),children:["Stock: ",e.stock]})]})]}),!o&&(0,rg.jsx)(vm,{className:"plus-icon ".concat(0===e.stock?"disabled":""),size:18})]},e.id);var t})})]})},II=fg("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),xI=t=>{let{inventory:n,onClose:r}=t;const{currentUser:o}=ig(),i=Mg(null===o||void 0===o?void 0:o.email),a=Lg(null===o||void 0===o?void 0:o.email),[c,l]=(0,e.useState)("inventory"),[u,d]=(0,e.useState)(null),[h,f]=(0,e.useState)({name:"",price:"",stock:"",code:""}),[p,g]=(0,e.useState)([]),[m,y]=(0,e.useState)([]),[v,w]=(0,e.useState)(!1);(0,e.useEffect)(()=>{"sales"===c&&b()},[c]);const b=async()=>{w(!0);try{const e=await Kg(20);y(e)}catch(e){console.error("Error loading sales:",e)}finally{w(!1)}},_=async(e,t)=>{try{await qg(e,t),d(null),alert("Product updated successfully!")}catch(n){alert("Error updating product")}},C=async e=>{if(window.confirm("Are you sure you want to delete this product?"))try{await(async e=>{try{const t=Bf(tg,"inventory",e);await Kp(t)}catch(t){throw console.error("Error deleting product:",t),t}})(e),alert("Product deleted successfully!")}catch(t){alert("Error deleting product")}};return(0,rg.jsx)("div",{className:"admin-overlay",children:(0,rg.jsxs)("div",{className:"admin-panel",children:[(0,rg.jsxs)("div",{className:"admin-header",children:[(0,rg.jsx)("h2",{children:"Admin Panel"}),(0,rg.jsx)("button",{className:"btn-close",onClick:r,children:(0,rg.jsx)(Km,{size:20})})]}),(0,rg.jsxs)("div",{className:"admin-tabs",children:[(0,rg.jsx)("button",{className:"inventory"===c?"active":"",onClick:()=>l("inventory"),children:"Inventory Management"}),(0,rg.jsx)("button",{className:"sales"===c?"active":"",onClick:()=>l("sales"),children:"Sales History"})]}),"inventory"===c&&(0,rg.jsxs)("div",{className:"admin-content",children:[(0,rg.jsxs)("div",{className:"add-product-form",children:[(0,rg.jsx)("h3",{children:"Add New Product"}),(0,rg.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),h.name&&h.price&&h.stock)try{const e=h.code||Om(h.name,n);await Wg({name:h.name,price:parseFloat(h.price),stock:parseInt(h.stock),code:e,storeId:i,storeName:a}),f({name:"",price:"",stock:"",code:""}),g([]),alert("Product added successfully to ".concat(a," with code: ").concat(e))}catch(t){console.error("Error adding product:",t),alert("Error adding product")}else alert("Please fill all fields")},children:[(0,rg.jsxs)("div",{className:"form-row",children:[(0,rg.jsx)("input",{type:"text",placeholder:"Product name (e.g., Basmati Rice 1kg)",value:h.name,onChange:e=>(e=>{if(f(s(s({},h),{},{name:e})),e.trim().length>2){const t=Pm(e,3);g(t),h.code||f(n=>s(s({},n),{},{name:e,code:t[0]}))}else g([])})(e.target.value)}),(0,rg.jsx)("input",{type:"number",step:"0.01",placeholder:"Price",value:h.price,onChange:e=>f(s(s({},h),{},{price:e.target.value}))}),(0,rg.jsx)("input",{type:"number",placeholder:"Stock quantity",value:h.stock,onChange:e=>f(s(s({},h),{},{stock:e.target.value}))})]}),(0,rg.jsxs)("div",{className:"product-code-section",children:[(0,rg.jsxs)("div",{className:"code-input-group",children:[(0,rg.jsx)("input",{type:"text",placeholder:"Product code (auto-generated)",value:h.code,onChange:e=>f(s(s({},h),{},{code:e.target.value.toUpperCase()})),className:"code-input"}),(0,rg.jsx)("button",{type:"button",className:"btn-generate-code",onClick:()=>{if(h.name.trim()){const e=Om(h.name,n);f(s(s({},h),{},{code:e}))}},title:"Generate new code",children:(0,rg.jsx)(wy,{size:16})})]}),p.length>0&&(0,rg.jsxs)("div",{className:"code-suggestions",children:[(0,rg.jsx)("span",{className:"suggestions-label",children:"Suggestions:"}),p.map((e,t)=>(0,rg.jsx)("button",{type:"button",className:"suggestion-btn ".concat(h.code===e?"active":""),onClick:()=>f(s(s({},h),{},{code:e})),children:e},t))]})]}),(0,rg.jsxs)("button",{type:"submit",className:"btn-add",children:[(0,rg.jsx)(vm,{size:16})," Add Product"]})]})]}),(0,rg.jsxs)("div",{className:"inventory-table",children:[(0,rg.jsxs)("h3",{children:["Current Inventory (",n.length," items)"]}),(0,rg.jsxs)("table",{children:[(0,rg.jsx)("thead",{children:(0,rg.jsxs)("tr",{children:[(0,rg.jsx)("th",{children:"Product Code"}),(0,rg.jsx)("th",{children:"Name"}),(0,rg.jsx)("th",{children:"Price"}),(0,rg.jsx)("th",{children:"Stock"}),(0,rg.jsx)("th",{children:"Status"}),(0,rg.jsx)("th",{children:"Actions"})]})}),(0,rg.jsx)("tbody",{children:n.map(e=>(0,rg.jsxs)("tr",{children:[(0,rg.jsx)("td",{children:(0,rg.jsx)("span",{className:"product-code",children:e.code||e.id||"N/A"})}),(0,rg.jsx)("td",{children:u===e.id?(0,rg.jsx)("input",{type:"text",defaultValue:e.name,onBlur:t=>_(e.id,{name:t.target.value})}):e.name}),(0,rg.jsx)("td",{children:u===e.id?(0,rg.jsx)("input",{type:"number",step:"0.01",defaultValue:e.price,onBlur:t=>_(e.id,{price:parseFloat(t.target.value)})}):"\u20b9".concat((e.price||0).toFixed(2))}),(0,rg.jsx)("td",{children:u===e.id?(0,rg.jsx)("input",{type:"number",defaultValue:e.stock,onBlur:t=>_(e.id,{stock:parseInt(t.target.value)})}):e.stock}),(0,rg.jsx)("td",{children:(0,rg.jsx)("span",{className:"status ".concat(0===e.stock?"out":e.stock<10?"low":"good"),children:0===e.stock?"Out of Stock":e.stock<10?"Low Stock":"In Stock"})}),(0,rg.jsxs)("td",{children:[(0,rg.jsx)("button",{className:"btn-edit",onClick:()=>d(u===e.id?null:e.id),children:u===e.id?(0,rg.jsx)(Ym,{size:14}):(0,rg.jsx)(II,{size:14})}),(0,rg.jsx)("button",{className:"btn-delete",onClick:()=>C(e.id),children:(0,rg.jsx)(Wm,{size:14})})]})]},e.id))})]})]})]}),"sales"===c&&(0,rg.jsx)("div",{className:"admin-content",children:(0,rg.jsxs)("div",{className:"sales-summary",children:[(0,rg.jsx)("h3",{children:"Recent Sales"}),v?(0,rg.jsx)("p",{children:"Loading sales data..."}):(0,rg.jsx)("div",{className:"sales-list",children:m.map(e=>{return(0,rg.jsxs)("div",{className:"sale-item",children:[(0,rg.jsxs)("div",{className:"sale-header",children:[(0,rg.jsxs)("span",{className:"sale-total",children:["\u20b9",(e.total||0).toFixed(2)]}),(0,rg.jsx)("span",{className:"sale-date",children:(t=e.timestamp,t?new Date(1e3*t.seconds).toLocaleString():"N/A")})]}),(0,rg.jsxs)("div",{className:"sale-details",children:[(0,rg.jsxs)("p",{children:[e.itemCount," items \u2022 Tax: \u20b9",(e.tax||e.gst||0).toFixed(2)]}),(0,rg.jsx)("div",{className:"sale-items",children:e.items.map((e,t)=>(0,rg.jsxs)("span",{className:"sale-item-tag",children:[e.name," x",e.qty]},t))})]})]},e.id);var t})})]})})]})})},NI=fg("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),TI=t=>{let{barcode:r,productName:o,size:i="medium",showControls:a=!0,className:s=""}=t;const c=(0,e.useRef)(null);(0,e.useEffect)(()=>{if(r&&c.current){const t={format:"CODE128",width:"small"===i?2:"large"===i?4:3,height:"small"===i?60:"large"===i?140:100,displayValue:!0,fontSize:"small"===i?12:"large"===i?16:14,textMargin:5,margin:"small"===i?10:15,background:"#ffffff",lineColor:"#000000",textAlign:"center",textPosition:"bottom"};try{n(9298)(c.current,r,t)}catch(e){console.error("Error generating barcode:",e)}}},[r,i]);return r?(0,rg.jsxs)("div",{className:"barcode-display ".concat(s),children:[(0,rg.jsxs)("div",{className:"barcode-container",children:[(0,rg.jsx)("canvas",{ref:c,className:"barcode-canvas"}),o&&(0,rg.jsx)("div",{className:"product-label",children:o})]}),a&&(0,rg.jsxs)("div",{className:"barcode-controls",children:[(0,rg.jsx)("button",{className:"barcode-btn copy-btn",onClick:async()=>{try{await navigator.clipboard.writeText(r),alert("Barcode copied to clipboard!")}catch(e){console.error("Failed to copy barcode:",e),alert("Failed to copy barcode")}},title:"Copy barcode number",children:(0,rg.jsx)(NI,{size:14})}),(0,rg.jsx)("button",{className:"barcode-btn download-btn",onClick:()=>{if(c.current){const e=document.createElement("a");e.download="barcode_".concat(o||r,".png"),e.href=c.current.toDataURL(),e.click()}},title:"Download barcode image",children:(0,rg.jsx)(jy,{size:14})}),(0,rg.jsx)("button",{className:"barcode-btn view-btn",onClick:()=>{if(c.current){const e=c.current.toDataURL(),t=window.open("","_blank");if(t){const n="\n          <html>\n            <head>\n              <title>Barcode - ".concat(o||r,'</title>\n              <style>\n                body {\n                  margin: 0;\n                  padding: 20px;\n                  display: flex;\n                  flex-direction: column;\n                  align-items: center;\n                  font-family: Arial, sans-serif;\n                  background: #f5f5f5;\n                }\n                .barcode-container {\n                  background: white;\n                  padding: 30px;\n                  border-radius: 10px;\n                  box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n                  text-align: center;\n                }\n                .product-name {\n                  font-size: 18px;\n                  font-weight: bold;\n                  margin-bottom: 10px;\n                  color: #333;\n                }\n                .barcode-number {\n                  font-family: monospace;\n                  font-size: 16px;\n                  color: #666;\n                  margin-top: 10px;\n                }\n                img {\n                  max-width: 100%;\n                  height: auto;\n                }\n              </style>\n            </head>\n            <body>\n              <div class="barcode-container">\n                ').concat(o?'<div class="product-name">'.concat(o,"</div>"):"",'\n                <img src="').concat(e,'" alt="Barcode" />\n                <div class="barcode-number">').concat(r,"</div>\n              </div>\n            </body>\n          </html>\n        ");t.document.open(),t.document.write(n),t.document.close()}}},title:"View large barcode",children:(0,rg.jsx)(vg,{size:14})})]})]}):(0,rg.jsx)("div",{className:"barcode-placeholder ".concat(s),children:(0,rg.jsx)("div",{className:"no-barcode",children:(0,rg.jsx)("span",{children:"No barcode generated"})})})},kI=t=>{let{qrcode:n,productName:r,size:o="medium",showControls:i=!0}=t;const[a,s]=(0,e.useState)(null),[c,l]=(0,e.useState)(!1);(0,e.useEffect)(()=>{(async()=>{if(n){const e={small:100,medium:200,large:300},t=await Sm(n,{width:e[o]||200});s(t)}})()},[n,o]);return n&&a?(0,rg.jsxs)("div",{className:"qrcode-display ".concat(o),children:[(0,rg.jsx)("div",{className:"qrcode-image-container",children:(0,rg.jsx)("img",{src:a,alt:"QR Code for ".concat(r||n)})}),r&&(0,rg.jsx)("div",{className:"qrcode-product-name",children:r}),(0,rg.jsx)("div",{className:"qrcode-value",children:n}),i&&(0,rg.jsxs)("div",{className:"qrcode-controls",children:[(0,rg.jsxs)("button",{onClick:async()=>{try{await navigator.clipboard.writeText(n),l(!0),setTimeout(()=>l(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},className:"control-btn",title:"Copy QR Code",children:[c?(0,rg.jsx)(by,{size:16}):(0,rg.jsx)(NI,{size:16}),c?"Copied!":"Copy"]}),(0,rg.jsxs)("button",{onClick:()=>{if(!a)return;const e=document.createElement("a");e.href=a,e.download="qrcode_".concat(r||n,".png"),document.body.appendChild(e),e.click(),document.body.removeChild(e)},className:"control-btn",title:"Download QR Code",children:[(0,rg.jsx)(jy,{size:16}),"Download"]})]})]}):(0,rg.jsx)("div",{className:"qrcode-placeholder",children:"No QR Code"})},OI=t=>{let{inventory:n,onClose:r}=t;const[o,i]=(0,e.useState)(""),[a,s]=(0,e.useState)("all"),[c,l]=(0,e.useState)(!1),[u,d]=(0,e.useState)([]),[h,f]=(0,e.useState)(!1),[p,g]=(0,e.useState)(null),m=n.filter(e=>{const t=e.name.toLowerCase().includes(o.toLowerCase()),n="all"===a||"with-barcode"===a&&e.barcode||"without-barcode"===a&&!e.barcode||"with-qrcode"===a&&e.qrcode||"without-qrcode"===a&&!e.qrcode;return t&&n}),y={total:n.length,withBarcode:n.filter(e=>e.barcode).length,withoutBarcode:n.filter(e=>!e.barcode).length,withQRCode:n.filter(e=>e.qrcode).length,withoutQRCode:n.filter(e=>!e.qrcode).length,withBoth:n.filter(e=>e.barcode&&e.qrcode).length,selected:u.length};return(0,rg.jsx)("div",{className:"barcode-manager-overlay",children:(0,rg.jsxs)("div",{className:"barcode-manager",children:[(0,rg.jsxs)("div",{className:"manager-header",children:[(0,rg.jsxs)("div",{className:"header-left",children:[(0,rg.jsx)(Sg,{size:24}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("h2",{children:"Barcode & QR Code Management"}),(0,rg.jsx)("p",{children:"Generate and manage product barcodes and QR codes"})]})]}),(0,rg.jsx)("button",{className:"close-btn",onClick:r,children:(0,rg.jsx)(Km,{size:20})})]}),(0,rg.jsxs)("div",{className:"barcode-stats",children:[(0,rg.jsxs)("div",{className:"stat-card",children:[(0,rg.jsx)(Cg,{size:20}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("span",{className:"stat-number",children:y.total}),(0,rg.jsx)("span",{className:"stat-label",children:"Total Products"})]})]}),(0,rg.jsxs)("div",{className:"stat-card success",children:[(0,rg.jsx)(by,{size:20}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("span",{className:"stat-number",children:y.withBarcode}),(0,rg.jsx)("span",{className:"stat-label",children:"With Barcode"})]})]}),(0,rg.jsxs)("div",{className:"stat-card success",children:[(0,rg.jsx)(Ag,{size:20}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("span",{className:"stat-number",children:y.withQRCode}),(0,rg.jsx)("span",{className:"stat-label",children:"With QR Code"})]})]}),(0,rg.jsxs)("div",{className:"stat-card info",children:[(0,rg.jsx)(by,{size:20}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("span",{className:"stat-number",children:y.withBoth}),(0,rg.jsx)("span",{className:"stat-label",children:"With Both"})]})]}),(0,rg.jsxs)("div",{className:"stat-card warning",children:[(0,rg.jsx)(_y,{size:20}),(0,rg.jsxs)("div",{children:[(0,rg.jsx)("span",{className:"stat-number",children:y.selected}),(0,rg.jsx)("span",{className:"stat-label",children:"Selected"})]})]})]}),(0,rg.jsxs)("div",{className:"manager-controls",children:[(0,rg.jsxs)("div",{className:"search-filter",children:[(0,rg.jsxs)("div",{className:"search-box",children:[(0,rg.jsx)(By,{size:16}),(0,rg.jsx)("input",{type:"text",placeholder:"Search products...",value:o,onChange:e=>i(e.target.value)})]}),(0,rg.jsxs)("div",{className:"filter-box",children:[(0,rg.jsx)(Py,{size:16}),(0,rg.jsxs)("select",{value:a,onChange:e=>s(e.target.value),children:[(0,rg.jsx)("option",{value:"all",children:"All Products"}),(0,rg.jsx)("option",{value:"with-barcode",children:"With Barcode"}),(0,rg.jsx)("option",{value:"without-barcode",children:"Without Barcode"}),(0,rg.jsx)("option",{value:"with-qrcode",children:"With QR Code"}),(0,rg.jsx)("option",{value:"without-qrcode",children:"Without QR Code"})]})]})]}),(0,rg.jsxs)("div",{className:"action-buttons",children:[(0,rg.jsx)("button",{className:"btn-secondary",onClick:()=>{const e=m.filter(e=>!e.barcode||!e.qrcode).map(e=>e.id);d(e)},disabled:0===m.filter(e=>!e.barcode||!e.qrcode).length,children:"Select All Missing"}),(0,rg.jsx)("button",{className:"btn-secondary",onClick:()=>{d([])},disabled:0===u.length,children:"Deselect All"}),(0,rg.jsxs)("button",{className:"btn-primary",onClick:async()=>{if(0===u.length)return void alert("Please select items to generate codes for");if(window.confirm("Generate both barcode and QR code for ".concat(u.length," selected items?"))){l(!0);try{const e=u.map(async e=>{const t=n.find(t=>t.id===e);if(t){const e={},r=t.code;if(t.barcode||(e.barcode=ry(t.name,t.id,n,r)),t.qrcode||(e.qrcode=Am(t.name,t.id,n,t.storeId||"001",r)),Object.keys(e).length>0)return qg(t.id,e)}});await Promise.all(e),alert("Successfully generated codes for ".concat(u.length," items!")),d([])}catch(e){console.error("Error generating bulk codes:",e),alert("Failed to generate some codes")}finally{l(!1)}}},disabled:0===u.length||c,children:[c?(0,rg.jsx)(wy,{size:16,className:"spinning"}):(0,rg.jsx)(Sg,{size:16}),"Generate Both (",u.length,")"]}),(0,rg.jsxs)("button",{className:"btn-export",onClick:()=>{const e=[["Product Name","Barcode","Price","Stock"],...n.filter(e=>e.barcode).map(e=>({name:e.name,barcode:e.barcode,price:e.price,stock:e.stock})).map(e=>[e.name,e.barcode,e.price,e.stock])].map(e=>e.join(",")).join("\n"),t=new Blob([e],{type:"text/csv"}),r=URL.createObjectURL(t),o=document.createElement("a");o.href=r,o.download="barcode_list_".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)},disabled:0===y.withBarcode,children:[(0,rg.jsx)(jy,{size:16}),"Export List"]})]})]}),(0,rg.jsxs)("div",{className:"products-list",children:[(0,rg.jsxs)("div",{className:"list-header",children:[(0,rg.jsx)("span",{children:"Product"}),(0,rg.jsx)("span",{children:"Barcode"}),(0,rg.jsx)("span",{children:"QR Code"}),(0,rg.jsx)("span",{children:"Status"}),(0,rg.jsx)("span",{children:"Actions"})]}),(0,rg.jsx)("div",{className:"list-content",children:m.map(e=>(0,rg.jsxs)("div",{className:"product-row",children:[(0,rg.jsxs)("div",{className:"product-info",children:[(0,rg.jsx)("input",{type:"checkbox",checked:u.includes(e.id),onChange:()=>{return t=e.id,void d(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},disabled:e.barcode&&e.qrcode}),(0,rg.jsxs)("div",{className:"product-details",children:[(0,rg.jsx)("span",{className:"product-name",children:e.name}),(0,rg.jsxs)("span",{className:"product-price",children:["\u20b9",e.price]})]})]}),(0,rg.jsx)("div",{className:"barcode-info",children:e.barcode?(0,rg.jsx)("div",{className:"barcode-display-small",children:(0,rg.jsx)(TI,{barcode:e.barcode,size:"small",showControls:!1})}):(0,rg.jsx)("span",{className:"no-barcode",children:"No barcode"})}),(0,rg.jsx)("div",{className:"qrcode-info",children:e.qrcode?(0,rg.jsxs)("div",{className:"qrcode-display-small",children:[(0,rg.jsx)(Ag,{size:16}),(0,rg.jsx)("span",{className:"qrcode-text",children:e.qrcode})]}):(0,rg.jsx)("span",{className:"no-qrcode",children:"No QR code"})}),(0,rg.jsx)("div",{className:"status-info",children:e.barcode&&e.qrcode?(0,rg.jsxs)("span",{className:"status-badge success",children:[(0,rg.jsx)(by,{size:14}),"Both"]}):e.barcode||e.qrcode?(0,rg.jsxs)("span",{className:"status-badge warning",children:[(0,rg.jsx)(_y,{size:14}),"Partial"]}):(0,rg.jsxs)("span",{className:"status-badge error",children:[(0,rg.jsx)(_y,{size:14}),"Missing"]})}),(0,rg.jsx)("div",{className:"action-buttons",children:e.barcode&&e.qrcode?(0,rg.jsx)("button",{className:"btn-view",onClick:()=>(e=>{g(e),f(!0)})(e),children:"View Both"}):(0,rg.jsxs)(rg.Fragment,{children:[!e.barcode&&(0,rg.jsx)("button",{className:"btn-generate",onClick:()=>(async e=>{l(!0);try{const t=ry(e.name,e.id,n,e.code);await qg(e.id,{barcode:t}),alert("Barcode generated for ".concat(e.name,": ").concat(t))}catch(t){console.error("Error generating barcode:",t),alert("Failed to generate barcode")}finally{l(!1)}})(e),disabled:c,children:"+ Barcode"}),!e.qrcode&&(0,rg.jsx)("button",{className:"btn-generate",onClick:()=>(async e=>{l(!0);try{const t=Am(e.name,e.id,n,e.storeId||"001",e.code);await qg(e.id,{qrcode:t}),alert("QR Code generated for ".concat(e.name,": ").concat(t))}catch(t){console.error("Error generating QR code:",t),alert("Failed to generate QR code")}finally{l(!1)}})(e),disabled:c,children:"+ QR"}),!e.barcode&&!e.qrcode&&(0,rg.jsx)("button",{className:"btn-generate-both",onClick:()=>(async e=>{l(!0);try{const t=e.code,r=ry(e.name,e.id,n,t),o=Am(e.name,e.id,n,e.storeId||"001",t);await qg(e.id,{barcode:r,qrcode:o}),alert("Barcode and QR Code generated for ".concat(e.name,"\nCode: ").concat(r))}catch(t){console.error("Error generating codes:",t),alert("Failed to generate codes")}finally{l(!1)}})(e),disabled:c,children:"+ Both"})]})})]},e.id))})]}),h&&p&&(0,rg.jsx)("div",{className:"barcode-modal-overlay",children:(0,rg.jsxs)("div",{className:"barcode-modal",children:[(0,rg.jsxs)("div",{className:"modal-header",children:[(0,rg.jsx)("h3",{children:p.name}),(0,rg.jsx)("button",{onClick:()=>f(!1),children:(0,rg.jsx)(Km,{size:20})})]}),(0,rg.jsxs)("div",{className:"modal-content",children:[p.barcode&&(0,rg.jsxs)("div",{className:"code-section",children:[(0,rg.jsx)("h4",{children:"Barcode"}),(0,rg.jsx)(TI,{barcode:p.barcode,productName:p.name,size:"large",showControls:!0}),(0,rg.jsx)("p",{className:"code-value",children:p.barcode})]}),p.qrcode&&(0,rg.jsxs)("div",{className:"code-section",children:[(0,rg.jsx)("h4",{children:"QR Code"}),(0,rg.jsx)(kI,{qrcode:p.qrcode,productName:p.name}),(0,rg.jsx)("p",{className:"code-value",children:p.qrcode})]}),(0,rg.jsxs)("div",{className:"barcode-details",children:[(0,rg.jsxs)("p",{children:[(0,rg.jsx)("strong",{children:"Price:"})," \u20b9",p.price]}),(0,rg.jsxs)("p",{children:[(0,rg.jsx)("strong",{children:"Stock:"})," ",p.stock," units"]}),p.barcode&&ey(p.barcode)&&(0,rg.jsxs)("p",{children:[(0,rg.jsx)("strong",{children:"Barcode Category:"})," ",ey(p.barcode).categoryName]}),p.qrcode&&Nm(p.qrcode)&&(0,rg.jsxs)("p",{children:[(0,rg.jsx)("strong",{children:"QR Category:"})," ",Nm(p.qrcode).category]})]})]})]})})]})})},RI=()=>{const[t,r]=(0,e.useState)(""),o=(0,e.useRef)(null);(0,e.useEffect)(()=>{const e=Qm("Test Product","test001");r(e)},[]),(0,e.useEffect)(()=>{if(t&&o.current){n(9298)(o.current,t,{format:"CODE128",width:4,height:150,displayValue:!0,fontSize:16,textMargin:8,margin:20,background:"#ffffff",lineColor:"#000000",textAlign:"center",textPosition:"bottom"})}},[t]);return(0,rg.jsxs)("div",{style:{padding:"2rem",textAlign:"center",backgroundColor:"#f5f5f5",minHeight:"100vh"},children:[(0,rg.jsx)("h1",{children:"Barcode Test Page"}),(0,rg.jsx)("p",{children:"Use this page to test barcode scanning with your camera"}),(0,rg.jsxs)("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",margin:"2rem auto",maxWidth:"600px"},children:[(0,rg.jsx)("h2",{children:"Test Barcode"}),(0,rg.jsx)("canvas",{ref:o,style:{maxWidth:"100%",height:"auto",border:"1px solid #ddd",borderRadius:"4px"}}),(0,rg.jsx)("p",{style:{fontFamily:"monospace",fontSize:"18px",fontWeight:"bold",margin:"1rem 0"},children:t}),(0,rg.jsx)("button",{onClick:()=>{const e="test"+Math.floor(1e3*Math.random()),t=Qm("Test Product "+e,e);r(t)},style:{padding:"0.75rem 1.5rem",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",marginTop:"1rem"},children:"Generate New Test Barcode"})]}),(0,rg.jsxs)("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",margin:"1rem auto",maxWidth:"600px",textAlign:"left"},children:[(0,rg.jsx)("h3",{children:"Scanning Instructions:"}),(0,rg.jsxs)("ol",{children:[(0,rg.jsx)("li",{children:"Open the billing page in another tab/window"}),(0,rg.jsx)("li",{children:'Click "Open Scanner" button'}),(0,rg.jsx)("li",{children:"Allow camera permissions"}),(0,rg.jsx)("li",{children:"Point your camera at the barcode above"}),(0,rg.jsx)("li",{children:"Hold steady and ensure good lighting"}),(0,rg.jsx)("li",{children:"The barcode should be detected automatically"})]}),(0,rg.jsx)("h3",{children:"Troubleshooting:"}),(0,rg.jsxs)("ul",{children:[(0,rg.jsx)("li",{children:"Ensure you're using HTTPS (required for camera access)"}),(0,rg.jsx)("li",{children:"Try different distances from the screen"}),(0,rg.jsx)("li",{children:"Ensure good lighting conditions"}),(0,rg.jsx)("li",{children:"Make sure the barcode is clearly visible and not blurry"}),(0,rg.jsx)("li",{children:"Try generating a new test barcode if one doesn't work"})]}),(0,rg.jsx)("h3",{children:"Manual Testing:"}),(0,rg.jsx)("p",{children:"If scanning doesn't work, you can manually enter this barcode number in the billing system:"}),(0,rg.jsx)("p",{style:{fontFamily:"monospace",fontSize:"16px",backgroundColor:"#f8f9fa",padding:"0.5rem",borderRadius:"4px",border:"1px solid #dee2e6"},children:t})]})]})},PI=fg("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),jI=e=>{let{message:t="Loading My Store..."}=e;return(0,rg.jsx)("div",{className:"loading-container",children:(0,rg.jsxs)("div",{className:"loading-content",children:[(0,rg.jsx)(PI,{className:"loading-spinner",size:48}),(0,rg.jsx)("h2",{children:t})]})})},DI=[{name:"Basmati Rice 5kg",price:12.99,stock:50,category:"Grains & Cereals"},{name:"Brown Rice 1kg",price:3.49,stock:30,category:"Grains & Cereals"},{name:"Jasmine Rice 2kg",price:6.99,stock:40,category:"Grains & Cereals"},{name:"Wild Rice 500g",price:8.99,stock:20,category:"Grains & Cereals"},{name:"Wheat Flour 2kg",price:2.99,stock:60,category:"Grains & Cereals"},{name:"All Purpose Flour 5kg",price:5.99,stock:40,category:"Grains & Cereals"},{name:"Whole Wheat Flour 2kg",price:3.99,stock:35,category:"Grains & Cereals"},{name:"Quinoa 500g",price:8.99,stock:25,category:"Grains & Cereals"},{name:"Oats Rolled 1kg",price:4.99,stock:45,category:"Grains & Cereals"},{name:"Barley 500g",price:3.49,stock:30,category:"Grains & Cereals"},{name:"Bulgur Wheat 500g",price:3.99,stock:25,category:"Grains & Cereals"},{name:"Couscous 500g",price:4.49,stock:30,category:"Grains & Cereals"},{name:"Millet 500g",price:4.99,stock:20,category:"Grains & Cereals"},{name:"Buckwheat 500g",price:5.49,stock:20,category:"Grains & Cereals"},{name:"Semolina 1kg",price:3.99,stock:25,category:"Grains & Cereals"},{name:"Bananas 1kg",price:2.49,stock:100,category:"Fresh Fruits"},{name:"Apples Red 1kg",price:4.99,stock:80,category:"Fresh Fruits"},{name:"Apples Green 1kg",price:4.99,stock:70,category:"Fresh Fruits"},{name:"Oranges 1kg",price:3.99,stock:60,category:"Fresh Fruits"},{name:"Lemons 500g",price:2.99,stock:50,category:"Fresh Fruits"},{name:"Limes 500g",price:3.49,stock:40,category:"Fresh Fruits"},{name:"Grapes Green 500g",price:5.99,stock:35,category:"Fresh Fruits"},{name:"Grapes Red 500g",price:6.49,stock:30,category:"Fresh Fruits"},{name:"Mangoes Each",price:2.99,stock:40,category:"Fresh Fruits"},{name:"Strawberries 250g",price:4.49,stock:25,category:"Fresh Fruits"},{name:"Blueberries 125g",price:5.99,stock:20,category:"Fresh Fruits"},{name:"Raspberries 125g",price:6.99,stock:15,category:"Fresh Fruits"},{name:"Pineapple Each",price:3.99,stock:20,category:"Fresh Fruits"},{name:"Watermelon Each",price:6.99,stock:15,category:"Fresh Fruits"},{name:"Cantaloupe Each",price:4.99,stock:18,category:"Fresh Fruits"},{name:"Kiwi Fruit 6pk",price:4.49,stock:25,category:"Fresh Fruits"},{name:"Peaches 1kg",price:5.99,stock:30,category:"Fresh Fruits"},{name:"Pears 1kg",price:4.99,stock:35,category:"Fresh Fruits"},{name:"Plums 500g",price:4.49,stock:25,category:"Fresh Fruits"},{name:"Avocados 4pk",price:5.99,stock:40,category:"Fresh Fruits"},{name:"Tomatoes 1kg",price:3.49,stock:80,category:"Fresh Vegetables"},{name:"Cherry Tomatoes 250g",price:3.99,stock:40,category:"Fresh Vegetables"},{name:"Onions Yellow 1kg",price:1.99,stock:100,category:"Fresh Vegetables"},{name:"Onions Red 500g",price:2.49,stock:50,category:"Fresh Vegetables"},{name:"Onions White 500g",price:2.29,stock:45,category:"Fresh Vegetables"},{name:"Potatoes 2kg",price:3.99,stock:90,category:"Fresh Vegetables"},{name:"Sweet Potatoes 1kg",price:4.49,stock:40,category:"Fresh Vegetables"},{name:"Carrots 1kg",price:2.49,stock:70,category:"Fresh Vegetables"},{name:"Baby Carrots 500g",price:3.49,stock:35,category:"Fresh Vegetables"},{name:"Bell Peppers Red 500g",price:5.99,stock:30,category:"Fresh Vegetables"},{name:"Bell Peppers Green 500g",price:4.99,stock:35,category:"Fresh Vegetables"},{name:"Bell Peppers Yellow 500g",price:5.49,stock:25,category:"Fresh Vegetables"},{name:"Cucumber Each",price:1.49,stock:60,category:"Fresh Vegetables"},{name:"Zucchini Each",price:1.99,stock:40,category:"Fresh Vegetables"},{name:"Lettuce Iceberg",price:2.99,stock:35,category:"Fresh Vegetables"},{name:"Lettuce Romaine",price:3.49,stock:30,category:"Fresh Vegetables"},{name:"Spinach 250g",price:2.49,stock:45,category:"Fresh Vegetables"},{name:"Kale 200g",price:3.99,stock:25,category:"Fresh Vegetables"},{name:"Broccoli Each",price:3.49,stock:30,category:"Fresh Vegetables"},{name:"Cauliflower Each",price:3.99,stock:25,category:"Fresh Vegetables"},{name:"Cabbage Each",price:2.99,stock:20,category:"Fresh Vegetables"},{name:"Brussels Sprouts 500g",price:4.99,stock:20,category:"Fresh Vegetables"},{name:"Celery Bunch",price:2.99,stock:25,category:"Fresh Vegetables"},{name:"Mushrooms 250g",price:3.99,stock:40,category:"Fresh Vegetables"},{name:"Garlic Bulb",price:.99,stock:80,category:"Fresh Vegetables"},{name:"Whole Milk 1L",price:2.99,stock:120,category:"Dairy & Eggs"},{name:"Whole Milk 2L",price:4.99,stock:80,category:"Dairy & Eggs"},{name:"Low Fat Milk 1L",price:2.99,stock:100,category:"Dairy & Eggs"},{name:"Skim Milk 1L",price:2.89,stock:90,category:"Dairy & Eggs"},{name:"Almond Milk 1L",price:4.99,stock:40,category:"Dairy & Eggs"},{name:"Soy Milk 1L",price:4.49,stock:35,category:"Dairy & Eggs"},{name:"Greek Yogurt 500g",price:4.99,stock:50,category:"Dairy & Eggs"},{name:"Natural Yogurt 1kg",price:3.99,stock:40,category:"Dairy & Eggs"},{name:"Cheddar Cheese 200g",price:5.99,stock:40,category:"Dairy & Eggs"},{name:"Mozzarella Cheese 250g",price:6.49,stock:35,category:"Dairy & Eggs"},{name:"Parmesan Cheese 100g",price:7.99,stock:25,category:"Dairy & Eggs"},{name:"Butter Salted 250g",price:4.49,stock:60,category:"Dairy & Eggs"},{name:"Butter Unsalted 250g",price:4.49,stock:50,category:"Dairy & Eggs"},{name:"Eggs Large Dozen",price:3.99,stock:80,category:"Dairy & Eggs"},{name:"Cream Cheese 200g",price:3.99,stock:30,category:"Dairy & Eggs"},{name:"Chicken Breast 1kg",price:12.99,stock:50,category:"Meat & Poultry"},{name:"Chicken Thighs 1kg",price:9.99,stock:45,category:"Meat & Poultry"},{name:"Chicken Wings 1kg",price:8.99,stock:40,category:"Meat & Poultry"},{name:"Whole Chicken 1.5kg",price:11.99,stock:25,category:"Meat & Poultry"},{name:"Ground Beef 500g",price:8.99,stock:40,category:"Meat & Poultry"},{name:"Beef Steak 500g",price:18.99,stock:20,category:"Meat & Poultry"},{name:"Beef Roast 1kg",price:24.99,stock:15,category:"Meat & Poultry"},{name:"Pork Chops 1kg",price:14.99,stock:30,category:"Meat & Poultry"},{name:"Pork Shoulder 1kg",price:12.99,stock:25,category:"Meat & Poultry"},{name:"Bacon 250g",price:6.99,stock:50,category:"Meat & Poultry"},{name:"Ham Slices 200g",price:5.99,stock:35,category:"Meat & Poultry"},{name:"Turkey Slices 200g",price:6.99,stock:30,category:"Meat & Poultry"},{name:"Salmon Fillet 500g",price:16.99,stock:25,category:"Meat & Poultry"},{name:"Tuna Steaks 300g",price:14.99,stock:20,category:"Meat & Poultry"},{name:"Shrimp 500g",price:19.99,stock:15,category:"Meat & Poultry"},{name:"White Bread Loaf",price:2.49,stock:60,category:"Bakery"},{name:"Whole Wheat Bread",price:2.99,stock:50,category:"Bakery"},{name:"Multigrain Bread",price:3.49,stock:40,category:"Bakery"},{name:"Sourdough Bread",price:4.99,stock:30,category:"Bakery"},{name:"Croissants 6pk",price:4.99,stock:25,category:"Bakery"},{name:"Bagels Plain 6pk",price:3.99,stock:30,category:"Bakery"},{name:"Bagels Everything 6pk",price:4.49,stock:25,category:"Bakery"},{name:"Dinner Rolls 8pk",price:2.99,stock:35,category:"Bakery"},{name:"Hamburger Buns 8pk",price:3.49,stock:40,category:"Bakery"},{name:"Hot Dog Buns 8pk",price:3.29,stock:35,category:"Bakery"},{name:"Muffins Blueberry 4pk",price:5.99,stock:20,category:"Bakery"},{name:"Donuts Glazed 6pk",price:4.99,stock:25,category:"Bakery"},{name:"Tomato Sauce 400g",price:1.99,stock:100,category:"Canned Goods"},{name:"Diced Tomatoes 400g",price:2.29,stock:80,category:"Canned Goods"},{name:"Tomato Paste 200g",price:1.49,stock:60,category:"Canned Goods"},{name:"Coconut Milk 400ml",price:2.99,stock:50,category:"Canned Goods"},{name:"Chickpeas 400g",price:1.49,stock:70,category:"Canned Goods"},{name:"Black Beans 400g",price:1.59,stock:60,category:"Canned Goods"},{name:"Kidney Beans 400g",price:1.59,stock:55,category:"Canned Goods"},{name:"Lentils 400g",price:1.79,stock:50,category:"Canned Goods"},{name:"Tuna Can 185g",price:2.99,stock:80,category:"Canned Goods"},{name:"Salmon Can 210g",price:4.99,stock:40,category:"Canned Goods"},{name:"Sardines 120g",price:2.49,stock:45,category:"Canned Goods"},{name:"Corn Kernels 400g",price:1.99,stock:60,category:"Canned Goods"},{name:"Green Beans 400g",price:1.89,stock:50,category:"Canned Goods"},{name:"Peas 400g",price:1.79,stock:55,category:"Canned Goods"},{name:"Mushrooms 400g",price:2.49,stock:40,category:"Canned Goods"},{name:"Pineapple Chunks 400g",price:2.99,stock:35,category:"Canned Goods"},{name:"Peaches 400g",price:2.79,stock:30,category:"Canned Goods"},{name:"Chicken Broth 1L",price:2.99,stock:40,category:"Canned Goods"},{name:"Vegetable Broth 1L",price:2.89,stock:35,category:"Canned Goods"},{name:"Beef Broth 1L",price:3.29,stock:30,category:"Canned Goods"},{name:"Spaghetti 500g",price:2.49,stock:80,category:"Pasta & Noodles"},{name:"Penne Pasta 500g",price:2.49,stock:70,category:"Pasta & Noodles"},{name:"Fusilli 500g",price:2.59,stock:60,category:"Pasta & Noodles"},{name:"Linguine 500g",price:2.69,stock:50,category:"Pasta & Noodles"},{name:"Macaroni 500g",price:2.39,stock:65,category:"Pasta & Noodles"},{name:"Lasagna Sheets 250g",price:3.49,stock:30,category:"Pasta & Noodles"},{name:"Instant Noodles 5pk",price:3.99,stock:60,category:"Pasta & Noodles"},{name:"Rice Noodles 400g",price:3.49,stock:40,category:"Pasta & Noodles"},{name:"Egg Noodles 300g",price:2.99,stock:35,category:"Pasta & Noodles"},{name:"Whole Wheat Pasta 500g",price:3.49,stock:40,category:"Pasta & Noodles"},{name:"Orange Juice 1L",price:4.99,stock:60,category:"Beverages"},{name:"Apple Juice 1L",price:4.49,stock:50,category:"Beverages"},{name:"Cranberry Juice 1L",price:5.49,stock:30,category:"Beverages"},{name:"Grape Juice 1L",price:4.99,stock:35,category:"Beverages"},{name:"Coca Cola 2L",price:3.99,stock:80,category:"Beverages"},{name:"Pepsi 2L",price:3.89,stock:70,category:"Beverages"},{name:"Sprite 2L",price:3.79,stock:60,category:"Beverages"},{name:"Sparkling Water 1L",price:2.49,stock:70,category:"Beverages"},{name:"Still Water 1.5L",price:1.99,stock:100,category:"Beverages"},{name:"Green Tea Bags 25pk",price:5.99,stock:40,category:"Beverages"},{name:"Black Tea Bags 25pk",price:4.99,stock:45,category:"Beverages"},{name:"Coffee Beans 500g",price:12.99,stock:30,category:"Beverages"},{name:"Instant Coffee 200g",price:8.99,stock:35,category:"Beverages"},{name:"Energy Drink 250ml",price:2.99,stock:50,category:"Beverages"},{name:"Sports Drink 500ml",price:2.49,stock:40,category:"Beverages"},{name:"Potato Chips Original 150g",price:3.49,stock:80,category:"Snacks"},{name:"Potato Chips BBQ 150g",price:3.49,stock:70,category:"Snacks"},{name:"Tortilla Chips 200g",price:3.99,stock:60,category:"Snacks"},{name:"Pretzels 250g",price:4.49,stock:40,category:"Snacks"},{name:"Popcorn 100g",price:2.99,stock:50,category:"Snacks"},{name:"Mixed Nuts 200g",price:6.99,stock:45,category:"Snacks"},{name:"Almonds 250g",price:8.99,stock:30,category:"Snacks"},{name:"Cashews 200g",price:9.99,stock:25,category:"Snacks"},{name:"Peanuts 300g",price:4.99,stock:40,category:"Snacks"},{name:"Trail Mix 250g",price:7.99,stock:35,category:"Snacks"},{name:"Chocolate Bar Milk 100g",price:2.99,stock:100,category:"Snacks"},{name:"Chocolate Bar Dark 100g",price:3.49,stock:80,category:"Snacks"},{name:"Crackers 200g",price:3.99,stock:50,category:"Snacks"},{name:"Granola Bars 6pk",price:5.99,stock:40,category:"Snacks"},{name:"Cookies Chocolate Chip 300g",price:4.99,stock:45,category:"Snacks"}],MI=async()=>{try{console.log("\ufffd\ufe0f Clearing existing inventory...");const e=Lf(tg,"inventory"),t=await Wp(e);if(t.empty)return console.log("\u2705 No existing inventory to clear"),{success:!0,cleared:0};const n=t.docs.map(e=>Kp(e.ref));return await Promise.all(n),console.log("\u2705 Cleared ".concat(t.size," existing inventory items")),{success:!0,cleared:t.size}}catch(e){throw console.error("\u274c Error clearing inventory:",e),e}},LI=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{console.log("\ud83d\ude80 Starting inventory initialization with ".concat(DI.length," products...")),e&&(await MI(),await new Promise(e=>setTimeout(e,1e3))),console.log("\ud83c\udff7\ufe0f Generating smart product codes...");const t=Rm(DI);console.log("\u2705 Product codes generated successfully!");const n=8;let r=0;const o=[];for(let e=0;e<t.length;e+=n){const i=t.slice(e,e+n);console.log("\ud83d\udce6 Processing batch ".concat(Math.floor(e/n)+1,"/").concat(Math.ceil(t.length/n)," (").concat(i.length," products)..."));const a=i.map((t,n)=>{const r=s(s({},t),{},{storeId:"store_001",supplier:"Default Supplier",sku:"SKU".concat(String(e+n+1).padStart(4,"0"))});return console.log("  \ud83d\udcdd Adding: ".concat(t.name," \u2192 Code: ").concat(t.code)),Wg(r)}),c=await Promise.all(a);o.push(...c),r+=i.length,console.log("\u2705 Batch complete! Added ".concat(r,"/").concat(t.length," products total")),e+n<t.length&&await new Promise(e=>setTimeout(e,150))}const i=t.slice(0,10).map(e=>({name:e.name,code:e.code}));return console.log("\ud83c\udf89 Successfully added all ".concat(t.length," supermarket products!")),console.log("\ud83d\udcca Product categories added:",[...new Set(t.map(e=>e.category))]),console.log("\ud83c\udff7\ufe0f Sample product codes generated:"),console.table(i),{success:!0,count:t.length,categories:[...new Set(t.map(e=>e.category))].length,sampleCodes:i,results:o}}catch(t){throw console.error("\u274c Error adding supermarket inventory:",t),console.error("Error details:",t.message),t}},BI=async()=>{try{console.log("\ud83d\udd04 Updating existing products with smart product codes...");const e=Lf(tg,"inventory"),t=await Wp(e);if(t.empty)return console.log("\u2139\ufe0f No existing products to update"),{success:!0,updated:0};const n=t.docs.map(e=>s({id:e.id},e.data()));console.log("\ud83d\udce6 Found ".concat(n.length," existing products"));const r=Rm(n);console.log("\ud83d\uddd1\ufe0f Removing old products...");const o=t.docs.map(e=>Kp(e.ref));await Promise.all(o),await new Promise(e=>setTimeout(e,1e3)),console.log("\u2795 Adding products with new codes...");let i=0;const a=8;for(let l=0;l<r.length;l+=a){const t=r.slice(l,l+a),n=t.map(async t=>{const n=Bf(e,t.code);return await qp(n,s(s({},t),{},{id:t.code,updatedAt:Jp()})),console.log("  \u2705 Updated: ".concat(t.name," \u2192 ").concat(t.code)),t.code});await Promise.all(n),i+=t.length,console.log("\ud83d\udcca Updated ".concat(i,"/").concat(r.length," products")),l+a<r.length&&await new Promise(e=>setTimeout(e,150))}console.log("\ud83c\udf89 Successfully updated ".concat(i," products with smart codes!"));const c=r.slice(0,10).map(e=>{var t;return{name:e.name,oldId:(null===(t=n.find(t=>t.name===e.name))||void 0===t?void 0:t.id)||"N/A",newCode:e.code}});return console.log("\ud83c\udff7\ufe0f Sample code updates:"),console.table(c),{success:!0,updated:i,sampleCodes:c}}catch(e){throw console.error("\u274c Error updating product codes:",e),e}};window.initializeInventory=LI,window.clearAllInventory=MI,window.previewProductCodes=()=>{console.log("\ud83d\udd0d Previewing product codes for sample products...");const e=DI.slice(0,20),t=Rm(e).map(e=>({"Product Name":e.name,"Generated Code":e.code,Category:e.category}));return console.table(t),t},window.updateExistingProductCodes=BI;const FI=()=>{const{currentUser:t}=ig(),[n,r]=(0,e.useState)([]),[o,i]=(0,e.useState)([]),[a,c]=(0,e.useState)(!0),[l,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1),[f,p]=(0,e.useState)("dashboard"),[g,m]=(0,e.useState)(null),[y,v]=(0,e.useState)(null),[w,b]=(0,e.useState)(null),[_,C]=(0,e.useState)(!1);(0,e.useEffect)(()=>{(async()=>{if(t)try{const e=await(async e=>{const t=await dm(e);return null!==t&&t.isActive})(t.email),n=await(async e=>{const t=await dm(e);return t?t.role:null})(t.email),r=await(async e=>{const t=await dm(e);return t?t.storeId:null})(t.email),o=await(async e=>{const t=await dm(e);return!!t&&t.isSuperAdmin})(t.email);m(e),v(n),b(r),C(o)}catch(l){console.error("Error checking user authorization:",l),m(!1)}else m(!1)})()},[t]),(0,e.useEffect)(()=>{if(!t||null===g)return;let e;(async()=>{try{0===(await pm()).length&&(console.log("Initializing default users in database..."),await hm({name:"ABC Store Admin",email:"admin@mystore.com",role:im,storeId:"store_001",storeName:"ABC",phone:"+91 9876543210"}),await hm({name:"ABC Store Cashier",email:"cashier@mystore.com",role:am,storeId:"store_001",storeName:"ABC",phone:"+91 9876543211"}),console.log("Default users initialized successfully"))}catch(l){console.error("Error initializing default users:",l)}})();return(async()=>{try{e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;try{const r=Lf(tg,"inventory");let o;return o=e?Ap(r,xp("storeId","==",e)):r,Qp(o,e=>{const n=e.docs.map(e=>s({id:e.id},e.data()));t(n)},n)}catch(l){console.error("Error subscribing to inventory by store:",l),n(l)}}(_?null:w,e=>{console.log("\ud83d\udce6 Inventory updated: ".concat(e.length," products loaded")),e.length>0&&console.log("\ud83d\udcca Categories found:",[...new Set(e.map(e=>e.category))]),0!==e.length||d?(r(e),c(!1),u(null)):(r([]),c(!1),u(null))},e=>{console.error("Error loading inventory:",e),u("Failed to load inventory data"),c(!1)})}catch(l){console.error("Error setting up inventory listener:",l),u("Failed to connect to inventory system"),c(!1)}})(),()=>{e&&e()}},[d,t,g,_,w]);const E=e=>{if(e.stock<=0)return void alert("Product is out of stock!");const t=o.find(t=>t.id===e.id);if(t){if(t.qty>=e.stock)return void alert("Cannot add more items than available in stock!");i(o.map(t=>t.id===e.id?s(s({},t),{},{qty:t.qty+1}):t))}else i([...o,s(s({},e),{},{qty:1})])},S=(e,t)=>{const r=n.find(t=>t.id===e),a=Math.max(1,parseInt(t)||1);a>r.stock?alert("Cannot exceed available stock!"):i(o.map(t=>t.id===e?s(s({},t),{},{qty:a}):t))},A=e=>i(o.filter(t=>t.id!==e)),I=()=>i([]);if(!t)return(0,rg.jsx)(wg,{});if(null===g)return(0,rg.jsx)(jI,{message:"Checking authorization..."});if(!g)return(0,rg.jsx)(Hm,{});if(a)return(0,rg.jsx)(jI,{message:"Loading My Store..."});if(n.length>0&&!a){if(n.some(e=>e.id&&e.id.length>10&&/[a-z]/.test(e.id)&&/[A-Z]/.test(e.id)))return(0,rg.jsxs)("div",{className:"app-container",children:[(0,rg.jsx)(Vg,{activeView:f,setActiveView:p,userEmail:t.email}),(0,rg.jsx)("main",{className:"main-content",children:(0,rg.jsx)("div",{className:"inventory-fix-state",children:(0,rg.jsxs)("div",{className:"fix-content",children:[(0,rg.jsx)("h2",{children:"Product Code Update Required"}),(0,rg.jsxs)("p",{children:["Your inventory has ",(0,rg.jsxs)("strong",{children:[n.length," products"]})," with random Firebase IDs. Update them to use smart product codes like ",(0,rg.jsx)("strong",{children:"RICE001"}),", ",(0,rg.jsx)("strong",{children:"MILK001"}),", etc."]}),(0,rg.jsxs)("div",{className:"inventory-actions",children:[(0,rg.jsx)("button",{className:"btn-fix-codes",onClick:async()=>{if(window.confirm("This will update all ".concat(n.length," products with smart product codes based on their names. Continue?"))){h(!0);try{const e=await BI();console.log("\u2705 Product codes updated:",e);const t=e.sampleCodes?e.sampleCodes.map(e=>"".concat(e.name,": ").concat(e.oldId," \u2192 ").concat(e.newCode)).join("\n"):"";alert("Successfully updated ".concat(e.updated," products with smart codes!\n\nSample Updates:\n").concat(t))}catch(l){console.error("\u274c Failed to update codes:",l),alert("Failed to update product codes. Please try again.")}finally{h(!1)}}},disabled:d,children:d?"Updating Product Codes...":"Fix Product Codes"}),(0,rg.jsx)("button",{className:"btn-continue",onClick:()=>{console.log("Continuing with current inventory")},children:"Continue with Current Codes"})]}),(0,rg.jsx)("p",{className:"fix-note",children:"Smart codes make products easier to search and manage"})]})})})]})}if(0===n.length&&!a)return(0,rg.jsxs)("div",{className:"app-container",children:[(0,rg.jsx)(Vg,{activeView:f,setActiveView:p,userEmail:t.email}),(0,rg.jsx)("main",{className:"main-content",children:(0,rg.jsx)("div",{className:"empty-inventory-state",children:(0,rg.jsxs)("div",{className:"empty-content",children:[(0,rg.jsx)("h2",{children:"Welcome to My Store!"}),(0,rg.jsxs)("p",{children:["Your inventory is empty. Add our comprehensive supermarket inventory with ",(0,rg.jsx)("strong",{children:"150+ real products"})," across 15+ categories including fresh produce, dairy, meat, bakery, beverages, snacks, household items, and more!"]}),(0,rg.jsxs)("div",{className:"inventory-actions",children:[(0,rg.jsx)("button",{className:"btn-add-sample",onClick:async()=>{h(!0);try{const e=await LI(!1);console.log("\u2705 Comprehensive inventory added:",e);const t=e.sampleCodes?e.sampleCodes.map(e=>"".concat(e.name," \u2192 ").concat(e.code)).join("\n"):"";alert("Successfully added ".concat(e.count||"150+"," products to your inventory!\n\nSample Product Codes:\n").concat(t))}catch(l){console.error("\u274c Failed to add inventory:",l),alert("Failed to add inventory. Please try again.")}finally{h(!1)}},disabled:d,children:d?"Adding 150+ Products...":"Add Complete Supermarket Inventory"}),(0,rg.jsx)("button",{className:"btn-replace-sample",onClick:async()=>{if(window.confirm("This will clear all existing inventory and add 150+ new products with smart product codes. Are you sure?")){h(!0);try{const e=await LI(!0);console.log("\u2705 Inventory replaced:",e);const t=e.sampleCodes?e.sampleCodes.map(e=>"".concat(e.name," \u2192 ").concat(e.code)).join("\n"):"";alert("Successfully replaced inventory with ".concat(e.count||"150+"," new products!\n\nSample Product Codes:\n").concat(t))}catch(l){console.error("\u274c Failed to replace inventory:",l),alert("Failed to replace inventory. Please try again.")}finally{h(!1)}}},disabled:d,children:d?"Replacing Inventory...":"Replace Current Inventory"})]}),(0,rg.jsx)("p",{className:"empty-note",children:"This will add products from all major supermarket categories"})]})})})]});if(l)return(0,rg.jsxs)("div",{className:"error-container",children:[(0,rg.jsx)("h2",{children:"Error loading application"}),(0,rg.jsx)("p",{children:l}),(0,rg.jsx)("button",{className:"btn-retry",onClick:()=>window.location.reload(),children:"Retry"})]});const x=e=>{switch(e){case om:return(0,rg.jsx)(ym,{setActiveView:p});case im:return(0,rg.jsx)(Lm,{inventory:n,setActiveView:p});case am:return(0,rg.jsx)(Um,{inventory:n,setActiveView:p});default:return(0,rg.jsx)(Hm,{})}};return(0,rg.jsxs)("div",{className:"app-container",children:[(0,rg.jsx)(Vg,{activeView:f,setActiveView:p,userEmail:t.email}),(0,rg.jsx)("main",{className:"main-content",children:(()=>{switch(f){case"dashboard":default:return x(y);case"stores":return(0,rg.jsx)(ly,{});case"users":return(0,rg.jsx)(dy,{});case"store-users":return(0,rg.jsx)(my,{});case"inventory":return y===im||y===om?(0,rg.jsx)(xI,{inventory:n,onClose:()=>p("dashboard")}):(0,rg.jsxs)("div",{className:"inventory-view",children:[(0,rg.jsxs)("div",{className:"inventory-header",children:[(0,rg.jsxs)("h2",{children:["Inventory (",n.length," items)"]}),(0,rg.jsx)("p",{children:"View-only access - Contact admin to make changes"})]}),(0,rg.jsx)(AI,{inventory:n,addToCart:E,readOnly:!0})]});case"barcode":return(0,rg.jsx)(OI,{inventory:n,onClose:()=>p("dashboard")});case"barcode-test":return(0,rg.jsx)(RI,{});case"billing":return(0,rg.jsxs)("div",{className:"billing-layout",children:[(0,rg.jsx)(SI,{cart:o,inventory:n,updateQty:S,removeItem:A,clearCart:I,addToCart:E}),(0,rg.jsx)(AI,{inventory:n,addToCart:E})]});case"reports":return(0,rg.jsx)(Ly,{inventory:n});case"lowstock":return(0,rg.jsx)(Hy,{inventory:n});case"activity":return(0,rg.jsx)(Gy,{inventory:n});case"settings":return y===im?(0,rg.jsx)(Ry,{}):(0,rg.jsx)(Hm,{})}})()})]})},UI=()=>(0,rg.jsx)(ag,{children:(0,rg.jsx)(FI,{})});t.createRoot(document.getElementById("root")).render((0,rg.jsx)(e.StrictMode,{children:(0,rg.jsx)(UI,{})}))})()})();
//# sourceMappingURL=main.b8c510d9.js.map